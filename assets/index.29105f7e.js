var Mh=Object.defineProperty;var Ih=(e,t,r)=>t in e?Mh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var lr=(e,t,r)=>(Ih(e,typeof t!="symbol"?t+"":t,r),r),xl=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var Di=(e,t,r)=>(xl(e,t,"read from private field"),r?r.call(e):t.get(e)),sn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},bn=(e,t,r,Ce)=>(xl(e,t,"write to private field"),Ce?Ce.call(e,r):t.set(e,r),r),Pl=(e,t,r,Ce)=>({set _(Me){bn(e,t,Me,r)},get _(){return Di(e,t,Ce)}}),dn=(e,t,r)=>(xl(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const Me of document.querySelectorAll('link[rel="modulepreload"]'))Ce(Me);new MutationObserver(Me=>{for(const Ie of Me)if(Ie.type==="childList")for(const Fe of Ie.addedNodes)Fe.tagName==="LINK"&&Fe.rel==="modulepreload"&&Ce(Fe)}).observe(document,{childList:!0,subtree:!0});function r(Me){const Ie={};return Me.integrity&&(Ie.integrity=Me.integrity),Me.referrerpolicy&&(Ie.referrerPolicy=Me.referrerpolicy),Me.crossorigin==="use-credentials"?Ie.credentials="include":Me.crossorigin==="anonymous"?Ie.credentials="omit":Ie.credentials="same-origin",Ie}function Ce(Me){if(Me.ep)return;Me.ep=!0;const Ie=r(Me);fetch(Me.href,Ie)}})();function makeMap(e,t){const r=Object.create(null),Ce=e.split(",");for(let Me=0;Me<Ce.length;Me++)r[Ce[Me]]=!0;return t?Me=>!!r[Me.toLowerCase()]:Me=>!!r[Me]}function normalizeStyle(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++){const Ce=e[r],Me=isString(Ce)?parseStringStyle(Ce):normalizeStyle(Ce);if(Me)for(const Ie in Me)t[Ie]=Me[Ie]}return t}else{if(isString(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const Ce=r.split(propertyDelimiterRE);Ce.length>1&&(t[Ce[0].trim()]=Ce[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray$1(e))for(let r=0;r<e.length;r++){const Ce=normalizeClass(e[r]);Ce&&(t+=Ce+" ")}else if(isObject(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty.call(e,t),isArray$1=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},def=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},toNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(t){if(this.active){const r=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this.active){let r,Ce;for(r=0,Ce=this.effects.length;r<Ce;r++)this.effects[r].stop();for(r=0,Ce=this.cleanups.length;r<Ce;r++)this.cleanups[r]();if(this.scopes)for(r=0,Ce=this.scopes.length;r<Ce;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const Me=this.parent.scopes.pop();Me&&Me!==this&&(this.parent.scopes[this.index]=Me,Me.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let r=0;for(let Ce=0;Ce<t.length;Ce++){const Me=t[Ce];wasTracked(Me)&&!newTracked(Me)?Me.delete(e):t[r++]=Me,Me.w&=~trackOpBit,Me.n&=~trackOpBit}t.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,r=null,Ce){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,Ce)}run(){if(!this.active)return this.fn();let t=activeEffect,r=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,r){if(shouldTrack&&activeEffect){let Ce=targetMap.get(e);Ce||targetMap.set(e,Ce=new Map);let Me=Ce.get(r);Me||Ce.set(r,Me=createDep()),trackEffects(Me)}}function trackEffects(e,t){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,r,Ce,Me,Ie){const Fe=targetMap.get(e);if(!Fe)return;let Oe=[];if(t==="clear")Oe=[...Fe.values()];else if(r==="length"&&isArray$1(e)){const _e=toNumber(Ce);Fe.forEach((xe,Pe)=>{(Pe==="length"||Pe>=_e)&&Oe.push(xe)})}else switch(r!==void 0&&Oe.push(Fe.get(r)),t){case"add":isArray$1(e)?isIntegerKey(r)&&Oe.push(Fe.get("length")):(Oe.push(Fe.get(ITERATE_KEY)),isMap(e)&&Oe.push(Fe.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(e)||(Oe.push(Fe.get(ITERATE_KEY)),isMap(e)&&Oe.push(Fe.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&Oe.push(Fe.get(ITERATE_KEY));break}if(Oe.length===1)Oe[0]&&triggerEffects(Oe[0]);else{const _e=[];for(const xe of Oe)xe&&_e.push(...xe);triggerEffects(createDep(_e))}}function triggerEffects(e,t){const r=isArray$1(e)?e:[...e];for(const Ce of r)Ce.computed&&triggerEffect(Ce);for(const Ce of r)Ce.computed||triggerEffect(Ce)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const Ce=toRaw(this);for(let Ie=0,Fe=this.length;Ie<Fe;Ie++)track(Ce,"get",Ie+"");const Me=Ce[t](...r);return Me===-1||Me===!1?Ce[t](...r.map(toRaw)):Me}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){pauseTracking();const Ce=toRaw(this)[t].apply(this,r);return resetTracking(),Ce}}),e}function createGetter(e=!1,t=!1){return function(Ce,Me,Ie){if(Me==="__v_isReactive")return!e;if(Me==="__v_isReadonly")return e;if(Me==="__v_isShallow")return t;if(Me==="__v_raw"&&Ie===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(Ce))return Ce;const Fe=isArray$1(Ce);if(!e&&Fe&&hasOwn(arrayInstrumentations,Me))return Reflect.get(arrayInstrumentations,Me,Ie);const Oe=Reflect.get(Ce,Me,Ie);return(isSymbol(Me)?builtInSymbols.has(Me):isNonTrackableKeys(Me))||(e||track(Ce,"get",Me),t)?Oe:isRef(Oe)?Fe&&isIntegerKey(Me)?Oe:Oe.value:isObject(Oe)?e?readonly(Oe):reactive(Oe):Oe}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,Ce,Me,Ie){let Fe=r[Ce];if(isReadonly(Fe)&&isRef(Fe)&&!isRef(Me))return!1;if(!e&&(!isShallow(Me)&&!isReadonly(Me)&&(Fe=toRaw(Fe),Me=toRaw(Me)),!isArray$1(r)&&isRef(Fe)&&!isRef(Me)))return Fe.value=Me,!0;const Oe=isArray$1(r)&&isIntegerKey(Ce)?Number(Ce)<r.length:hasOwn(r,Ce),_e=Reflect.set(r,Ce,Me,Ie);return r===toRaw(Ie)&&(Oe?hasChanged(Me,Fe)&&trigger(r,"set",Ce,Me):trigger(r,"add",Ce,Me)),_e}}function deleteProperty(e,t){const r=hasOwn(e,t);e[t];const Ce=Reflect.deleteProperty(e,t);return Ce&&r&&trigger(e,"delete",t,void 0),Ce}function has(e,t){const r=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),r}function ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,t,r=!1,Ce=!1){e=e.__v_raw;const Me=toRaw(e),Ie=toRaw(t);r||(t!==Ie&&track(Me,"get",t),track(Me,"get",Ie));const{has:Fe}=getProto(Me),Oe=Ce?toShallow:r?toReadonly:toReactive;if(Fe.call(Me,t))return Oe(e.get(t));if(Fe.call(Me,Ie))return Oe(e.get(Ie));e!==Me&&e.get(t)}function has$1(e,t=!1){const r=this.__v_raw,Ce=toRaw(r),Me=toRaw(e);return t||(e!==Me&&track(Ce,"has",e),track(Ce,"has",Me)),e===Me?r.has(e):r.has(e)||r.has(Me)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$1(e,t){t=toRaw(t);const r=toRaw(this),{has:Ce,get:Me}=getProto(r);let Ie=Ce.call(r,e);Ie||(e=toRaw(e),Ie=Ce.call(r,e));const Fe=Me.call(r,e);return r.set(e,t),Ie?hasChanged(t,Fe)&&trigger(r,"set",e,t):trigger(r,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:r,get:Ce}=getProto(t);let Me=r.call(t,e);Me||(e=toRaw(e),Me=r.call(t,e)),Ce&&Ce.call(t,e);const Ie=t.delete(e);return Me&&trigger(t,"delete",e,void 0),Ie}function clear(){const e=toRaw(this),t=e.size!==0,r=e.clear();return t&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,t){return function(Ce,Me){const Ie=this,Fe=Ie.__v_raw,Oe=toRaw(Fe),_e=t?toShallow:e?toReadonly:toReactive;return!e&&track(Oe,"iterate",ITERATE_KEY),Fe.forEach((xe,Pe)=>Ce.call(Me,_e(xe),_e(Pe),Ie))}}function createIterableMethod(e,t,r){return function(...Ce){const Me=this.__v_raw,Ie=toRaw(Me),Fe=isMap(Ie),Oe=e==="entries"||e===Symbol.iterator&&Fe,_e=e==="keys"&&Fe,xe=Me[e](...Ce),Pe=r?toShallow:t?toReadonly:toReactive;return!t&&track(Ie,"iterate",_e?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Ae,done:Se}=xe.next();return Se?{value:Ae,done:Se}:{value:Oe?[Pe(Ae[0]),Pe(Ae[1])]:Pe(Ae),done:Se}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(Ie){return get$1(this,Ie)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(Ie){return get$1(this,Ie,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(Ie){return get$1(this,Ie,!0)},get size(){return size(this,!0)},has(Ie){return has$1.call(this,Ie,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},Ce={get(Ie){return get$1(this,Ie,!0,!0)},get size(){return size(this,!0)},has(Ie){return has$1.call(this,Ie,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Ie=>{e[Ie]=createIterableMethod(Ie,!1,!1),r[Ie]=createIterableMethod(Ie,!0,!1),t[Ie]=createIterableMethod(Ie,!1,!0),Ce[Ie]=createIterableMethod(Ie,!0,!0)}),[e,r,t,Ce]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const r=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(Ce,Me,Ie)=>Me==="__v_isReactive"?!e:Me==="__v_isReadonly"?e:Me==="__v_raw"?Ce:Reflect.get(hasOwn(r,Me)&&Me in Ce?r:Ce,Me,Ie)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,r,Ce,Me){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const Ie=Me.get(e);if(Ie)return Ie;const Fe=getTargetType(e);if(Fe===0)return e;const Oe=new Proxy(e,Fe===2?Ce:r);return Me.set(e,Oe),Oe}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e),e.dep&&triggerEffects(e.dep)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:toRaw(t),this._value=r?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,r)=>unref(Reflect.get(e,t,r)),set:(e,t,r,Ce)=>{const Me=e[t];return isRef(Me)&&!isRef(r)?(Me.value=r,!0):Reflect.set(e,t,r,Ce)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(t,r,Ce,Me){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!Me,this.__v_isReadonly=Ce}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}_a$1="__v_isReadonly";function computed$1(e,t,r=!1){let Ce,Me;const Ie=isFunction(e);return Ie?(Ce=e,Me=NOOP):(Ce=e.get,Me=e.set),new ComputedRefImpl(Ce,Me,Ie||!Me,r)}const stack=[];function warn(e,...t){pauseTracking();const r=stack.length?stack[stack.length-1].component:null,Ce=r&&r.appContext.config.warnHandler,Me=getComponentTrace();if(Ce)callWithErrorHandling(Ce,r,11,[e+t.join(""),r&&r.proxy,Me.map(({vnode:Ie})=>`at <${formatComponentName(r,Ie.type)}>`).join(`
`),Me]);else{const Ie=[`[Vue warn]: ${e}`,...t];Me.length&&Ie.push(`
`,...formatTrace(Me)),console.warn(...Ie)}resetTracking()}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const Ce=e.component&&e.component.parent;e=Ce&&Ce.vnode}return t}function formatTrace(e){const t=[];return e.forEach((r,Ce)=>{t.push(...Ce===0?[]:[`
`],...formatTraceEntry(r))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",Ce=e.component?e.component.parent==null:!1,Me=` at <${formatComponentName(e.component,e.type,Ce)}`,Ie=">"+r;return e.props?[Me,...formatProps(e.props),Ie]:[Me+Ie]}function formatProps(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(Ce=>{t.push(...formatProp(Ce,e[Ce]))}),r.length>3&&t.push(" ..."),t}function formatProp(e,t,r){return isString(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),r?t:[`${e}=`,t])}function callWithErrorHandling(e,t,r,Ce){let Me;try{Me=Ce?e(...Ce):e()}catch(Ie){handleError(Ie,t,r)}return Me}function callWithAsyncErrorHandling(e,t,r,Ce){if(isFunction(e)){const Ie=callWithErrorHandling(e,t,r,Ce);return Ie&&isPromise(Ie)&&Ie.catch(Fe=>{handleError(Fe,t,r)}),Ie}const Me=[];for(let Ie=0;Ie<e.length;Ie++)Me.push(callWithAsyncErrorHandling(e[Ie],t,r,Ce));return Me}function handleError(e,t,r,Ce=!0){const Me=t?t.vnode:null;if(t){let Ie=t.parent;const Fe=t.proxy,Oe=r;for(;Ie;){const xe=Ie.ec;if(xe){for(let Pe=0;Pe<xe.length;Pe++)if(xe[Pe](e,Fe,Oe)===!1)return}Ie=Ie.parent}const _e=t.appContext.config.errorHandler;if(_e){callWithErrorHandling(_e,null,10,[e,Fe,Oe]);return}}logError(e,r,Me,Ce)}function logError(e,t,r,Ce=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,r=queue.length;for(;t<r;){const Ce=t+r>>>1;getId(queue[Ce])<e?t=Ce+1:r=Ce}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray$1(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const r=queue[t];r&&r.pre&&(queue.splice(t,1),t--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((r,Ce)=>getId(r)-getId(Ce)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const r=getId(e)-getId(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(e,t,...r){if(e.isUnmounted)return;const Ce=e.vnode.props||EMPTY_OBJ;let Me=r;const Ie=t.startsWith("update:"),Fe=Ie&&t.slice(7);if(Fe&&Fe in Ce){const Pe=`${Fe==="modelValue"?"model":Fe}Modifiers`,{number:Ae,trim:Se}=Ce[Pe]||EMPTY_OBJ;Se&&(Me=r.map(St=>isString(St)?St.trim():St)),Ae&&(Me=r.map(toNumber))}let Oe,_e=Ce[Oe=toHandlerKey(t)]||Ce[Oe=toHandlerKey(camelize(t))];!_e&&Ie&&(_e=Ce[Oe=toHandlerKey(hyphenate(t))]),_e&&callWithAsyncErrorHandling(_e,e,6,Me);const xe=Ce[Oe+"Once"];if(xe){if(!e.emitted)e.emitted={};else if(e.emitted[Oe])return;e.emitted[Oe]=!0,callWithAsyncErrorHandling(xe,e,6,Me)}}function normalizeEmitsOptions(e,t,r=!1){const Ce=t.emitsCache,Me=Ce.get(e);if(Me!==void 0)return Me;const Ie=e.emits;let Fe={},Oe=!1;if(!isFunction(e)){const _e=xe=>{const Pe=normalizeEmitsOptions(xe,t,!0);Pe&&(Oe=!0,extend(Fe,Pe))};!r&&t.mixins.length&&t.mixins.forEach(_e),e.extends&&_e(e.extends),e.mixins&&e.mixins.forEach(_e)}return!Ie&&!Oe?(isObject(e)&&Ce.set(e,null),null):(isArray$1(Ie)?Ie.forEach(_e=>Fe[_e]=null):extend(Fe,Ie),isObject(e)&&Ce.set(e,Fe),Fe)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,t=currentRenderingInstance,r){if(!t||e._n)return e;const Ce=(...Me)=>{Ce._d&&setBlockTracking(-1);const Ie=setCurrentRenderingInstance(t);let Fe;try{Fe=e(...Me)}finally{setCurrentRenderingInstance(Ie),Ce._d&&setBlockTracking(1)}return Fe};return Ce._n=!0,Ce._c=!0,Ce._d=!0,Ce}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:r,proxy:Ce,withProxy:Me,props:Ie,propsOptions:[Fe],slots:Oe,attrs:_e,emit:xe,render:Pe,renderCache:Ae,data:Se,setupState:St,ctx:Te,inheritAttrs:Re}=e;let Ee,ke;const De=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const He=Me||Ce;Ee=normalizeVNode(Pe.call(He,He,Ae,Ie,St,Se,Te)),ke=_e}else{const He=t;Ee=normalizeVNode(He.length>1?He(Ie,{attrs:_e,slots:Oe,emit:xe}):He(Ie,null)),ke=t.props?_e:getFunctionalFallthrough(_e)}}catch(He){blockStack.length=0,handleError(He,e,1),Ee=createVNode(Comment)}let Be=Ee;if(ke&&Re!==!1){const He=Object.keys(ke),{shapeFlag:Ue}=Be;He.length&&Ue&7&&(Fe&&He.some(isModelListener)&&(ke=filterModelListeners(ke,Fe)),Be=cloneVNode(Be,ke))}return r.dirs&&(Be=cloneVNode(Be),Be.dirs=Be.dirs?Be.dirs.concat(r.dirs):r.dirs),r.transition&&(Be.transition=r.transition),Ee=Be,setCurrentRenderingInstance(De),Ee}const getFunctionalFallthrough=e=>{let t;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((t||(t={}))[r]=e[r]);return t},filterModelListeners=(e,t)=>{const r={};for(const Ce in e)(!isModelListener(Ce)||!(Ce.slice(9)in t))&&(r[Ce]=e[Ce]);return r};function shouldUpdateComponent(e,t,r){const{props:Ce,children:Me,component:Ie}=e,{props:Fe,children:Oe,patchFlag:_e}=t,xe=Ie.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&_e>=0){if(_e&1024)return!0;if(_e&16)return Ce?hasPropsChanged(Ce,Fe,xe):!!Fe;if(_e&8){const Pe=t.dynamicProps;for(let Ae=0;Ae<Pe.length;Ae++){const Se=Pe[Ae];if(Fe[Se]!==Ce[Se]&&!isEmitListener(xe,Se))return!0}}}else return(Me||Oe)&&(!Oe||!Oe.$stable)?!0:Ce===Fe?!1:Ce?Fe?hasPropsChanged(Ce,Fe,xe):!0:!!Fe;return!1}function hasPropsChanged(e,t,r){const Ce=Object.keys(t);if(Ce.length!==Object.keys(e).length)return!0;for(let Me=0;Me<Ce.length;Me++){const Ie=Ce[Me];if(t[Ie]!==e[Ie]&&!isEmitListener(r,Ie))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$1(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function provide(e,t){if(currentInstance){let r=currentInstance.provides;const Ce=currentInstance.parent&&currentInstance.parent.provides;Ce===r&&(r=currentInstance.provides=Object.create(Ce)),r[e]=t}}function inject(e,t,r=!1){const Ce=currentInstance||currentRenderingInstance;if(Ce){const Me=Ce.parent==null?Ce.vnode.appContext&&Ce.vnode.appContext.provides:Ce.parent.provides;if(Me&&e in Me)return Me[e];if(arguments.length>1)return r&&isFunction(t)?t.call(Ce.proxy):t}}const INITIAL_WATCHER_VALUE={};function watch(e,t,r){return doWatch(e,t,r)}function doWatch(e,t,{immediate:r,deep:Ce,flush:Me,onTrack:Ie,onTrigger:Fe}=EMPTY_OBJ){const Oe=currentInstance;let _e,xe=!1,Pe=!1;if(isRef(e)?(_e=()=>e.value,xe=isShallow(e)):isReactive(e)?(_e=()=>e,Ce=!0):isArray$1(e)?(Pe=!0,xe=e.some(Be=>isReactive(Be)||isShallow(Be)),_e=()=>e.map(Be=>{if(isRef(Be))return Be.value;if(isReactive(Be))return traverse(Be);if(isFunction(Be))return callWithErrorHandling(Be,Oe,2)})):isFunction(e)?t?_e=()=>callWithErrorHandling(e,Oe,2):_e=()=>{if(!(Oe&&Oe.isUnmounted))return Ae&&Ae(),callWithAsyncErrorHandling(e,Oe,3,[Se])}:_e=NOOP,t&&Ce){const Be=_e;_e=()=>traverse(Be())}let Ae,Se=Be=>{Ae=ke.onStop=()=>{callWithErrorHandling(Be,Oe,4)}},St;if(isInSSRComponentSetup)if(Se=NOOP,t?r&&callWithAsyncErrorHandling(t,Oe,3,[_e(),Pe?[]:void 0,Se]):_e(),Me==="sync"){const Be=useSSRContext();St=Be.__watcherHandles||(Be.__watcherHandles=[])}else return NOOP;let Te=Pe?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Re=()=>{if(!!ke.active)if(t){const Be=ke.run();(Ce||xe||(Pe?Be.some((He,Ue)=>hasChanged(He,Te[Ue])):hasChanged(Be,Te)))&&(Ae&&Ae(),callWithAsyncErrorHandling(t,Oe,3,[Be,Te===INITIAL_WATCHER_VALUE||Pe&&Te[0]===INITIAL_WATCHER_VALUE?void 0:Te,Se]),Te=Be)}else ke.run()};Re.allowRecurse=!!t;let Ee;Me==="sync"?Ee=Re:Me==="post"?Ee=()=>queuePostRenderEffect(Re,Oe&&Oe.suspense):(Re.pre=!0,Oe&&(Re.id=Oe.uid),Ee=()=>queueJob(Re));const ke=new ReactiveEffect(_e,Ee);t?r?Re():Te=ke.run():Me==="post"?queuePostRenderEffect(ke.run.bind(ke),Oe&&Oe.suspense):ke.run();const De=()=>{ke.stop(),Oe&&Oe.scope&&remove(Oe.scope.effects,ke)};return St&&St.push(De),De}function instanceWatch(e,t,r){const Ce=this.proxy,Me=isString(e)?e.includes(".")?createPathGetter(Ce,e):()=>Ce[e]:e.bind(Ce,Ce);let Ie;isFunction(t)?Ie=t:(Ie=t.handler,r=t);const Fe=currentInstance;setCurrentInstance(this);const Oe=doWatch(Me,Ie.bind(Ce),r);return Fe?setCurrentInstance(Fe):unsetCurrentInstance(),Oe}function createPathGetter(e,t){const r=t.split(".");return()=>{let Ce=e;for(let Me=0;Me<r.length&&Ce;Me++)Ce=Ce[r[Me]];return Ce}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray$1(e))for(let r=0;r<e.length;r++)traverse(e[r],t);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t)});else if(isPlainObject(e))for(const r in e)traverse(e[r],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const r=getCurrentInstance(),Ce=useTransitionState();let Me;return()=>{const Ie=t.default&&getTransitionRawChildren(t.default(),!0);if(!Ie||!Ie.length)return;let Fe=Ie[0];if(Ie.length>1){for(const Re of Ie)if(Re.type!==Comment){Fe=Re;break}}const Oe=toRaw(e),{mode:_e}=Oe;if(Ce.isLeaving)return emptyPlaceholder(Fe);const xe=getKeepAliveChild(Fe);if(!xe)return emptyPlaceholder(Fe);const Pe=resolveTransitionHooks(xe,Oe,Ce,r);setTransitionHooks(xe,Pe);const Ae=r.subTree,Se=Ae&&getKeepAliveChild(Ae);let St=!1;const{getTransitionKey:Te}=xe.type;if(Te){const Re=Te();Me===void 0?Me=Re:Re!==Me&&(Me=Re,St=!0)}if(Se&&Se.type!==Comment&&(!isSameVNodeType(xe,Se)||St)){const Re=resolveTransitionHooks(Se,Oe,Ce,r);if(setTransitionHooks(Se,Re),_e==="out-in")return Ce.isLeaving=!0,Re.afterLeave=()=>{Ce.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder(Fe);_e==="in-out"&&xe.type!==Comment&&(Re.delayLeave=(Ee,ke,De)=>{const Be=getLeavingNodesForType(Ce,Se);Be[String(Se.key)]=Se,Ee._leaveCb=()=>{ke(),Ee._leaveCb=void 0,delete Pe.delayedLeave},Pe.delayedLeave=De})}return Fe}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:r}=e;let Ce=r.get(t.type);return Ce||(Ce=Object.create(null),r.set(t.type,Ce)),Ce}function resolveTransitionHooks(e,t,r,Ce){const{appear:Me,mode:Ie,persisted:Fe=!1,onBeforeEnter:Oe,onEnter:_e,onAfterEnter:xe,onEnterCancelled:Pe,onBeforeLeave:Ae,onLeave:Se,onAfterLeave:St,onLeaveCancelled:Te,onBeforeAppear:Re,onAppear:Ee,onAfterAppear:ke,onAppearCancelled:De}=t,Be=String(e.key),He=getLeavingNodesForType(r,e),Ue=(Qe,fi)=>{Qe&&callWithAsyncErrorHandling(Qe,Ce,9,fi)},We=(Qe,fi)=>{const oi=fi[1];Ue(Qe,fi),isArray$1(Qe)?Qe.every(ii=>ii.length<=1)&&oi():Qe.length<=1&&oi()},Je={mode:Ie,persisted:Fe,beforeEnter(Qe){let fi=Oe;if(!r.isMounted)if(Me)fi=Re||Oe;else return;Qe._leaveCb&&Qe._leaveCb(!0);const oi=He[Be];oi&&isSameVNodeType(e,oi)&&oi.el._leaveCb&&oi.el._leaveCb(),Ue(fi,[Qe])},enter(Qe){let fi=_e,oi=xe,ii=Pe;if(!r.isMounted)if(Me)fi=Ee||_e,oi=ke||xe,ii=De||Pe;else return;let li=!1;const bi=Qe._enterCb=mi=>{li||(li=!0,mi?Ue(ii,[Qe]):Ue(oi,[Qe]),Je.delayedLeave&&Je.delayedLeave(),Qe._enterCb=void 0)};fi?We(fi,[Qe,bi]):bi()},leave(Qe,fi){const oi=String(e.key);if(Qe._enterCb&&Qe._enterCb(!0),r.isUnmounting)return fi();Ue(Ae,[Qe]);let ii=!1;const li=Qe._leaveCb=bi=>{ii||(ii=!0,fi(),bi?Ue(Te,[Qe]):Ue(St,[Qe]),Qe._leaveCb=void 0,He[oi]===e&&delete He[oi])};He[oi]=e,Se?We(Se,[Qe,li]):li()},clone(Qe){return resolveTransitionHooks(Qe,t,r,Ce)}};return Je}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,r){let Ce=[],Me=0;for(let Ie=0;Ie<e.length;Ie++){let Fe=e[Ie];const Oe=r==null?Fe.key:String(r)+String(Fe.key!=null?Fe.key:Ie);Fe.type===Fragment?(Fe.patchFlag&128&&Me++,Ce=Ce.concat(getTransitionRawChildren(Fe.children,t,Oe))):(t||Fe.type!==Comment)&&Ce.push(Oe!=null?cloneVNode(Fe,{key:Oe}):Fe)}if(Me>1)for(let Ie=0;Ie<Ce.length;Ie++)Ce[Ie].patchFlag=-2;return Ce}function defineComponent(e){return isFunction(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,r=currentInstance){const Ce=e.__wdc||(e.__wdc=()=>{let Me=r;for(;Me;){if(Me.isDeactivated)return;Me=Me.parent}return e()});if(injectHook(t,Ce,r),r){let Me=r.parent;for(;Me&&Me.parent;)isKeepAlive(Me.parent.vnode)&&injectToKeepAliveRoot(Ce,t,r,Me),Me=Me.parent}}function injectToKeepAliveRoot(e,t,r,Ce){const Me=injectHook(t,e,Ce,!0);onUnmounted(()=>{remove(Ce[t],Me)},r)}function injectHook(e,t,r=currentInstance,Ce=!1){if(r){const Me=r[e]||(r[e]=[]),Ie=t.__weh||(t.__weh=(...Fe)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const Oe=callWithAsyncErrorHandling(t,r,e,Fe);return unsetCurrentInstance(),resetTracking(),Oe});return Ce?Me.unshift(Ie):Me.push(Ie),Ie}}const createHook=e=>(t,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...Ce)=>t(...Ce),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function invokeDirectiveHook(e,t,r,Ce){const Me=e.dirs,Ie=t&&t.dirs;for(let Fe=0;Fe<Me.length;Fe++){const Oe=Me[Fe];Ie&&(Oe.oldValue=Ie[Fe].value);let _e=Oe.dir[Ce];_e&&(pauseTracking(),callWithAsyncErrorHandling(_e,r,8,[e.el,Oe,e,t]),resetTracking())}}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(e,t,r=!0,Ce=!1){const Me=currentRenderingInstance||currentInstance;if(Me){const Ie=Me.type;if(e===COMPONENTS){const Oe=getComponentName(Ie,!1);if(Oe&&(Oe===t||Oe===camelize(t)||Oe===capitalize(camelize(t))))return Ie}const Fe=resolve(Me[e]||Ie[e],t)||resolve(Me.appContext[e],t);return!Fe&&Ce?Ie:Fe}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize(camelize(t))])}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:r,setupState:Ce,data:Me,props:Ie,accessCache:Fe,type:Oe,appContext:_e}=e;let xe;if(t[0]!=="$"){const St=Fe[t];if(St!==void 0)switch(St){case 1:return Ce[t];case 2:return Me[t];case 4:return r[t];case 3:return Ie[t]}else{if(Ce!==EMPTY_OBJ&&hasOwn(Ce,t))return Fe[t]=1,Ce[t];if(Me!==EMPTY_OBJ&&hasOwn(Me,t))return Fe[t]=2,Me[t];if((xe=e.propsOptions[0])&&hasOwn(xe,t))return Fe[t]=3,Ie[t];if(r!==EMPTY_OBJ&&hasOwn(r,t))return Fe[t]=4,r[t];shouldCacheAccess&&(Fe[t]=0)}}const Pe=publicPropertiesMap[t];let Ae,Se;if(Pe)return t==="$attrs"&&track(e,"get",t),Pe(e);if((Ae=Oe.__cssModules)&&(Ae=Ae[t]))return Ae;if(r!==EMPTY_OBJ&&hasOwn(r,t))return Fe[t]=4,r[t];if(Se=_e.config.globalProperties,hasOwn(Se,t))return Se[t]},set({_:e},t,r){const{data:Ce,setupState:Me,ctx:Ie}=e;return Me!==EMPTY_OBJ&&hasOwn(Me,t)?(Me[t]=r,!0):Ce!==EMPTY_OBJ&&hasOwn(Ce,t)?(Ce[t]=r,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(Ie[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:Ce,appContext:Me,propsOptions:Ie}},Fe){let Oe;return!!r[Fe]||e!==EMPTY_OBJ&&hasOwn(e,Fe)||t!==EMPTY_OBJ&&hasOwn(t,Fe)||(Oe=Ie[0])&&hasOwn(Oe,Fe)||hasOwn(Ce,Fe)||hasOwn(publicPropertiesMap,Fe)||hasOwn(Me.config.globalProperties,Fe)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:hasOwn(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),r=e.proxy,Ce=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:Me,computed:Ie,methods:Fe,watch:Oe,provide:_e,inject:xe,created:Pe,beforeMount:Ae,mounted:Se,beforeUpdate:St,updated:Te,activated:Re,deactivated:Ee,beforeDestroy:ke,beforeUnmount:De,destroyed:Be,unmounted:He,render:Ue,renderTracked:We,renderTriggered:Je,errorCaptured:Qe,serverPrefetch:fi,expose:oi,inheritAttrs:ii,components:li,directives:bi,filters:mi}=t;if(xe&&resolveInjections(xe,Ce,null,e.appContext.config.unwrapInjectedRef),Fe)for(const xi in Fe){const Ei=Fe[xi];isFunction(Ei)&&(Ce[xi]=Ei.bind(r))}if(Me){const xi=Me.call(r,r);isObject(xi)&&(e.data=reactive(xi))}if(shouldCacheAccess=!0,Ie)for(const xi in Ie){const Ei=Ie[xi],ri=isFunction(Ei)?Ei.bind(r,r):isFunction(Ei.get)?Ei.get.bind(r,r):NOOP,vi=!isFunction(Ei)&&isFunction(Ei.set)?Ei.set.bind(r):NOOP,Ci=computed({get:ri,set:vi});Object.defineProperty(Ce,xi,{enumerable:!0,configurable:!0,get:()=>Ci.value,set:$e=>Ci.value=$e})}if(Oe)for(const xi in Oe)createWatcher(Oe[xi],Ce,r,xi);if(_e){const xi=isFunction(_e)?_e.call(r):_e;Reflect.ownKeys(xi).forEach(Ei=>{provide(Ei,xi[Ei])})}Pe&&callHook(Pe,e,"c");function _i(xi,Ei){isArray$1(Ei)?Ei.forEach(ri=>xi(ri.bind(r))):Ei&&xi(Ei.bind(r))}if(_i(onBeforeMount,Ae),_i(onMounted,Se),_i(onBeforeUpdate,St),_i(onUpdated,Te),_i(onActivated,Re),_i(onDeactivated,Ee),_i(onErrorCaptured,Qe),_i(onRenderTracked,We),_i(onRenderTriggered,Je),_i(onBeforeUnmount,De),_i(onUnmounted,He),_i(onServerPrefetch,fi),isArray$1(oi))if(oi.length){const xi=e.exposed||(e.exposed={});oi.forEach(Ei=>{Object.defineProperty(xi,Ei,{get:()=>r[Ei],set:ri=>r[Ei]=ri})})}else e.exposed||(e.exposed={});Ue&&e.render===NOOP&&(e.render=Ue),ii!=null&&(e.inheritAttrs=ii),li&&(e.components=li),bi&&(e.directives=bi)}function resolveInjections(e,t,r=NOOP,Ce=!1){isArray$1(e)&&(e=normalizeInject(e));for(const Me in e){const Ie=e[Me];let Fe;isObject(Ie)?"default"in Ie?Fe=inject(Ie.from||Me,Ie.default,!0):Fe=inject(Ie.from||Me):Fe=inject(Ie),isRef(Fe)&&Ce?Object.defineProperty(t,Me,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:Oe=>Fe.value=Oe}):t[Me]=Fe}}function callHook(e,t,r){callWithAsyncErrorHandling(isArray$1(e)?e.map(Ce=>Ce.bind(t.proxy)):e.bind(t.proxy),t,r)}function createWatcher(e,t,r,Ce){const Me=Ce.includes(".")?createPathGetter(r,Ce):()=>r[Ce];if(isString(e)){const Ie=t[e];isFunction(Ie)&&watch(Me,Ie)}else if(isFunction(e))watch(Me,e.bind(r));else if(isObject(e))if(isArray$1(e))e.forEach(Ie=>createWatcher(Ie,t,r,Ce));else{const Ie=isFunction(e.handler)?e.handler.bind(r):t[e.handler];isFunction(Ie)&&watch(Me,Ie,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:r,extends:Ce}=t,{mixins:Me,optionsCache:Ie,config:{optionMergeStrategies:Fe}}=e.appContext,Oe=Ie.get(t);let _e;return Oe?_e=Oe:!Me.length&&!r&&!Ce?_e=t:(_e={},Me.length&&Me.forEach(xe=>mergeOptions$1(_e,xe,Fe,!0)),mergeOptions$1(_e,t,Fe)),isObject(t)&&Ie.set(t,_e),_e}function mergeOptions$1(e,t,r,Ce=!1){const{mixins:Me,extends:Ie}=t;Ie&&mergeOptions$1(e,Ie,r,!0),Me&&Me.forEach(Fe=>mergeOptions$1(e,Fe,r,!0));for(const Fe in t)if(!(Ce&&Fe==="expose")){const Oe=internalOptionMergeStrats[Fe]||r&&r[Fe];e[Fe]=Oe?Oe(e[Fe],t[Fe]):t[Fe]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$1(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(extend(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const r=extend(Object.create(null),e);for(const Ce in t)r[Ce]=mergeAsArray(e[Ce],t[Ce]);return r}function initProps(e,t,r,Ce=!1){const Me={},Ie={};def(Ie,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,Me,Ie);for(const Fe in e.propsOptions[0])Fe in Me||(Me[Fe]=void 0);r?e.props=Ce?Me:shallowReactive(Me):e.type.props?e.props=Me:e.props=Ie,e.attrs=Ie}function updateProps(e,t,r,Ce){const{props:Me,attrs:Ie,vnode:{patchFlag:Fe}}=e,Oe=toRaw(Me),[_e]=e.propsOptions;let xe=!1;if((Ce||Fe>0)&&!(Fe&16)){if(Fe&8){const Pe=e.vnode.dynamicProps;for(let Ae=0;Ae<Pe.length;Ae++){let Se=Pe[Ae];if(isEmitListener(e.emitsOptions,Se))continue;const St=t[Se];if(_e)if(hasOwn(Ie,Se))St!==Ie[Se]&&(Ie[Se]=St,xe=!0);else{const Te=camelize(Se);Me[Te]=resolvePropValue(_e,Oe,Te,St,e,!1)}else St!==Ie[Se]&&(Ie[Se]=St,xe=!0)}}}else{setFullProps(e,t,Me,Ie)&&(xe=!0);let Pe;for(const Ae in Oe)(!t||!hasOwn(t,Ae)&&((Pe=hyphenate(Ae))===Ae||!hasOwn(t,Pe)))&&(_e?r&&(r[Ae]!==void 0||r[Pe]!==void 0)&&(Me[Ae]=resolvePropValue(_e,Oe,Ae,void 0,e,!0)):delete Me[Ae]);if(Ie!==Oe)for(const Ae in Ie)(!t||!hasOwn(t,Ae)&&!0)&&(delete Ie[Ae],xe=!0)}xe&&trigger(e,"set","$attrs")}function setFullProps(e,t,r,Ce){const[Me,Ie]=e.propsOptions;let Fe=!1,Oe;if(t)for(let _e in t){if(isReservedProp(_e))continue;const xe=t[_e];let Pe;Me&&hasOwn(Me,Pe=camelize(_e))?!Ie||!Ie.includes(Pe)?r[Pe]=xe:(Oe||(Oe={}))[Pe]=xe:isEmitListener(e.emitsOptions,_e)||(!(_e in Ce)||xe!==Ce[_e])&&(Ce[_e]=xe,Fe=!0)}if(Ie){const _e=toRaw(r),xe=Oe||EMPTY_OBJ;for(let Pe=0;Pe<Ie.length;Pe++){const Ae=Ie[Pe];r[Ae]=resolvePropValue(Me,_e,Ae,xe[Ae],e,!hasOwn(xe,Ae))}}return Fe}function resolvePropValue(e,t,r,Ce,Me,Ie){const Fe=e[r];if(Fe!=null){const Oe=hasOwn(Fe,"default");if(Oe&&Ce===void 0){const _e=Fe.default;if(Fe.type!==Function&&isFunction(_e)){const{propsDefaults:xe}=Me;r in xe?Ce=xe[r]:(setCurrentInstance(Me),Ce=xe[r]=_e.call(null,t),unsetCurrentInstance())}else Ce=_e}Fe[0]&&(Ie&&!Oe?Ce=!1:Fe[1]&&(Ce===""||Ce===hyphenate(r))&&(Ce=!0))}return Ce}function normalizePropsOptions(e,t,r=!1){const Ce=t.propsCache,Me=Ce.get(e);if(Me)return Me;const Ie=e.props,Fe={},Oe=[];let _e=!1;if(!isFunction(e)){const Pe=Ae=>{_e=!0;const[Se,St]=normalizePropsOptions(Ae,t,!0);extend(Fe,Se),St&&Oe.push(...St)};!r&&t.mixins.length&&t.mixins.forEach(Pe),e.extends&&Pe(e.extends),e.mixins&&e.mixins.forEach(Pe)}if(!Ie&&!_e)return isObject(e)&&Ce.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Ie))for(let Pe=0;Pe<Ie.length;Pe++){const Ae=camelize(Ie[Pe]);validatePropName(Ae)&&(Fe[Ae]=EMPTY_OBJ)}else if(Ie)for(const Pe in Ie){const Ae=camelize(Pe);if(validatePropName(Ae)){const Se=Ie[Pe],St=Fe[Ae]=isArray$1(Se)||isFunction(Se)?{type:Se}:Object.assign({},Se);if(St){const Te=getTypeIndex(Boolean,St.type),Re=getTypeIndex(String,St.type);St[0]=Te>-1,St[1]=Re<0||Te<Re,(Te>-1||hasOwn(St,"default"))&&Oe.push(Ae)}}}const xe=[Fe,Oe];return isObject(e)&&Ce.set(e,xe),xe}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$1(t)?t.findIndex(r=>isSameType(r,e)):isFunction(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$1(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,r)=>{if(t._n)return t;const Ce=withCtx((...Me)=>normalizeSlotValue(t(...Me)),r);return Ce._c=!1,Ce},normalizeObjectSlots=(e,t,r)=>{const Ce=e._ctx;for(const Me in e){if(isInternalKey(Me))continue;const Ie=e[Me];if(isFunction(Ie))t[Me]=normalizeSlot$1(Me,Ie,Ce);else if(Ie!=null){const Fe=normalizeSlotValue(Ie);t[Me]=()=>Fe}}},normalizeVNodeSlots=(e,t)=>{const r=normalizeSlotValue(t);e.slots.default=()=>r},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=toRaw(t),def(t,"_",r)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,r)=>{const{vnode:Ce,slots:Me}=e;let Ie=!0,Fe=EMPTY_OBJ;if(Ce.shapeFlag&32){const Oe=t._;Oe?r&&Oe===1?Ie=!1:(extend(Me,t),!r&&Oe===1&&delete Me._):(Ie=!t.$stable,normalizeObjectSlots(t,Me)),Fe=t}else t&&(normalizeVNodeSlots(e,t),Fe={default:1});if(Ie)for(const Oe in Me)!isInternalKey(Oe)&&!(Oe in Fe)&&delete Me[Oe]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(Ce,Me=null){isFunction(Ce)||(Ce=Object.assign({},Ce)),Me!=null&&!isObject(Me)&&(Me=null);const Ie=createAppContext(),Fe=new Set;let Oe=!1;const _e=Ie.app={_uid:uid++,_component:Ce,_props:Me,_container:null,_context:Ie,_instance:null,version,get config(){return Ie.config},set config(xe){},use(xe,...Pe){return Fe.has(xe)||(xe&&isFunction(xe.install)?(Fe.add(xe),xe.install(_e,...Pe)):isFunction(xe)&&(Fe.add(xe),xe(_e,...Pe))),_e},mixin(xe){return Ie.mixins.includes(xe)||Ie.mixins.push(xe),_e},component(xe,Pe){return Pe?(Ie.components[xe]=Pe,_e):Ie.components[xe]},directive(xe,Pe){return Pe?(Ie.directives[xe]=Pe,_e):Ie.directives[xe]},mount(xe,Pe,Ae){if(!Oe){const Se=createVNode(Ce,Me);return Se.appContext=Ie,Pe&&t?t(Se,xe):e(Se,xe,Ae),Oe=!0,_e._container=xe,xe.__vue_app__=_e,getExposeProxy(Se.component)||Se.component.proxy}},unmount(){Oe&&(e(null,_e._container),delete _e._container.__vue_app__)},provide(xe,Pe){return Ie.provides[xe]=Pe,_e}};return _e}}function setRef(e,t,r,Ce,Me=!1){if(isArray$1(e)){e.forEach((Se,St)=>setRef(Se,t&&(isArray$1(t)?t[St]:t),r,Ce,Me));return}if(isAsyncWrapper(Ce)&&!Me)return;const Ie=Ce.shapeFlag&4?getExposeProxy(Ce.component)||Ce.component.proxy:Ce.el,Fe=Me?null:Ie,{i:Oe,r:_e}=e,xe=t&&t.r,Pe=Oe.refs===EMPTY_OBJ?Oe.refs={}:Oe.refs,Ae=Oe.setupState;if(xe!=null&&xe!==_e&&(isString(xe)?(Pe[xe]=null,hasOwn(Ae,xe)&&(Ae[xe]=null)):isRef(xe)&&(xe.value=null)),isFunction(_e))callWithErrorHandling(_e,Oe,12,[Fe,Pe]);else{const Se=isString(_e),St=isRef(_e);if(Se||St){const Te=()=>{if(e.f){const Re=Se?hasOwn(Ae,_e)?Ae[_e]:Pe[_e]:_e.value;Me?isArray$1(Re)&&remove(Re,Ie):isArray$1(Re)?Re.includes(Ie)||Re.push(Ie):Se?(Pe[_e]=[Ie],hasOwn(Ae,_e)&&(Ae[_e]=Pe[_e])):(_e.value=[Ie],e.k&&(Pe[e.k]=_e.value))}else Se?(Pe[_e]=Fe,hasOwn(Ae,_e)&&(Ae[_e]=Fe)):St&&(_e.value=Fe,e.k&&(Pe[e.k]=Fe))};Fe?(Te.id=-1,queuePostRenderEffect(Te,r)):Te()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const r=getGlobalThis();r.__VUE__=!0;const{insert:Ce,remove:Me,patchProp:Ie,createElement:Fe,createText:Oe,createComment:_e,setText:xe,setElementText:Pe,parentNode:Ae,nextSibling:Se,setScopeId:St=NOOP,insertStaticContent:Te}=e,Re=(si,ai,Ye,Ze=null,Xe=null,ui=null,pi=!1,gi=null,Li=!!ai.dynamicChildren)=>{if(si===ai)return;si&&!isSameVNodeType(si,ai)&&(Ze=ni(si),$e(si,Xe,ui,!0),si=null),ai.patchFlag===-2&&(Li=!1,ai.dynamicChildren=null);const{type:Ri,ref:wi,shapeFlag:Vi}=ai;switch(Ri){case Text:Ee(si,ai,Ye,Ze);break;case Comment:ke(si,ai,Ye,Ze);break;case Static:si==null&&De(ai,Ye,Ze,pi);break;case Fragment:li(si,ai,Ye,Ze,Xe,ui,pi,gi,Li);break;default:Vi&1?Ue(si,ai,Ye,Ze,Xe,ui,pi,gi,Li):Vi&6?bi(si,ai,Ye,Ze,Xe,ui,pi,gi,Li):(Vi&64||Vi&128)&&Ri.process(si,ai,Ye,Ze,Xe,ui,pi,gi,Li,di)}wi!=null&&Xe&&setRef(wi,si&&si.ref,ui,ai||si,!ai)},Ee=(si,ai,Ye,Ze)=>{if(si==null)Ce(ai.el=Oe(ai.children),Ye,Ze);else{const Xe=ai.el=si.el;ai.children!==si.children&&xe(Xe,ai.children)}},ke=(si,ai,Ye,Ze)=>{si==null?Ce(ai.el=_e(ai.children||""),Ye,Ze):ai.el=si.el},De=(si,ai,Ye,Ze)=>{[si.el,si.anchor]=Te(si.children,ai,Ye,Ze,si.el,si.anchor)},Be=({el:si,anchor:ai},Ye,Ze)=>{let Xe;for(;si&&si!==ai;)Xe=Se(si),Ce(si,Ye,Ze),si=Xe;Ce(ai,Ye,Ze)},He=({el:si,anchor:ai})=>{let Ye;for(;si&&si!==ai;)Ye=Se(si),Me(si),si=Ye;Me(ai)},Ue=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li)=>{pi=pi||ai.type==="svg",si==null?We(ai,Ye,Ze,Xe,ui,pi,gi,Li):fi(si,ai,Xe,ui,pi,gi,Li)},We=(si,ai,Ye,Ze,Xe,ui,pi,gi)=>{let Li,Ri;const{type:wi,props:Vi,shapeFlag:Mi,transition:qi,dirs:Xi}=si;if(Li=si.el=Fe(si.type,ui,Vi&&Vi.is,Vi),Mi&8?Pe(Li,si.children):Mi&16&&Qe(si.children,Li,null,Ze,Xe,ui&&wi!=="foreignObject",pi,gi),Xi&&invokeDirectiveHook(si,null,Ze,"created"),Vi){for(const ji in Vi)ji!=="value"&&!isReservedProp(ji)&&Ie(Li,ji,null,Vi[ji],ui,si.children,Ze,Xe,ei);"value"in Vi&&Ie(Li,"value",null,Vi.value),(Ri=Vi.onVnodeBeforeMount)&&invokeVNodeHook(Ri,Ze,si)}Je(Li,si,si.scopeId,pi,Ze),Xi&&invokeDirectiveHook(si,null,Ze,"beforeMount");const Zi=(!Xe||Xe&&!Xe.pendingBranch)&&qi&&!qi.persisted;Zi&&qi.beforeEnter(Li),Ce(Li,ai,Ye),((Ri=Vi&&Vi.onVnodeMounted)||Zi||Xi)&&queuePostRenderEffect(()=>{Ri&&invokeVNodeHook(Ri,Ze,si),Zi&&qi.enter(Li),Xi&&invokeDirectiveHook(si,null,Ze,"mounted")},Xe)},Je=(si,ai,Ye,Ze,Xe)=>{if(Ye&&St(si,Ye),Ze)for(let ui=0;ui<Ze.length;ui++)St(si,Ze[ui]);if(Xe){let ui=Xe.subTree;if(ai===ui){const pi=Xe.vnode;Je(si,pi,pi.scopeId,pi.slotScopeIds,Xe.parent)}}},Qe=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li=0)=>{for(let Ri=Li;Ri<si.length;Ri++){const wi=si[Ri]=gi?cloneIfMounted(si[Ri]):normalizeVNode(si[Ri]);Re(null,wi,ai,Ye,Ze,Xe,ui,pi,gi)}},fi=(si,ai,Ye,Ze,Xe,ui,pi)=>{const gi=ai.el=si.el;let{patchFlag:Li,dynamicChildren:Ri,dirs:wi}=ai;Li|=si.patchFlag&16;const Vi=si.props||EMPTY_OBJ,Mi=ai.props||EMPTY_OBJ;let qi;Ye&&toggleRecurse(Ye,!1),(qi=Mi.onVnodeBeforeUpdate)&&invokeVNodeHook(qi,Ye,ai,si),wi&&invokeDirectiveHook(ai,si,Ye,"beforeUpdate"),Ye&&toggleRecurse(Ye,!0);const Xi=Xe&&ai.type!=="foreignObject";if(Ri?oi(si.dynamicChildren,Ri,gi,Ye,Ze,Xi,ui):pi||Ei(si,ai,gi,null,Ye,Ze,Xi,ui,!1),Li>0){if(Li&16)ii(gi,ai,Vi,Mi,Ye,Ze,Xe);else if(Li&2&&Vi.class!==Mi.class&&Ie(gi,"class",null,Mi.class,Xe),Li&4&&Ie(gi,"style",Vi.style,Mi.style,Xe),Li&8){const Zi=ai.dynamicProps;for(let ji=0;ji<Zi.length;ji++){const Ki=Zi[ji],cn=Vi[Ki],rn=Mi[Ki];(rn!==cn||Ki==="value")&&Ie(gi,Ki,cn,rn,Xe,si.children,Ye,Ze,ei)}}Li&1&&si.children!==ai.children&&Pe(gi,ai.children)}else!pi&&Ri==null&&ii(gi,ai,Vi,Mi,Ye,Ze,Xe);((qi=Mi.onVnodeUpdated)||wi)&&queuePostRenderEffect(()=>{qi&&invokeVNodeHook(qi,Ye,ai,si),wi&&invokeDirectiveHook(ai,si,Ye,"updated")},Ze)},oi=(si,ai,Ye,Ze,Xe,ui,pi)=>{for(let gi=0;gi<ai.length;gi++){const Li=si[gi],Ri=ai[gi],wi=Li.el&&(Li.type===Fragment||!isSameVNodeType(Li,Ri)||Li.shapeFlag&70)?Ae(Li.el):Ye;Re(Li,Ri,wi,null,Ze,Xe,ui,pi,!0)}},ii=(si,ai,Ye,Ze,Xe,ui,pi)=>{if(Ye!==Ze){if(Ye!==EMPTY_OBJ)for(const gi in Ye)!isReservedProp(gi)&&!(gi in Ze)&&Ie(si,gi,Ye[gi],null,pi,ai.children,Xe,ui,ei);for(const gi in Ze){if(isReservedProp(gi))continue;const Li=Ze[gi],Ri=Ye[gi];Li!==Ri&&gi!=="value"&&Ie(si,gi,Ri,Li,pi,ai.children,Xe,ui,ei)}"value"in Ze&&Ie(si,"value",Ye.value,Ze.value)}},li=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li)=>{const Ri=ai.el=si?si.el:Oe(""),wi=ai.anchor=si?si.anchor:Oe("");let{patchFlag:Vi,dynamicChildren:Mi,slotScopeIds:qi}=ai;qi&&(gi=gi?gi.concat(qi):qi),si==null?(Ce(Ri,Ye,Ze),Ce(wi,Ye,Ze),Qe(ai.children,Ye,wi,Xe,ui,pi,gi,Li)):Vi>0&&Vi&64&&Mi&&si.dynamicChildren?(oi(si.dynamicChildren,Mi,Ye,Xe,ui,pi,gi),(ai.key!=null||Xe&&ai===Xe.subTree)&&traverseStaticChildren(si,ai,!0)):Ei(si,ai,Ye,wi,Xe,ui,pi,gi,Li)},bi=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li)=>{ai.slotScopeIds=gi,si==null?ai.shapeFlag&512?Xe.ctx.activate(ai,Ye,Ze,pi,Li):mi(ai,Ye,Ze,Xe,ui,pi,Li):Si(si,ai,Li)},mi=(si,ai,Ye,Ze,Xe,ui,pi)=>{const gi=si.component=createComponentInstance(si,Ze,Xe);if(isKeepAlive(si)&&(gi.ctx.renderer=di),setupComponent(gi),gi.asyncDep){if(Xe&&Xe.registerDep(gi,_i),!si.el){const Li=gi.subTree=createVNode(Comment);ke(null,Li,ai,Ye)}return}_i(gi,si,ai,Ye,Xe,ui,pi)},Si=(si,ai,Ye)=>{const Ze=ai.component=si.component;if(shouldUpdateComponent(si,ai,Ye))if(Ze.asyncDep&&!Ze.asyncResolved){xi(Ze,ai,Ye);return}else Ze.next=ai,invalidateJob(Ze.update),Ze.update();else ai.el=si.el,Ze.vnode=ai},_i=(si,ai,Ye,Ze,Xe,ui,pi)=>{const gi=()=>{if(si.isMounted){let{next:wi,bu:Vi,u:Mi,parent:qi,vnode:Xi}=si,Zi=wi,ji;toggleRecurse(si,!1),wi?(wi.el=Xi.el,xi(si,wi,pi)):wi=Xi,Vi&&invokeArrayFns(Vi),(ji=wi.props&&wi.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ji,qi,wi,Xi),toggleRecurse(si,!0);const Ki=renderComponentRoot(si),cn=si.subTree;si.subTree=Ki,Re(cn,Ki,Ae(cn.el),ni(cn),si,Xe,ui),wi.el=Ki.el,Zi===null&&updateHOCHostEl(si,Ki.el),Mi&&queuePostRenderEffect(Mi,Xe),(ji=wi.props&&wi.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ji,qi,wi,Xi),Xe)}else{let wi;const{el:Vi,props:Mi}=ai,{bm:qi,m:Xi,parent:Zi}=si,ji=isAsyncWrapper(ai);if(toggleRecurse(si,!1),qi&&invokeArrayFns(qi),!ji&&(wi=Mi&&Mi.onVnodeBeforeMount)&&invokeVNodeHook(wi,Zi,ai),toggleRecurse(si,!0),Vi&&Ni){const Ki=()=>{si.subTree=renderComponentRoot(si),Ni(Vi,si.subTree,si,Xe,null)};ji?ai.type.__asyncLoader().then(()=>!si.isUnmounted&&Ki()):Ki()}else{const Ki=si.subTree=renderComponentRoot(si);Re(null,Ki,Ye,Ze,si,Xe,ui),ai.el=Ki.el}if(Xi&&queuePostRenderEffect(Xi,Xe),!ji&&(wi=Mi&&Mi.onVnodeMounted)){const Ki=ai;queuePostRenderEffect(()=>invokeVNodeHook(wi,Zi,Ki),Xe)}(ai.shapeFlag&256||Zi&&isAsyncWrapper(Zi.vnode)&&Zi.vnode.shapeFlag&256)&&si.a&&queuePostRenderEffect(si.a,Xe),si.isMounted=!0,ai=Ye=Ze=null}},Li=si.effect=new ReactiveEffect(gi,()=>queueJob(Ri),si.scope),Ri=si.update=()=>Li.run();Ri.id=si.uid,toggleRecurse(si,!0),Ri()},xi=(si,ai,Ye)=>{ai.component=si;const Ze=si.vnode.props;si.vnode=ai,si.next=null,updateProps(si,ai.props,Ze,Ye),updateSlots(si,ai.children,Ye),pauseTracking(),flushPreFlushCbs(),resetTracking()},Ei=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li=!1)=>{const Ri=si&&si.children,wi=si?si.shapeFlag:0,Vi=ai.children,{patchFlag:Mi,shapeFlag:qi}=ai;if(Mi>0){if(Mi&128){vi(Ri,Vi,Ye,Ze,Xe,ui,pi,gi,Li);return}else if(Mi&256){ri(Ri,Vi,Ye,Ze,Xe,ui,pi,gi,Li);return}}qi&8?(wi&16&&ei(Ri,Xe,ui),Vi!==Ri&&Pe(Ye,Vi)):wi&16?qi&16?vi(Ri,Vi,Ye,Ze,Xe,ui,pi,gi,Li):ei(Ri,Xe,ui,!0):(wi&8&&Pe(Ye,""),qi&16&&Qe(Vi,Ye,Ze,Xe,ui,pi,gi,Li))},ri=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li)=>{si=si||EMPTY_ARR,ai=ai||EMPTY_ARR;const Ri=si.length,wi=ai.length,Vi=Math.min(Ri,wi);let Mi;for(Mi=0;Mi<Vi;Mi++){const qi=ai[Mi]=Li?cloneIfMounted(ai[Mi]):normalizeVNode(ai[Mi]);Re(si[Mi],qi,Ye,null,Xe,ui,pi,gi,Li)}Ri>wi?ei(si,Xe,ui,!0,!1,Vi):Qe(ai,Ye,Ze,Xe,ui,pi,gi,Li,Vi)},vi=(si,ai,Ye,Ze,Xe,ui,pi,gi,Li)=>{let Ri=0;const wi=ai.length;let Vi=si.length-1,Mi=wi-1;for(;Ri<=Vi&&Ri<=Mi;){const qi=si[Ri],Xi=ai[Ri]=Li?cloneIfMounted(ai[Ri]):normalizeVNode(ai[Ri]);if(isSameVNodeType(qi,Xi))Re(qi,Xi,Ye,null,Xe,ui,pi,gi,Li);else break;Ri++}for(;Ri<=Vi&&Ri<=Mi;){const qi=si[Vi],Xi=ai[Mi]=Li?cloneIfMounted(ai[Mi]):normalizeVNode(ai[Mi]);if(isSameVNodeType(qi,Xi))Re(qi,Xi,Ye,null,Xe,ui,pi,gi,Li);else break;Vi--,Mi--}if(Ri>Vi){if(Ri<=Mi){const qi=Mi+1,Xi=qi<wi?ai[qi].el:Ze;for(;Ri<=Mi;)Re(null,ai[Ri]=Li?cloneIfMounted(ai[Ri]):normalizeVNode(ai[Ri]),Ye,Xi,Xe,ui,pi,gi,Li),Ri++}}else if(Ri>Mi)for(;Ri<=Vi;)$e(si[Ri],Xe,ui,!0),Ri++;else{const qi=Ri,Xi=Ri,Zi=new Map;for(Ri=Xi;Ri<=Mi;Ri++){const Ln=ai[Ri]=Li?cloneIfMounted(ai[Ri]):normalizeVNode(ai[Ri]);Ln.key!=null&&Zi.set(Ln.key,Ri)}let ji,Ki=0;const cn=Mi-Xi+1;let rn=!1,xn=0;const Sn=new Array(cn);for(Ri=0;Ri<cn;Ri++)Sn[Ri]=0;for(Ri=qi;Ri<=Vi;Ri++){const Ln=si[Ri];if(Ki>=cn){$e(Ln,Xe,ui,!0);continue}let Hn;if(Ln.key!=null)Hn=Zi.get(Ln.key);else for(ji=Xi;ji<=Mi;ji++)if(Sn[ji-Xi]===0&&isSameVNodeType(Ln,ai[ji])){Hn=ji;break}Hn===void 0?$e(Ln,Xe,ui,!0):(Sn[Hn-Xi]=Ri+1,Hn>=xn?xn=Hn:rn=!0,Re(Ln,ai[Hn],Ye,null,Xe,ui,pi,gi,Li),Ki++)}const Tn=rn?getSequence(Sn):EMPTY_ARR;for(ji=Tn.length-1,Ri=cn-1;Ri>=0;Ri--){const Ln=Xi+Ri,Hn=ai[Ln],Hi=Ln+1<wi?ai[Ln+1].el:Ze;Sn[Ri]===0?Re(null,Hn,Ye,Hi,Xe,ui,pi,gi,Li):rn&&(ji<0||Ri!==Tn[ji]?Ci(Hn,Ye,Hi,2):ji--)}}},Ci=(si,ai,Ye,Ze,Xe=null)=>{const{el:ui,type:pi,transition:gi,children:Li,shapeFlag:Ri}=si;if(Ri&6){Ci(si.component.subTree,ai,Ye,Ze);return}if(Ri&128){si.suspense.move(ai,Ye,Ze);return}if(Ri&64){pi.move(si,ai,Ye,di);return}if(pi===Fragment){Ce(ui,ai,Ye);for(let Vi=0;Vi<Li.length;Vi++)Ci(Li[Vi],ai,Ye,Ze);Ce(si.anchor,ai,Ye);return}if(pi===Static){Be(si,ai,Ye);return}if(Ze!==2&&Ri&1&&gi)if(Ze===0)gi.beforeEnter(ui),Ce(ui,ai,Ye),queuePostRenderEffect(()=>gi.enter(ui),Xe);else{const{leave:Vi,delayLeave:Mi,afterLeave:qi}=gi,Xi=()=>Ce(ui,ai,Ye),Zi=()=>{Vi(ui,()=>{Xi(),qi&&qi()})};Mi?Mi(ui,Xi,Zi):Zi()}else Ce(ui,ai,Ye)},$e=(si,ai,Ye,Ze=!1,Xe=!1)=>{const{type:ui,props:pi,ref:gi,children:Li,dynamicChildren:Ri,shapeFlag:wi,patchFlag:Vi,dirs:Mi}=si;if(gi!=null&&setRef(gi,null,Ye,si,!0),wi&256){ai.ctx.deactivate(si);return}const qi=wi&1&&Mi,Xi=!isAsyncWrapper(si);let Zi;if(Xi&&(Zi=pi&&pi.onVnodeBeforeUnmount)&&invokeVNodeHook(Zi,ai,si),wi&6)qe(si.component,Ye,Ze);else{if(wi&128){si.suspense.unmount(Ye,Ze);return}qi&&invokeDirectiveHook(si,null,ai,"beforeUnmount"),wi&64?si.type.remove(si,ai,Ye,Xe,di,Ze):Ri&&(ui!==Fragment||Vi>0&&Vi&64)?ei(Ri,ai,Ye,!1,!0):(ui===Fragment&&Vi&384||!Xe&&wi&16)&&ei(Li,ai,Ye),Ze&&Ge(si)}(Xi&&(Zi=pi&&pi.onVnodeUnmounted)||qi)&&queuePostRenderEffect(()=>{Zi&&invokeVNodeHook(Zi,ai,si),qi&&invokeDirectiveHook(si,null,ai,"unmounted")},Ye)},Ge=si=>{const{type:ai,el:Ye,anchor:Ze,transition:Xe}=si;if(ai===Fragment){ze(Ye,Ze);return}if(ai===Static){He(si);return}const ui=()=>{Me(Ye),Xe&&!Xe.persisted&&Xe.afterLeave&&Xe.afterLeave()};if(si.shapeFlag&1&&Xe&&!Xe.persisted){const{leave:pi,delayLeave:gi}=Xe,Li=()=>pi(Ye,ui);gi?gi(si.el,ui,Li):Li()}else ui()},ze=(si,ai)=>{let Ye;for(;si!==ai;)Ye=Se(si),Me(si),si=Ye;Me(ai)},qe=(si,ai,Ye)=>{const{bum:Ze,scope:Xe,update:ui,subTree:pi,um:gi}=si;Ze&&invokeArrayFns(Ze),Xe.stop(),ui&&(ui.active=!1,$e(pi,si,ai,Ye)),gi&&queuePostRenderEffect(gi,ai),queuePostRenderEffect(()=>{si.isUnmounted=!0},ai),ai&&ai.pendingBranch&&!ai.isUnmounted&&si.asyncDep&&!si.asyncResolved&&si.suspenseId===ai.pendingId&&(ai.deps--,ai.deps===0&&ai.resolve())},ei=(si,ai,Ye,Ze=!1,Xe=!1,ui=0)=>{for(let pi=ui;pi<si.length;pi++)$e(si[pi],ai,Ye,Ze,Xe)},ni=si=>si.shapeFlag&6?ni(si.component.subTree):si.shapeFlag&128?si.suspense.next():Se(si.anchor||si.el),ci=(si,ai,Ye)=>{si==null?ai._vnode&&$e(ai._vnode,null,null,!0):Re(ai._vnode||null,si,ai,null,null,null,Ye),flushPreFlushCbs(),flushPostFlushCbs(),ai._vnode=si},di={p:Re,um:$e,m:Ci,r:Ge,mt:mi,mc:Qe,pc:Ei,pbc:oi,n:ni,o:e};let Ti,Ni;return t&&([Ti,Ni]=t(di)),{render:ci,hydrate:Ti,createApp:createAppAPI(ci,Ti)}}function toggleRecurse({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function traverseStaticChildren(e,t,r=!1){const Ce=e.children,Me=t.children;if(isArray$1(Ce)&&isArray$1(Me))for(let Ie=0;Ie<Ce.length;Ie++){const Fe=Ce[Ie];let Oe=Me[Ie];Oe.shapeFlag&1&&!Oe.dynamicChildren&&((Oe.patchFlag<=0||Oe.patchFlag===32)&&(Oe=Me[Ie]=cloneIfMounted(Me[Ie]),Oe.el=Fe.el),r||traverseStaticChildren(Fe,Oe))}}function getSequence(e){const t=e.slice(),r=[0];let Ce,Me,Ie,Fe,Oe;const _e=e.length;for(Ce=0;Ce<_e;Ce++){const xe=e[Ce];if(xe!==0){if(Me=r[r.length-1],e[Me]<xe){t[Ce]=Me,r.push(Ce);continue}for(Ie=0,Fe=r.length-1;Ie<Fe;)Oe=Ie+Fe>>1,e[r[Oe]]<xe?Ie=Oe+1:Fe=Oe;xe<e[r[Ie]]&&(Ie>0&&(t[Ce]=r[Ie-1]),r[Ie]=Ce)}}for(Ie=r.length,Fe=r[Ie-1];Ie-- >0;)r[Ie]=Fe,Fe=t[Fe];return r}const isTeleport=e=>e.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,r,Ce,Me,Ie){return setupBlock(createBaseVNode(e,t,r,Ce,Me,Ie,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:r})=>e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!r}:e:null;function createBaseVNode(e,t=null,r=null,Ce=0,Me=null,Ie=e===Fragment?0:1,Fe=!1,Oe=!1){const _e={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:Ie,patchFlag:Ce,dynamicProps:Me,dynamicChildren:null,appContext:null};return Oe?(normalizeChildren(_e,r),Ie&128&&e.normalize(_e)):r&&(_e.shapeFlag|=isString(r)?8:16),isBlockTreeEnabled>0&&!Fe&&currentBlock&&(_e.patchFlag>0||Ie&6)&&_e.patchFlag!==32&&currentBlock.push(_e),_e}const createVNode=_createVNode;function _createVNode(e,t=null,r=null,Ce=0,Me=null,Ie=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const Oe=cloneVNode(e,t,!0);return r&&normalizeChildren(Oe,r),isBlockTreeEnabled>0&&!Ie&&currentBlock&&(Oe.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=Oe:currentBlock.push(Oe)),Oe.patchFlag|=-2,Oe}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:Oe,style:_e}=t;Oe&&!isString(Oe)&&(t.class=normalizeClass(Oe)),isObject(_e)&&(isProxy(_e)&&!isArray$1(_e)&&(_e=extend({},_e)),t.style=normalizeStyle(_e))}const Fe=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,r,Ce,Me,Fe,Ie,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,r=!1){const{props:Ce,ref:Me,patchFlag:Ie,children:Fe}=e,Oe=t?mergeProps(Ce||{},t):Ce;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:Oe,key:Oe&&normalizeKey(Oe),ref:t&&t.ref?r&&Me?isArray$1(Me)?Me.concat(normalizeRef(t)):[Me,normalizeRef(t)]:normalizeRef(t):Me,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:Fe,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?Ie===-1?16:Ie|16:Ie,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const r=createVNode(Static,null,e);return r.staticCount=t,r}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$1(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let r=0;const{shapeFlag:Ce}=e;if(t==null)t=null;else if(isArray$1(t))r=16;else if(typeof t=="object")if(Ce&65){const Me=t.default;Me&&(Me._c&&(Me._d=!1),normalizeChildren(e,Me()),Me._c&&(Me._d=!0));return}else{r=32;const Me=t._;!Me&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:Me===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},r=32):(t=String(t),Ce&64?(r=16,t=[createTextVNode(t)]):r=8);e.children=t,e.shapeFlag|=r}function mergeProps(...e){const t={};for(let r=0;r<e.length;r++){const Ce=e[r];for(const Me in Ce)if(Me==="class")t.class!==Ce.class&&(t.class=normalizeClass([t.class,Ce.class]));else if(Me==="style")t.style=normalizeStyle([t.style,Ce.style]);else if(isOn(Me)){const Ie=t[Me],Fe=Ce[Me];Fe&&Ie!==Fe&&!(isArray$1(Ie)&&Ie.includes(Fe))&&(t[Me]=Ie?[].concat(Ie,Fe):Fe)}else Me!==""&&(t[Me]=Ce[Me])}return t}function invokeVNodeHook(e,t,r,Ce=null){callWithAsyncErrorHandling(e,t,7,[r,Ce])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(e,t,r){const Ce=e.type,Me=(t?t.appContext:e.appContext)||emptyAppContext,Ie={uid:uid$1++,vnode:e,type:Ce,parent:t,appContext:Me,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(Me.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Ce,Me),emitsOptions:normalizeEmitsOptions(Ce,Me),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Ce.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ie.ctx={_:Ie},Ie.root=t?t.root:Ie,Ie.emit=emit$1.bind(null,Ie),e.ce&&e.ce(Ie),Ie}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:r,children:Ce}=e.vnode,Me=isStatefulComponent(e);initProps(e,r,Me,t),initSlots(e,Ce);const Ie=Me?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,Ie}function setupStatefulComponent(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:Ce}=r;if(Ce){const Me=e.setupContext=Ce.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const Ie=callWithErrorHandling(Ce,e,0,[e.props,Me]);if(resetTracking(),unsetCurrentInstance(),isPromise(Ie)){if(Ie.then(unsetCurrentInstance,unsetCurrentInstance),t)return Ie.then(Fe=>{handleSetupResult(e,Fe,t)}).catch(Fe=>{handleError(Fe,e,0)});e.asyncDep=Ie}else handleSetupResult(e,Ie,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,r){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,r)}let compile;function finishComponentSetup(e,t,r){const Ce=e.type;if(!e.render){if(!t&&compile&&!Ce.render){const Me=Ce.template||resolveMergedOptions(e).template;if(Me){const{isCustomElement:Ie,compilerOptions:Fe}=e.appContext.config,{delimiters:Oe,compilerOptions:_e}=Ce,xe=extend(extend({isCustomElement:Ie,delimiters:Oe},Fe),_e);Ce.render=compile(Me,xe)}}e.render=Ce.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(t,r){return track(e,"get","$attrs"),t[r]}})}function createSetupContext(e){const t=Ce=>{e.exposed=Ce||{}};let r;return{get attrs(){return r||(r=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(t,r){return r in t||r in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,r=!1){let Ce=getComponentName(t);if(!Ce&&t.__file){const Me=t.__file.match(/([^/\\]+)\.\w+$/);Me&&(Ce=Me[1])}if(!Ce&&e&&e.parent){const Me=Ie=>{for(const Fe in Ie)if(Ie[Fe]===t)return Fe};Ce=Me(e.components||e.parent.type.components)||Me(e.appContext.components)}return Ce?classify(Ce):r?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h$1(e,t,r){const Ce=arguments.length;return Ce===2?isObject(t)&&!isArray$1(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(Ce>3?r=Array.prototype.slice.call(arguments,2):Ce===3&&isVNode(r)&&(r=[r]),createVNode(e,t,r))}const ssrContextKey=Symbol(""),useSSRContext=()=>{{const e=inject(ssrContextKey);return e||warn("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}},version="3.2.42",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,Ce)=>{const Me=t?doc.createElementNS(svgNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&Ce&&Ce.multiple!=null&&Me.setAttribute("multiple",Ce.multiple),Me},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,Ce,Me,Ie){const Fe=r?r.previousSibling:t.lastChild;if(Me&&(Me===Ie||Me.nextSibling))for(;t.insertBefore(Me.cloneNode(!0),r),!(Me===Ie||!(Me=Me.nextSibling)););else{templateContainer.innerHTML=Ce?`<svg>${e}</svg>`:e;const Oe=templateContainer.content;if(Ce){const _e=Oe.firstChild;for(;_e.firstChild;)Oe.appendChild(_e.firstChild);Oe.removeChild(_e)}t.insertBefore(Oe,r)}return[Fe?Fe.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function patchClass(e,t,r){const Ce=e._vtc;Ce&&(t=(t?[t,...Ce]:[...Ce]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,r){const Ce=e.style,Me=isString(r);if(r&&!Me){for(const Ie in r)setStyle(Ce,Ie,r[Ie]);if(t&&!isString(t))for(const Ie in t)r[Ie]==null&&setStyle(Ce,Ie,"")}else{const Ie=Ce.display;Me?t!==r&&(Ce.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(Ce.display=Ie)}}const importantRE=/\s*!important$/;function setStyle(e,t,r){if(isArray$1(r))r.forEach(Ce=>setStyle(e,t,Ce));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const Ce=autoPrefix(e,t);importantRE.test(r)?e.setProperty(hyphenate(Ce),r.replace(importantRE,""),"important"):e[Ce]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const r=prefixCache[t];if(r)return r;let Ce=camelize(t);if(Ce!=="filter"&&Ce in e)return prefixCache[t]=Ce;Ce=capitalize(Ce);for(let Me=0;Me<prefixes.length;Me++){const Ie=prefixes[Me]+Ce;if(Ie in e)return prefixCache[t]=Ie}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,r,Ce,Me){if(Ce&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,r);else{const Ie=isSpecialBooleanAttr(t);r==null||Ie&&!includeBooleanAttr(r)?e.removeAttribute(t):e.setAttribute(t,Ie?"":r)}}function patchDOMProp(e,t,r,Ce,Me,Ie,Fe){if(t==="innerHTML"||t==="textContent"){Ce&&Fe(Ce,Me,Ie),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const _e=r==null?"":r;(e.value!==_e||e.tagName==="OPTION")&&(e.value=_e),r==null&&e.removeAttribute(t);return}let Oe=!1;if(r===""||r==null){const _e=typeof e[t];_e==="boolean"?r=includeBooleanAttr(r):r==null&&_e==="string"?(r="",Oe=!0):_e==="number"&&(r=0,Oe=!0)}try{e[t]=r}catch{}Oe&&e.removeAttribute(t)}function addEventListener(e,t,r,Ce){e.addEventListener(t,r,Ce)}function removeEventListener(e,t,r,Ce){e.removeEventListener(t,r,Ce)}function patchEvent(e,t,r,Ce,Me=null){const Ie=e._vei||(e._vei={}),Fe=Ie[t];if(Ce&&Fe)Fe.value=Ce;else{const[Oe,_e]=parseName(t);if(Ce){const xe=Ie[t]=createInvoker(Ce,Me);addEventListener(e,Oe,xe,_e)}else Fe&&(removeEventListener(e,Oe,Fe,_e),Ie[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let Ce;for(;Ce=e.match(optionsModifierRE);)e=e.slice(0,e.length-Ce[0].length),t[Ce[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const r=Ce=>{if(!Ce._vts)Ce._vts=Date.now();else if(Ce._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Ce,r.value),t,5,[Ce])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,t){if(isArray$1(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(Ce=>Me=>!Me._stopped&&Ce&&Ce(Me))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,r,Ce,Me=!1,Ie,Fe,Oe,_e)=>{t==="class"?patchClass(e,Ce,Me):t==="style"?patchStyle(e,r,Ce):isOn(t)?isModelListener(t)||patchEvent(e,t,r,Ce,Fe):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,Ce,Me))?patchDOMProp(e,t,Ce,Ie,Fe,Oe,_e):(t==="true-value"?e._trueValue=Ce:t==="false-value"&&(e._falseValue=Ce),patchAttr(e,t,Ce,Me))};function shouldSetAsProp(e,t,r,Ce){return Ce?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString(r)?!1:t in e}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:r}=t;return t.mount=Ce=>{const Me=normalizeContainer(Ce);if(!Me)return;const Ie=t._component;!isFunction(Ie)&&!Ie.render&&!Ie.template&&(Ie.template=Me.innerHTML),Me.innerHTML="";const Fe=r(Me,!1,Me instanceof SVGElement);return Me instanceof Element&&(Me.removeAttribute("v-cloak"),Me.setAttribute("data-v-app","")),Fe},t};function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const custom="";var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(e,t){return e.concat([t+"-"+start,t+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(e,t){return e.concat([t,t+"-"+start,t+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}function getWindow(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function isElement$1(e){var t=getWindow(e).Element;return e instanceof t||e instanceof Element}function isHTMLElement(e){var t=getWindow(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function isShadowRoot(e){if(typeof ShadowRoot>"u")return!1;var t=getWindow(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function applyStyles(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var Ce=t.styles[r]||{},Me=t.attributes[r]||{},Ie=t.elements[r];!isHTMLElement(Ie)||!getNodeName(Ie)||(Object.assign(Ie.style,Ce),Object.keys(Me).forEach(function(Fe){var Oe=Me[Fe];Oe===!1?Ie.removeAttribute(Fe):Ie.setAttribute(Fe,Oe===!0?"":Oe)}))})}function effect$2(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(Ce){var Me=t.elements[Ce],Ie=t.attributes[Ce]||{},Fe=Object.keys(t.styles.hasOwnProperty(Ce)?t.styles[Ce]:r[Ce]),Oe=Fe.reduce(function(_e,xe){return _e[xe]="",_e},{});!isHTMLElement(Me)||!getNodeName(Me)||(Object.assign(Me.style,Oe),Object.keys(Ie).forEach(function(_e){Me.removeAttribute(_e)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(e){return e.split("-")[0]}var max$1=Math.max,min=Math.min,round=Math.round;function getUAString(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var Ce=e.getBoundingClientRect(),Me=1,Ie=1;t&&isHTMLElement(e)&&(Me=e.offsetWidth>0&&round(Ce.width)/e.offsetWidth||1,Ie=e.offsetHeight>0&&round(Ce.height)/e.offsetHeight||1);var Fe=isElement$1(e)?getWindow(e):window,Oe=Fe.visualViewport,_e=!isLayoutViewport()&&r,xe=(Ce.left+(_e&&Oe?Oe.offsetLeft:0))/Me,Pe=(Ce.top+(_e&&Oe?Oe.offsetTop:0))/Ie,Ae=Ce.width/Me,Se=Ce.height/Ie;return{width:Ae,height:Se,top:Pe,right:xe+Ae,bottom:Pe+Se,left:xe,x:xe,y:Pe}}function getLayoutRect(e){var t=getBoundingClientRect(e),r=e.offsetWidth,Ce=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-Ce)<=1&&(Ce=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:Ce}}function contains(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&isShadowRoot(r)){var Ce=t;do{if(Ce&&e.isSameNode(Ce))return!0;Ce=Ce.parentNode||Ce.host}while(Ce)}return!1}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function isTableElement(e){return["table","td","th"].indexOf(getNodeName(e))>=0}function getDocumentElement(e){return((isElement$1(e)?e.ownerDocument:e.document)||window.document).documentElement}function getParentNode(e){return getNodeName(e)==="html"?e:e.assignedSlot||e.parentNode||(isShadowRoot(e)?e.host:null)||getDocumentElement(e)}function getTrueOffsetParent(e){return!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed"?null:e.offsetParent}function getContainingBlock(e){var t=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(e)){var Ce=getComputedStyle$1(e);if(Ce.position==="fixed")return null}var Me=getParentNode(e);for(isShadowRoot(Me)&&(Me=Me.host);isHTMLElement(Me)&&["html","body"].indexOf(getNodeName(Me))<0;){var Ie=getComputedStyle$1(Me);if(Ie.transform!=="none"||Ie.perspective!=="none"||Ie.contain==="paint"||["transform","perspective"].indexOf(Ie.willChange)!==-1||t&&Ie.willChange==="filter"||t&&Ie.filter&&Ie.filter!=="none")return Me;Me=Me.parentNode}return null}function getOffsetParent(e){for(var t=getWindow(e),r=getTrueOffsetParent(e);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?t:r||getContainingBlock(e)||t}function getMainAxisFromPlacement(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function within(e,t,r){return max$1(e,min(t,r))}function withinMaxClamp(e,t,r){var Ce=within(e,t,r);return Ce>r?r:Ce}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(e){return Object.assign({},getFreshSideObject(),e)}function expandToHashMap(e,t){return t.reduce(function(r,Ce){return r[Ce]=e,r},{})}var toPaddingObject=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,mergePaddingObject(typeof t!="number"?t:expandToHashMap(t,basePlacements))};function arrow(e){var t,r=e.state,Ce=e.name,Me=e.options,Ie=r.elements.arrow,Fe=r.modifiersData.popperOffsets,Oe=getBasePlacement(r.placement),_e=getMainAxisFromPlacement(Oe),xe=[left,right].indexOf(Oe)>=0,Pe=xe?"height":"width";if(!(!Ie||!Fe)){var Ae=toPaddingObject(Me.padding,r),Se=getLayoutRect(Ie),St=_e==="y"?top:left,Te=_e==="y"?bottom:right,Re=r.rects.reference[Pe]+r.rects.reference[_e]-Fe[_e]-r.rects.popper[Pe],Ee=Fe[_e]-r.rects.reference[_e],ke=getOffsetParent(Ie),De=ke?_e==="y"?ke.clientHeight||0:ke.clientWidth||0:0,Be=Re/2-Ee/2,He=Ae[St],Ue=De-Se[Pe]-Ae[Te],We=De/2-Se[Pe]/2+Be,Je=within(He,We,Ue),Qe=_e;r.modifiersData[Ce]=(t={},t[Qe]=Je,t.centerOffset=Je-We,t)}}function effect$1(e){var t=e.state,r=e.options,Ce=r.element,Me=Ce===void 0?"[data-popper-arrow]":Ce;Me!=null&&(typeof Me=="string"&&(Me=t.elements.popper.querySelector(Me),!Me)||!contains(t.elements.popper,Me)||(t.elements.arrow=Me))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(e){return e.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(e){var t=e.x,r=e.y,Ce=window,Me=Ce.devicePixelRatio||1;return{x:round(t*Me)/Me||0,y:round(r*Me)/Me||0}}function mapToStyles(e){var t,r=e.popper,Ce=e.popperRect,Me=e.placement,Ie=e.variation,Fe=e.offsets,Oe=e.position,_e=e.gpuAcceleration,xe=e.adaptive,Pe=e.roundOffsets,Ae=e.isFixed,Se=Fe.x,St=Se===void 0?0:Se,Te=Fe.y,Re=Te===void 0?0:Te,Ee=typeof Pe=="function"?Pe({x:St,y:Re}):{x:St,y:Re};St=Ee.x,Re=Ee.y;var ke=Fe.hasOwnProperty("x"),De=Fe.hasOwnProperty("y"),Be=left,He=top,Ue=window;if(xe){var We=getOffsetParent(r),Je="clientHeight",Qe="clientWidth";if(We===getWindow(r)&&(We=getDocumentElement(r),getComputedStyle$1(We).position!=="static"&&Oe==="absolute"&&(Je="scrollHeight",Qe="scrollWidth")),We=We,Me===top||(Me===left||Me===right)&&Ie===end){He=bottom;var fi=Ae&&We===Ue&&Ue.visualViewport?Ue.visualViewport.height:We[Je];Re-=fi-Ce.height,Re*=_e?1:-1}if(Me===left||(Me===top||Me===bottom)&&Ie===end){Be=right;var oi=Ae&&We===Ue&&Ue.visualViewport?Ue.visualViewport.width:We[Qe];St-=oi-Ce.width,St*=_e?1:-1}}var ii=Object.assign({position:Oe},xe&&unsetSides),li=Pe===!0?roundOffsetsByDPR({x:St,y:Re}):{x:St,y:Re};if(St=li.x,Re=li.y,_e){var bi;return Object.assign({},ii,(bi={},bi[He]=De?"0":"",bi[Be]=ke?"0":"",bi.transform=(Ue.devicePixelRatio||1)<=1?"translate("+St+"px, "+Re+"px)":"translate3d("+St+"px, "+Re+"px, 0)",bi))}return Object.assign({},ii,(t={},t[He]=De?Re+"px":"",t[Be]=ke?St+"px":"",t.transform="",t))}function computeStyles(e){var t=e.state,r=e.options,Ce=r.gpuAcceleration,Me=Ce===void 0?!0:Ce,Ie=r.adaptive,Fe=Ie===void 0?!0:Ie,Oe=r.roundOffsets,_e=Oe===void 0?!0:Oe,xe={placement:getBasePlacement(t.placement),variation:getVariation(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:Me,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mapToStyles(Object.assign({},xe,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:Fe,roundOffsets:_e})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mapToStyles(Object.assign({},xe,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_e})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(e){var t=e.state,r=e.instance,Ce=e.options,Me=Ce.scroll,Ie=Me===void 0?!0:Me,Fe=Ce.resize,Oe=Fe===void 0?!0:Fe,_e=getWindow(t.elements.popper),xe=[].concat(t.scrollParents.reference,t.scrollParents.popper);return Ie&&xe.forEach(function(Pe){Pe.addEventListener("scroll",r.update,passive)}),Oe&&_e.addEventListener("resize",r.update,passive),function(){Ie&&xe.forEach(function(Pe){Pe.removeEventListener("scroll",r.update,passive)}),Oe&&_e.removeEventListener("resize",r.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,function(t){return hash$1[t]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(e){return e.replace(/start|end/g,function(t){return hash[t]})}function getWindowScroll(e){var t=getWindow(e),r=t.pageXOffset,Ce=t.pageYOffset;return{scrollLeft:r,scrollTop:Ce}}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getWindowScroll(e).scrollLeft}function getViewportRect(e,t){var r=getWindow(e),Ce=getDocumentElement(e),Me=r.visualViewport,Ie=Ce.clientWidth,Fe=Ce.clientHeight,Oe=0,_e=0;if(Me){Ie=Me.width,Fe=Me.height;var xe=isLayoutViewport();(xe||!xe&&t==="fixed")&&(Oe=Me.offsetLeft,_e=Me.offsetTop)}return{width:Ie,height:Fe,x:Oe+getWindowScrollBarX(e),y:_e}}function getDocumentRect(e){var t,r=getDocumentElement(e),Ce=getWindowScroll(e),Me=(t=e.ownerDocument)==null?void 0:t.body,Ie=max$1(r.scrollWidth,r.clientWidth,Me?Me.scrollWidth:0,Me?Me.clientWidth:0),Fe=max$1(r.scrollHeight,r.clientHeight,Me?Me.scrollHeight:0,Me?Me.clientHeight:0),Oe=-Ce.scrollLeft+getWindowScrollBarX(e),_e=-Ce.scrollTop;return getComputedStyle$1(Me||r).direction==="rtl"&&(Oe+=max$1(r.clientWidth,Me?Me.clientWidth:0)-Ie),{width:Ie,height:Fe,x:Oe,y:_e}}function isScrollParent(e){var t=getComputedStyle$1(e),r=t.overflow,Ce=t.overflowX,Me=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+Me+Ce)}function getScrollParent(e){return["html","body","#document"].indexOf(getNodeName(e))>=0?e.ownerDocument.body:isHTMLElement(e)&&isScrollParent(e)?e:getScrollParent(getParentNode(e))}function listScrollParents(e,t){var r;t===void 0&&(t=[]);var Ce=getScrollParent(e),Me=Ce===((r=e.ownerDocument)==null?void 0:r.body),Ie=getWindow(Ce),Fe=Me?[Ie].concat(Ie.visualViewport||[],isScrollParent(Ce)?Ce:[]):Ce,Oe=t.concat(Fe);return Me?Oe:Oe.concat(listScrollParents(getParentNode(Fe)))}function rectToClientRect(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function getInnerBoundingClientRect(e,t){var r=getBoundingClientRect(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(e,t,r){return t===viewport?rectToClientRect(getViewportRect(e,r)):isElement$1(t)?getInnerBoundingClientRect(t,r):rectToClientRect(getDocumentRect(getDocumentElement(e)))}function getClippingParents(e){var t=listScrollParents(getParentNode(e)),r=["absolute","fixed"].indexOf(getComputedStyle$1(e).position)>=0,Ce=r&&isHTMLElement(e)?getOffsetParent(e):e;return isElement$1(Ce)?t.filter(function(Me){return isElement$1(Me)&&contains(Me,Ce)&&getNodeName(Me)!=="body"}):[]}function getClippingRect(e,t,r,Ce){var Me=t==="clippingParents"?getClippingParents(e):[].concat(t),Ie=[].concat(Me,[r]),Fe=Ie[0],Oe=Ie.reduce(function(_e,xe){var Pe=getClientRectFromMixedType(e,xe,Ce);return _e.top=max$1(Pe.top,_e.top),_e.right=min(Pe.right,_e.right),_e.bottom=min(Pe.bottom,_e.bottom),_e.left=max$1(Pe.left,_e.left),_e},getClientRectFromMixedType(e,Fe,Ce));return Oe.width=Oe.right-Oe.left,Oe.height=Oe.bottom-Oe.top,Oe.x=Oe.left,Oe.y=Oe.top,Oe}function computeOffsets(e){var t=e.reference,r=e.element,Ce=e.placement,Me=Ce?getBasePlacement(Ce):null,Ie=Ce?getVariation(Ce):null,Fe=t.x+t.width/2-r.width/2,Oe=t.y+t.height/2-r.height/2,_e;switch(Me){case top:_e={x:Fe,y:t.y-r.height};break;case bottom:_e={x:Fe,y:t.y+t.height};break;case right:_e={x:t.x+t.width,y:Oe};break;case left:_e={x:t.x-r.width,y:Oe};break;default:_e={x:t.x,y:t.y}}var xe=Me?getMainAxisFromPlacement(Me):null;if(xe!=null){var Pe=xe==="y"?"height":"width";switch(Ie){case start:_e[xe]=_e[xe]-(t[Pe]/2-r[Pe]/2);break;case end:_e[xe]=_e[xe]+(t[Pe]/2-r[Pe]/2);break}}return _e}function detectOverflow(e,t){t===void 0&&(t={});var r=t,Ce=r.placement,Me=Ce===void 0?e.placement:Ce,Ie=r.strategy,Fe=Ie===void 0?e.strategy:Ie,Oe=r.boundary,_e=Oe===void 0?clippingParents:Oe,xe=r.rootBoundary,Pe=xe===void 0?viewport:xe,Ae=r.elementContext,Se=Ae===void 0?popper:Ae,St=r.altBoundary,Te=St===void 0?!1:St,Re=r.padding,Ee=Re===void 0?0:Re,ke=mergePaddingObject(typeof Ee!="number"?Ee:expandToHashMap(Ee,basePlacements)),De=Se===popper?reference:popper,Be=e.rects.popper,He=e.elements[Te?De:Se],Ue=getClippingRect(isElement$1(He)?He:He.contextElement||getDocumentElement(e.elements.popper),_e,Pe,Fe),We=getBoundingClientRect(e.elements.reference),Je=computeOffsets({reference:We,element:Be,strategy:"absolute",placement:Me}),Qe=rectToClientRect(Object.assign({},Be,Je)),fi=Se===popper?Qe:We,oi={top:Ue.top-fi.top+ke.top,bottom:fi.bottom-Ue.bottom+ke.bottom,left:Ue.left-fi.left+ke.left,right:fi.right-Ue.right+ke.right},ii=e.modifiersData.offset;if(Se===popper&&ii){var li=ii[Me];Object.keys(oi).forEach(function(bi){var mi=[right,bottom].indexOf(bi)>=0?1:-1,Si=[top,bottom].indexOf(bi)>=0?"y":"x";oi[bi]+=li[Si]*mi})}return oi}function computeAutoPlacement(e,t){t===void 0&&(t={});var r=t,Ce=r.placement,Me=r.boundary,Ie=r.rootBoundary,Fe=r.padding,Oe=r.flipVariations,_e=r.allowedAutoPlacements,xe=_e===void 0?placements:_e,Pe=getVariation(Ce),Ae=Pe?Oe?variationPlacements:variationPlacements.filter(function(Te){return getVariation(Te)===Pe}):basePlacements,Se=Ae.filter(function(Te){return xe.indexOf(Te)>=0});Se.length===0&&(Se=Ae);var St=Se.reduce(function(Te,Re){return Te[Re]=detectOverflow(e,{placement:Re,boundary:Me,rootBoundary:Ie,padding:Fe})[getBasePlacement(Re)],Te},{});return Object.keys(St).sort(function(Te,Re){return St[Te]-St[Re]})}function getExpandedFallbackPlacements(e){if(getBasePlacement(e)===auto)return[];var t=getOppositePlacement(e);return[getOppositeVariationPlacement(e),t,getOppositeVariationPlacement(t)]}function flip(e){var t=e.state,r=e.options,Ce=e.name;if(!t.modifiersData[Ce]._skip){for(var Me=r.mainAxis,Ie=Me===void 0?!0:Me,Fe=r.altAxis,Oe=Fe===void 0?!0:Fe,_e=r.fallbackPlacements,xe=r.padding,Pe=r.boundary,Ae=r.rootBoundary,Se=r.altBoundary,St=r.flipVariations,Te=St===void 0?!0:St,Re=r.allowedAutoPlacements,Ee=t.options.placement,ke=getBasePlacement(Ee),De=ke===Ee,Be=_e||(De||!Te?[getOppositePlacement(Ee)]:getExpandedFallbackPlacements(Ee)),He=[Ee].concat(Be).reduce(function(ze,qe){return ze.concat(getBasePlacement(qe)===auto?computeAutoPlacement(t,{placement:qe,boundary:Pe,rootBoundary:Ae,padding:xe,flipVariations:Te,allowedAutoPlacements:Re}):qe)},[]),Ue=t.rects.reference,We=t.rects.popper,Je=new Map,Qe=!0,fi=He[0],oi=0;oi<He.length;oi++){var ii=He[oi],li=getBasePlacement(ii),bi=getVariation(ii)===start,mi=[top,bottom].indexOf(li)>=0,Si=mi?"width":"height",_i=detectOverflow(t,{placement:ii,boundary:Pe,rootBoundary:Ae,altBoundary:Se,padding:xe}),xi=mi?bi?right:left:bi?bottom:top;Ue[Si]>We[Si]&&(xi=getOppositePlacement(xi));var Ei=getOppositePlacement(xi),ri=[];if(Ie&&ri.push(_i[li]<=0),Oe&&ri.push(_i[xi]<=0,_i[Ei]<=0),ri.every(function(ze){return ze})){fi=ii,Qe=!1;break}Je.set(ii,ri)}if(Qe)for(var vi=Te?3:1,Ci=function(qe){var ei=He.find(function(ni){var ci=Je.get(ni);if(ci)return ci.slice(0,qe).every(function(di){return di})});if(ei)return fi=ei,"break"},$e=vi;$e>0;$e--){var Ge=Ci($e);if(Ge==="break")break}t.placement!==fi&&(t.modifiersData[Ce]._skip=!0,t.placement=fi,t.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function isAnySideFullyClipped(e){return[top,right,bottom,left].some(function(t){return e[t]>=0})}function hide(e){var t=e.state,r=e.name,Ce=t.rects.reference,Me=t.rects.popper,Ie=t.modifiersData.preventOverflow,Fe=detectOverflow(t,{elementContext:"reference"}),Oe=detectOverflow(t,{altBoundary:!0}),_e=getSideOffsets(Fe,Ce),xe=getSideOffsets(Oe,Me,Ie),Pe=isAnySideFullyClipped(_e),Ae=isAnySideFullyClipped(xe);t.modifiersData[r]={referenceClippingOffsets:_e,popperEscapeOffsets:xe,isReferenceHidden:Pe,hasPopperEscaped:Ae},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":Pe,"data-popper-escaped":Ae})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(e,t,r){var Ce=getBasePlacement(e),Me=[left,top].indexOf(Ce)>=0?-1:1,Ie=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,Fe=Ie[0],Oe=Ie[1];return Fe=Fe||0,Oe=(Oe||0)*Me,[left,right].indexOf(Ce)>=0?{x:Oe,y:Fe}:{x:Fe,y:Oe}}function offset(e){var t=e.state,r=e.options,Ce=e.name,Me=r.offset,Ie=Me===void 0?[0,0]:Me,Fe=placements.reduce(function(Pe,Ae){return Pe[Ae]=distanceAndSkiddingToXY(Ae,t.rects,Ie),Pe},{}),Oe=Fe[t.placement],_e=Oe.x,xe=Oe.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=_e,t.modifiersData.popperOffsets.y+=xe),t.modifiersData[Ce]=Fe}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(e){var t=e.state,r=e.name;t.modifiersData[r]=computeOffsets({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(e){return e==="x"?"y":"x"}function preventOverflow(e){var t=e.state,r=e.options,Ce=e.name,Me=r.mainAxis,Ie=Me===void 0?!0:Me,Fe=r.altAxis,Oe=Fe===void 0?!1:Fe,_e=r.boundary,xe=r.rootBoundary,Pe=r.altBoundary,Ae=r.padding,Se=r.tether,St=Se===void 0?!0:Se,Te=r.tetherOffset,Re=Te===void 0?0:Te,Ee=detectOverflow(t,{boundary:_e,rootBoundary:xe,padding:Ae,altBoundary:Pe}),ke=getBasePlacement(t.placement),De=getVariation(t.placement),Be=!De,He=getMainAxisFromPlacement(ke),Ue=getAltAxis(He),We=t.modifiersData.popperOffsets,Je=t.rects.reference,Qe=t.rects.popper,fi=typeof Re=="function"?Re(Object.assign({},t.rects,{placement:t.placement})):Re,oi=typeof fi=="number"?{mainAxis:fi,altAxis:fi}:Object.assign({mainAxis:0,altAxis:0},fi),ii=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,li={x:0,y:0};if(!!We){if(Ie){var bi,mi=He==="y"?top:left,Si=He==="y"?bottom:right,_i=He==="y"?"height":"width",xi=We[He],Ei=xi+Ee[mi],ri=xi-Ee[Si],vi=St?-Qe[_i]/2:0,Ci=De===start?Je[_i]:Qe[_i],$e=De===start?-Qe[_i]:-Je[_i],Ge=t.elements.arrow,ze=St&&Ge?getLayoutRect(Ge):{width:0,height:0},qe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:getFreshSideObject(),ei=qe[mi],ni=qe[Si],ci=within(0,Je[_i],ze[_i]),di=Be?Je[_i]/2-vi-ci-ei-oi.mainAxis:Ci-ci-ei-oi.mainAxis,Ti=Be?-Je[_i]/2+vi+ci+ni+oi.mainAxis:$e+ci+ni+oi.mainAxis,Ni=t.elements.arrow&&getOffsetParent(t.elements.arrow),si=Ni?He==="y"?Ni.clientTop||0:Ni.clientLeft||0:0,ai=(bi=ii==null?void 0:ii[He])!=null?bi:0,Ye=xi+di-ai-si,Ze=xi+Ti-ai,Xe=within(St?min(Ei,Ye):Ei,xi,St?max$1(ri,Ze):ri);We[He]=Xe,li[He]=Xe-xi}if(Oe){var ui,pi=He==="x"?top:left,gi=He==="x"?bottom:right,Li=We[Ue],Ri=Ue==="y"?"height":"width",wi=Li+Ee[pi],Vi=Li-Ee[gi],Mi=[top,left].indexOf(ke)!==-1,qi=(ui=ii==null?void 0:ii[Ue])!=null?ui:0,Xi=Mi?wi:Li-Je[Ri]-Qe[Ri]-qi+oi.altAxis,Zi=Mi?Li+Je[Ri]+Qe[Ri]-qi-oi.altAxis:Vi,ji=St&&Mi?withinMaxClamp(Xi,Li,Zi):within(St?Xi:wi,Li,St?Zi:Vi);We[Ue]=ji,li[Ue]=ji-Li}t.modifiersData[Ce]=li}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function getNodeScroll(e){return e===getWindow(e)||!isHTMLElement(e)?getWindowScroll(e):getHTMLElementScroll(e)}function isElementScaled(e){var t=e.getBoundingClientRect(),r=round(t.width)/e.offsetWidth||1,Ce=round(t.height)/e.offsetHeight||1;return r!==1||Ce!==1}function getCompositeRect(e,t,r){r===void 0&&(r=!1);var Ce=isHTMLElement(t),Me=isHTMLElement(t)&&isElementScaled(t),Ie=getDocumentElement(t),Fe=getBoundingClientRect(e,Me,r),Oe={scrollLeft:0,scrollTop:0},_e={x:0,y:0};return(Ce||!Ce&&!r)&&((getNodeName(t)!=="body"||isScrollParent(Ie))&&(Oe=getNodeScroll(t)),isHTMLElement(t)?(_e=getBoundingClientRect(t,!0),_e.x+=t.clientLeft,_e.y+=t.clientTop):Ie&&(_e.x=getWindowScrollBarX(Ie))),{x:Fe.left+Oe.scrollLeft-_e.x,y:Fe.top+Oe.scrollTop-_e.y,width:Fe.width,height:Fe.height}}function order(e){var t=new Map,r=new Set,Ce=[];e.forEach(function(Ie){t.set(Ie.name,Ie)});function Me(Ie){r.add(Ie.name);var Fe=[].concat(Ie.requires||[],Ie.requiresIfExists||[]);Fe.forEach(function(Oe){if(!r.has(Oe)){var _e=t.get(Oe);_e&&Me(_e)}}),Ce.push(Ie)}return e.forEach(function(Ie){r.has(Ie.name)||Me(Ie)}),Ce}function orderModifiers(e){var t=order(e);return modifierPhases.reduce(function(r,Ce){return r.concat(t.filter(function(Me){return Me.phase===Ce}))},[])}function debounce(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function mergeByName(e){var t=e.reduce(function(r,Ce){var Me=r[Ce.name];return r[Ce.name]=Me?Object.assign({},Me,Ce,{options:Object.assign({},Me.options,Ce.options),data:Object.assign({},Me.data,Ce.data)}):Ce,r},{});return Object.keys(t).map(function(r){return t[r]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(Ce){return!(Ce&&typeof Ce.getBoundingClientRect=="function")})}function popperGenerator(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,Ce=r===void 0?[]:r,Me=t.defaultOptions,Ie=Me===void 0?DEFAULT_OPTIONS:Me;return function(Oe,_e,xe){xe===void 0&&(xe=Ie);var Pe={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,Ie),modifiersData:{},elements:{reference:Oe,popper:_e},attributes:{},styles:{}},Ae=[],Se=!1,St={state:Pe,setOptions:function(ke){var De=typeof ke=="function"?ke(Pe.options):ke;Re(),Pe.options=Object.assign({},Ie,Pe.options,De),Pe.scrollParents={reference:isElement$1(Oe)?listScrollParents(Oe):Oe.contextElement?listScrollParents(Oe.contextElement):[],popper:listScrollParents(_e)};var Be=orderModifiers(mergeByName([].concat(Ce,Pe.options.modifiers)));return Pe.orderedModifiers=Be.filter(function(He){return He.enabled}),Te(),St.update()},forceUpdate:function(){if(!Se){var ke=Pe.elements,De=ke.reference,Be=ke.popper;if(!!areValidElements(De,Be)){Pe.rects={reference:getCompositeRect(De,getOffsetParent(Be),Pe.options.strategy==="fixed"),popper:getLayoutRect(Be)},Pe.reset=!1,Pe.placement=Pe.options.placement,Pe.orderedModifiers.forEach(function(oi){return Pe.modifiersData[oi.name]=Object.assign({},oi.data)});for(var He=0;He<Pe.orderedModifiers.length;He++){if(Pe.reset===!0){Pe.reset=!1,He=-1;continue}var Ue=Pe.orderedModifiers[He],We=Ue.fn,Je=Ue.options,Qe=Je===void 0?{}:Je,fi=Ue.name;typeof We=="function"&&(Pe=We({state:Pe,options:Qe,name:fi,instance:St})||Pe)}}}},update:debounce(function(){return new Promise(function(Ee){St.forceUpdate(),Ee(Pe)})}),destroy:function(){Re(),Se=!0}};if(!areValidElements(Oe,_e))return St;St.setOptions(xe).then(function(Ee){!Se&&xe.onFirstUpdate&&xe.onFirstUpdate(Ee)});function Te(){Pe.orderedModifiers.forEach(function(Ee){var ke=Ee.name,De=Ee.options,Be=De===void 0?{}:De,He=Ee.effect;if(typeof He=="function"){var Ue=He({state:Pe,name:ke,instance:St,options:Be}),We=function(){};Ae.push(Ue||We)}})}function Re(){Ae.forEach(function(Ee){return Ee()}),Ae=[]}return St}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator,detectOverflow,createPopperBase:createPopper$2,createPopper,createPopperLite:createPopper$1,top,bottom,right,left,auto,basePlacements,start,end,clippingParents,viewport,popper,reference,variationPlacements,placements,beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite,modifierPhases,applyStyles:applyStyles$1,arrow:arrow$1,computeStyles:computeStyles$1,eventListeners,flip:flip$1,hide:hide$1,offset:offset$1,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.2 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",toType=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=e=>{do e+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(e));return e},getSelector=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t},getSelectorFromElement=e=>{const t=getSelector(e);return t&&document.querySelector(t)?t:null},getElementFromSelector=e=>{const t=getSelector(e);return t?document.querySelector(t):null},getTransitionDurationFromElement=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const Ce=Number.parseFloat(t),Me=Number.parseFloat(r);return!Ce&&!Me?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=e=>{e.dispatchEvent(new Event(TRANSITION_END))},isElement=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),getElement=e=>isElement(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(e):null,isVisible=e=>{if(!isElement(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){const Ce=e.closest("summary");if(Ce&&Ce.parentNode!==r||Ce===null)return!1}return t},isDisabled=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",findShadowRoot=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?findShadowRoot(e.parentNode):null},noop$1=()=>{},reflow=e=>{e.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=e=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of DOMContentLoadedCallbacks)t()}),DOMContentLoadedCallbacks.push(e)):e()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=e=>{onDOMContentLoaded(()=>{const t=getjQuery();if(t){const r=e.NAME,Ce=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=Ce,e.jQueryInterface)}})},execute=e=>{typeof e=="function"&&e()},executeAfterTransition=(e,t,r=!0)=>{if(!r){execute(e);return}const Ce=5,Me=getTransitionDurationFromElement(t)+Ce;let Ie=!1;const Fe=({target:Oe})=>{Oe===t&&(Ie=!0,t.removeEventListener(TRANSITION_END,Fe),execute(e))};t.addEventListener(TRANSITION_END,Fe),setTimeout(()=>{Ie||triggerTransitionEnd(t)},Me)},getNextActiveElement=(e,t,r,Ce)=>{const Me=e.length;let Ie=e.indexOf(t);return Ie===-1?!r&&Ce?e[Me-1]:e[0]:(Ie+=r?1:-1,Ce&&(Ie=(Ie+Me)%Me),e[Math.max(0,Math.min(Ie,Me-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(e,t){return t&&`${t}::${uidEvent++}`||e.uidEvent||uidEvent++}function getElementEvents(e){const t=makeEventUid(e);return e.uidEvent=t,eventRegistry[t]=eventRegistry[t]||{},eventRegistry[t]}function bootstrapHandler(e,t){return function r(Ce){return hydrateObj(Ce,{delegateTarget:e}),r.oneOff&&EventHandler.off(e,Ce.type,t),t.apply(e,[Ce])}}function bootstrapDelegationHandler(e,t,r){return function Ce(Me){const Ie=e.querySelectorAll(t);for(let{target:Fe}=Me;Fe&&Fe!==this;Fe=Fe.parentNode)for(const Oe of Ie)if(Oe===Fe)return hydrateObj(Me,{delegateTarget:Fe}),Ce.oneOff&&EventHandler.off(e,Me.type,t,r),r.apply(Fe,[Me])}}function findHandler(e,t,r=null){return Object.values(e).find(Ce=>Ce.callable===t&&Ce.delegationSelector===r)}function normalizeParameters(e,t,r){const Ce=typeof t=="string",Me=Ce?r:t||r;let Ie=getTypeEvent(e);return nativeEvents.has(Ie)||(Ie=e),[Ce,Me,Ie]}function addHandler(e,t,r,Ce,Me){if(typeof t!="string"||!e)return;let[Ie,Fe,Oe]=normalizeParameters(t,r,Ce);t in customEvents&&(Fe=(Te=>function(Re){if(!Re.relatedTarget||Re.relatedTarget!==Re.delegateTarget&&!Re.delegateTarget.contains(Re.relatedTarget))return Te.call(this,Re)})(Fe));const _e=getElementEvents(e),xe=_e[Oe]||(_e[Oe]={}),Pe=findHandler(xe,Fe,Ie?r:null);if(Pe){Pe.oneOff=Pe.oneOff&&Me;return}const Ae=makeEventUid(Fe,t.replace(namespaceRegex,"")),Se=Ie?bootstrapDelegationHandler(e,r,Fe):bootstrapHandler(e,Fe);Se.delegationSelector=Ie?r:null,Se.callable=Fe,Se.oneOff=Me,Se.uidEvent=Ae,xe[Ae]=Se,e.addEventListener(Oe,Se,Ie)}function removeHandler(e,t,r,Ce,Me){const Ie=findHandler(t[r],Ce,Me);!Ie||(e.removeEventListener(r,Ie,Boolean(Me)),delete t[r][Ie.uidEvent])}function removeNamespacedHandlers(e,t,r,Ce){const Me=t[r]||{};for(const Ie of Object.keys(Me))if(Ie.includes(Ce)){const Fe=Me[Ie];removeHandler(e,t,r,Fe.callable,Fe.delegationSelector)}}function getTypeEvent(e){return e=e.replace(stripNameRegex,""),customEvents[e]||e}const EventHandler={on(e,t,r,Ce){addHandler(e,t,r,Ce,!1)},one(e,t,r,Ce){addHandler(e,t,r,Ce,!0)},off(e,t,r,Ce){if(typeof t!="string"||!e)return;const[Me,Ie,Fe]=normalizeParameters(t,r,Ce),Oe=Fe!==t,_e=getElementEvents(e),xe=_e[Fe]||{},Pe=t.startsWith(".");if(typeof Ie<"u"){if(!Object.keys(xe).length)return;removeHandler(e,_e,Fe,Ie,Me?r:null);return}if(Pe)for(const Ae of Object.keys(_e))removeNamespacedHandlers(e,_e,Ae,t.slice(1));for(const Ae of Object.keys(xe)){const Se=Ae.replace(stripUidRegex,"");if(!Oe||t.includes(Se)){const St=xe[Ae];removeHandler(e,_e,Fe,St.callable,St.delegationSelector)}}},trigger(e,t,r){if(typeof t!="string"||!e)return null;const Ce=getjQuery(),Me=getTypeEvent(t),Ie=t!==Me;let Fe=null,Oe=!0,_e=!0,xe=!1;Ie&&Ce&&(Fe=Ce.Event(t,r),Ce(e).trigger(Fe),Oe=!Fe.isPropagationStopped(),_e=!Fe.isImmediatePropagationStopped(),xe=Fe.isDefaultPrevented());let Pe=new Event(t,{bubbles:Oe,cancelable:!0});return Pe=hydrateObj(Pe,r),xe&&Pe.preventDefault(),_e&&e.dispatchEvent(Pe),Pe.defaultPrevented&&Fe&&Fe.preventDefault(),Pe}};function hydrateObj(e,t){for(const[r,Ce]of Object.entries(t||{}))try{e[r]=Ce}catch{Object.defineProperty(e,r,{configurable:!0,get(){return Ce}})}return e}const elementMap=new Map,Data={set(e,t,r){elementMap.has(e)||elementMap.set(e,new Map);const Ce=elementMap.get(e);if(!Ce.has(t)&&Ce.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Ce.keys())[0]}.`);return}Ce.set(t,r)},get(e,t){return elementMap.has(e)&&elementMap.get(e).get(t)||null},remove(e,t){if(!elementMap.has(e))return;const r=elementMap.get(e);r.delete(t),r.size===0&&elementMap.delete(e)}};function normalizeData(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function normalizeDataKey(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Manipulator={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${normalizeDataKey(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${normalizeDataKey(t)}`)},getDataAttributes(e){if(!e)return{};const t={},r=Object.keys(e.dataset).filter(Ce=>Ce.startsWith("bs")&&!Ce.startsWith("bsConfig"));for(const Ce of r){let Me=Ce.replace(/^bs/,"");Me=Me.charAt(0).toLowerCase()+Me.slice(1,Me.length),t[Me]=normalizeData(e.dataset[Ce])}return t},getDataAttribute(e,t){return normalizeData(e.getAttribute(`data-bs-${normalizeDataKey(t)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){const Ce=isElement(r)?Manipulator.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof Ce=="object"?Ce:{},...isElement(r)?Manipulator.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(const Ce of Object.keys(r)){const Me=r[Ce],Ie=t[Ce],Fe=isElement(Ie)?"element":toType(Ie);if(!new RegExp(Me).test(Fe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ce}" provided type "${Fe}" but expected type "${Me}".`)}}}const VERSION="5.2.2";class BaseComponent extends Config{constructor(t,r){super(),t=getElement(t),t&&(this._element=t,this._config=this._getConfig(r),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,Ce=!0){executeAfterTransition(t,r,Ce)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Data.get(getElement(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return VERSION}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const enableDismissTrigger=(e,t="hide")=>{const r=`click.dismiss${e.EVENT_KEY}`,Ce=e.NAME;EventHandler.on(document,r,`[data-bs-dismiss="${Ce}"]`,function(Me){if(["A","AREA"].includes(this.tagName)&&Me.preventDefault(),isDisabled(this))return;const Ie=getElementFromSelector(this)||this.closest(`.${Ce}`);e.getOrCreateInstance(Ie)[t]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const r=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(t){return this.each(function(){const r=Alert.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(t){return this.each(function(){const r=Button.getOrCreateInstance(this);t==="toggle"&&r[t]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,e=>{e.preventDefault();const t=e.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(t).toggle()});defineJQueryPlugin(Button);const SelectorEngine={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){const r=[];let Ce=e.parentNode.closest(t);for(;Ce;)r.push(Ce),Ce=Ce.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!isDisabled(r)&&isVisible(r))}},NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(t,r){super(),this._element=t,!(!t||!Swipe.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=SWIPE_THRESHOLD)return;const r=t/this._deltaX;this._deltaX=0,r&&execute(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,t=>this._start(t)),EventHandler.on(this._element,EVENT_POINTERUP,t=>this._end(t)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,t=>this._start(t)),EventHandler.on(this._element,EVENT_TOUCHMOVE,t=>this._move(t)),EventHandler.on(this._element,EVENT_TOUCHEND,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===POINTER_TYPE_PEN||t.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(t){const r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(t));return}const Ce=this._getItemIndex(this._getActive());if(Ce===t)return;const Me=t>Ce?ORDER_NEXT:ORDER_PREV;this._slide(Me,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,t=>this._keydown(t)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const Ce of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(Ce,EVENT_DRAG_START,Me=>Me.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const r=KEY_TO_DIRECTION[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const r=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);r.classList.remove(CLASS_NAME_ACTIVE$2),r.removeAttribute("aria-current");const Ce=SelectorEngine.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);Ce&&(Ce.classList.add(CLASS_NAME_ACTIVE$2),Ce.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;const Ce=this._getActive(),Me=t===ORDER_NEXT,Ie=r||getNextActiveElement(this._getItems(),Ce,Me,this._config.wrap);if(Ie===Ce)return;const Fe=this._getItemIndex(Ie),Oe=St=>EventHandler.trigger(this._element,St,{relatedTarget:Ie,direction:this._orderToDirection(t),from:this._getItemIndex(Ce),to:Fe});if(Oe(EVENT_SLIDE).defaultPrevented||!Ce||!Ie)return;const xe=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Fe),this._activeElement=Ie;const Pe=Me?CLASS_NAME_START:CLASS_NAME_END,Ae=Me?CLASS_NAME_NEXT:CLASS_NAME_PREV;Ie.classList.add(Ae),reflow(Ie),Ce.classList.add(Pe),Ie.classList.add(Pe);const Se=()=>{Ie.classList.remove(Pe,Ae),Ie.classList.add(CLASS_NAME_ACTIVE$2),Ce.classList.remove(CLASS_NAME_ACTIVE$2,Ae,Pe),this._isSliding=!1,Oe(EVENT_SLID)};this._queueCallback(Se,Ce,this._isAnimated()),xe&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return isRTL()?t===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:t===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(t){return isRTL()?t===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:t===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(t){return this.each(function(){const r=Carousel.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(e){const t=getElementFromSelector(this);if(!t||!t.classList.contains(CLASS_NAME_CAROUSEL))return;e.preventDefault();const r=Carousel.getOrCreateInstance(t),Ce=this.getAttribute("data-bs-slide-to");if(Ce){r.to(Ce),r._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const e=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const t of e)Carousel.getOrCreateInstance(t)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];const Ce=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const Me of Ce){const Ie=getSelectorFromElement(Me),Fe=SelectorEngine.find(Ie).filter(Oe=>Oe===this._element);Ie!==null&&Fe.length&&this._triggerArray.push(Me)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(Oe=>Oe!==this._element).map(Oe=>Collapse.getOrCreateInstance(Oe,{toggle:!1}))),t.length&&t[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const Oe of t)Oe.hide();const Ce=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[Ce]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Me=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[Ce]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},Fe=`scroll${Ce[0].toUpperCase()+Ce.slice(1)}`;this._queueCallback(Me,this._element,!0),this._element.style[Ce]=`${this._element[Fe]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const Me of this._triggerArray){const Ie=getElementFromSelector(Me);Ie&&!this._isShown(Ie)&&this._addAriaAndCollapsedClass([Me],!1)}this._isTransitioning=!0;const Ce=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[r]="",this._queueCallback(Ce,this._element,!0)}_isShown(t=this._element){return t.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=getElement(t.parent),t}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const r of t){const Ce=getElementFromSelector(r);Ce&&this._addAriaAndCollapsedClass([r],this._isShown(Ce))}}_getFirstLevelChildren(t){const r=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(t,this._config.parent).filter(Ce=>!r.includes(Ce))}_addAriaAndCollapsedClass(t,r){if(!!t.length)for(const Ce of t)Ce.classList.toggle(CLASS_NAME_COLLAPSED,!r),Ce.setAttribute("aria-expanded",r)}static jQueryInterface(t){const r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){const Ce=Collapse.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof Ce[t]>"u")throw new TypeError(`No method named "${t}"`);Ce[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();const t=getSelectorFromElement(this),r=SelectorEngine.find(t);for(const Ce of r)Collapse.getOrCreateInstance(Ce,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const Ce of[].concat(...document.body.children))EventHandler.on(Ce,"mouseover",noop$1);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,t)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const Ce of[].concat(...document.body.children))EventHandler.off(Ce,"mouseover",noop$1);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!isElement(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:isElement(this._config.reference)?t=getElement(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const r=this._getPopperConfig();this._popper=createPopper(t,this._menu,r)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const t=this._parent;if(t.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(t.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(t.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(t.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(CLASS_NAME_DROPUP)?r?PLACEMENT_TOPEND:PLACEMENT_TOP:r?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:r}){const Ce=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(Me=>isVisible(Me));!Ce.length||getNextActiveElement(Ce,r,t===ARROW_DOWN_KEY$1,!Ce.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){const r=Dropdown.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===RIGHT_MOUSE_BUTTON||t.type==="keyup"&&t.key!==TAB_KEY$1)return;const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const Ce of r){const Me=Dropdown.getInstance(Ce);if(!Me||Me._config.autoClose===!1)continue;const Ie=t.composedPath(),Fe=Ie.includes(Me._menu);if(Ie.includes(Me._element)||Me._config.autoClose==="inside"&&!Fe||Me._config.autoClose==="outside"&&Fe||Me._menu.contains(t.target)&&(t.type==="keyup"&&t.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const Oe={relatedTarget:Me._element};t.type==="click"&&(Oe.clickEvent=t),Me._completeHide(Oe)}}static dataApiKeydownHandler(t){const r=/input|textarea/i.test(t.target.tagName),Ce=t.key===ESCAPE_KEY$2,Me=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(t.key);if(!Me&&!Ce||r&&!Ce)return;t.preventDefault();const Ie=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,t.delegateTarget.parentNode),Fe=Dropdown.getOrCreateInstance(Ie);if(Me){t.stopPropagation(),Fe.show(),Fe._selectMenuItem(t);return}Fe._isShown()&&(t.stopPropagation(),Fe.hide(),Ie.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(e){e.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,r=>r+t),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,r=>r+t),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,Ce){const Me=this.getWidth(),Ie=Fe=>{if(Fe!==this._element&&window.innerWidth>Fe.clientWidth+Me)return;this._saveInitialAttribute(Fe,r);const Oe=window.getComputedStyle(Fe).getPropertyValue(r);Fe.style.setProperty(r,`${Ce(Number.parseFloat(Oe))}px`)};this._applyManipulationCallback(t,Ie)}_saveInitialAttribute(t,r){const Ce=t.style.getPropertyValue(r);Ce&&Manipulator.setDataAttribute(t,r,Ce)}_resetElementAttributes(t,r){const Ce=Me=>{const Ie=Manipulator.getDataAttribute(Me,r);if(Ie===null){Me.style.removeProperty(r);return}Manipulator.removeDataAttribute(Me,r),Me.style.setProperty(r,Ie)};this._applyManipulationCallback(t,Ce)}_applyManipulationCallback(t,r){if(isElement(t)){r(t);return}for(const Ce of SelectorEngine.find(t,this._element))r(Ce)}}const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(t){if(!this._config.isVisible){execute(t);return}this._append();const r=this._getElement();this._config.isAnimated&&reflow(r),r.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(t)})}hide(t){if(!this._config.isVisible){execute(t);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(t)})}dispose(){!this._isAppended||(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(CLASS_NAME_FADE$4),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=getElement(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),EventHandler.on(t,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){executeAfterTransition(t,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,t=>this._handleFocusin(t)),EventHandler.on(document,EVENT_KEYDOWN_TAB,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(t){const{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;const Ce=SelectorEngine.focusableChildren(r);Ce.length===0?r.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?Ce[Ce.length-1].focus():Ce[0].focus()}_handleKeydown(t){t.key===TAB_KEY&&(this._lastTabNavDirection=t.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(t,r){super(t,r),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])EventHandler.off(t,EVENT_KEY$4);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);r&&(r.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const Ce=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:t})};this._queueCallback(Ce,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,t=>{if(t.key===ESCAPE_KEY$1){if(this._config.keyboard){t.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,t=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,Ce=this._element.style.overflowY;Ce==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=Ce},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),Ce=r>0;if(Ce&&!t){const Me=isRTL()?"paddingLeft":"paddingRight";this._element.style[Me]=`${r}px`}if(!Ce&&t){const Me=isRTL()?"paddingRight":"paddingLeft";this._element.style[Me]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){const Ce=Modal.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof Ce[t]>"u")throw new TypeError(`No method named "${t}"`);Ce[t](r)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(e){const t=getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),EventHandler.one(t,EVENT_SHOW$4,Me=>{Me.defaultPrevented||EventHandler.one(t,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const r=SelectorEngine.findOne(OPEN_SELECTOR$1);r&&Modal.getInstance(r).hide(),Modal.getOrCreateInstance(t).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const Ce=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:t})};this._queueCallback(Ce,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const r=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},r=Boolean(this._config.backdrop);return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,t=>{if(t.key===ESCAPE_KEY){if(!this._config.keyboard){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()}})}static jQueryInterface(t){return this.each(function(){const r=Offcanvas.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(e){const t=getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),isDisabled(this))return;EventHandler.one(t,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const r=SelectorEngine.findOne(OPEN_SELECTOR);r&&r!==t&&Offcanvas.getInstance(r).hide(),Offcanvas.getOrCreateInstance(t).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const e of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(e).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const e of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&Offcanvas.getOrCreateInstance(e).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,allowedAttribute=(e,t)=>{const r=e.nodeName.toLowerCase();return t.includes(r)?uriAttributes.has(r)?Boolean(SAFE_URL_PATTERN.test(e.nodeValue)||DATA_URL_PATTERN.test(e.nodeValue)):!0:t.filter(Ce=>Ce instanceof RegExp).some(Ce=>Ce.test(r))},DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function sanitizeHtml(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);const Me=new window.DOMParser().parseFromString(e,"text/html"),Ie=[].concat(...Me.body.querySelectorAll("*"));for(const Fe of Ie){const Oe=Fe.nodeName.toLowerCase();if(!Object.keys(t).includes(Oe)){Fe.remove();continue}const _e=[].concat(...Fe.attributes),xe=[].concat(t["*"]||[],t[Oe]||[]);for(const Pe of _e)allowedAttribute(Pe,xe)||Fe.removeAttribute(Pe.nodeName)}return Me.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[Me,Ie]of Object.entries(this._config.content))this._setContent(t,Ie,Me);const r=t.children[0],Ce=this._resolvePossibleFunction(this._config.extraClass);return Ce&&r.classList.add(...Ce.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[r,Ce]of Object.entries(t))super._typeCheckConfig({selector:r,entry:Ce},DefaultContentType)}_setContent(t,r,Ce){const Me=SelectorEngine.findOne(Ce,t);if(!!Me){if(r=this._resolvePossibleFunction(r),!r){Me.remove();return}if(isElement(r)){this._putElementInTemplate(getElement(r),Me);return}if(this._config.html){Me.innerHTML=this._maybeSanitize(r);return}Me.textContent=r}}_maybeSanitize(t){return this._config.sanitize?sanitizeHtml(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return typeof t=="function"?t(this):t}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(t,r){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this.tip&&this.tip.remove(),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),Ce=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!Ce)return;this.tip&&(this.tip.remove(),this.tip=null);const Me=this._getTipElement();this._element.setAttribute("aria-describedby",Me.getAttribute("id"));const{container:Ie}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ie.append(Me),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper?this._popper.update():this._popper=this._createPopper(Me),Me.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const Oe of[].concat(...document.body.children))EventHandler.on(Oe,"mouseover",noop$1);const Fe=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(Fe,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;const r=this._getTipElement();if(r.classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const Me of[].concat(...document.body.children))EventHandler.off(Me,"mouseover",noop$1);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const Ce=()=>{this._isWithActiveTrigger()||(this._isHovered||r.remove(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)),this._disposePopper())};this._queueCallback(Ce,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),r.classList.add(`bs-${this.constructor.NAME}-auto`);const Ce=getUID(this.constructor.NAME).toString();return r.setAttribute("id",Ce),this._isAnimated()&&r.classList.add(CLASS_NAME_FADE$2),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new TemplateFactory({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(t){const r=typeof this._config.placement=="function"?this._config.placement.call(this,t,this._element):this._config.placement,Ce=AttachmentMap[r.toUpperCase()];return createPopper(this._element,t,this._getPopperConfig(Ce))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return typeof t=="function"?t.call(this._element):t}_getPopperConfig(t){const r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Ce=>{this._getTipElement().setAttribute("data-popper-placement",Ce.state.placement)}}]};return{...r,...typeof this._config.popperConfig=="function"?this._config.popperConfig(r):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const r of t)if(r==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,Ce=>{this._initializeOnDelegatedTarget(Ce).toggle()});else if(r!==TRIGGER_MANUAL){const Ce=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),Me=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,Ce,this._config.selector,Ie=>{const Fe=this._initializeOnDelegatedTarget(Ie);Fe._activeTrigger[Ie.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,Fe._enter()}),EventHandler.on(this._element,Me,this._config.selector,Ie=>{const Fe=this._initializeOnDelegatedTarget(Ie);Fe._activeTrigger[Ie.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=Fe._element.contains(Ie.relatedTarget),Fe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");!t||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const r=Manipulator.getDataAttributes(this._element);for(const Ce of Object.keys(r))DISALLOWED_ATTRIBUTES.has(Ce)&&delete r[Ce];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:getElement(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const r in this._config)this.constructor.Default[r]!==this._config[r]&&(t[r]=this._config[r]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each(function(){const r=Tooltip.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const r=Popover.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=getElement(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,t=>{const r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();const Ce=this._rootElement||window,Me=r.offsetTop-this._element.offsetTop;if(Ce.scrollTo){Ce.scrollTo({top:Me,behavior:"smooth"});return}Ce.scrollTop=Me}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){const r=Fe=>this._targetLinks.get(`#${Fe.target.id}`),Ce=Fe=>{this._previousScrollData.visibleEntryTop=Fe.target.offsetTop,this._process(r(Fe))},Me=(this._rootElement||document.documentElement).scrollTop,Ie=Me>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Me;for(const Fe of t){if(!Fe.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(Fe));continue}const Oe=Fe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Ie&&Oe){if(Ce(Fe),!Me)return;continue}!Ie&&!Oe&&Ce(Fe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const r of t){if(!r.hash||isDisabled(r))continue;const Ce=SelectorEngine.findOne(r.hash,this._element);isVisible(Ce)&&(this._targetLinks.set(r.hash,r),this._observableSections.set(r.hash,Ce))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(t),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,t.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const r of SelectorEngine.parents(t,SELECTOR_NAV_LIST_GROUP))for(const Ce of SelectorEngine.prev(r,SELECTOR_LINK_ITEMS))Ce.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(t){t.classList.remove(CLASS_NAME_ACTIVE$1);const r=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,t);for(const Ce of r)Ce.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(t){return this.each(function(){const r=ScrollSpy.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const e of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(e)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=":not(.dropdown-toggle)",SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(t){super(t),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,r=>this._keydown(r)))}static get NAME(){return NAME$1}show(){const t=this._element;if(this._elemIsActive(t))return;const r=this._getActiveElem(),Ce=r?EventHandler.trigger(r,EVENT_HIDE$1,{relatedTarget:t}):null;EventHandler.trigger(t,EVENT_SHOW$1,{relatedTarget:r}).defaultPrevented||Ce&&Ce.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(CLASS_NAME_ACTIVE),this._activate(getElementFromSelector(t));const Ce=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(CLASS_NAME_SHOW$1);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),EventHandler.trigger(t,EVENT_SHOWN$1,{relatedTarget:r})};this._queueCallback(Ce,t,t.classList.contains(CLASS_NAME_FADE$1))}_deactivate(t,r){if(!t)return;t.classList.remove(CLASS_NAME_ACTIVE),t.blur(),this._deactivate(getElementFromSelector(t));const Ce=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(CLASS_NAME_SHOW$1);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),EventHandler.trigger(t,EVENT_HIDDEN$1,{relatedTarget:r})};this._queueCallback(Ce,t,t.classList.contains(CLASS_NAME_FADE$1))}_keydown(t){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY].includes(t.key))return;t.stopPropagation(),t.preventDefault();const r=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(t.key),Ce=getNextActiveElement(this._getChildren().filter(Me=>!isDisabled(Me)),t.target,r,!0);Ce&&(Ce.focus({preventScroll:!0}),Tab.getOrCreateInstance(Ce).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(const Ce of r)this._setInitialAttributesOnChild(Ce)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const r=this._elemIsActive(t),Ce=this._getOuterElement(t);t.setAttribute("aria-selected",r),Ce!==t&&this._setAttributeIfNotExists(Ce,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const r=getElementFromSelector(t);!r||(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,r){const Ce=this._getOuterElement(t);if(!Ce.classList.contains(CLASS_DROPDOWN))return;const Me=(Ie,Fe)=>{const Oe=SelectorEngine.findOne(Ie,Ce);Oe&&Oe.classList.toggle(Fe,r)};Me(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),Me(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),Ce.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,Ce){t.hasAttribute(r)||t.setAttribute(r,Ce)}_elemIsActive(t){return t.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(t){return t.matches(SELECTOR_INNER_ELEM)?t:SelectorEngine.findOne(SELECTOR_INNER_ELEM,t)}_getOuterElement(t){return t.closest(SELECTOR_OUTER)||t}static jQueryInterface(t){return this.each(function(){const r=Tab.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const e of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(e)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const r=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const r=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const Ce=t.relatedTarget;this._element===Ce||this._element.contains(Ce)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,t=>this._onInteraction(t,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,t=>this._onInteraction(t,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,t=>this._onInteraction(t,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const r=Toast.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const HelloWorld_vue_vue_type_style_index_0_scoped_3e55f4a8_lang="",_export_sfc=(e,t)=>{const r=e.__vccOpts||e;for(const[Ce,Me]of t)r[Ce]=Me;return r},ProgressBar_vue_vue_type_style_index_0_scoped_d18b633f_lang="",_imports_0$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAwCAYAAADuFn/PAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3ISURBVHgB7Vt7bFvVGf/OdZq4aUtdNaOlT2eCMcSqOkkDadlUV0xC2gRJtY3BX3EYpC5ISyJtE+kmxZm0Fu2hppOgabQt7l9M2x912KZpz7ggQSAvdwxBqUTc1yilXd0HjePY9+z3neub2s71KwnqRPyTnHvuued1v+87v+8759wQlVBCCSWUsFgh6DbD7vU4RUL0S5tsifb6w7TIoNFtxHLv024RF+NIuqGEQYfH46BFhtumgMqnn+pKJBKDmIOm0J1T5VoXLTLYaAHg9e7z1G77SuPoyGvH85V1tHscYkvNnyF4j8XjhiXbaq/GR8eHaJFggWaAbBYkfa3effktOELseZzZm5Jd7BdokWDeCvB6f+SW4HBOsxL2eDsneEZkK+9xOGm7WBnM0aRjMfmDgqKg8Q8/dJI+7SKpzRKK/xe/botORl2Z+VKKiBAyhB5CQoqryNoshUQbpMq+K2/SsH4te6dC9Ez2/aaD8qCubnsTemsUgo6OjAwF05819GMMkZGRN7O209DQ4Mz2bGhoKMzXbdsa3DqMzCa0wPDw6yGrsvX19a6EtDVZleExSqk7y8tFwGzTRBnlwPi5cx6pUbPUE241WTLUdT1ynSB8y7p4cVaWGwLHDJFGprz1/D5RSWdFlC7ImGV9aLB9aetTp6GEHsqBpFI9UtAs/4PuPDCEMJJZFRCbpkFcnBaPuF41J3TjPboSQuc8SwXouq0NF49O+k4onsuxDCJlZeJQbFoexI1zOk6N5jNGIkHdlgoYn5hw6BXl/VLKplShZWL01bdoPnBrq+iP+iW6IRPZiuzEr4eKQKpFQ7iz8ux2eyQYDEZS64A6A1Jqx0nIg4LEbqiuTVIOP5WB2toGDysb9dCu5oDBuTEjw1KI8HRcHEO+UwjBiuNnHjwLcr0lSzSHpQJk+ZJBIaUrV6ds/SdPvEfzQTle/SGxkv4i/zvrGSy7O9rX78tVn6lBSlAb0kJSc23tdsf0tGw0fVISTihiwryJJaItuPjT+iLhQn9XjQnO9fndRSSzP02Sk/vkdFkZhZlOFPXosHC8i54QNZpN8oyiRNy+22abbCalSHFodOSNdli/eoZ+uk26nOWExz88z5FMTuEz5mv9JtaIcqrX7kjNimDm7Yr2+X356uqSBk1hQxFuaKENghwQGvn5Z5SCL+J7wwItgTaOm74JVOGCQgay9NfFffIvFjfC6OnpZWGI8SjqdYRC4HdJ3RBw0GaLHkM7PTw+QYkglwXlsPLDun5rdqXNAKYeqUsP5cFCWH8q9jY+Sonx1+l6NEqdTU2BJ+seCOarU1+/A5ank5rqsEy8tJ9pQCMRGhkeUrRVW9fgYVoYHR5qqd3W4KMshqWRmkUBJLfC+gdwv9OKeUFPASj4RLJOkK+hkKKzdrfb7WAqwniaDaMAHQnRzWND6WO1zP1SHrJptt2pTjqdgpYsQUSRn/sKsf6bN29A43FasSJ3NLnjkS/TvVu/SAfuddJyuz2Xy0mDrkunuiLCAoeDsgQEI7vjceU8i4ISmEjSFqw8OYbwrHKaHBgbHvKn5rF/mZ6m/mvXJ10QOHM8KwQRoBaEwDcLNTmTbQlxkI2mtu7BCJQZ0jStI00BOrhP5IlMC7H+S5cu0MTEuyq9ceM9tHbtBstyX4DgtzywVaVZ+MXAsLJkqCupEfQTAUeHYFJYlTfMFEIZB1s/fISyaqGLRsyekGmFeN8OUJ4DlrvTcKTiEEQG4RSmSPYDtXXbTwiWtC4HdH2p32ab8mE8K01RMiWh/6NsHGjXDUpkP3WCx5Am7bFzZ/wktOZcHY68Okyjx3PPgJMnQ3Tt2hWVrqxcTvffX29Z7hvPfJuq1lal5WFg/rr1G1qoALD1KS6G1YITWoinO6fzAWVNSwY1sIN2ZhbhSAVcfxoCspJHeGx0qDo1A1bdg2nYmNHIgApiLfLHRt9o52TOdUAm2PrfP/FuzjJMO/H49My9w1FlWa7cXjFL+MVCWZ9p7YAeTwQ0zRZWN0LipQUv0gJwhqApRDWwbFVu2uBv5u0bN1RUBEpDyCvIx85UI2lytEc1JUSAZxinYeVNVutX9MGziA3AMB5B/chdKbk2qAl9d6Tmm/WKUsB/Tp9XSsiGyckbdPr0Kbr77i0UixkLtGw+oGrNalpohELDLDglPIR8zYqBpBgQxksj+rD7kk5TAcJ3cUSjbkyZSnlQv9XkUf6TKJMdoeQKFjPGnWsMTGWqmQLzi1JALuf70Ufn4HivK+GXIUiuqCiO0xcSaumPxRAxVYwN+TFLFDWVlU0yPc2siuNxO7g+2k2zHC6v4mG1ovDFGDg+KGxQny6a2C9B4H6sL4+zXoUNXkYH92MWYTaofLNewZtx7HitrJ8px3S41dX3KeEXgthUjD4NsF+A8A+qG8TkfNHjdg5Lw4iY2s2FFINng7JMxP64NXwHIhX4QadpsYWCFS0TvHiD8mDmHPpyHv+W2NQ4nFyO05xn1itYAVbWz5Rz6tTbtGbNRvw2UDG4BmVORadoIVFX92Ab9l34hM0J6515URa0JgxuBuX0u1xuxYuGsnifR20aJsEC1MNqASUNJWhYSYN6JP/IwmGzUuu2bR/HNGjn+J/rsnPn9nltkBwTb1C6eFXOK2LOV21TAbCyfqac8+fDinI40ikWMQj/8oVLtLAQNUnq6B4bGfKlPuGlv0gunoiiSgEIC518hQMOghowG3SOz+HIsWoWsgMbfGHVKlbRHBUZezgybYvC5Wpw6lIe491OduBjo2+ugt/p4PZi06LdcLoioicSNTCCXVDOUbXVoYKEAn1AqvUz5Zw/P0E2WxmE/yWaD97/13u0zrme5gMz8jEiG3ugrCzqz9yWNsFbAWq7IAkuh9mwKumYa5LZgeQVzxpCiNmPJhIVAdN5s7ULkZhRArfnctXvIloWNsuMjb3BlNeTLB/IGA+368RYVdm86wC2/uAr/1Bpjmw4ylm7dmPeFW4+rHCsoNVrquiRx7+Wll/MOuCzgLwzwFz1XrlyiS5fvkCbNt1TVIRTgXh/+crlEPbnVNy/mn8QPOeXUIACLn98gc6cOaXS+SjHtOrluFZB4Os2r0PeHTnrXProIsreSYsVWRVw85NP6MX9P6WTb7+jrD4zymFh37VpvbJqld68vmirfuXl36lfS9tz9NDDu2gxIqsCfvZDH539YIKq7ryTvvmdJ+nKx1eVVVclLXy+FMJts/AZm6qraa7wen3O1Hvs6UV6enwR+hTAfWlazPHSS/tntpP37u3Eea+M9Pa+EKQ5wFIBbPWm8L/3E18aRfDMeO2vf6Oly5bN2Wq5/f5fvqjSjz35OG38vJPmCklTE7fCS94GJz5MKeoY09Puc5RPTXn6Dh+wrOf1Po/1guiXIubANnhkj7fTudReUZNUtJOMj23mhJw+QDnOFOGbgmPeZly++LESoPls/M23aGO1M6tiWHls9X9/5U/qnsuZ9eeD3t4Dlh22Q7B8zZwRmfmVsZgzwVvaWRWn4VSLwr2H96vojBVi1j1soTSeKdlmYmbflmEoC+rH7d9Xgq6EpbOF3vzkppoVDL4/+0FYpZ/b9wM6+e93ZoRqPK+mp777HGZJpVLS2YkJKGdYKcnEVx/7Oj3x9Oxos9gwFNYoj/QeSHsPtuiK6NQxMnYhcUgi/H29+7sN4fDHY2qfiE9KsMCSh/B8EKtUB+/VYM+mo6/vQCC1vdbWznbew4fV784UKtrz8bW3d78vOR7+3DJiHnFi8RWAkjq8yJfqEx1y8YG/Oaas64BLFy8qJ2wKmsHKYItl4f32V/1pQmfws9f/GZyZIZng+jUND9CjT3wra+SDQXbUrdtQMIWwArB67Tbv7fbyHhYSWxpfFb1MxiYql5ZX872VwoyPyxJdR7LMJKOf5zEm3tcXWFHr3eD8sFH3lgJa4Q807P0j3aKMYGpq4sjhA6uMcp2DOPA63tf7gi9pIFd4HFkpiPm/q+fnijZYCZWw5tUQGguRwdbLaaYdLvsYhMqWv+NhN/3h5d/TGVj9JGYNz4JN1U5FTTtAOWb9bNCELUBFQ32vk4ZoNOpo9e5rE9EYtgikg++JjwpxbNm6p3NcE+IQBOW3ao0tHtsRiipMyz7S+0K7VymBfDj+HH/22X27Up2xGrvkI0kDdvQnM76sMM+R/YYhqLy86wAW2L1b7rd8xhafyeGsDA4r5wKmn9q77gpTkYA1+lPvn3lmH39m0q9JvQPPuvGy7pSyPgiSy/v27O1sg4XWZLanaXwgI636CePiYavHph5/iNWS/ny/H311oV3sDZGDlU15UNR5wKcMnJfa8g64ENhs1MQHMXDOQaaim5Mx5nf1LElNYSQ9rXv2XeH7WCwWiSdmPpOnzJByzx7MJKEPmLQj+bxXyquZ/TIFCSmC9opydeZQSDj8/6KAMOSzu2YO1m8FbLoFNJs8BkvcOjk5Bbcmwuo7RQh7Mjo1jnw+yIfA9aNJPxEGJzvYcoVSXDo1SU2ehtQHYd1h/n8GjJUFOytQiFVUBOFv+tGHk+/RXsQmRHcmVaWi6EP5BYfa5rW1LJTwTbBlM++bVpsKDiP5mvmM863K56tnAouydv7IUpPS9GNw7qI5l3NPUwB/jKsXeRI0Zwg6wQ53oQV/O8GREsJZ2XfkQIdhALE2SfoqduDZ6ggqYcHAFIfoxwexboUT5m+WBjIDhBJKKKGEEkoooYQSGP8DfciicqiJWhAAAAAASUVORK5CYII=",_sfc_main$5={data(){return{isVisitor:!1}},computed:{currentRouteName(){return this.$route.name}}},_hoisted_1$4={class:"navbar navbar-expand-lg navbar-light bg-white border-bottom border-gray"},_hoisted_2$4=createStaticVNode('<div class="container-fluid flex-shrink-0"><a class="navbar-brand" href="/"><img src="'+_imports_0$1+'" alt="logo"></a><h2 class="flex-grow-1 text-center d-none d-lg-block text-dark-gray">\u5FEB\u901F\u7701\u6642\u7684\u96FB\u5B50\u7C3D\u7F72\u5DE5\u5177</h2><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse flex-grow-0 justify-content-between text-center justify-content-lg-end" id="navbarSupportedContent"><button class="btn text-primary px-9 me-7" type="submit">\u767B\u5165</button><button class="btn btn-primary px-9" type="submit">\u8A3B\u518A</button></div></div>',1),_hoisted_3$3=[_hoisted_2$4];function _sfc_render$3(e,t,r,Ce,Me,Ie){return openBlock(),createElementBlock("nav",_hoisted_1$4,_hoisted_3$3)}const Header=_export_sfc(_sfc_main$5,[["render",_sfc_render$3]]),_sfc_main$4={},_hoisted_1$3={class:"bg-dark-gray"},_hoisted_2$3=createStaticVNode('<div class="container-fluid d-flex justify-content-between align-items-center py-5"><p class="text-white">@ 2022 The F2E 4th Code: int / Design: Coral</p><div class="text-white d-flex align-items-center"><a class="text-white me-7">\u7E41\u4E2D</a><a class="text-white">English</a></div></div>',1),_hoisted_3$2=[_hoisted_2$3];function _sfc_render$2(e,t){return openBlock(),createElementBlock("div",_hoisted_1$3,_hoisted_3$2)}const Footer=_export_sfc(_sfc_main$4,[["render",_sfc_render$2]]),App_vue_vue_type_style_index_0_scoped_b49430c8_lang="",_sfc_main$3={__name:"App",setup(e){return(t,r)=>{const Ce=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[createVNode(Header),createVNode(Ce),createVNode(Footer)],64)}}},App=_export_sfc(_sfc_main$3,[["__scopeId","data-v-b49430c8"]]);/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(e,t){const r={};for(const Ce in t){const Me=t[Ce];r[Ce]=isArray(Me)?Me.map(e):e(Me)}return r}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,r="/"){let Ce,Me={},Ie="",Fe="";const Oe=t.indexOf("#");let _e=t.indexOf("?");return Oe<_e&&Oe>=0&&(_e=-1),_e>-1&&(Ce=t.slice(0,_e),Ie=t.slice(_e+1,Oe>-1?Oe:t.length),Me=e(Ie)),Oe>-1&&(Ce=Ce||t.slice(0,Oe),Fe=t.slice(Oe,t.length)),Ce=resolveRelativePath(Ce!=null?Ce:t,r),{fullPath:Ce+(Ie&&"?")+Ie+Fe,path:Ce,query:Me,hash:Fe}}function stringifyURL(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function stripBase(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function isSameRouteLocation(e,t,r){const Ce=t.matched.length-1,Me=r.matched.length-1;return Ce>-1&&Ce===Me&&isSameRouteRecord(t.matched[Ce],r.matched[Me])&&isSameRouteLocationParams(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],t[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every((r,Ce)=>r===t[Ce]):e.length===1&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),Ce=e.split("/");let Me=r.length-1,Ie,Fe;for(Ie=0;Ie<Ce.length;Ie++)if(Fe=Ce[Ie],Fe!==".")if(Fe==="..")Me>1&&Me--;else break;return r.slice(0,Me).join("/")+"/"+Ce.slice(Ie-(Ie===Ce.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const r=document.documentElement.getBoundingClientRect(),Ce=e.getBoundingClientRect();return{behavior:t.behavior,left:Ce.left-r.left-(t.left||0),top:Ce.top-r.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let t;if("el"in e){const r=e.el,Ce=typeof r=="string"&&r.startsWith("#"),Me=typeof r=="string"?Ce?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!Me)return;t=getElementPosition(Me,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:r,search:Ce,hash:Me}=t,Ie=e.indexOf("#");if(Ie>-1){let Oe=Me.includes(e.slice(Ie))?e.slice(Ie).length:1,_e=Me.slice(Oe);return _e[0]!=="/"&&(_e="/"+_e),stripBase(_e,"")}return stripBase(r,e)+Ce+Me}function useHistoryListeners(e,t,r,Ce){let Me=[],Ie=[],Fe=null;const Oe=({state:Se})=>{const St=createCurrentLocation(e,location),Te=r.value,Re=t.value;let Ee=0;if(Se){if(r.value=St,t.value=Se,Fe&&Fe===Te){Fe=null;return}Ee=Re?Se.position-Re.position:0}else Ce(St);Me.forEach(ke=>{ke(r.value,Te,{delta:Ee,type:NavigationType.pop,direction:Ee?Ee>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function _e(){Fe=r.value}function xe(Se){Me.push(Se);const St=()=>{const Te=Me.indexOf(Se);Te>-1&&Me.splice(Te,1)};return Ie.push(St),St}function Pe(){const{history:Se}=window;!Se.state||Se.replaceState(assign({},Se.state,{scroll:computeScrollPosition()}),"")}function Ae(){for(const Se of Ie)Se();Ie=[],window.removeEventListener("popstate",Oe),window.removeEventListener("beforeunload",Pe)}return window.addEventListener("popstate",Oe),window.addEventListener("beforeunload",Pe),{pauseListeners:_e,listen:xe,destroy:Ae}}function buildState(e,t,r,Ce=!1,Me=!1){return{back:e,current:t,forward:r,replaced:Ce,position:window.history.length,scroll:Me?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:r}=window,Ce={value:createCurrentLocation(e,r)},Me={value:t.state};Me.value||Ie(Ce.value,{back:null,current:Ce.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function Ie(_e,xe,Pe){const Ae=e.indexOf("#"),Se=Ae>-1?(r.host&&document.querySelector("base")?e:e.slice(Ae))+_e:createBaseLocation()+e+_e;try{t[Pe?"replaceState":"pushState"](xe,"",Se),Me.value=xe}catch(St){console.error(St),r[Pe?"replace":"assign"](Se)}}function Fe(_e,xe){const Pe=assign({},t.state,buildState(Me.value.back,_e,Me.value.forward,!0),xe,{position:Me.value.position});Ie(_e,Pe,!0),Ce.value=_e}function Oe(_e,xe){const Pe=assign({},Me.value,t.state,{forward:_e,scroll:computeScrollPosition()});Ie(Pe.current,Pe,!0);const Ae=assign({},buildState(Ce.value,_e,null),{position:Pe.position+1},xe);Ie(_e,Ae,!1),Ce.value=_e}return{location:Ce,state:Me,push:Oe,replace:Fe}}function createWebHistory(e){e=normalizeBase(e);const t=useHistoryStateNavigation(e),r=useHistoryListeners(e,t.state,t.location,t.replace);function Ce(Ie,Fe=!0){Fe||r.pauseListeners(),history.go(Ie)}const Me=assign({location:"",base:e,go:Ce,createHref:createHref.bind(null,e)},t,r);return Object.defineProperty(Me,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(Me,"state",{enumerable:!0,get:()=>t.state.value}),Me}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,t){return assign(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(t==null||!!(e.type&t))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const r=assign({},BASE_PATH_PARSER_OPTIONS,t),Ce=[];let Me=r.start?"^":"";const Ie=[];for(const xe of e){const Pe=xe.length?[]:[90];r.strict&&!xe.length&&(Me+="/");for(let Ae=0;Ae<xe.length;Ae++){const Se=xe[Ae];let St=40+(r.sensitive?.25:0);if(Se.type===0)Ae||(Me+="/"),Me+=Se.value.replace(REGEX_CHARS_RE,"\\$&"),St+=40;else if(Se.type===1){const{value:Te,repeatable:Re,optional:Ee,regexp:ke}=Se;Ie.push({name:Te,repeatable:Re,optional:Ee});const De=ke||BASE_PARAM_PATTERN;if(De!==BASE_PARAM_PATTERN){St+=10;try{new RegExp(`(${De})`)}catch(He){throw new Error(`Invalid custom RegExp for param "${Te}" (${De}): `+He.message)}}let Be=Re?`((?:${De})(?:/(?:${De}))*)`:`(${De})`;Ae||(Be=Ee&&xe.length<2?`(?:/${Be})`:"/"+Be),Ee&&(Be+="?"),Me+=Be,St+=20,Ee&&(St+=-8),Re&&(St+=-20),De===".*"&&(St+=-50)}Pe.push(St)}Ce.push(Pe)}if(r.strict&&r.end){const xe=Ce.length-1;Ce[xe][Ce[xe].length-1]+=.7000000000000001}r.strict||(Me+="/?"),r.end?Me+="$":r.strict&&(Me+="(?:/|$)");const Fe=new RegExp(Me,r.sensitive?"":"i");function Oe(xe){const Pe=xe.match(Fe),Ae={};if(!Pe)return null;for(let Se=1;Se<Pe.length;Se++){const St=Pe[Se]||"",Te=Ie[Se-1];Ae[Te.name]=St&&Te.repeatable?St.split("/"):St}return Ae}function _e(xe){let Pe="",Ae=!1;for(const Se of e){(!Ae||!Pe.endsWith("/"))&&(Pe+="/"),Ae=!1;for(const St of Se)if(St.type===0)Pe+=St.value;else if(St.type===1){const{value:Te,repeatable:Re,optional:Ee}=St,ke=Te in xe?xe[Te]:"";if(isArray(ke)&&!Re)throw new Error(`Provided param "${Te}" is an array but it is not repeatable (* or + modifiers)`);const De=isArray(ke)?ke.join("/"):ke;if(!De)if(Ee)Se.length<2&&(Pe.endsWith("/")?Pe=Pe.slice(0,-1):Ae=!0);else throw new Error(`Missing required param "${Te}"`);Pe+=De}}return Pe||"/"}return{re:Fe,score:Ce,keys:Ie,parse:Oe,stringify:_e}}function compareScoreArray(e,t){let r=0;for(;r<e.length&&r<t.length;){const Ce=t[r]-e[r];if(Ce)return Ce;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function comparePathParserScore(e,t){let r=0;const Ce=e.score,Me=t.score;for(;r<Ce.length&&r<Me.length;){const Ie=compareScoreArray(Ce[r],Me[r]);if(Ie)return Ie;r++}if(Math.abs(Me.length-Ce.length)===1){if(isLastScoreNegative(Ce))return 1;if(isLastScoreNegative(Me))return-1}return Me.length-Ce.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(St){throw new Error(`ERR (${r})/"${xe}": ${St}`)}let r=0,Ce=r;const Me=[];let Ie;function Fe(){Ie&&Me.push(Ie),Ie=[]}let Oe=0,_e,xe="",Pe="";function Ae(){!xe||(r===0?Ie.push({type:0,value:xe}):r===1||r===2||r===3?(Ie.length>1&&(_e==="*"||_e==="+")&&t(`A repeatable param (${xe}) must be alone in its segment. eg: '/:ids+.`),Ie.push({type:1,value:xe,regexp:Pe,repeatable:_e==="*"||_e==="+",optional:_e==="*"||_e==="?"})):t("Invalid state to consume buffer"),xe="")}function Se(){xe+=_e}for(;Oe<e.length;){if(_e=e[Oe++],_e==="\\"&&r!==2){Ce=r,r=4;continue}switch(r){case 0:_e==="/"?(xe&&Ae(),Fe()):_e===":"?(Ae(),r=1):Se();break;case 4:Se(),r=Ce;break;case 1:_e==="("?r=2:VALID_PARAM_RE.test(_e)?Se():(Ae(),r=0,_e!=="*"&&_e!=="?"&&_e!=="+"&&Oe--);break;case 2:_e===")"?Pe[Pe.length-1]=="\\"?Pe=Pe.slice(0,-1)+_e:r=3:Pe+=_e;break;case 3:Ae(),r=0,_e!=="*"&&_e!=="?"&&_e!=="+"&&Oe--,Pe="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${xe}"`),Ae(),Fe(),Me}function createRouteRecordMatcher(e,t,r){const Ce=tokensToParser(tokenizePath(e.path),r),Me=assign(Ce,{record:e,parent:t,children:[],alias:[]});return t&&!Me.record.aliasOf==!t.record.aliasOf&&t.children.push(Me),Me}function createRouterMatcher(e,t){const r=[],Ce=new Map;t=mergeOptions({strict:!1,end:!0,sensitive:!1},t);function Me(Pe){return Ce.get(Pe)}function Ie(Pe,Ae,Se){const St=!Se,Te=normalizeRouteRecord(Pe);Te.aliasOf=Se&&Se.record;const Re=mergeOptions(t,Pe),Ee=[Te];if("alias"in Pe){const Be=typeof Pe.alias=="string"?[Pe.alias]:Pe.alias;for(const He of Be)Ee.push(assign({},Te,{components:Se?Se.record.components:Te.components,path:He,aliasOf:Se?Se.record:Te}))}let ke,De;for(const Be of Ee){const{path:He}=Be;if(Ae&&He[0]!=="/"){const Ue=Ae.record.path,We=Ue[Ue.length-1]==="/"?"":"/";Be.path=Ae.record.path+(He&&We+He)}if(ke=createRouteRecordMatcher(Be,Ae,Re),Se?Se.alias.push(ke):(De=De||ke,De!==ke&&De.alias.push(ke),St&&Pe.name&&!isAliasRecord(ke)&&Fe(Pe.name)),Te.children){const Ue=Te.children;for(let We=0;We<Ue.length;We++)Ie(Ue[We],ke,Se&&Se.children[We])}Se=Se||ke,(ke.record.components&&Object.keys(ke.record.components).length||ke.record.name||ke.record.redirect)&&_e(ke)}return De?()=>{Fe(De)}:noop}function Fe(Pe){if(isRouteName(Pe)){const Ae=Ce.get(Pe);Ae&&(Ce.delete(Pe),r.splice(r.indexOf(Ae),1),Ae.children.forEach(Fe),Ae.alias.forEach(Fe))}else{const Ae=r.indexOf(Pe);Ae>-1&&(r.splice(Ae,1),Pe.record.name&&Ce.delete(Pe.record.name),Pe.children.forEach(Fe),Pe.alias.forEach(Fe))}}function Oe(){return r}function _e(Pe){let Ae=0;for(;Ae<r.length&&comparePathParserScore(Pe,r[Ae])>=0&&(Pe.record.path!==r[Ae].record.path||!isRecordChildOf(Pe,r[Ae]));)Ae++;r.splice(Ae,0,Pe),Pe.record.name&&!isAliasRecord(Pe)&&Ce.set(Pe.record.name,Pe)}function xe(Pe,Ae){let Se,St={},Te,Re;if("name"in Pe&&Pe.name){if(Se=Ce.get(Pe.name),!Se)throw createRouterError(1,{location:Pe});Re=Se.record.name,St=assign(paramsFromLocation(Ae.params,Se.keys.filter(De=>!De.optional).map(De=>De.name)),Pe.params&&paramsFromLocation(Pe.params,Se.keys.map(De=>De.name))),Te=Se.stringify(St)}else if("path"in Pe)Te=Pe.path,Se=r.find(De=>De.re.test(Te)),Se&&(St=Se.parse(Te),Re=Se.record.name);else{if(Se=Ae.name?Ce.get(Ae.name):r.find(De=>De.re.test(Ae.path)),!Se)throw createRouterError(1,{location:Pe,currentLocation:Ae});Re=Se.record.name,St=assign({},Ae.params,Pe.params),Te=Se.stringify(St)}const Ee=[];let ke=Se;for(;ke;)Ee.unshift(ke.record),ke=ke.parent;return{name:Re,path:Te,params:St,matched:Ee,meta:mergeMetaFields(Ee)}}return e.forEach(Pe=>Ie(Pe)),{addRoute:Ie,resolve:xe,removeRoute:Fe,getRoutes:Oe,getRecordMatcher:Me}}function paramsFromLocation(e,t){const r={};for(const Ce of t)Ce in e&&(r[Ce]=e[Ce]);return r}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const Ce in e.components)t[Ce]=typeof r=="boolean"?r:r[Ce];return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((t,r)=>assign(t,r.meta),{})}function mergeOptions(e,t){const r={};for(const Ce in e)r[Ce]=Ce in t?t[Ce]:e[Ce];return r}function isRecordChildOf(e,t){return t.children.some(r=>r===e||isRecordChildOf(e,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const t={};if(e===""||e==="?")return t;const Ce=(e[0]==="?"?e.slice(1):e).split("&");for(let Me=0;Me<Ce.length;++Me){const Ie=Ce[Me].replace(PLUS_RE," "),Fe=Ie.indexOf("="),Oe=decode(Fe<0?Ie:Ie.slice(0,Fe)),_e=Fe<0?null:decode(Ie.slice(Fe+1));if(Oe in t){let xe=t[Oe];isArray(xe)||(xe=t[Oe]=[xe]),xe.push(_e)}else t[Oe]=_e}return t}function stringifyQuery(e){let t="";for(let r in e){const Ce=e[r];if(r=encodeQueryKey(r),Ce==null){Ce!==void 0&&(t+=(t.length?"&":"")+r);continue}(isArray(Ce)?Ce.map(Ie=>Ie&&encodeQueryValue(Ie)):[Ce&&encodeQueryValue(Ce)]).forEach(Ie=>{Ie!==void 0&&(t+=(t.length?"&":"")+r,Ie!=null&&(t+="="+Ie))})}return t}function normalizeQuery(e){const t={};for(const r in e){const Ce=e[r];Ce!==void 0&&(t[r]=isArray(Ce)?Ce.map(Me=>Me==null?null:""+Me):Ce==null?Ce:""+Ce)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function t(Ce){return e.push(Ce),()=>{const Me=e.indexOf(Ce);Me>-1&&e.splice(Me,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function guardToPromiseFn(e,t,r,Ce,Me){const Ie=Ce&&(Ce.enterCallbacks[Me]=Ce.enterCallbacks[Me]||[]);return()=>new Promise((Fe,Oe)=>{const _e=Ae=>{Ae===!1?Oe(createRouterError(4,{from:r,to:t})):Ae instanceof Error?Oe(Ae):isRouteLocation(Ae)?Oe(createRouterError(2,{from:t,to:Ae})):(Ie&&Ce.enterCallbacks[Me]===Ie&&typeof Ae=="function"&&Ie.push(Ae),Fe())},xe=e.call(Ce&&Ce.instances[Me],t,r,_e);let Pe=Promise.resolve(xe);e.length<3&&(Pe=Pe.then(_e)),Pe.catch(Ae=>Oe(Ae))})}function extractComponentsGuards(e,t,r,Ce){const Me=[];for(const Ie of e)for(const Fe in Ie.components){let Oe=Ie.components[Fe];if(!(t!=="beforeRouteEnter"&&!Ie.instances[Fe]))if(isRouteComponent(Oe)){const xe=(Oe.__vccOpts||Oe)[t];xe&&Me.push(guardToPromiseFn(xe,r,Ce,Ie,Fe))}else{let _e=Oe();Me.push(()=>_e.then(xe=>{if(!xe)return Promise.reject(new Error(`Couldn't resolve component "${Fe}" at "${Ie.path}"`));const Pe=isESModule(xe)?xe.default:xe;Ie.components[Fe]=Pe;const Se=(Pe.__vccOpts||Pe)[t];return Se&&guardToPromiseFn(Se,r,Ce,Ie,Fe)()}))}}return Me}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const t=inject(routerKey),r=inject(routeLocationKey),Ce=computed(()=>t.resolve(unref(e.to))),Me=computed(()=>{const{matched:_e}=Ce.value,{length:xe}=_e,Pe=_e[xe-1],Ae=r.matched;if(!Pe||!Ae.length)return-1;const Se=Ae.findIndex(isSameRouteRecord.bind(null,Pe));if(Se>-1)return Se;const St=getOriginalPath(_e[xe-2]);return xe>1&&getOriginalPath(Pe)===St&&Ae[Ae.length-1].path!==St?Ae.findIndex(isSameRouteRecord.bind(null,_e[xe-2])):Se}),Ie=computed(()=>Me.value>-1&&includesParams(r.params,Ce.value.params)),Fe=computed(()=>Me.value>-1&&Me.value===r.matched.length-1&&isSameRouteLocationParams(r.params,Ce.value.params));function Oe(_e={}){return guardEvent(_e)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}return{route:Ce,href:computed(()=>Ce.value.href),isActive:Ie,isExactActive:Fe,navigate:Oe}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:t}){const r=reactive(useLink(e)),{options:Ce}=inject(routerKey),Me=computed(()=>({[getLinkClass(e.activeClass,Ce.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(e.exactActiveClass,Ce.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const Ie=t.default&&t.default(r);return e.custom?Ie:h$1("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:Me.value},Ie)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const r in t){const Ce=t[r],Me=e[r];if(typeof Ce=="string"){if(Ce!==Me)return!1}else if(!isArray(Me)||Me.length!==Ce.length||Ce.some((Ie,Fe)=>Ie!==Me[Fe]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,r)=>e!=null?e:t!=null?t:r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const Ce=inject(routerViewLocationKey),Me=computed(()=>e.route||Ce.value),Ie=inject(viewDepthKey,0),Fe=computed(()=>{let xe=unref(Ie);const{matched:Pe}=Me.value;let Ae;for(;(Ae=Pe[xe])&&!Ae.components;)xe++;return xe}),Oe=computed(()=>Me.value.matched[Fe.value]);provide(viewDepthKey,computed(()=>Fe.value+1)),provide(matchedRouteKey,Oe),provide(routerViewLocationKey,Me);const _e=ref();return watch(()=>[_e.value,Oe.value,e.name],([xe,Pe,Ae],[Se,St,Te])=>{Pe&&(Pe.instances[Ae]=xe,St&&St!==Pe&&xe&&xe===Se&&(Pe.leaveGuards.size||(Pe.leaveGuards=St.leaveGuards),Pe.updateGuards.size||(Pe.updateGuards=St.updateGuards))),xe&&Pe&&(!St||!isSameRouteRecord(Pe,St)||!Se)&&(Pe.enterCallbacks[Ae]||[]).forEach(Re=>Re(xe))},{flush:"post"}),()=>{const xe=Me.value,Pe=e.name,Ae=Oe.value,Se=Ae&&Ae.components[Pe];if(!Se)return normalizeSlot(r.default,{Component:Se,route:xe});const St=Ae.props[Pe],Te=St?St===!0?xe.params:typeof St=="function"?St(xe):St:null,Ee=h$1(Se,assign({},Te,t,{onVnodeUnmounted:ke=>{ke.component.isUnmounted&&(Ae.instances[Pe]=null)},ref:_e}));return normalizeSlot(r.default,{Component:Ee,route:xe})||Ee}}});function normalizeSlot(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),r=e.parseQuery||parseQuery,Ce=e.stringifyQuery||stringifyQuery,Me=e.history,Ie=useCallbacks(),Fe=useCallbacks(),Oe=useCallbacks(),_e=shallowRef(START_LOCATION_NORMALIZED);let xe=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const Pe=applyToParams.bind(null,qe=>""+qe),Ae=applyToParams.bind(null,encodeParam),Se=applyToParams.bind(null,decode);function St(qe,ei){let ni,ci;return isRouteName(qe)?(ni=t.getRecordMatcher(qe),ci=ei):ci=qe,t.addRoute(ci,ni)}function Te(qe){const ei=t.getRecordMatcher(qe);ei&&t.removeRoute(ei)}function Re(){return t.getRoutes().map(qe=>qe.record)}function Ee(qe){return!!t.getRecordMatcher(qe)}function ke(qe,ei){if(ei=assign({},ei||_e.value),typeof qe=="string"){const si=parseURL(r,qe,ei.path),ai=t.resolve({path:si.path},ei),Ye=Me.createHref(si.fullPath);return assign(si,ai,{params:Se(ai.params),hash:decode(si.hash),redirectedFrom:void 0,href:Ye})}let ni;if("path"in qe)ni=assign({},qe,{path:parseURL(r,qe.path,ei.path).path});else{const si=assign({},qe.params);for(const ai in si)si[ai]==null&&delete si[ai];ni=assign({},qe,{params:Ae(qe.params)}),ei.params=Ae(ei.params)}const ci=t.resolve(ni,ei),di=qe.hash||"";ci.params=Pe(Se(ci.params));const Ti=stringifyURL(Ce,assign({},qe,{hash:encodeHash(di),path:ci.path})),Ni=Me.createHref(Ti);return assign({fullPath:Ti,hash:di,query:Ce===stringifyQuery?normalizeQuery(qe.query):qe.query||{}},ci,{redirectedFrom:void 0,href:Ni})}function De(qe){return typeof qe=="string"?parseURL(r,qe,_e.value.path):assign({},qe)}function Be(qe,ei){if(xe!==qe)return createRouterError(8,{from:ei,to:qe})}function He(qe){return Je(qe)}function Ue(qe){return He(assign(De(qe),{replace:!0}))}function We(qe){const ei=qe.matched[qe.matched.length-1];if(ei&&ei.redirect){const{redirect:ni}=ei;let ci=typeof ni=="function"?ni(qe):ni;return typeof ci=="string"&&(ci=ci.includes("?")||ci.includes("#")?ci=De(ci):{path:ci},ci.params={}),assign({query:qe.query,hash:qe.hash,params:"path"in ci?{}:qe.params},ci)}}function Je(qe,ei){const ni=xe=ke(qe),ci=_e.value,di=qe.state,Ti=qe.force,Ni=qe.replace===!0,si=We(ni);if(si)return Je(assign(De(si),{state:typeof si=="object"?assign({},di,si.state):di,force:Ti,replace:Ni}),ei||ni);const ai=ni;ai.redirectedFrom=ei;let Ye;return!Ti&&isSameRouteLocation(Ce,ci,ni)&&(Ye=createRouterError(16,{to:ai,from:ci}),vi(ci,ci,!0,!1)),(Ye?Promise.resolve(Ye):fi(ai,ci)).catch(Ze=>isNavigationFailure(Ze)?isNavigationFailure(Ze,2)?Ze:ri(Ze):xi(Ze,ai,ci)).then(Ze=>{if(Ze){if(isNavigationFailure(Ze,2))return Je(assign({replace:Ni},De(Ze.to),{state:typeof Ze.to=="object"?assign({},di,Ze.to.state):di,force:Ti}),ei||ai)}else Ze=ii(ai,ci,!0,Ni,di);return oi(ai,ci,Ze),Ze})}function Qe(qe,ei){const ni=Be(qe,ei);return ni?Promise.reject(ni):Promise.resolve()}function fi(qe,ei){let ni;const[ci,di,Ti]=extractChangingRecords(qe,ei);ni=extractComponentsGuards(ci.reverse(),"beforeRouteLeave",qe,ei);for(const si of ci)si.leaveGuards.forEach(ai=>{ni.push(guardToPromiseFn(ai,qe,ei))});const Ni=Qe.bind(null,qe,ei);return ni.push(Ni),runGuardQueue(ni).then(()=>{ni=[];for(const si of Ie.list())ni.push(guardToPromiseFn(si,qe,ei));return ni.push(Ni),runGuardQueue(ni)}).then(()=>{ni=extractComponentsGuards(di,"beforeRouteUpdate",qe,ei);for(const si of di)si.updateGuards.forEach(ai=>{ni.push(guardToPromiseFn(ai,qe,ei))});return ni.push(Ni),runGuardQueue(ni)}).then(()=>{ni=[];for(const si of qe.matched)if(si.beforeEnter&&!ei.matched.includes(si))if(isArray(si.beforeEnter))for(const ai of si.beforeEnter)ni.push(guardToPromiseFn(ai,qe,ei));else ni.push(guardToPromiseFn(si.beforeEnter,qe,ei));return ni.push(Ni),runGuardQueue(ni)}).then(()=>(qe.matched.forEach(si=>si.enterCallbacks={}),ni=extractComponentsGuards(Ti,"beforeRouteEnter",qe,ei),ni.push(Ni),runGuardQueue(ni))).then(()=>{ni=[];for(const si of Fe.list())ni.push(guardToPromiseFn(si,qe,ei));return ni.push(Ni),runGuardQueue(ni)}).catch(si=>isNavigationFailure(si,8)?si:Promise.reject(si))}function oi(qe,ei,ni){for(const ci of Oe.list())ci(qe,ei,ni)}function ii(qe,ei,ni,ci,di){const Ti=Be(qe,ei);if(Ti)return Ti;const Ni=ei===START_LOCATION_NORMALIZED,si=isBrowser?history.state:{};ni&&(ci||Ni?Me.replace(qe.fullPath,assign({scroll:Ni&&si&&si.scroll},di)):Me.push(qe.fullPath,di)),_e.value=qe,vi(qe,ei,ni,Ni),ri()}let li;function bi(){li||(li=Me.listen((qe,ei,ni)=>{if(!ze.listening)return;const ci=ke(qe),di=We(ci);if(di){Je(assign(di,{replace:!0}),ci).catch(noop);return}xe=ci;const Ti=_e.value;isBrowser&&saveScrollPosition(getScrollKey(Ti.fullPath,ni.delta),computeScrollPosition()),fi(ci,Ti).catch(Ni=>isNavigationFailure(Ni,12)?Ni:isNavigationFailure(Ni,2)?(Je(Ni.to,ci).then(si=>{isNavigationFailure(si,20)&&!ni.delta&&ni.type===NavigationType.pop&&Me.go(-1,!1)}).catch(noop),Promise.reject()):(ni.delta&&Me.go(-ni.delta,!1),xi(Ni,ci,Ti))).then(Ni=>{Ni=Ni||ii(ci,Ti,!1),Ni&&(ni.delta&&!isNavigationFailure(Ni,8)?Me.go(-ni.delta,!1):ni.type===NavigationType.pop&&isNavigationFailure(Ni,20)&&Me.go(-1,!1)),oi(ci,Ti,Ni)}).catch(noop)}))}let mi=useCallbacks(),Si=useCallbacks(),_i;function xi(qe,ei,ni){ri(qe);const ci=Si.list();return ci.length?ci.forEach(di=>di(qe,ei,ni)):console.error(qe),Promise.reject(qe)}function Ei(){return _i&&_e.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((qe,ei)=>{mi.add([qe,ei])})}function ri(qe){return _i||(_i=!qe,bi(),mi.list().forEach(([ei,ni])=>qe?ni(qe):ei()),mi.reset()),qe}function vi(qe,ei,ni,ci){const{scrollBehavior:di}=e;if(!isBrowser||!di)return Promise.resolve();const Ti=!ni&&getSavedScrollPosition(getScrollKey(qe.fullPath,0))||(ci||!ni)&&history.state&&history.state.scroll||null;return nextTick().then(()=>di(qe,ei,Ti)).then(Ni=>Ni&&scrollToPosition(Ni)).catch(Ni=>xi(Ni,qe,ei))}const Ci=qe=>Me.go(qe);let $e;const Ge=new Set,ze={currentRoute:_e,listening:!0,addRoute:St,removeRoute:Te,hasRoute:Ee,getRoutes:Re,resolve:ke,options:e,push:He,replace:Ue,go:Ci,back:()=>Ci(-1),forward:()=>Ci(1),beforeEach:Ie.add,beforeResolve:Fe.add,afterEach:Oe.add,onError:Si.add,isReady:Ei,install(qe){const ei=this;qe.component("RouterLink",RouterLink),qe.component("RouterView",RouterView),qe.config.globalProperties.$router=ei,Object.defineProperty(qe.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(_e)}),isBrowser&&!$e&&_e.value===START_LOCATION_NORMALIZED&&($e=!0,He(Me.location).catch(di=>{}));const ni={};for(const di in START_LOCATION_NORMALIZED)ni[di]=computed(()=>_e.value[di]);qe.provide(routerKey,ei),qe.provide(routeLocationKey,reactive(ni)),qe.provide(routerViewLocationKey,_e);const ci=qe.unmount;Ge.add(qe),qe.unmount=function(){Ge.delete(qe),Ge.size<1&&(xe=START_LOCATION_NORMALIZED,li&&li(),li=null,_e.value=START_LOCATION_NORMALIZED,$e=!1,_i=!1),ci()}}};return ze}function runGuardQueue(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function extractChangingRecords(e,t){const r=[],Ce=[],Me=[],Ie=Math.max(t.matched.length,e.matched.length);for(let Fe=0;Fe<Ie;Fe++){const Oe=t.matched[Fe];Oe&&(e.matched.find(xe=>isSameRouteRecord(xe,Oe))?Ce.push(Oe):r.push(Oe));const _e=e.matched[Fe];_e&&(t.matched.find(xe=>isSameRouteRecord(xe,_e))||Me.push(_e))}return[r,Ce,Me]}const _imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUwSURBVHgB7dtRaBt1HAfw3/8661LB3VpBdNhWqJuCSl+1stXNPTiErY+dAbOBXUFhFaQiONo97MUHrYxC3UZ3eygtCq7SPexF1yo6VFg6tM7WCVe7QsG2S3VN0qa5v3enbnNt0svd/y7N/74fCCTHXSj55v+///cuJQIAAAAAgMIwJzstJpc4hdBv13V9bOznF5ubm3QqUQpBTsuZTG02S5f6+8/XUolCwOsr6ZARsDNWyPG+vvP1VGIQsHMq53Sp1ELGIiuPa9d+pV/Mxz0SikKHDh5sGiSH1NbW2kx2uZEzqjU/8Rp7I6dJblCibJMyeqvnzDD5BAHnkSPgfymxaHT/uVzHqm0xdTmpHOUGbzM/ZZXy0xmxYaPMOJ7u0XQSCAHnkT9g21vRaFPX3RtuB8t5J7lgBq2JDBrnYG8+NM/JHf+9uO/1WP3SIou7DdfCicdYlsUjLYfbSACM4DwcjGAbY9TZMnJBNwyjy8F07BhjrDN5qvc4eYARLMCVP2Y6DW5oIsO1WDNBRcvhDvJgE4Enc+kkaeNxR/tGn2+g6HMN9vOvJ8bpxNDn6x7zT8ixq8lTmuNV+90wgj3qHvuBkisZR/vWVD1EO3c8aT9qqqrIKc7ZWTUWczU7IGAPvp2ZoqlbCxQAdblccbXoQsAeDE2OU1DMqfqom1GMgF2aSMzSrHn+DZC6VK7EqEAI2KX47AwFjvP9VCAE7NLU4p9UBI2FTtNCalJv7wBNTxfhGy3AsWPuLhgFtLhaJVNh3rAgGnW6v5CAU6k03byZoLCwatFa1Wjn9h108e13nLyF2YlfsB+5WB15rZ7MV4oQcGWlSvPzQi/ibAjqlgepunrbqu0zfxVlerYxrgQ/RTc3HyAZPfLow/bjXgspc/U82EfFwJlR0FSJS5UubIlUrLn9K/Py41Pvtuc87s2X9tIbe/baz4ficWr/pD/nvvaXaA2GQgg4CE9ve4x+mp5atX1ybjbnMYnkndAWUot5981lc5pG0wXsj5rkUkPdE1QEowlNC34Eh7Em7Xu2nj4e+ZKCZI7GESoQapJLDXXb7XNxrnOlH7JlvKvQY1CTPDiyaze9f/ECBcH6rVaq56xOBUJN8uBI424a+P4y/T4/R36zfohHLmCR5YE1RZ989TXyG2fc9a8s8aM7AXpGvqD3PvuU/GDeBz6XPqPFyCWMYAFad+2h9pdfIfHYoJdw7XdwstN6IziMNWktYkcy/yh1WvP8x6EmCWSN5H3P1NOBkx+4X3gx0rnBD5kjd5gEQE0SrLqyiq50nKB+c3U98N1l+ub6hKPjzKl01Drf3v8AaYkuTdhowSLLZ9ZItkIeuzFFP07fsLeZr3Wy/uFMYTrPGldXGA1nTmuO7/EWAgEXgcLKH49EmE4BwCpacghYcqG/m+SHurraDXP5FjXJB/PzG+ezQE3yQSSymTYKrKKLAKtoEAYBSw4BSw41yQeoSZJDTZIcalLIoSaBMAhYcghYcqhJPkBNkhxqkuRQk0IONQmEQcCSQ8CSQ03yAWqS5FCTJIeaFHKoSSAMApYcApYcapIPUJMkh5okOdSkkENNAmEQsOQQsORQk3yAmiQ51CTJoSaFHGoSCIOAJYeAJYea5APUJMmhJkkONSnkUJNAGAQsOQQsOSGLrO5ubUOtHItNuppkVSTUpDukq0lbt6rEsc6+DTUp5FCTQBgELDkELDncTfIB7iZJDneTJIeaFHKoSSAMApYcApYcApYcApYcApYcApYcApYcAgYAAAAAAPifvwHMaYo34foqKgAAAABJRU5ErkJggg==",_imports_1="/fastsign/assets/File-upload.cacf8153.png",_imports_2="/fastsign/assets/Signing.2e3c78b7.png",_imports_3="/fastsign/assets/Sending.a44cdc69.png",Home_vue_vue_type_style_index_0_scoped_99811b50_lang="",_sfc_main$2={name:"Home",methods:{handleFileUpload:function(){let e=this.$refs.file.files[0];if(e===void 0)return;const t=new FileReader;t.readAsArrayBuffer(e),t.addEventListener("load",()=>{const r=new Uint8Array(t.result);localStorage.setItem("pdfFile",r),this.$router.push("/Sign")})}}},_withScopeId$1=e=>(pushScopeId("data-v-99811b50"),e=e(),popScopeId(),e),_hoisted_1$2={class:"container mt-12"},_hoisted_2$2={class:"bg-success border-dashed border-primary text-center pt-20 mb-10"},_hoisted_3$1=_withScopeId$1(()=>createBaseVNode("img",{src:_imports_0,alt:"file",class:"mb-7"},null,-1)),_hoisted_4$1=_withScopeId$1(()=>createBaseVNode("p",{class:"mb-3"},"\u5C07\u6A94\u6848\u62D6\u66F3\u81F3\u9019\u88E1\uFF0C\u6216",-1)),_hoisted_5$1=_withScopeId$1(()=>createBaseVNode("h5",{class:"text-primary fw-bold mb-25"},"\u6A94\u6848\u5927\u5C0F10Mb\u4EE5\u5167\uFF0C\u6A94\u6848\u683C\u5F0F\u70BAPDF\u3001IMG",-1)),_hoisted_6$2=createStaticVNode('<section class="text-center mb-10 mb-lg-11" data-v-99811b50><h2 class="mb-5 mb-lg-8" data-v-99811b50>\u8F15\u9B06\u5E7E\u6B65\u9A5F\uFF0C\u5B8C\u6210\u60A8\u7684\u7C3D\u7F72</h2><div class="d-flex flex-wrap justify-content-center justify-content-lg-between align-items-center" data-v-99811b50><div data-v-99811b50><div class="steps step1 border border-2 border-primary text-primary rounded-circle mx-auto mb-3 position-relative" data-v-99811b50></div><h4 data-v-99811b50>\u4E0A\u50B3\u6A94\u6848</h4><p data-v-99811b50>\u9078\u64C7PDF\u6A94\u6216\u662FIMG\u6A94</p><img src="'+_imports_1+'" alt="step1" data-v-99811b50></div><div data-v-99811b50><div class="steps step2 border border-2 border-primary text-primary rounded-circle mx-auto mb-3 position-relative" data-v-99811b50></div><h4 data-v-99811b50>\u52A0\u5165\u7C3D\u540D\u6A94</h4><p data-v-99811b50>\u624B\u5BEB\u3001\u8F38\u5165\u6216\u662F\u4E0A\u50B3\u7C3D\u540D\u6A94</p><img src="'+_imports_2+'" alt="step2" data-v-99811b50></div><div data-v-99811b50><div class="steps step3 border border-2 border-primary text-primary rounded-circle mx-auto mb-3 position-relative" data-v-99811b50></div><h4 data-v-99811b50>\u4E0B\u8F09\u8207\u50B3\u9001</h4><p data-v-99811b50>\u5B8C\u6210\u7C3D\u7F72\u53EF\u7ACB\u5373\u50B3\u9001\u6A94\u6848\u7D66\u5C0D\u65B9</p><img src="'+_imports_3+'" alt="step3" data-v-99811b50></div></div></section>',1);function _sfc_render$1(e,t,r,Ce,Me,Ie){return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("section",_hoisted_2$2,[_hoisted_3$1,_hoisted_4$1,createBaseVNode("button",{class:"btn btn-primary btn-lg w-50 mb-5",onClick:t[0]||(t[0]=Fe=>e.$refs.file.click())},"\u9078\u64C7\u6A94\u6848"),createBaseVNode("input",{ref:"file",type:"file",class:"d-none",accept:".pdf,.png,.jpg,.jpeg",onChange:t[1]||(t[1]=Fe=>Ie.handleFileUpload())},null,544),_hoisted_5$1]),_hoisted_6$2])}const Home=_export_sfc(_sfc_main$2,[["render",_sfc_render$1],["__scopeId","data-v-99811b50"]]),Progressbar_vue_vue_type_style_index_0_scoped_0a4652cf_lang="",_sfc_main$1={},_hoisted_1$1={class:"progressbar d-flex justify-content-center border-bottom"},_hoisted_2$1=createStaticVNode('<div class="steps d-flex align-items-center py-5" data-v-0a4652cf><div class="step-icon complete position-relative" data-v-0a4652cf>1</div><p class="d-none d-lg-block me-5" data-v-0a4652cf>\u6210\u529F\u4E0A\u50B3\u6A94\u6848</p></div><div class="steps d-flex align-items-center" data-v-0a4652cf><div class="step-icon step2 current" data-v-0a4652cf>2</div><p class="d-none d-lg-block me-5" data-v-0a4652cf>\u52A0\u5165\u7C3D\u540D\u6A94</p></div><div class="steps d-flex align-items-center" data-v-0a4652cf><div class="step-icon step3" data-v-0a4652cf>3</div><p class="d-none d-lg-block me-5" data-v-0a4652cf>\u78BA\u8A8D\u6A94\u6848</p></div><div class="d-flex align-items-center" data-v-0a4652cf><div class="step-icon step4" data-v-0a4652cf>4</div><p class="d-none d-lg-block" data-v-0a4652cf>\u4E0B\u8F09\u6A94\u6848</p></div>',4),_hoisted_6$1=[_hoisted_2$1];function _sfc_render(e,t){return openBlock(),createElementBlock("div",_hoisted_1$1,_hoisted_6$1)}const Progressbar=_export_sfc(_sfc_main$1,[["render",_sfc_render],["__scopeId","data-v-0a4652cf"]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(Ce){var Me=Object.getOwnPropertyDescriptor(e,Ce);Object.defineProperty(r,Ce,Me.get?Me:{enumerable:!0,get:function(){return e[Ce]}})}),r}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=Xe,t.arraysToBytes=ui,t.assert=$e,t.bytesToString=Ye,t.createPromiseCapability=Hn,t.createValidAbsoluteUrl=ze,t.escapeString=ji,t.getModificationDate=Ln,t.getVerbosityLevel=Ei,t.info=ri,t.isArrayBuffer=Sn,t.isArrayEqual=Tn,t.isAscii=Ki,t.objectFromMap=Li,t.objectSize=gi,t.setVerbosityLevel=xi,t.shadow=qe,t.string32=pi,t.stringToBytes=Ze,t.stringToPDFString=Zi,t.stringToUTF16BEString=cn,t.stringToUTF8String=rn,t.unreachable=Ci,t.utf8StringToString=xn,t.warn=vi;const r=[1,0,0,1,0,0];t.IDENTITY_MATRIX=r;const Ce=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=Ce;const Me=1.35;t.LINE_FACTOR=Me;const Ie=.35;t.LINE_DESCENT_FACTOR=Ie;const Fe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=Fe;const Oe={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=Oe;const _e="pdfjs_internal_editor_";t.AnnotationEditorPrefix=_e;const xe={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=xe;const Pe={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=Pe;const Ae={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=Ae;const Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=Se;const St={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=St;const Te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=Te;const Re={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=Re;const Ee={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=Ee;const ke={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=ke;const De={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=De;const Be={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=Be;const He={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=He;const Ue={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=Ue;const We={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=We;const Je={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=Je;const Qe={O:"PageOpen",C:"PageClose"};t.PageActionEventType=Qe;const fi={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=fi;const oi={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=oi;const ii={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=ii;const li={NONE:0,BINARY:1};t.CMapCompressionType=li;const bi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=bi;const mi={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=mi;const Si={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Si;let _i=ii.WARNINGS;function xi(Hi){Number.isInteger(Hi)&&(_i=Hi)}function Ei(){return _i}function ri(Hi){_i>=ii.INFOS&&console.log(`Info: ${Hi}`)}function vi(Hi){_i>=ii.WARNINGS&&console.log(`Warning: ${Hi}`)}function Ci(Hi){throw new Error(Hi)}function $e(Hi,Fi){Hi||Ci(Fi)}function Ge(Hi){if(!Hi)return!1;switch(Hi.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ze(Hi,Fi=null,Wi=null){if(!Hi)return null;try{if(Wi&&typeof Hi=="string"){if(Wi.addDefaultProtocol&&Hi.startsWith("www.")){const _n=Hi.match(/\./g);_n&&_n.length>=2&&(Hi=`http://${Hi}`)}if(Wi.tryConvertEncoding)try{Hi=rn(Hi)}catch{}}const on=Fi?new URL(Hi,Fi):new URL(Hi);if(Ge(on))return on}catch{}return null}function qe(Hi,Fi,Wi){return Object.defineProperty(Hi,Fi,{value:Wi,enumerable:!0,configurable:!0,writable:!1}),Wi}const ei=function(){function Fi(Wi,on){this.constructor===Fi&&Ci("Cannot initialize BaseException."),this.message=Wi,this.name=on}return Fi.prototype=new Error,Fi.constructor=Fi,Fi}();t.BaseException=ei;class ni extends ei{constructor(Fi,Wi){super(Fi,"PasswordException"),this.code=Wi}}t.PasswordException=ni;class ci extends ei{constructor(Fi,Wi){super(Fi,"UnknownErrorException"),this.details=Wi}}t.UnknownErrorException=ci;class di extends ei{constructor(Fi){super(Fi,"InvalidPDFException")}}t.InvalidPDFException=di;class Ti extends ei{constructor(Fi){super(Fi,"MissingPDFException")}}t.MissingPDFException=Ti;class Ni extends ei{constructor(Fi,Wi){super(Fi,"UnexpectedResponseException"),this.status=Wi}}t.UnexpectedResponseException=Ni;class si extends ei{constructor(Fi){super(Fi,"FormatError")}}t.FormatError=si;class ai extends ei{constructor(Fi){super(Fi,"AbortException")}}t.AbortException=ai;function Ye(Hi){(typeof Hi!="object"||Hi===null||Hi.length===void 0)&&Ci("Invalid argument for bytesToString");const Fi=Hi.length,Wi=8192;if(Fi<Wi)return String.fromCharCode.apply(null,Hi);const on=[];for(let _n=0;_n<Fi;_n+=Wi){const On=Math.min(_n+Wi,Fi),vn=Hi.subarray(_n,On);on.push(String.fromCharCode.apply(null,vn))}return on.join("")}function Ze(Hi){typeof Hi!="string"&&Ci("Invalid argument for stringToBytes");const Fi=Hi.length,Wi=new Uint8Array(Fi);for(let on=0;on<Fi;++on)Wi[on]=Hi.charCodeAt(on)&255;return Wi}function Xe(Hi){if(Hi.length!==void 0)return Hi.length;if(Hi.byteLength!==void 0)return Hi.byteLength;Ci("Invalid argument for arrayByteLength")}function ui(Hi){const Fi=Hi.length;if(Fi===1&&Hi[0]instanceof Uint8Array)return Hi[0];let Wi=0;for(let On=0;On<Fi;On++)Wi+=Xe(Hi[On]);let on=0;const _n=new Uint8Array(Wi);for(let On=0;On<Fi;On++){let vn=Hi[On];vn instanceof Uint8Array||(typeof vn=="string"?vn=Ze(vn):vn=new Uint8Array(vn));const mn=vn.byteLength;_n.set(vn,on),on+=mn}return _n}function pi(Hi){return String.fromCharCode(Hi>>24&255,Hi>>16&255,Hi>>8&255,Hi&255)}function gi(Hi){return Object.keys(Hi).length}function Li(Hi){const Fi=Object.create(null);for(const[Wi,on]of Hi)Fi[Wi]=on;return Fi}function Ri(){const Hi=new Uint8Array(4);return Hi[0]=1,new Uint32Array(Hi.buffer,0,1)[0]===1}function wi(){try{return new Function(""),!0}catch{return!1}}class Vi{static get isLittleEndian(){return qe(this,"isLittleEndian",Ri())}static get isEvalSupported(){return qe(this,"isEvalSupported",wi())}static get isOffscreenCanvasSupported(){return qe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}t.FeatureTest=Vi;const Mi=[...Array(256).keys()].map(Hi=>Hi.toString(16).padStart(2,"0"));class qi{static makeHexColor(Fi,Wi,on){return`#${Mi[Fi]}${Mi[Wi]}${Mi[on]}`}static scaleMinMax(Fi,Wi){let on;Fi[0]?(Fi[0]<0&&(on=Wi[0],Wi[0]=Wi[1],Wi[1]=on),Wi[0]*=Fi[0],Wi[1]*=Fi[0],Fi[3]<0&&(on=Wi[2],Wi[2]=Wi[3],Wi[3]=on),Wi[2]*=Fi[3],Wi[3]*=Fi[3]):(on=Wi[0],Wi[0]=Wi[2],Wi[2]=on,on=Wi[1],Wi[1]=Wi[3],Wi[3]=on,Fi[1]<0&&(on=Wi[2],Wi[2]=Wi[3],Wi[3]=on),Wi[2]*=Fi[1],Wi[3]*=Fi[1],Fi[2]<0&&(on=Wi[0],Wi[0]=Wi[1],Wi[1]=on),Wi[0]*=Fi[2],Wi[1]*=Fi[2]),Wi[0]+=Fi[4],Wi[1]+=Fi[4],Wi[2]+=Fi[5],Wi[3]+=Fi[5]}static transform(Fi,Wi){return[Fi[0]*Wi[0]+Fi[2]*Wi[1],Fi[1]*Wi[0]+Fi[3]*Wi[1],Fi[0]*Wi[2]+Fi[2]*Wi[3],Fi[1]*Wi[2]+Fi[3]*Wi[3],Fi[0]*Wi[4]+Fi[2]*Wi[5]+Fi[4],Fi[1]*Wi[4]+Fi[3]*Wi[5]+Fi[5]]}static applyTransform(Fi,Wi){const on=Fi[0]*Wi[0]+Fi[1]*Wi[2]+Wi[4],_n=Fi[0]*Wi[1]+Fi[1]*Wi[3]+Wi[5];return[on,_n]}static applyInverseTransform(Fi,Wi){const on=Wi[0]*Wi[3]-Wi[1]*Wi[2],_n=(Fi[0]*Wi[3]-Fi[1]*Wi[2]+Wi[2]*Wi[5]-Wi[4]*Wi[3])/on,On=(-Fi[0]*Wi[1]+Fi[1]*Wi[0]+Wi[4]*Wi[1]-Wi[5]*Wi[0])/on;return[_n,On]}static getAxialAlignedBoundingBox(Fi,Wi){const on=qi.applyTransform(Fi,Wi),_n=qi.applyTransform(Fi.slice(2,4),Wi),On=qi.applyTransform([Fi[0],Fi[3]],Wi),vn=qi.applyTransform([Fi[2],Fi[1]],Wi);return[Math.min(on[0],_n[0],On[0],vn[0]),Math.min(on[1],_n[1],On[1],vn[1]),Math.max(on[0],_n[0],On[0],vn[0]),Math.max(on[1],_n[1],On[1],vn[1])]}static inverseTransform(Fi){const Wi=Fi[0]*Fi[3]-Fi[1]*Fi[2];return[Fi[3]/Wi,-Fi[1]/Wi,-Fi[2]/Wi,Fi[0]/Wi,(Fi[2]*Fi[5]-Fi[4]*Fi[3])/Wi,(Fi[4]*Fi[1]-Fi[5]*Fi[0])/Wi]}static singularValueDecompose2dScale(Fi){const Wi=[Fi[0],Fi[2],Fi[1],Fi[3]],on=Fi[0]*Wi[0]+Fi[1]*Wi[2],_n=Fi[0]*Wi[1]+Fi[1]*Wi[3],On=Fi[2]*Wi[0]+Fi[3]*Wi[2],vn=Fi[2]*Wi[1]+Fi[3]*Wi[3],mn=(on+vn)/2,Pn=Math.sqrt((on+vn)**2-4*(on*vn-On*_n))/2,Fn=mn+Pn||1,Mn=mn-Pn||1;return[Math.sqrt(Fn),Math.sqrt(Mn)]}static normalizeRect(Fi){const Wi=Fi.slice(0);return Fi[0]>Fi[2]&&(Wi[0]=Fi[2],Wi[2]=Fi[0]),Fi[1]>Fi[3]&&(Wi[1]=Fi[3],Wi[3]=Fi[1]),Wi}static intersect(Fi,Wi){const on=Math.max(Math.min(Fi[0],Fi[2]),Math.min(Wi[0],Wi[2])),_n=Math.min(Math.max(Fi[0],Fi[2]),Math.max(Wi[0],Wi[2]));if(on>_n)return null;const On=Math.max(Math.min(Fi[1],Fi[3]),Math.min(Wi[1],Wi[3])),vn=Math.min(Math.max(Fi[1],Fi[3]),Math.max(Wi[1],Wi[3]));return On>vn?null:[on,On,_n,vn]}static bezierBoundingBox(Fi,Wi,on,_n,On,vn,mn,Pn){const Fn=[],Mn=[[],[]];let Vn,Rn,Cn,Bn,tr,Xn,Wn,Yn;for(let fr=0;fr<2;++fr){if(fr===0?(Rn=6*Fi-12*on+6*On,Vn=-3*Fi+9*on-9*On+3*mn,Cn=3*on-3*Fi):(Rn=6*Wi-12*_n+6*vn,Vn=-3*Wi+9*_n-9*vn+3*Pn,Cn=3*_n-3*Wi),Math.abs(Vn)<1e-12){if(Math.abs(Rn)<1e-12)continue;Bn=-Cn/Rn,0<Bn&&Bn<1&&Fn.push(Bn);continue}Wn=Rn*Rn-4*Cn*Vn,Yn=Math.sqrt(Wn),!(Wn<0)&&(tr=(-Rn+Yn)/(2*Vn),0<tr&&tr<1&&Fn.push(tr),Xn=(-Rn-Yn)/(2*Vn),0<Xn&&Xn<1&&Fn.push(Xn))}let rr=Fn.length,nr;const ur=rr;for(;rr--;)Bn=Fn[rr],nr=1-Bn,Mn[0][rr]=nr*nr*nr*Fi+3*nr*nr*Bn*on+3*nr*Bn*Bn*On+Bn*Bn*Bn*mn,Mn[1][rr]=nr*nr*nr*Wi+3*nr*nr*Bn*_n+3*nr*Bn*Bn*vn+Bn*Bn*Bn*Pn;return Mn[0][ur]=Fi,Mn[1][ur]=Wi,Mn[0][ur+1]=mn,Mn[1][ur+1]=Pn,Mn[0].length=Mn[1].length=ur+2,[Math.min(...Mn[0]),Math.min(...Mn[1]),Math.max(...Mn[0]),Math.max(...Mn[1])]}}t.Util=qi;const Xi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Zi(Hi){if(Hi[0]>="\xEF"){let Wi;if(Hi[0]==="\xFE"&&Hi[1]==="\xFF"?Wi="utf-16be":Hi[0]==="\xFF"&&Hi[1]==="\xFE"?Wi="utf-16le":Hi[0]==="\xEF"&&Hi[1]==="\xBB"&&Hi[2]==="\xBF"&&(Wi="utf-8"),Wi)try{const on=new TextDecoder(Wi,{fatal:!0}),_n=Ze(Hi);return on.decode(_n)}catch(on){vi(`stringToPDFString: "${on}".`)}}const Fi=[];for(let Wi=0,on=Hi.length;Wi<on;Wi++){const _n=Xi[Hi.charCodeAt(Wi)];Fi.push(_n?String.fromCharCode(_n):Hi.charAt(Wi))}return Fi.join("")}function ji(Hi){return Hi.replace(/([()\\\n\r])/g,Fi=>Fi===`
`?"\\n":Fi==="\r"?"\\r":`\\${Fi}`)}function Ki(Hi){return/^[\x00-\x7F]*$/.test(Hi)}function cn(Hi){const Fi=["\xFE\xFF"];for(let Wi=0,on=Hi.length;Wi<on;Wi++){const _n=Hi.charCodeAt(Wi);Fi.push(String.fromCharCode(_n>>8&255),String.fromCharCode(_n&255))}return Fi.join("")}function rn(Hi){return decodeURIComponent(escape(Hi))}function xn(Hi){return unescape(encodeURIComponent(Hi))}function Sn(Hi){return typeof Hi=="object"&&Hi!==null&&Hi.byteLength!==void 0}function Tn(Hi,Fi){if(Hi.length!==Fi.length)return!1;for(let Wi=0,on=Hi.length;Wi<on;Wi++)if(Hi[Wi]!==Fi[Wi])return!1;return!0}function Ln(Hi=new Date){return[Hi.getUTCFullYear().toString(),(Hi.getUTCMonth()+1).toString().padStart(2,"0"),Hi.getUTCDate().toString().padStart(2,"0"),Hi.getUTCHours().toString().padStart(2,"0"),Hi.getUTCMinutes().toString().padStart(2,"0"),Hi.getUTCSeconds().toString().padStart(2,"0")].join("")}function Hn(){const Hi=Object.create(null);let Fi=!1;return Object.defineProperty(Hi,"settled",{get(){return Fi}}),Hi.promise=new Promise(function(Wi,on){Hi.resolve=function(_n){Fi=!0,Wi(_n)},Hi.reject=function(_n){Fi=!0,on(_n)}}),Hi}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,r,Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Ol,St,Te;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Ee,NodeCMapReaderFactory:ke,NodeStandardFontDataFactory:De}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=Ee,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=ke,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=De}let createPDFNetworkStream;function setPDFNetworkStreamFactory(Ee){createPDFNetworkStream=Ee}function getDocument(Ee){const ke=new PDFDocumentLoadingTask;let De;if(typeof Ee=="string"||Ee instanceof URL)De={url:Ee};else if((0,_util.isArrayBuffer)(Ee))De={data:Ee};else if(Ee instanceof PDFDataRangeTransport)De={range:Ee};else{if(typeof Ee!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Ee.url&&!Ee.data&&!Ee.range)throw new Error("Invalid parameter object: need either .data, .range or .url");De=Ee}const Be=Object.create(null);let He=null,Ue=null;for(const Je in De){const Qe=De[Je];switch(Je){case"url":if(typeof window<"u")try{Be[Je]=new URL(Qe,window.location).href;continue}catch(fi){(0,_util.warn)(`Cannot create valid URL: "${fi}".`)}else if(typeof Qe=="string"||Qe instanceof URL){Be[Je]=Qe.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":He=Qe;continue;case"worker":Ue=Qe;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&Qe instanceof Buffer)Be[Je]=new Uint8Array(Qe);else{if(Qe instanceof Uint8Array)break;if(typeof Qe=="string")Be[Je]=(0,_util.stringToBytes)(Qe);else if(typeof Qe=="object"&&Qe!==null&&!isNaN(Qe.length))Be[Je]=new Uint8Array(Qe);else if((0,_util.isArrayBuffer)(Qe))Be[Je]=new Uint8Array(Qe);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}Be[Je]=Qe}if(Be.CMapReaderFactory=Be.CMapReaderFactory||DefaultCMapReaderFactory,Be.StandardFontDataFactory=Be.StandardFontDataFactory||DefaultStandardFontDataFactory,Be.ignoreErrors=Be.stopAtErrors!==!0,Be.fontExtraProperties=Be.fontExtraProperties===!0,Be.pdfBug=Be.pdfBug===!0,Be.enableXfa=Be.enableXfa===!0,(!Number.isInteger(Be.rangeChunkSize)||Be.rangeChunkSize<1)&&(Be.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof Be.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(Be.docBaseUrl))&&(Be.docBaseUrl=null),(!Number.isInteger(Be.maxImageSize)||Be.maxImageSize<-1)&&(Be.maxImageSize=-1),typeof Be.cMapUrl!="string"&&(Be.cMapUrl=null),typeof Be.standardFontDataUrl!="string"&&(Be.standardFontDataUrl=null),typeof Be.useWorkerFetch!="boolean"&&(Be.useWorkerFetch=Be.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&Be.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof Be.isEvalSupported!="boolean"&&(Be.isEvalSupported=!0),typeof Be.isOffscreenCanvasSupported!="boolean"&&(Be.isOffscreenCanvasSupported=!_is_node.isNodeJS),typeof Be.disableFontFace!="boolean"&&(Be.disableFontFace=_is_node.isNodeJS),typeof Be.useSystemFonts!="boolean"&&(Be.useSystemFonts=!_is_node.isNodeJS&&!Be.disableFontFace),(typeof Be.ownerDocument!="object"||Be.ownerDocument===null)&&(Be.ownerDocument=globalThis.document),typeof Be.disableRange!="boolean"&&(Be.disableRange=!1),typeof Be.disableStream!="boolean"&&(Be.disableStream=!1),typeof Be.disableAutoFetch!="boolean"&&(Be.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(Be.verbosity),!Ue){const Je={verbosity:Be.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};Ue=Je.port?PDFWorker.fromPort(Je):new PDFWorker(Je),ke._worker=Ue}const We=ke.docId;return Ue.promise.then(function(){if(ke.destroyed)throw new Error("Loading aborted");const Je=_fetchDocument(Ue,Be,He,We),Qe=new Promise(function(fi){let oi;He?oi=new _transport_stream.PDFDataTransportStream({length:Be.length,initialData:Be.initialData,progressiveDone:Be.progressiveDone,contentDispositionFilename:Be.contentDispositionFilename,disableRange:Be.disableRange,disableStream:Be.disableStream},He):Be.data||(oi=createPDFNetworkStream({url:Be.url,length:Be.length,httpHeaders:Be.httpHeaders,withCredentials:Be.withCredentials,rangeChunkSize:Be.rangeChunkSize,disableRange:Be.disableRange,disableStream:Be.disableStream})),fi(oi)});return Promise.all([Je,Qe]).then(function([fi,oi]){if(ke.destroyed)throw new Error("Loading aborted");const ii=new _message_handler.MessageHandler(We,fi,Ue.port),li=new WorkerTransport(ii,ke,oi,Be);ke._transport=li,ii.send("Ready",null)})}).catch(ke._capability.reject),ke}async function _fetchDocument(Ee,ke,De,Be){if(Ee.destroyed)throw new Error("Worker was destroyed");De&&(ke.length=De.length,ke.initialData=De.initialData,ke.progressiveDone=De.progressiveDone,ke.contentDispositionFilename=De.contentDispositionFilename);const He=await Ee.messageHandler.sendWithPromise("GetDocRequest",{docId:Be,apiVersion:"3.0.279",data:ke.data,password:ke.password,disableAutoFetch:ke.disableAutoFetch,rangeChunkSize:ke.rangeChunkSize,length:ke.length,docBaseUrl:ke.docBaseUrl,enableXfa:ke.enableXfa,evaluatorOptions:{maxImageSize:ke.maxImageSize,disableFontFace:ke.disableFontFace,ignoreErrors:ke.ignoreErrors,isEvalSupported:ke.isEvalSupported,isOffscreenCanvasSupported:ke.isOffscreenCanvasSupported,fontExtraProperties:ke.fontExtraProperties,useSystemFonts:ke.useSystemFonts,cMapUrl:ke.useWorkerFetch?ke.cMapUrl:null,standardFontDataUrl:ke.useWorkerFetch?ke.standardFontDataUrl:null}});if(ke.data&&(ke.data=null),Ee.destroyed)throw new Error("Worker was destroyed");return He}const t=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Pl(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var ke;this.destroyed=!0,await((ke=this._transport)==null?void 0:ke.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,sn(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ke,De,Be=!1,He=null){this.length=ke,this.initialData=De,this.progressiveDone=Be,this.contentDispositionFilename=He,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(ke){this._rangeListeners.push(ke)}addProgressListener(ke){this._progressListeners.push(ke)}addProgressiveReadListener(ke){this._progressiveReadListeners.push(ke)}addProgressiveDoneListener(ke){this._progressiveDoneListeners.push(ke)}onDataRange(ke,De){for(const Be of this._rangeListeners)Be(ke,De)}onDataProgress(ke,De){this._readyCapability.promise.then(()=>{for(const Be of this._progressListeners)Be(ke,De)})}onDataProgressiveRead(ke){this._readyCapability.promise.then(()=>{for(const De of this._progressiveReadListeners)De(ke)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ke of this._progressiveDoneListeners)ke()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ke,De){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ke,De){this._pdfInfo=ke,this._transport=De}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ke){return this._transport.getPage(ke)}getPageIndex(ke){return this._transport.getPageIndex(ke)}getDestinations(){return this._transport.getDestinations()}getDestination(ke){return this._transport.getDestination(ke)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ke=!1){return this._transport.startCleanup(ke||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ke,De,Be,He,Ue=!1){this._pageIndex=ke,this._pageInfo=De,this._ownerDocument=He,this._transport=Be,this._stats=Ue?new _display_utils.StatTimer:null,this._pdfBug=Ue,this.commonObjs=Be.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ke,rotation:De=this.rotate,offsetX:Be=0,offsetY:He=0,dontFlip:Ue=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ke,rotation:De,offsetX:Be,offsetY:He,dontFlip:Ue})}getAnnotations({intent:ke="display"}={}){const De=this._transport.getRenderingIntent(ke);let Be=this._annotationPromises.get(De.cacheKey);return Be||(Be=this._transport.getAnnotations(this._pageIndex,De.renderingIntent),this._annotationPromises.set(De.cacheKey,Be)),Be}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var ke;return((ke=this._transport._htmlForXfa)==null?void 0:ke.children[this._pageIndex])||null}render({canvasContext:ke,viewport:De,intent:Be="display",annotationMode:He=_util.AnnotationMode.ENABLE,transform:Ue=null,canvasFactory:We=null,background:Je=null,optionalContentConfigPromise:Qe=null,annotationCanvasMap:fi=null,pageColors:oi=null,printAnnotationStorage:ii=null}){var ri,vi;(ri=this._stats)==null||ri.time("Overall");const li=this._transport.getRenderingIntent(Be,He,ii);this.pendingCleanup=!1,Qe||(Qe=this._transport.getOptionalContentConfig());let bi=this._intentStates.get(li.cacheKey);bi||(bi=Object.create(null),this._intentStates.set(li.cacheKey,bi)),bi.streamReaderCancelTimeout&&(clearTimeout(bi.streamReaderCancelTimeout),bi.streamReaderCancelTimeout=null);const mi=We||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Si=!!(li.renderingIntent&_util.RenderingIntentFlag.PRINT);bi.displayReadyCapability||(bi.displayReadyCapability=(0,_util.createPromiseCapability)(),bi.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(vi=this._stats)==null||vi.time("Page Request"),this._pumpOperatorList(li));const _i=Ci=>{var $e,Ge;bi.renderTasks.delete(xi),(this.cleanupAfterRender||Si)&&(this.pendingCleanup=!0),this._tryCleanup(),Ci?(xi.capability.reject(Ci),this._abortOperatorList({intentState:bi,reason:Ci instanceof Error?Ci:new Error(Ci)})):xi.capability.resolve(),($e=this._stats)==null||$e.timeEnd("Rendering"),(Ge=this._stats)==null||Ge.timeEnd("Overall")},xi=new InternalRenderTask({callback:_i,params:{canvasContext:ke,viewport:De,transform:Ue,background:Je},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:fi,operatorList:bi.operatorList,pageIndex:this._pageIndex,canvasFactory:mi,useRequestAnimationFrame:!Si,pdfBug:this._pdfBug,pageColors:oi});(bi.renderTasks||(bi.renderTasks=new Set)).add(xi);const Ei=xi.task;return Promise.all([bi.displayReadyCapability.promise,Qe]).then(([Ci,$e])=>{var Ge;if(this.pendingCleanup){_i();return}(Ge=this._stats)==null||Ge.time("Rendering"),xi.initializeGraphics({transparency:Ci,optionalContentConfig:$e}),xi.operatorListChanged()}).catch(_i),Ei}getOperatorList({intent:ke="display",annotationMode:De=_util.AnnotationMode.ENABLE,printAnnotationStorage:Be=null}={}){var Qe;function He(){We.operatorList.lastChunk&&(We.opListReadCapability.resolve(We.operatorList),We.renderTasks.delete(Je))}const Ue=this._transport.getRenderingIntent(ke,De,Be,!0);let We=this._intentStates.get(Ue.cacheKey);We||(We=Object.create(null),this._intentStates.set(Ue.cacheKey,We));let Je;return We.opListReadCapability||(Je=Object.create(null),Je.operatorListChanged=He,We.opListReadCapability=(0,_util.createPromiseCapability)(),(We.renderTasks||(We.renderTasks=new Set)).add(Je),We.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Qe=this._stats)==null||Qe.time("Page Request"),this._pumpOperatorList(Ue)),We.opListReadCapability.promise}streamTextContent({disableCombineTextItems:ke=!1,includeMarkedContent:De=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:ke!==!0,includeMarkedContent:De===!0},{highWaterMark:100,size(He){return He.items.length}})}getTextContent(ke={}){if(this._transport._htmlForXfa)return this.getXfa().then(Be=>_xfa_text.XfaText.textContent(Be));const De=this.streamTextContent(ke);return new Promise(function(Be,He){function Ue(){We.read().then(function({value:Qe,done:fi}){if(fi){Be(Je);return}Object.assign(Je.styles,Qe.styles),Je.items.push(...Qe.items),Ue()},He)}const We=De.getReader(),Je={items:[],styles:Object.create(null)};Ue()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const ke=[];for(const De of this._intentStates.values())if(this._abortOperatorList({intentState:De,reason:new Error("Page was destroyed."),force:!0}),!De.opListReadCapability)for(const Be of De.renderTasks)ke.push(Be.completed),Be.cancel();this.objs.clear();for(const De of this._bitmaps)De.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(ke)}cleanup(ke=!1){return this.pendingCleanup=!0,this._tryCleanup(ke)}_tryCleanup(ke=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:De,operatorList:Be}of this._intentStates.values())if(De.size>0||!Be.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,ke&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const De of this._bitmaps)De.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(ke,De){var He,Ue;const Be=this._intentStates.get(De);!Be||((He=this._stats)==null||He.timeEnd("Page Request"),(Ue=Be.displayReadyCapability)==null||Ue.resolve(ke))}_renderPageChunk(ke,De){for(let Be=0,He=ke.length;Be<He;Be++)De.operatorList.fnArray.push(ke.fnArray[Be]),De.operatorList.argsArray.push(ke.argsArray[Be]);De.operatorList.lastChunk=ke.lastChunk,De.operatorList.separateAnnots=ke.separateAnnots;for(const Be of De.renderTasks)Be.operatorListChanged();ke.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:ke,cacheKey:De,annotationStorageMap:Be}){const Ue=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ke,cacheKey:De,annotationStorage:Be}).getReader(),We=this._intentStates.get(De);We.streamReader=Ue;const Je=()=>{Ue.read().then(({value:Qe,done:fi})=>{if(fi){We.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Qe,We),Je())},Qe=>{if(We.streamReader=null,!this._transport.destroyed){if(We.operatorList){We.operatorList.lastChunk=!0;for(const fi of We.renderTasks)fi.operatorListChanged();this._tryCleanup()}if(We.displayReadyCapability)We.displayReadyCapability.reject(Qe);else if(We.opListReadCapability)We.opListReadCapability.reject(Qe);else throw Qe}})};Je()}_abortOperatorList({intentState:ke,reason:De,force:Be=!1}){if(!!ke.streamReader){if(!Be){if(ke.renderTasks.size>0)return;if(De instanceof _display_utils.RenderingCancelledException){ke.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:ke,reason:De,force:!0}),ke.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(ke.streamReader.cancel(new _util.AbortException(De.message)).catch(()=>{}),ke.streamReader=null,!this._transport.destroyed){for(const[He,Ue]of this._intentStates)if(Ue===ke){this._intentStates.delete(He);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){sn(this,r,[]);sn(this,Ce,Promise.resolve())}postMessage(ke,De){const Be={data:structuredClone(ke,De)};Di(this,Ce).then(()=>{for(const He of Di(this,r))He.call(this,Be)})}addEventListener(ke,De){Di(this,r).push(De)}removeEventListener(ke,De){const Be=Di(this,r).indexOf(De);Di(this,r).splice(Be,1)}terminate(){Di(this,r).length=0}}r=new WeakMap,Ce=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Ee=(Me=document==null?void 0:document.currentScript)==null?void 0:Me.src;Ee&&(PDFWorkerUtil.fallbackWorkerSrc=Ee.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Ee,ke){let De;try{if(De=new URL(Ee),!De.origin||De.origin==="null")return!1}catch{return!1}const Be=new URL(ke,De);return De.origin===Be.origin},PDFWorkerUtil.createCDNWrapper=function(Ee){const ke=`importScripts("${Ee}");`;return URL.createObjectURL(new Blob([ke]))}}const _PDFWorker=class{constructor({name:Ee=null,port:ke=null,verbosity:De=(0,_util.getVerbosityLevel)()}={}){if(ke&&Di(_PDFWorker,Ie).has(ke))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Ee,this.destroyed=!1,this.verbosity=De,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,ke){Di(_PDFWorker,Ie).set(ke,this),this._initializeFromPort(ke);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Ee){this._port=Ee,this._messageHandler=new _message_handler.MessageHandler("main","worker",Ee),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Ee}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Ee)||(Ee=PDFWorkerUtil.createCDNWrapper(new URL(Ee,window.location).href));const ke=new Worker(Ee),De=new _message_handler.MessageHandler("main","worker",ke),Be=()=>{ke.removeEventListener("error",He),De.destroy(),ke.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},He=()=>{this._webWorker||Be()};ke.addEventListener("error",He),De.on("test",We=>{if(ke.removeEventListener("error",He),this.destroyed){Be();return}We?(this._messageHandler=De,this._port=ke,this._webWorker=ke,this._readyCapability.resolve(),De.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),De.destroy(),ke.terminate())}),De.on("ready",We=>{if(ke.removeEventListener("error",He),this.destroyed){Be();return}try{Ue()}catch{this._setupFakeWorker()}});const Ue=()=>{const We=new Uint8Array;De.send("test",We,[We.buffer])};Ue();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Ee=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ke=new LoopbackPort;this._port=ke;const De=`fake${PDFWorkerUtil.fakeWorkerId++}`,Be=new _message_handler.MessageHandler(De+"_worker",De,ke);Ee.setup(Be,ke);const He=new _message_handler.MessageHandler(De,De+"_worker",ke);this._messageHandler=He,this._readyCapability.resolve(),He.send("configure",{verbosity:this.verbosity})}).catch(Ee=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Ee.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Di(_PDFWorker,Ie).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Ee){if(!(Ee!=null&&Ee.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Di(this,Ie).has(Ee.port)?Di(this,Ie).get(Ee.port):new _PDFWorker(Ee)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Ee;try{return((Ee=globalThis.pdfjsWorker)==null?void 0:Ee.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;Ie=new WeakMap,sn(PDFWorker,Ie,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(ke,De,Be,He){sn(this,Fe,null);sn(this,Oe,new Map);sn(this,_e,new Map);sn(this,xe,null);this.messageHandler=ke,this.loadingTask=De,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:He.ownerDocument,styleElement:He.styleElement}),this._params=He,He.useWorkerFetch||(this.CMapReaderFactory=new He.CMapReaderFactory({baseUrl:He.cMapUrl,isCompressed:He.cMapPacked}),this.StandardFontDataFactory=new He.StandardFontDataFactory({baseUrl:He.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=Be,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Di(this,Fe)}getRenderingIntent(ke,De=_util.AnnotationMode.ENABLE,Be=null,He=!1){let Ue=_util.RenderingIntentFlag.DISPLAY,We=null;switch(ke){case"any":Ue=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ue=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ke}`)}switch(De){case _util.AnnotationMode.DISABLE:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ue+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,We=(Ue&_util.RenderingIntentFlag.PRINT&&Be instanceof _annotation_storage.PrintAnnotationStorage?Be:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${De}`)}return He&&(Ue+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ue,cacheKey:`${Ue}_${_annotation_storage.AnnotationStorage.getHash(We)}`,annotationStorageMap:We}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const ke=[];for(const Be of Di(this,Oe).values())ke.push(Be._destroy());Di(this,Oe).clear(),Di(this,_e).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const De=this.messageHandler.sendWithPromise("Terminate",null);return ke.push(De),Promise.all(ke).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),bn(this,xe,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ke,loadingTask:De}=this;ke.on("GetReader",(Be,He)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Ue=>{this._lastProgress={loaded:Ue.loaded,total:Ue.total}},He.onPull=()=>{this._fullReader.read().then(function({value:Ue,done:We}){if(We){He.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(Ue),"GetReader - expected an ArrayBuffer."),He.enqueue(new Uint8Array(Ue),1,[Ue])}).catch(Ue=>{He.error(Ue)})},He.onCancel=Ue=>{this._fullReader.cancel(Ue),He.ready.catch(We=>{if(!this.destroyed)throw We})}}),ke.on("ReaderHeadersReady",Be=>{const He=(0,_util.createPromiseCapability)(),Ue=this._fullReader;return Ue.headersReady.then(()=>{var We;(!Ue.isStreamingSupported||!Ue.isRangeSupported)&&(this._lastProgress&&((We=De.onProgress)==null||We.call(De,this._lastProgress)),Ue.onProgress=Je=>{var Qe;(Qe=De.onProgress)==null||Qe.call(De,{loaded:Je.loaded,total:Je.total})}),He.resolve({isStreamingSupported:Ue.isStreamingSupported,isRangeSupported:Ue.isRangeSupported,contentLength:Ue.contentLength})},He.reject),He.promise}),ke.on("GetRangeReader",(Be,He)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Ue=this._networkStream.getRangeReader(Be.begin,Be.end);if(!Ue){He.close();return}He.onPull=()=>{Ue.read().then(function({value:We,done:Je}){if(Je){He.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(We),"GetRangeReader - expected an ArrayBuffer."),He.enqueue(new Uint8Array(We),1,[We])}).catch(We=>{He.error(We)})},He.onCancel=We=>{Ue.cancel(We),He.ready.catch(Je=>{if(!this.destroyed)throw Je})}}),ke.on("GetDoc",({pdfInfo:Be})=>{this._numPages=Be.numPages,this._htmlForXfa=Be.htmlForXfa,delete Be.htmlForXfa,De._capability.resolve(new PDFDocumentProxy(Be,this))}),ke.on("DocException",function(Be){let He;switch(Be.name){case"PasswordException":He=new _util.PasswordException(Be.message,Be.code);break;case"InvalidPDFException":He=new _util.InvalidPDFException(Be.message);break;case"MissingPDFException":He=new _util.MissingPDFException(Be.message);break;case"UnexpectedResponseException":He=new _util.UnexpectedResponseException(Be.message,Be.status);break;case"UnknownErrorException":He=new _util.UnknownErrorException(Be.message,Be.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}De._capability.reject(He)}),ke.on("PasswordRequest",Be=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),De.onPassword){const He=Ue=>{Ue instanceof Error?this._passwordCapability.reject(Ue):this._passwordCapability.resolve({password:Ue})};try{De.onPassword(He,Be.code)}catch(Ue){this._passwordCapability.reject(Ue)}}else this._passwordCapability.reject(new _util.PasswordException(Be.message,Be.code));return this._passwordCapability.promise}),ke.on("DataLoaded",Be=>{var He;(He=De.onProgress)==null||He.call(De,{loaded:Be.length,total:Be.length}),this.downloadInfoCapability.resolve(Be)}),ke.on("StartRenderPage",Be=>{if(this.destroyed)return;Di(this,Oe).get(Be.pageIndex)._startRenderPage(Be.transparency,Be.cacheKey)}),ke.on("commonobj",([Be,He,Ue])=>{var We;if(!this.destroyed&&!this.commonObjs.has(Be))switch(He){case"Font":const Je=this._params;if("error"in Ue){const oi=Ue.error;(0,_util.warn)(`Error during font loading: ${oi}`),this.commonObjs.resolve(Be,oi);break}let Qe=null;Je.pdfBug&&((We=globalThis.FontInspector)==null?void 0:We.enabled)&&(Qe={registerFont(oi,ii){globalThis.FontInspector.fontAdded(oi,ii)}});const fi=new _font_loader.FontFaceObject(Ue,{isEvalSupported:Je.isEvalSupported,disableFontFace:Je.disableFontFace,ignoreErrors:Je.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Qe});this.fontLoader.bind(fi).catch(oi=>ke.sendWithPromise("FontFallback",{id:Be})).finally(()=>{!Je.fontExtraProperties&&fi.data&&(fi.data=null),this.commonObjs.resolve(Be,fi)});break;case"FontPath":case"Image":this.commonObjs.resolve(Be,Ue);break;default:throw new Error(`Got unknown common object type ${He}`)}}),ke.on("obj",([Be,He,Ue,We])=>{var Qe;if(this.destroyed)return;const Je=Di(this,Oe).get(He);if(!Je.objs.has(Be))switch(Ue){case"Image":Je.objs.resolve(Be,We);const fi=8e6;if(We){let oi;if(We.bitmap){const{bitmap:ii,width:li,height:bi}=We;oi=li*bi*4,Je._bitmaps.add(ii)}else oi=((Qe=We.data)==null?void 0:Qe.length)||0;oi>fi&&(Je.cleanupAfterRender=!0)}break;case"Pattern":Je.objs.resolve(Be,We);break;default:throw new Error(`Got unknown object type ${Ue}`)}}),ke.on("DocProgress",Be=>{var He;this.destroyed||(He=De.onProgress)==null||He.call(De,{loaded:Be.loaded,total:Be.total})}),ke.on("DocStats",Be=>{this.destroyed||bn(this,Fe,Object.freeze({streamTypes:Object.freeze(Be.streamTypes),fontTypes:Object.freeze(Be.fontTypes)}))}),ke.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),ke.on("FetchBuiltInCMap",Be=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(Be):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ke.on("FetchStandardFontData",Be=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(Be):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:ke}){var De,Be;this.destroyed||(Be=(De=this.loadingTask).onUnsupportedFeature)==null||Be.call(De,ke)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ke,De;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(De=(ke=this._fullReader)==null?void 0:ke.filename)!=null?De:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(ke){if(!Number.isInteger(ke)||ke<=0||ke>this._numPages)return Promise.reject(new Error("Invalid page request."));const De=ke-1,Be=Di(this,_e).get(De);if(Be)return Be;const He=this.messageHandler.sendWithPromise("GetPage",{pageIndex:De}).then(Ue=>{if(this.destroyed)throw new Error("Transport destroyed");const We=new PDFPageProxy(De,Ue,this,this._params.ownerDocument,this._params.pdfBug);return Di(this,Oe).set(De,We),We});return Di(this,_e).set(De,He),He}getPageIndex(ke){return typeof ke!="object"||ke===null||!Number.isInteger(ke.num)||ke.num<0||!Number.isInteger(ke.gen)||ke.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ke.num,gen:ke.gen})}getAnnotations(ke,De){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ke,intent:De})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ke){return typeof ke!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ke})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(ke){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ke})}getStructTree(ke){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ke})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ke=>new _optional_content_config.OptionalContentConfig(ke))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Di(this,xe)||bn(this,xe,this.messageHandler.sendWithPromise("GetMetadata",null).then(ke=>{var De,Be,He,Ue;return{info:ke[0],metadata:ke[1]?new _metadata.Metadata(ke[1]):null,contentDispositionFilename:(Be=(De=this._fullReader)==null?void 0:De.filename)!=null?Be:null,contentLength:(Ue=(He=this._fullReader)==null?void 0:He.contentLength)!=null?Ue:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ke=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const De of Di(this,Oe).values())if(!De.cleanup())throw new Error(`startCleanup: Page ${De.pageNumber} is currently rendering.`);this.commonObjs.clear(),ke||this.fontLoader.clear(),bn(this,xe,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const ke=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ke.disableAutoFetch,enableXfa:ke.enableXfa})}}Fe=new WeakMap,Oe=new WeakMap,_e=new WeakMap,xe=new WeakMap;class PDFObjects{constructor(){sn(this,Ae);sn(this,Pe,Object.create(null))}get(ke,De=null){if(De){const He=dn(this,Ae,Ol).call(this,ke);return He.capability.promise.then(()=>De(He.data)),null}const Be=Di(this,Pe)[ke];if(!(Be!=null&&Be.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ke}.`);return Be.data}has(ke){const De=Di(this,Pe)[ke];return(De==null?void 0:De.capability.settled)||!1}resolve(ke,De=null){const Be=dn(this,Ae,Ol).call(this,ke);Be.data=De,Be.capability.resolve()}clear(){bn(this,Pe,Object.create(null))}}Pe=new WeakMap,Ae=new WeakSet,Ol=function(ke){const De=Di(this,Pe)[ke];return De||(Di(this,Pe)[ke]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(ke){sn(this,St,null);bn(this,St,ke),this.onContinue=null}get promise(){return Di(this,St).capability.promise}cancel(){Di(this,St).cancel()}get separateAnnots(){const{separateAnnots:ke}=Di(this,St).operatorList;if(!ke)return!1;const{annotationCanvasMap:De}=Di(this,St);return ke.form||ke.canvas&&(De==null?void 0:De.size)>0}}St=new WeakMap,exports.RenderTask=RenderTask;const Re=class{constructor({callback:ke,params:De,objs:Be,commonObjs:He,annotationCanvasMap:Ue,operatorList:We,pageIndex:Je,canvasFactory:Qe,useRequestAnimationFrame:fi=!1,pdfBug:oi=!1,pageColors:ii=null}){this.callback=ke,this.params=De,this.objs=Be,this.commonObjs=He,this.annotationCanvasMap=Ue,this.operatorListIdx=null,this.operatorList=We,this._pageIndex=Je,this.canvasFactory=Qe,this._pdfBug=oi,this.pageColors=ii,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=fi===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=De.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ke=!1,optionalContentConfig:De}){var Je,Qe;if(this.cancelled)return;if(this._canvas){if(Di(Re,Te).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Di(Re,Te).add(this._canvas)}this._pdfBug&&((Je=globalThis.StepperManager)==null?void 0:Je.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Be,viewport:He,transform:Ue,background:We}=this.params;this.gfx=new _canvas.CanvasGraphics(Be,this.commonObjs,this.objs,this.canvasFactory,De,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Ue,viewport:He,transparency:ke,background:We}),this.operatorListIdx=0,this.graphicsReady=!0,(Qe=this.graphicsReadyCallback)==null||Qe.call(this)}cancel(ke=null){var De;this.running=!1,this.cancelled=!0,(De=this.gfx)==null||De.endDrawing(),this._canvas&&Di(Re,Te).delete(this._canvas),this.callback(ke||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var ke;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ke=this.stepper)==null||ke.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Di(Re,Te).delete(this._canvas),this.callback())))}};let InternalRenderTask=Re;Te=new WeakMap,sn(InternalRenderTask,Te,new WeakSet);const version="3.0.279";exports.version=version;const build="d0823066c";exports.build=build},(e,t,r)=>{var _e,Pc,Pe;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var Ce=r(1),Me=r(4),Ie=r(8);class Fe{constructor(){sn(this,_e);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Se,St){const Te=this._storage.get(Se);return Te===void 0?St:Object.assign(St,Te)}getRawValue(Se){return this._storage.get(Se)}remove(Se){if(this._storage.delete(Se),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const St of this._storage.values())if(St instanceof Me.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Se,St){const Te=this._storage.get(Se);let Re=!1;if(Te!==void 0)for(const[Ee,ke]of Object.entries(St))Te[Ee]!==ke&&(Re=!0,Te[Ee]=ke);else Re=!0,this._storage.set(Se,St);Re&&dn(this,_e,Pc).call(this),St instanceof Me.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(St.constructor._type)}has(Se){return this._storage.has(Se)}getAll(){return this._storage.size>0?(0,Ce.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Oe(this)}get serializable(){if(this._storage.size===0)return null;const Se=new Map;for(const[St,Te]of this._storage){const Re=Te instanceof Me.AnnotationEditor?Te.serialize():Te;Re&&Se.set(St,Re)}return Se}static getHash(Se){if(!Se)return"";const St=new Ie.MurmurHash3_64;for(const[Te,Re]of Se)St.update(`${Te}:${JSON.stringify(Re)}`);return St.hexdigest()}}_e=new WeakSet,Pc=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=Fe;class Oe extends Fe{constructor(St){super();sn(this,Pe,null);bn(this,Pe,structuredClone(St.serializable))}get print(){(0,Ce.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Di(this,Pe)}}Pe=new WeakMap,t.PrintAnnotationStorage=Oe},(e,t,r)=>{var Fe,Oe,_e,xe,Pe,Ae;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var Ce=r(5),Me=r(1);const Se=class{constructor(Te){sn(this,Fe,this.focusin.bind(this));sn(this,Oe,this.focusout.bind(this));sn(this,_e,!1);sn(this,xe,!1);sn(this,Pe,!1);sn(this,Ae,Se._zIndex++);this.constructor===Se&&(0,Me.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Te.parent,this.id=Te.id,this.width=this.height=null,this.pageIndex=Te.parent.pageIndex,this.name=Te.name,this.div=null;const[Re,Ee]=this.parent.viewportBaseDimensions;this.x=Te.x/Re,this.y=Te.y/Ee,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,Me.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Di(this,Ae)}focusin(Te){Di(this,_e)?bn(this,_e,!1):this.parent.setSelected(this)}focusout(Te){if(!this.isAttachedToDOM)return;const Re=Te.relatedTarget;Re!=null&&Re.closest(`#${this.id}`)||(Te.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(Te){const Re=this.parent.div.getBoundingClientRect();this.startX=Te.clientX-Re.x,this.startY=Te.clientY-Re.y,Te.dataTransfer.setData("text/plain",this.id),Te.dataTransfer.effectAllowed="move"}setAt(Te,Re,Ee,ke){const[De,Be]=this.parent.viewportBaseDimensions;[Ee,ke]=this.screenToPageTranslation(Ee,ke),this.x=(Te+Ee)/De,this.y=(Re+ke)/Be,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(Te,Re){const[Ee,ke]=this.parent.viewportBaseDimensions;[Te,Re]=this.screenToPageTranslation(Te,Re),this.x+=Te/Ee,this.y+=Re/ke,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(Te,Re){const{rotation:Ee}=this.parent.viewport;switch(Ee){case 90:return[Re,-Te];case 180:return[-Te,-Re];case 270:return[-Re,Te];default:return[Te,Re]}}setDims(Te,Re){const[Ee,ke]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*Te/Ee}%`,this.div.style.height=`${100*Re/ke}%`}fixDims(){const{style:Te}=this.div,{height:Re,width:Ee}=Te,ke=Ee.endsWith("%"),De=Re.endsWith("%");if(ke&&De)return;const[Be,He]=this.parent.viewportBaseDimensions;ke||(Te.width=`${100*parseFloat(Ee)/Be}%`),De||(Te.height=`${100*parseFloat(Re)/He}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Di(this,Fe)),this.div.addEventListener("focusout",Di(this,Oe));const[Te,Re]=this.getInitialTranslation();return this.translate(Te,Re),(0,Ce.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(Te){const Re=Ce.KeyboardManager.platform.isMac;if(Te.button!==0||Te.ctrlKey&&Re){Te.preventDefault();return}Te.ctrlKey&&!Re||Te.shiftKey||Te.metaKey&&Re?this.parent.toggleSelected(this):this.parent.setSelected(this),bn(this,_e,!0)}getRect(Te,Re){const[Ee,ke]=this.parent.viewportBaseDimensions,[De,Be]=this.parent.pageDimensions,He=De*Te/Ee,Ue=Be*Re/ke,We=this.x*De,Je=this.y*Be,Qe=this.width*De,fi=this.height*Be;switch(this.rotation){case 0:return[We+He,Be-Je-Ue-fi,We+He+Qe,Be-Je-Ue];case 90:return[We+Ue,Be-Je+He,We+Ue+fi,Be-Je+He+Qe];case 180:return[We-He-Qe,Be-Je+Ue,We-He,Be-Je+Ue+fi];case 270:return[We-Ue-fi,Be-Je-He-Qe,We-Ue,Be-Je-He];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Te,Re){const[Ee,ke,De,Be]=Te,He=De-Ee,Ue=Be-ke;switch(this.rotation){case 0:return[Ee,Re-Be,He,Ue];case 90:return[Ee,Re-ke,Ue,He];case 180:return[De,Re-ke,He,Ue];case 270:return[De,Re-Be,Ue,He];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){bn(this,Pe,!0)}disableEditMode(){bn(this,Pe,!1)}isInEditMode(){return Di(this,Pe)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Te;(Te=this.div)==null||Te.addEventListener("focusin",Di(this,Fe))}serialize(){(0,Me.unreachable)("An editor must be serializable")}static deserialize(Te,Re){const Ee=new this.prototype.constructor({parent:Re,id:Re.getNextId()});Ee.rotation=Te.rotation;const[ke,De]=Re.pageDimensions,[Be,He,Ue,We]=Ee.getRectInCurrentCoords(Te.rect,De);return Ee.x=Be/ke,Ee.y=He/De,Ee.width=Ue/ke,Ee.height=We/De,Ee}remove(){this.div.removeEventListener("focusin",Di(this,Fe)),this.div.removeEventListener("focusout",Di(this,Oe)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var Te;(Te=this.div)==null||Te.classList.add("selectedEditor")}unselect(){var Te;(Te=this.div)==null||Te.classList.remove("selectedEditor")}updateParams(Te,Re){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return Di(this,xe)}set isEditing(Te){bn(this,xe,Te),Te?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let Ie=Se;Fe=new WeakMap,Oe=new WeakMap,_e=new WeakMap,xe=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,lr(Ie,"_colorManager",new Ce.ColorManager),lr(Ie,"_zIndex",1),t.AnnotationEditor=Ie},(e,t,r)=>{var Se,St,Te,Re,Ee,ke,Oc,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri,vi,Ci,$e,Ge,ze,Lc,ei,Ll,ci,Nc,Ti,kc,si,Ur,Ye,Va,Xe,Rc,pi,Mc,Li,Nl,wi,Wa,Mi,kl;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=Ie,t.opacityToHex=Fe;var Ce=r(1),Me=r(6);function Ie(Zi,ji,Ki){for(const cn of Ki)ji.addEventListener(cn,Zi[cn].bind(Zi))}function Fe(Zi){return Math.round(Math.min(255,Math.max(1,255*Zi))).toString(16).padStart(2,"0")}class Oe{constructor(){sn(this,Se,0)}getId(){return`${Ce.AnnotationEditorPrefix}${Pl(this,Se)._++}`}}Se=new WeakMap;class _e{constructor(ji=128){sn(this,St,[]);sn(this,Te,!1);sn(this,Re,void 0);sn(this,Ee,-1);bn(this,Re,ji)}add({cmd:ji,undo:Ki,mustExec:cn,type:rn=NaN,overwriteIfSameType:xn=!1,keepUndo:Sn=!1}){if(cn&&ji(),Di(this,Te))return;const Tn={cmd:ji,undo:Ki,type:rn};if(Di(this,Ee)===-1){Di(this,St).length>0&&(Di(this,St).length=0),bn(this,Ee,0),Di(this,St).push(Tn);return}if(xn&&Di(this,St)[Di(this,Ee)].type===rn){Sn&&(Tn.undo=Di(this,St)[Di(this,Ee)].undo),Di(this,St)[Di(this,Ee)]=Tn;return}const Ln=Di(this,Ee)+1;Ln===Di(this,Re)?Di(this,St).splice(0,1):(bn(this,Ee,Ln),Ln<Di(this,St).length&&Di(this,St).splice(Ln)),Di(this,St).push(Tn)}undo(){Di(this,Ee)!==-1&&(bn(this,Te,!0),Di(this,St)[Di(this,Ee)].undo(),bn(this,Te,!1),bn(this,Ee,Di(this,Ee)-1))}redo(){Di(this,Ee)<Di(this,St).length-1&&(bn(this,Ee,Di(this,Ee)+1),bn(this,Te,!0),Di(this,St)[Di(this,Ee)].cmd(),bn(this,Te,!1))}hasSomethingToUndo(){return Di(this,Ee)!==-1}hasSomethingToRedo(){return Di(this,Ee)<Di(this,St).length-1}destroy(){bn(this,St,null)}}St=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ee=new WeakMap,t.CommandManager=_e;const Be=class{constructor(ji){sn(this,ke);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Ki=Be.platform.isMac;for(const[cn,rn]of ji)for(const xn of cn){const Sn=xn.startsWith("mac+");Ki&&Sn?(this.callbacks.set(xn.slice(4),rn),this.allKeys.add(xn.split("+").at(-1))):!Ki&&!Sn&&(this.callbacks.set(xn,rn),this.allKeys.add(xn.split("+").at(-1)))}}static get platform(){const ji=typeof navigator<"u"?navigator.platform:"";return(0,Ce.shadow)(this,"platform",{isWin:ji.includes("Win"),isMac:ji.includes("Mac")})}exec(ji,Ki){if(!this.allKeys.has(Ki.key))return;const cn=this.callbacks.get(dn(this,ke,Oc).call(this,Ki));!cn||(cn.bind(ji)(),Ki.stopPropagation(),Ki.preventDefault())}};let xe=Be;ke=new WeakSet,Oc=function(ji){ji.altKey&&this.buffer.push("alt"),ji.ctrlKey&&this.buffer.push("ctrl"),ji.metaKey&&this.buffer.push("meta"),ji.shiftKey&&this.buffer.push("shift"),this.buffer.push(ji.key);const Ki=this.buffer.join("+");return this.buffer.length=0,Ki},t.KeyboardManager=xe;const He=class{get _colors(){const ji=new Map([["CanvasText",null],["Canvas",null]]);return(0,Me.getColorValues)(ji),(0,Ce.shadow)(this,"_colors",ji)}convert(ji){const Ki=(0,Me.getRGB)(ji);if(!window.matchMedia("(forced-colors: active)").matches)return Ki;for(const[cn,rn]of this._colors)if(rn.every((xn,Sn)=>xn===Ki[Sn]))return He._colorsMapping.get(cn);return Ki}getHexCode(ji){const Ki=this._colors.get(ji);return Ki?Ce.Util.makeHexColor(...Ki):ji}};let Pe=He;lr(Pe,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=Pe;const Xi=class{constructor(ji,Ki){sn(this,ze);sn(this,ei);sn(this,ci);sn(this,Ti);sn(this,si);sn(this,Ye);sn(this,Xe);sn(this,pi);sn(this,Li);sn(this,wi);sn(this,Mi);sn(this,Ue,null);sn(this,We,new Map);sn(this,Je,new Map);sn(this,Qe,new _e);sn(this,fi,0);sn(this,oi,null);sn(this,ii,null);sn(this,li,new Oe);sn(this,bi,!1);sn(this,mi,Ce.AnnotationEditorType.NONE);sn(this,Si,new Set);sn(this,_i,this.copy.bind(this));sn(this,xi,this.cut.bind(this));sn(this,Ei,this.paste.bind(this));sn(this,ri,this.keydown.bind(this));sn(this,vi,this.onEditingAction.bind(this));sn(this,Ci,this.onPageChanging.bind(this));sn(this,$e,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});sn(this,Ge,null);bn(this,Ge,ji),bn(this,ii,Ki),Di(this,ii)._on("editingaction",Di(this,vi)),Di(this,ii)._on("pagechanging",Di(this,Ci))}destroy(){dn(this,ei,Ll).call(this),Di(this,ii)._off("editingaction",Di(this,vi)),Di(this,ii)._off("pagechanging",Di(this,Ci));for(const ji of Di(this,Je).values())ji.destroy();Di(this,Je).clear(),Di(this,We).clear(),bn(this,Ue,null),Di(this,Si).clear(),Di(this,Qe).destroy()}onPageChanging({pageNumber:ji}){bn(this,fi,ji-1)}focusMainContainer(){Di(this,Ge).focus()}copy(ji){if(ji.preventDefault(),Di(this,Ue)&&Di(this,Ue).commitOrRemove(),!this.hasSelection)return;const Ki=[];for(const cn of Di(this,Si))cn.isEmpty()||Ki.push(cn.serialize());Ki.length!==0&&ji.clipboardData.setData("application/pdfjs",JSON.stringify(Ki))}cut(ji){this.copy(ji),this.delete()}paste(ji){ji.preventDefault();let Ki=ji.clipboardData.getData("application/pdfjs");if(!Ki)return;try{Ki=JSON.parse(Ki)}catch(rn){(0,Ce.warn)(`paste: "${rn.message}".`);return}if(!Array.isArray(Ki))return;this.unselectAll();const cn=Di(this,Je).get(Di(this,fi));try{const rn=[];for(const Tn of Ki){const Ln=cn.deserialize(Tn);if(!Ln)return;rn.push(Ln)}const xn=()=>{for(const Tn of rn)dn(this,Li,Nl).call(this,Tn);dn(this,Mi,kl).call(this,rn)},Sn=()=>{for(const Tn of rn)Tn.remove()};this.addCommands({cmd:xn,undo:Sn,mustExec:!0})}catch(rn){(0,Ce.warn)(`paste: "${rn.message}".`)}}keydown(ji){var Ki;(Ki=this.getActive())!=null&&Ki.shouldGetKeyboardEvents()||Xi._keyboardManager.exec(this,ji)}onEditingAction(ji){["undo","redo","delete","selectAll"].includes(ji.name)&&this[ji.name]()}setEditingState(ji){ji?(dn(this,ze,Lc).call(this),dn(this,ci,Nc).call(this),dn(this,si,Ur).call(this,{isEditing:Di(this,mi)!==Ce.AnnotationEditorType.NONE,isEmpty:dn(this,wi,Wa).call(this),hasSomethingToUndo:Di(this,Qe).hasSomethingToUndo(),hasSomethingToRedo:Di(this,Qe).hasSomethingToRedo(),hasSelectedEditor:!1})):(dn(this,ei,Ll).call(this),dn(this,Ti,kc).call(this),dn(this,si,Ur).call(this,{isEditing:!1}))}registerEditorTypes(ji){if(!Di(this,oi)){bn(this,oi,ji);for(const Ki of Di(this,oi))dn(this,Ye,Va).call(this,Ki.defaultPropertiesToUpdate)}}getId(){return Di(this,li).getId()}addLayer(ji){Di(this,Je).set(ji.pageIndex,ji),Di(this,bi)?ji.enable():ji.disable()}removeLayer(ji){Di(this,Je).delete(ji.pageIndex)}updateMode(ji){if(bn(this,mi,ji),ji===Ce.AnnotationEditorType.NONE)this.setEditingState(!1),dn(this,pi,Mc).call(this);else{this.setEditingState(!0),dn(this,Xe,Rc).call(this);for(const Ki of Di(this,Je).values())Ki.updateMode(ji)}}updateToolbar(ji){ji!==Di(this,mi)&&Di(this,ii).dispatch("switchannotationeditormode",{source:this,mode:ji})}updateParams(ji,Ki){if(!!Di(this,oi)){for(const cn of Di(this,Si))cn.updateParams(ji,Ki);for(const cn of Di(this,oi))cn.updateDefaultParams(ji,Ki)}}getEditors(ji){const Ki=[];for(const cn of Di(this,We).values())cn.pageIndex===ji&&Ki.push(cn);return Ki}getEditor(ji){return Di(this,We).get(ji)}addEditor(ji){Di(this,We).set(ji.id,ji)}removeEditor(ji){Di(this,We).delete(ji.id),this.unselect(ji)}setActiveEditor(ji){Di(this,Ue)!==ji&&(bn(this,Ue,ji),ji&&dn(this,Ye,Va).call(this,ji.propertiesToUpdate))}toggleSelected(ji){if(Di(this,Si).has(ji)){Di(this,Si).delete(ji),ji.unselect(),dn(this,si,Ur).call(this,{hasSelectedEditor:this.hasSelection});return}Di(this,Si).add(ji),ji.select(),dn(this,Ye,Va).call(this,ji.propertiesToUpdate),dn(this,si,Ur).call(this,{hasSelectedEditor:!0})}setSelected(ji){for(const Ki of Di(this,Si))Ki!==ji&&Ki.unselect();Di(this,Si).clear(),Di(this,Si).add(ji),ji.select(),dn(this,Ye,Va).call(this,ji.propertiesToUpdate),dn(this,si,Ur).call(this,{hasSelectedEditor:!0})}isSelected(ji){return Di(this,Si).has(ji)}unselect(ji){ji.unselect(),Di(this,Si).delete(ji),dn(this,si,Ur).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Di(this,Si).size!==0}undo(){Di(this,Qe).undo(),dn(this,si,Ur).call(this,{hasSomethingToUndo:Di(this,Qe).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:dn(this,wi,Wa).call(this)})}redo(){Di(this,Qe).redo(),dn(this,si,Ur).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Di(this,Qe).hasSomethingToRedo(),isEmpty:dn(this,wi,Wa).call(this)})}addCommands(ji){Di(this,Qe).add(ji),dn(this,si,Ur).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:dn(this,wi,Wa).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const ji=[...Di(this,Si)],Ki=()=>{for(const rn of ji)rn.remove()},cn=()=>{for(const rn of ji)dn(this,Li,Nl).call(this,rn)};this.addCommands({cmd:Ki,undo:cn,mustExec:!0})}commitOrRemove(){var ji;(ji=Di(this,Ue))==null||ji.commitOrRemove()}selectAll(){for(const ji of Di(this,Si))ji.commit();dn(this,Mi,kl).call(this,Di(this,We).values())}unselectAll(){if(Di(this,Ue)){Di(this,Ue).commitOrRemove();return}if(Di(this,Si).size!==0){for(const ji of Di(this,Si))ji.unselect();Di(this,Si).clear(),dn(this,si,Ur).call(this,{hasSelectedEditor:!1})}}isActive(ji){return Di(this,Ue)===ji}getActive(){return Di(this,Ue)}getMode(){return Di(this,mi)}};let Ae=Xi;Ue=new WeakMap,We=new WeakMap,Je=new WeakMap,Qe=new WeakMap,fi=new WeakMap,oi=new WeakMap,ii=new WeakMap,li=new WeakMap,bi=new WeakMap,mi=new WeakMap,Si=new WeakMap,_i=new WeakMap,xi=new WeakMap,Ei=new WeakMap,ri=new WeakMap,vi=new WeakMap,Ci=new WeakMap,$e=new WeakMap,Ge=new WeakMap,ze=new WeakSet,Lc=function(){Di(this,Ge).addEventListener("keydown",Di(this,ri))},ei=new WeakSet,Ll=function(){Di(this,Ge).removeEventListener("keydown",Di(this,ri))},ci=new WeakSet,Nc=function(){document.addEventListener("copy",Di(this,_i)),document.addEventListener("cut",Di(this,xi)),document.addEventListener("paste",Di(this,Ei))},Ti=new WeakSet,kc=function(){document.removeEventListener("copy",Di(this,_i)),document.removeEventListener("cut",Di(this,xi)),document.removeEventListener("paste",Di(this,Ei))},si=new WeakSet,Ur=function(ji){Object.entries(ji).some(([cn,rn])=>Di(this,$e)[cn]!==rn)&&Di(this,ii).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Di(this,$e),ji)})},Ye=new WeakSet,Va=function(ji){Di(this,ii).dispatch("annotationeditorparamschanged",{source:this,details:ji})},Xe=new WeakSet,Rc=function(){if(!Di(this,bi)){bn(this,bi,!0);for(const ji of Di(this,Je).values())ji.enable()}},pi=new WeakSet,Mc=function(){if(this.unselectAll(),Di(this,bi)){bn(this,bi,!1);for(const ji of Di(this,Je).values())ji.disable()}},Li=new WeakSet,Nl=function(ji){const Ki=Di(this,Je).get(ji.pageIndex);Ki?Ki.addOrRebuild(ji):this.addEditor(ji)},wi=new WeakSet,Wa=function(){if(Di(this,We).size===0)return!0;if(Di(this,We).size===1)for(const ji of Di(this,We).values())return ji.isEmpty();return!1},Mi=new WeakSet,kl=function(ji){Di(this,Si).clear();for(const Ki of ji)Ki.isEmpty()||(Di(this,Si).add(Ki),Ki.select());dn(this,si,Ur).call(this,{hasSelectedEditor:!0})},lr(Ae,"_keyboardManager",new xe([[["ctrl+a","mac+meta+a"],Xi.prototype.selectAll],[["ctrl+z","mac+meta+z"],Xi.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Xi.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Xi.prototype.delete],[["Escape","mac+Escape"],Xi.prototype.unselectAll]])),t.AnnotationEditorUIManager=Ae},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=We,t.getColorValues=ii,t.getCurrentTransform=li,t.getCurrentTransformInverse=bi,t.getFilenameFromUrl=ke,t.getPdfFilenameFromUrl=De,t.getRGB=oi,t.getXfaPageViewport=fi,t.isDataScheme=Re,t.isPdfFile=Ee,t.isValidFetchUrl=He,t.loadScript=Ue;var Ce=r(7),Me=r(1);const Ie="http://www.w3.org/2000/svg",Fe="pdfjs_internal_id_";t.AnnotationPrefix=Fe;const mi=class{};let Oe=mi;lr(Oe,"CSS",96),lr(Oe,"PDF",72),lr(Oe,"PDF_TO_CSS_UNITS",mi.CSS/mi.PDF),t.PixelsPerInch=Oe;class _e extends Ce.BaseCanvasFactory{constructor({ownerDocument:_i=globalThis.document}={}){super(),this._document=_i}_createCanvas(_i,xi){const Ei=this._document.createElement("canvas");return Ei.width=_i,Ei.height=xi,Ei}}t.DOMCanvasFactory=_e;async function xe(Si,_i=!1){if(He(Si,document.baseURI)){const xi=await fetch(Si);if(!xi.ok)throw new Error(xi.statusText);return _i?new Uint8Array(await xi.arrayBuffer()):(0,Me.stringToBytes)(await xi.text())}return new Promise((xi,Ei)=>{const ri=new XMLHttpRequest;ri.open("GET",Si,!0),_i&&(ri.responseType="arraybuffer"),ri.onreadystatechange=()=>{if(ri.readyState===XMLHttpRequest.DONE){if(ri.status===200||ri.status===0){let vi;if(_i&&ri.response?vi=new Uint8Array(ri.response):!_i&&ri.responseText&&(vi=(0,Me.stringToBytes)(ri.responseText)),vi){xi(vi);return}}Ei(new Error(ri.statusText))}},ri.send(null)})}class Pe extends Ce.BaseCMapReaderFactory{_fetchData(_i,xi){return xe(_i,this.isCompressed).then(Ei=>({cMapData:Ei,compressionType:xi}))}}t.DOMCMapReaderFactory=Pe;class Ae extends Ce.BaseStandardFontDataFactory{_fetchData(_i){return xe(_i,!0)}}t.DOMStandardFontDataFactory=Ae;class Se extends Ce.BaseSVGFactory{_createSVG(_i){return document.createElementNS(Ie,_i)}}t.DOMSVGFactory=Se;class St{constructor({viewBox:_i,scale:xi,rotation:Ei,offsetX:ri=0,offsetY:vi=0,dontFlip:Ci=!1}){this.viewBox=_i,this.scale=xi,this.rotation=Ei,this.offsetX=ri,this.offsetY=vi;const $e=(_i[2]+_i[0])/2,Ge=(_i[3]+_i[1])/2;let ze,qe,ei,ni;switch(Ei%=360,Ei<0&&(Ei+=360),Ei){case 180:ze=-1,qe=0,ei=0,ni=1;break;case 90:ze=0,qe=1,ei=1,ni=0;break;case 270:ze=0,qe=-1,ei=-1,ni=0;break;case 0:ze=1,qe=0,ei=0,ni=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ci&&(ei=-ei,ni=-ni);let ci,di,Ti,Ni;ze===0?(ci=Math.abs(Ge-_i[1])*xi+ri,di=Math.abs($e-_i[0])*xi+vi,Ti=Math.abs(_i[3]-_i[1])*xi,Ni=Math.abs(_i[2]-_i[0])*xi):(ci=Math.abs($e-_i[0])*xi+ri,di=Math.abs(Ge-_i[1])*xi+vi,Ti=Math.abs(_i[2]-_i[0])*xi,Ni=Math.abs(_i[3]-_i[1])*xi),this.transform=[ze*xi,qe*xi,ei*xi,ni*xi,ci-ze*xi*$e-ei*xi*Ge,di-qe*xi*$e-ni*xi*Ge],this.width=Ti,this.height=Ni}clone({scale:_i=this.scale,rotation:xi=this.rotation,offsetX:Ei=this.offsetX,offsetY:ri=this.offsetY,dontFlip:vi=!1}={}){return new St({viewBox:this.viewBox.slice(),scale:_i,rotation:xi,offsetX:Ei,offsetY:ri,dontFlip:vi})}convertToViewportPoint(_i,xi){return Me.Util.applyTransform([_i,xi],this.transform)}convertToViewportRectangle(_i){const xi=Me.Util.applyTransform([_i[0],_i[1]],this.transform),Ei=Me.Util.applyTransform([_i[2],_i[3]],this.transform);return[xi[0],xi[1],Ei[0],Ei[1]]}convertToPdfPoint(_i,xi){return Me.Util.applyInverseTransform([_i,xi],this.transform)}}t.PageViewport=St;class Te extends Me.BaseException{constructor(_i,xi){super(_i,"RenderingCancelledException"),this.type=xi}}t.RenderingCancelledException=Te;function Re(Si){const _i=Si.length;let xi=0;for(;xi<_i&&Si[xi].trim()==="";)xi++;return Si.substring(xi,xi+5).toLowerCase()==="data:"}function Ee(Si){return typeof Si=="string"&&/\.pdf$/i.test(Si)}function ke(Si){const _i=Si.indexOf("#"),xi=Si.indexOf("?"),Ei=Math.min(_i>0?_i:Si.length,xi>0?xi:Si.length);return Si.substring(Si.lastIndexOf("/",Ei)+1,Ei)}function De(Si,_i="document.pdf"){if(typeof Si!="string")return _i;if(Re(Si))return(0,Me.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),_i;const xi=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ei=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ri=xi.exec(Si);let vi=Ei.exec(ri[1])||Ei.exec(ri[2])||Ei.exec(ri[3]);if(vi&&(vi=vi[0],vi.includes("%")))try{vi=Ei.exec(decodeURIComponent(vi))[0]}catch{}return vi||_i}class Be{constructor(){this.started=Object.create(null),this.times=[]}time(_i){_i in this.started&&(0,Me.warn)(`Timer is already running for ${_i}`),this.started[_i]=Date.now()}timeEnd(_i){_i in this.started||(0,Me.warn)(`Timer has not been started for ${_i}`),this.times.push({name:_i,start:this.started[_i],end:Date.now()}),delete this.started[_i]}toString(){const _i=[];let xi=0;for(const Ei of this.times){const ri=Ei.name;ri.length>xi&&(xi=ri.length)}for(const Ei of this.times){const ri=Ei.end-Ei.start;_i.push(`${Ei.name.padEnd(xi)} ${ri}ms
`)}return _i.join("")}}t.StatTimer=Be;function He(Si,_i){try{const{protocol:xi}=_i?new URL(Si,_i):new URL(Si);return xi==="http:"||xi==="https:"}catch{return!1}}function Ue(Si,_i=!1){return new Promise((xi,Ei)=>{const ri=document.createElement("script");ri.src=Si,ri.onload=function(vi){_i&&ri.remove(),xi(vi)},ri.onerror=function(){Ei(new Error(`Cannot load script at: ${ri.src}`))},(document.head||document.documentElement).append(ri)})}function We(Si){console.log("Deprecated API usage: "+Si)}let Je;class Qe{static toDateObject(_i){if(!_i||typeof _i!="string")return null;Je||(Je=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const xi=Je.exec(_i);if(!xi)return null;const Ei=parseInt(xi[1],10);let ri=parseInt(xi[2],10);ri=ri>=1&&ri<=12?ri-1:0;let vi=parseInt(xi[3],10);vi=vi>=1&&vi<=31?vi:1;let Ci=parseInt(xi[4],10);Ci=Ci>=0&&Ci<=23?Ci:0;let $e=parseInt(xi[5],10);$e=$e>=0&&$e<=59?$e:0;let Ge=parseInt(xi[6],10);Ge=Ge>=0&&Ge<=59?Ge:0;const ze=xi[7]||"Z";let qe=parseInt(xi[8],10);qe=qe>=0&&qe<=23?qe:0;let ei=parseInt(xi[9],10)||0;return ei=ei>=0&&ei<=59?ei:0,ze==="-"?(Ci+=qe,$e+=ei):ze==="+"&&(Ci-=qe,$e-=ei),new Date(Date.UTC(Ei,ri,vi,Ci,$e,Ge))}}t.PDFDateString=Qe;function fi(Si,{scale:_i=1,rotation:xi=0}){const{width:Ei,height:ri}=Si.attributes.style,vi=[0,0,parseInt(Ei),parseInt(ri)];return new St({viewBox:vi,scale:_i,rotation:xi})}function oi(Si){if(Si.startsWith("#")){const _i=parseInt(Si.slice(1),16);return[(_i&16711680)>>16,(_i&65280)>>8,_i&255]}return Si.startsWith("rgb(")?Si.slice(4,-1).split(",").map(_i=>parseInt(_i)):Si.startsWith("rgba(")?Si.slice(5,-1).split(",").map(_i=>parseInt(_i)).slice(0,3):((0,Me.warn)(`Not a valid color format: "${Si}"`),[0,0,0])}function ii(Si){const _i=document.createElement("span");_i.style.visibility="hidden",document.body.append(_i);for(const xi of Si.keys()){_i.style.color=xi;const Ei=window.getComputedStyle(_i).color;Si.set(xi,oi(Ei))}_i.remove()}function li(Si){const{a:_i,b:xi,c:Ei,d:ri,e:vi,f:Ci}=Si.getTransform();return[_i,xi,Ei,ri,vi,Ci]}function bi(Si){const{a:_i,b:xi,c:Ei,d:ri,e:vi,f:Ci}=Si.getTransform().invertSelf();return[_i,xi,Ei,ri,vi,Ci]}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var Ce=r(1);class Me{constructor(){this.constructor===Me&&(0,Ce.unreachable)("Cannot initialize BaseCanvasFactory.")}create(xe,Pe){if(xe<=0||Pe<=0)throw new Error("Invalid canvas size");const Ae=this._createCanvas(xe,Pe);return{canvas:Ae,context:Ae.getContext("2d")}}reset(xe,Pe,Ae){if(!xe.canvas)throw new Error("Canvas is not specified");if(Pe<=0||Ae<=0)throw new Error("Invalid canvas size");xe.canvas.width=Pe,xe.canvas.height=Ae}destroy(xe){if(!xe.canvas)throw new Error("Canvas is not specified");xe.canvas.width=0,xe.canvas.height=0,xe.canvas=null,xe.context=null}_createCanvas(xe,Pe){(0,Ce.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=Me;class Ie{constructor({baseUrl:xe=null,isCompressed:Pe=!1}){this.constructor===Ie&&(0,Ce.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=xe,this.isCompressed=Pe}async fetch({name:xe}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!xe)throw new Error("CMap name must be specified.");const Pe=this.baseUrl+xe+(this.isCompressed?".bcmap":""),Ae=this.isCompressed?Ce.CMapCompressionType.BINARY:Ce.CMapCompressionType.NONE;return this._fetchData(Pe,Ae).catch(Se=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Pe}`)})}_fetchData(xe,Pe){(0,Ce.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=Ie;class Fe{constructor({baseUrl:xe=null}){this.constructor===Fe&&(0,Ce.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=xe}async fetch({filename:xe}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!xe)throw new Error("Font filename must be specified.");const Pe=`${this.baseUrl}${xe}`;return this._fetchData(Pe).catch(Ae=>{throw new Error(`Unable to load font data at: ${Pe}`)})}_fetchData(xe){(0,Ce.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=Fe;class Oe{constructor(){this.constructor===Oe&&(0,Ce.unreachable)("Cannot initialize BaseSVGFactory.")}create(xe,Pe,Ae=!1){if(xe<=0||Pe<=0)throw new Error("Invalid SVG dimensions");const Se=this._createSVG("svg:svg");return Se.setAttribute("version","1.1"),Ae||(Se.setAttribute("width",`${xe}px`),Se.setAttribute("height",`${Pe}px`)),Se.setAttribute("preserveAspectRatio","none"),Se.setAttribute("viewBox",`0 0 ${xe} ${Pe}`),Se}createElement(xe){if(typeof xe!="string")throw new Error("Invalid SVG element type");return this._createSVG(xe)}_createSVG(xe){(0,Ce.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=Oe},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var Ce=r(1);const Me=3285377520,Ie=4294901760,Fe=65535;class Oe{constructor(xe){this.h1=xe?xe&4294967295:Me,this.h2=xe?xe&4294967295:Me}update(xe){let Pe,Ae;if(typeof xe=="string"){Pe=new Uint8Array(xe.length*2),Ae=0;for(let Je=0,Qe=xe.length;Je<Qe;Je++){const fi=xe.charCodeAt(Je);fi<=255?Pe[Ae++]=fi:(Pe[Ae++]=fi>>>8,Pe[Ae++]=fi&255)}}else if((0,Ce.isArrayBuffer)(xe))Pe=xe.slice(),Ae=Pe.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const Se=Ae>>2,St=Ae-Se*4,Te=new Uint32Array(Pe.buffer,0,Se);let Re=0,Ee=0,ke=this.h1,De=this.h2;const Be=3432918353,He=461845907,Ue=Be&Fe,We=He&Fe;for(let Je=0;Je<Se;Je++)Je&1?(Re=Te[Je],Re=Re*Be&Ie|Re*Ue&Fe,Re=Re<<15|Re>>>17,Re=Re*He&Ie|Re*We&Fe,ke^=Re,ke=ke<<13|ke>>>19,ke=ke*5+3864292196):(Ee=Te[Je],Ee=Ee*Be&Ie|Ee*Ue&Fe,Ee=Ee<<15|Ee>>>17,Ee=Ee*He&Ie|Ee*We&Fe,De^=Ee,De=De<<13|De>>>19,De=De*5+3864292196);switch(Re=0,St){case 3:Re^=Pe[Se*4+2]<<16;case 2:Re^=Pe[Se*4+1]<<8;case 1:Re^=Pe[Se*4],Re=Re*Be&Ie|Re*Ue&Fe,Re=Re<<15|Re>>>17,Re=Re*He&Ie|Re*We&Fe,Se&1?ke^=Re:De^=Re}this.h1=ke,this.h2=De}hexdigest(){let xe=this.h1,Pe=this.h2;xe^=Pe>>>1,xe=xe*3981806797&Ie|xe*36045&Fe,Pe=Pe*4283543511&Ie|((Pe<<16|xe>>>16)*2950163797&Ie)>>>16,xe^=Pe>>>1,xe=xe*444984403&Ie|xe*60499&Fe,Pe=Pe*3301882366&Ie|((Pe<<16|xe>>>16)*3120437893&Ie)>>>16,xe^=Pe>>>1;const Ae=(xe>>>0).toString(16),Se=(Pe>>>0).toString(16);return Ae.padStart(8,"0")+Se.padStart(8,"0")}}t.MurmurHash3_64=Oe},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var Ce=r(1);class Me{constructor({onUnsupportedFeature:Oe,ownerDocument:_e=globalThis.document,styleElement:xe=null}){this._onUnsupportedFeature=Oe,this._document=_e,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Oe){this.nativeFontFaces.push(Oe),this._document.fonts.add(Oe)}insertRule(Oe){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _e=this.styleElement.sheet;_e.insertRule(Oe,_e.cssRules.length)}clear(){for(const Oe of this.nativeFontFaces)this._document.fonts.delete(Oe);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(Oe){if(Oe.attached||Oe.missingFile)return;if(Oe.attached=!0,this.isFontLoadingAPISupported){const xe=Oe.createNativeFontFace();if(xe){this.addNativeFontFace(xe);try{await xe.loaded}catch(Pe){throw this._onUnsupportedFeature({featureId:Ce.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,Ce.warn)(`Failed to load font '${xe.family}': '${Pe}'.`),Oe.disableFontFace=!0,Pe}}return}const _e=Oe.createFontFaceRule();if(_e){if(this.insertRule(_e),this.isSyncFontLoadingSupported)return;await new Promise(xe=>{const Pe=this._queueLoadingCallback(xe);this._prepareFontLoadEvent(Oe,Pe)})}}get isFontLoadingAPISupported(){var _e;const Oe=!!((_e=this._document)!=null&&_e.fonts);return(0,Ce.shadow)(this,"isFontLoadingAPISupported",Oe)}get isSyncFontLoadingSupported(){let Oe=!1;if(typeof navigator>"u")Oe=!0;else{const _e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(_e==null?void 0:_e[1])>=14&&(Oe=!0)}return(0,Ce.shadow)(this,"isSyncFontLoadingSupported",Oe)}_queueLoadingCallback(Oe){function _e(){for((0,Ce.assert)(!Pe.done,"completeRequest() cannot be called twice."),Pe.done=!0;xe.length>0&&xe[0].done;){const Ae=xe.shift();setTimeout(Ae.callback,0)}}const{loadingRequests:xe}=this,Pe={done:!1,complete:_e,callback:Oe};return xe.push(Pe),Pe}get _loadTestFont(){const Oe=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,Ce.shadow)(this,"_loadTestFont",Oe)}_prepareFontLoadEvent(Oe,_e){function xe(oi,ii){return oi.charCodeAt(ii)<<24|oi.charCodeAt(ii+1)<<16|oi.charCodeAt(ii+2)<<8|oi.charCodeAt(ii+3)&255}function Pe(oi,ii,li,bi){const mi=oi.substring(0,ii),Si=oi.substring(ii+li);return mi+bi+Si}let Ae,Se;const St=this._document.createElement("canvas");St.width=1,St.height=1;const Te=St.getContext("2d");let Re=0;function Ee(oi,ii){if(++Re>30){(0,Ce.warn)("Load test font never loaded."),ii();return}if(Te.font="30px "+oi,Te.fillText(".",0,20),Te.getImageData(0,0,1,1).data[3]>0){ii();return}setTimeout(Ee.bind(null,oi,ii))}const ke=`lt${Date.now()}${this.loadTestFontId++}`;let De=this._loadTestFont;De=Pe(De,976,ke.length,ke);const He=16,Ue=1482184792;let We=xe(De,He);for(Ae=0,Se=ke.length-3;Ae<Se;Ae+=4)We=We-Ue+xe(ke,Ae)|0;Ae<ke.length&&(We=We-Ue+xe(ke+"XXX",Ae)|0),De=Pe(De,He,4,(0,Ce.string32)(We));const Je=`url(data:font/opentype;base64,${btoa(De)});`,Qe=`@font-face {font-family:"${ke}";src:${Je}}`;this.insertRule(Qe);const fi=this._document.createElement("div");fi.style.visibility="hidden",fi.style.width=fi.style.height="10px",fi.style.position="absolute",fi.style.top=fi.style.left="0px";for(const oi of[Oe.loadedName,ke]){const ii=this._document.createElement("span");ii.textContent="Hi",ii.style.fontFamily=oi,fi.append(ii)}this._document.body.append(fi),Ee(ke,()=>{fi.remove(),_e.complete()})}}t.FontLoader=Me;class Ie{constructor(Oe,{isEvalSupported:_e=!0,disableFontFace:xe=!1,ignoreErrors:Pe=!1,onUnsupportedFeature:Ae,fontRegistry:Se=null}){this.compiledGlyphs=Object.create(null);for(const St in Oe)this[St]=Oe[St];this.isEvalSupported=_e!==!1,this.disableFontFace=xe===!0,this.ignoreErrors=Pe===!0,this._onUnsupportedFeature=Ae,this.fontRegistry=Se}createNativeFontFace(){var _e;if(!this.data||this.disableFontFace)return null;let Oe;if(!this.cssFontInfo)Oe=new FontFace(this.loadedName,this.data,{});else{const xe={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(xe.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Oe=new FontFace(this.cssFontInfo.fontFamily,this.data,xe)}return(_e=this.fontRegistry)==null||_e.registerFont(this),Oe}createFontFaceRule(){var Pe;if(!this.data||this.disableFontFace)return null;const Oe=(0,Ce.bytesToString)(this.data),_e=`url(data:${this.mimetype};base64,${btoa(Oe)});`;let xe;if(!this.cssFontInfo)xe=`@font-face {font-family:"${this.loadedName}";src:${_e}}`;else{let Ae=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Ae+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),xe=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Ae}src:${_e}}`}return(Pe=this.fontRegistry)==null||Pe.registerFont(this,_e),xe}getPathGenerator(Oe,_e){if(this.compiledGlyphs[_e]!==void 0)return this.compiledGlyphs[_e];let xe;try{xe=Oe.get(this.loadedName+"_path_"+_e)}catch(Pe){if(!this.ignoreErrors)throw Pe;return this._onUnsupportedFeature({featureId:Ce.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,Ce.warn)(`getPathGenerator - ignoring character: "${Pe}".`),this.compiledGlyphs[_e]=function(Ae,Se){}}if(this.isEvalSupported&&Ce.FeatureTest.isEvalSupported){const Pe=[];for(const Ae of xe){const Se=Ae.args!==void 0?Ae.args.join(","):"";Pe.push("c.",Ae.cmd,"(",Se,`);
`)}return this.compiledGlyphs[_e]=new Function("c","size",Pe.join(""))}return this.compiledGlyphs[_e]=function(Pe,Ae){for(const Se of xe)Se.cmd==="scale"&&(Se.args=[Ae,-Ae]),Pe[Se.cmd].apply(Pe,Se.args)}}}t.FontFaceObject=Ie},(e,t,r)=>{var ri,Rl;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var Ce=r(1),Me=r(6),Ie=r(11),Fe=r(13),Oe=r(12);const _e=16,xe=100,Pe=4096,Ae=15,Se=10,St=Oe.isNodeJS&&typeof Path2D>"u"?-1:1e3,Te=16;function Re($e,Ge){if($e._removeMirroring)throw new Error("Context is already forwarding operations.");$e.__originalSave=$e.save,$e.__originalRestore=$e.restore,$e.__originalRotate=$e.rotate,$e.__originalScale=$e.scale,$e.__originalTranslate=$e.translate,$e.__originalTransform=$e.transform,$e.__originalSetTransform=$e.setTransform,$e.__originalResetTransform=$e.resetTransform,$e.__originalClip=$e.clip,$e.__originalMoveTo=$e.moveTo,$e.__originalLineTo=$e.lineTo,$e.__originalBezierCurveTo=$e.bezierCurveTo,$e.__originalRect=$e.rect,$e.__originalClosePath=$e.closePath,$e.__originalBeginPath=$e.beginPath,$e._removeMirroring=()=>{$e.save=$e.__originalSave,$e.restore=$e.__originalRestore,$e.rotate=$e.__originalRotate,$e.scale=$e.__originalScale,$e.translate=$e.__originalTranslate,$e.transform=$e.__originalTransform,$e.setTransform=$e.__originalSetTransform,$e.resetTransform=$e.__originalResetTransform,$e.clip=$e.__originalClip,$e.moveTo=$e.__originalMoveTo,$e.lineTo=$e.__originalLineTo,$e.bezierCurveTo=$e.__originalBezierCurveTo,$e.rect=$e.__originalRect,$e.closePath=$e.__originalClosePath,$e.beginPath=$e.__originalBeginPath,delete $e._removeMirroring},$e.save=function(){Ge.save(),this.__originalSave()},$e.restore=function(){Ge.restore(),this.__originalRestore()},$e.translate=function(qe,ei){Ge.translate(qe,ei),this.__originalTranslate(qe,ei)},$e.scale=function(qe,ei){Ge.scale(qe,ei),this.__originalScale(qe,ei)},$e.transform=function(qe,ei,ni,ci,di,Ti){Ge.transform(qe,ei,ni,ci,di,Ti),this.__originalTransform(qe,ei,ni,ci,di,Ti)},$e.setTransform=function(qe,ei,ni,ci,di,Ti){Ge.setTransform(qe,ei,ni,ci,di,Ti),this.__originalSetTransform(qe,ei,ni,ci,di,Ti)},$e.resetTransform=function(){Ge.resetTransform(),this.__originalResetTransform()},$e.rotate=function(qe){Ge.rotate(qe),this.__originalRotate(qe)},$e.clip=function(qe){Ge.clip(qe),this.__originalClip(qe)},$e.moveTo=function(ze,qe){Ge.moveTo(ze,qe),this.__originalMoveTo(ze,qe)},$e.lineTo=function(ze,qe){Ge.lineTo(ze,qe),this.__originalLineTo(ze,qe)},$e.bezierCurveTo=function(ze,qe,ei,ni,ci,di){Ge.bezierCurveTo(ze,qe,ei,ni,ci,di),this.__originalBezierCurveTo(ze,qe,ei,ni,ci,di)},$e.rect=function(ze,qe,ei,ni){Ge.rect(ze,qe,ei,ni),this.__originalRect(ze,qe,ei,ni)},$e.closePath=function(){Ge.closePath(),this.__originalClosePath()},$e.beginPath=function(){Ge.beginPath(),this.__originalBeginPath()}}class Ee{constructor(Ge){this.canvasFactory=Ge,this.cache=Object.create(null)}getCanvas(Ge,ze,qe){let ei;return this.cache[Ge]!==void 0?(ei=this.cache[Ge],this.canvasFactory.reset(ei,ze,qe)):(ei=this.canvasFactory.create(ze,qe),this.cache[Ge]=ei),ei}delete(Ge){delete this.cache[Ge]}clear(){for(const Ge in this.cache){const ze=this.cache[Ge];this.canvasFactory.destroy(ze),delete this.cache[Ge]}}}function ke($e,Ge,ze,qe,ei,ni,ci,di,Ti,Ni){const[si,ai,Ye,Ze,Xe,ui]=(0,Me.getCurrentTransform)($e);if(ai===0&&Ye===0){const Li=ci*si+Xe,Ri=Math.round(Li),wi=di*Ze+ui,Vi=Math.round(wi),Mi=(ci+Ti)*si+Xe,qi=Math.abs(Math.round(Mi)-Ri)||1,Xi=(di+Ni)*Ze+ui,Zi=Math.abs(Math.round(Xi)-Vi)||1;return $e.setTransform(Math.sign(si),0,0,Math.sign(Ze),Ri,Vi),$e.drawImage(Ge,ze,qe,ei,ni,0,0,qi,Zi),$e.setTransform(si,ai,Ye,Ze,Xe,ui),[qi,Zi]}if(si===0&&Ze===0){const Li=di*Ye+Xe,Ri=Math.round(Li),wi=ci*ai+ui,Vi=Math.round(wi),Mi=(di+Ni)*Ye+Xe,qi=Math.abs(Math.round(Mi)-Ri)||1,Xi=(ci+Ti)*ai+ui,Zi=Math.abs(Math.round(Xi)-Vi)||1;return $e.setTransform(0,Math.sign(ai),Math.sign(Ye),0,Ri,Vi),$e.drawImage(Ge,ze,qe,ei,ni,0,0,Zi,qi),$e.setTransform(si,ai,Ye,Ze,Xe,ui),[Zi,qi]}$e.drawImage(Ge,ze,qe,ei,ni,ci,di,Ti,Ni);const pi=Math.hypot(si,ai),gi=Math.hypot(Ye,Ze);return[pi*Ti,gi*Ni]}function De($e){const{width:Ge,height:ze}=$e;if(Ge>St||ze>St)return null;const qe=1e3,ei=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ni=Ge+1;let ci=new Uint8Array(ni*(ze+1)),di,Ti,Ni;const si=Ge+7&-8;let ai=new Uint8Array(si*ze),Ye=0;for(const gi of $e.data){let Li=128;for(;Li>0;)ai[Ye++]=gi&Li?0:255,Li>>=1}let Ze=0;for(Ye=0,ai[Ye]!==0&&(ci[0]=1,++Ze),Ti=1;Ti<Ge;Ti++)ai[Ye]!==ai[Ye+1]&&(ci[Ti]=ai[Ye]?2:1,++Ze),Ye++;for(ai[Ye]!==0&&(ci[Ti]=2,++Ze),di=1;di<ze;di++){Ye=di*si,Ni=di*ni,ai[Ye-si]!==ai[Ye]&&(ci[Ni]=ai[Ye]?1:8,++Ze);let gi=(ai[Ye]?4:0)+(ai[Ye-si]?8:0);for(Ti=1;Ti<Ge;Ti++)gi=(gi>>2)+(ai[Ye+1]?4:0)+(ai[Ye-si+1]?8:0),ei[gi]&&(ci[Ni+Ti]=ei[gi],++Ze),Ye++;if(ai[Ye-si]!==ai[Ye]&&(ci[Ni+Ti]=ai[Ye]?2:4,++Ze),Ze>qe)return null}for(Ye=si*(ze-1),Ni=di*ni,ai[Ye]!==0&&(ci[Ni]=8,++Ze),Ti=1;Ti<Ge;Ti++)ai[Ye]!==ai[Ye+1]&&(ci[Ni+Ti]=ai[Ye]?4:8,++Ze),Ye++;if(ai[Ye]!==0&&(ci[Ni+Ti]=4,++Ze),Ze>qe)return null;const Xe=new Int32Array([0,ni,-1,0,-ni,0,0,0,1]),ui=new Path2D;for(di=0;Ze&&di<=ze;di++){let gi=di*ni;const Li=gi+Ge;for(;gi<Li&&!ci[gi];)gi++;if(gi===Li)continue;ui.moveTo(gi%ni,di);const Ri=gi;let wi=ci[gi];do{const Vi=Xe[wi];do gi+=Vi;while(!ci[gi]);const Mi=ci[gi];Mi!==5&&Mi!==10?(wi=Mi,ci[gi]=0):(wi=Mi&51*wi>>4,ci[gi]&=wi>>2|wi<<2),ui.lineTo(gi%ni,gi/ni|0),ci[gi]||--Ze}while(Ri!==gi);--di}return ai=null,ci=null,function(gi){gi.save(),gi.scale(1/Ge,-1/ze),gi.translate(0,-ze),gi.fill(ui),gi.beginPath(),gi.restore()}}class Be{constructor(Ge,ze){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ce.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=Ce.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ce.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,Ge,ze])}clone(){const Ge=Object.create(this);return Ge.clipBox=this.clipBox.slice(),Ge}setCurrentPoint(Ge,ze){this.x=Ge,this.y=ze}updatePathMinMax(Ge,ze,qe){[ze,qe]=Ce.Util.applyTransform([ze,qe],Ge),this.minX=Math.min(this.minX,ze),this.minY=Math.min(this.minY,qe),this.maxX=Math.max(this.maxX,ze),this.maxY=Math.max(this.maxY,qe)}updateRectMinMax(Ge,ze){const qe=Ce.Util.applyTransform(ze,Ge),ei=Ce.Util.applyTransform(ze.slice(2),Ge);this.minX=Math.min(this.minX,qe[0],ei[0]),this.minY=Math.min(this.minY,qe[1],ei[1]),this.maxX=Math.max(this.maxX,qe[0],ei[0]),this.maxY=Math.max(this.maxY,qe[1],ei[1])}updateScalingPathMinMax(Ge,ze){Ce.Util.scaleMinMax(Ge,ze),this.minX=Math.min(this.minX,ze[0]),this.maxX=Math.max(this.maxX,ze[1]),this.minY=Math.min(this.minY,ze[2]),this.maxY=Math.max(this.maxY,ze[3])}updateCurvePathMinMax(Ge,ze,qe,ei,ni,ci,di,Ti,Ni,si){const ai=Ce.Util.bezierBoundingBox(ze,qe,ei,ni,ci,di,Ti,Ni);if(si){si[0]=Math.min(si[0],ai[0],ai[2]),si[1]=Math.max(si[1],ai[0],ai[2]),si[2]=Math.min(si[2],ai[1],ai[3]),si[3]=Math.max(si[3],ai[1],ai[3]);return}this.updateRectMinMax(Ge,ai)}getPathBoundingBox(Ge=Ie.PathType.FILL,ze=null){const qe=[this.minX,this.minY,this.maxX,this.maxY];if(Ge===Ie.PathType.STROKE){ze||(0,Ce.unreachable)("Stroke bounding box must include transform.");const ei=Ce.Util.singularValueDecompose2dScale(ze),ni=ei[0]*this.lineWidth/2,ci=ei[1]*this.lineWidth/2;qe[0]-=ni,qe[1]-=ci,qe[2]+=ni,qe[3]+=ci}return qe}updateClipFromPath(){const Ge=Ce.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Ge||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Ge){this.clipBox=Ge,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Ge=Ie.PathType.FILL,ze=null){return Ce.Util.intersect(this.clipBox,this.getPathBoundingBox(Ge,ze))}}function He($e,Ge,ze=null){if(typeof ImageData<"u"&&Ge instanceof ImageData){$e.putImageData(Ge,0,0);return}const qe=Ge.height,ei=Ge.width,ni=qe%Te,ci=(qe-ni)/Te,di=ni===0?ci:ci+1,Ti=$e.createImageData(ei,Te);let Ni=0,si;const ai=Ge.data,Ye=Ti.data;let Ze,Xe,ui,pi,gi,Li,Ri,wi;if(ze)switch(ze.length){case 1:gi=ze[0],Li=ze[0],Ri=ze[0],wi=ze[0];break;case 4:gi=ze[0],Li=ze[1],Ri=ze[2],wi=ze[3];break}if(Ge.kind===Ce.ImageKind.GRAYSCALE_1BPP){const Vi=ai.byteLength,Mi=new Uint32Array(Ye.buffer,0,Ye.byteLength>>2),qi=Mi.length,Xi=ei+7>>3;let Zi=4294967295,ji=Ce.FeatureTest.isLittleEndian?4278190080:255;for(wi&&wi[0]===255&&wi[255]===0&&([Zi,ji]=[ji,Zi]),Ze=0;Ze<di;Ze++){for(ui=Ze<ci?Te:ni,si=0,Xe=0;Xe<ui;Xe++){const Ki=Vi-Ni;let cn=0;const rn=Ki>Xi?ei:Ki*8-7,xn=rn&-8;let Sn=0,Tn=0;for(;cn<xn;cn+=8)Tn=ai[Ni++],Mi[si++]=Tn&128?Zi:ji,Mi[si++]=Tn&64?Zi:ji,Mi[si++]=Tn&32?Zi:ji,Mi[si++]=Tn&16?Zi:ji,Mi[si++]=Tn&8?Zi:ji,Mi[si++]=Tn&4?Zi:ji,Mi[si++]=Tn&2?Zi:ji,Mi[si++]=Tn&1?Zi:ji;for(;cn<rn;cn++)Sn===0&&(Tn=ai[Ni++],Sn=128),Mi[si++]=Tn&Sn?Zi:ji,Sn>>=1}for(;si<qi;)Mi[si++]=0;$e.putImageData(Ti,0,Ze*Te)}}else if(Ge.kind===Ce.ImageKind.RGBA_32BPP){const Vi=!!(gi||Li||Ri);for(Xe=0,pi=ei*Te*4,Ze=0;Ze<ci;Ze++){if(Ye.set(ai.subarray(Ni,Ni+pi)),Ni+=pi,Vi)for(let Mi=0;Mi<pi;Mi+=4)gi&&(Ye[Mi+0]=gi[Ye[Mi+0]]),Li&&(Ye[Mi+1]=Li[Ye[Mi+1]]),Ri&&(Ye[Mi+2]=Ri[Ye[Mi+2]]);$e.putImageData(Ti,0,Xe),Xe+=Te}if(Ze<di){if(pi=ei*ni*4,Ye.set(ai.subarray(Ni,Ni+pi)),Vi)for(let Mi=0;Mi<pi;Mi+=4)gi&&(Ye[Mi+0]=gi[Ye[Mi+0]]),Li&&(Ye[Mi+1]=Li[Ye[Mi+1]]),Ri&&(Ye[Mi+2]=Ri[Ye[Mi+2]]);$e.putImageData(Ti,0,Xe)}}else if(Ge.kind===Ce.ImageKind.RGB_24BPP){const Vi=!!(gi||Li||Ri);for(ui=Te,pi=ei*ui,Ze=0;Ze<di;Ze++){for(Ze>=ci&&(ui=ni,pi=ei*ui),si=0,Xe=pi;Xe--;)Ye[si++]=ai[Ni++],Ye[si++]=ai[Ni++],Ye[si++]=ai[Ni++],Ye[si++]=255;if(Vi)for(let Mi=0;Mi<si;Mi+=4)gi&&(Ye[Mi+0]=gi[Ye[Mi+0]]),Li&&(Ye[Mi+1]=Li[Ye[Mi+1]]),Ri&&(Ye[Mi+2]=Ri[Ye[Mi+2]]);$e.putImageData(Ti,0,Ze*Te)}}else throw new Error(`bad image kind: ${Ge.kind}`)}function Ue($e,Ge){if(Ge.bitmap){$e.drawImage(Ge.bitmap,0,0);return}const ze=Ge.height,qe=Ge.width,ei=ze%Te,ni=(ze-ei)/Te,ci=ei===0?ni:ni+1,di=$e.createImageData(qe,Te);let Ti=0;const Ni=Ge.data,si=di.data;for(let ai=0;ai<ci;ai++){const Ye=ai<ni?Te:ei;({srcPos:Ti}=(0,Fe.applyMaskImageData)({src:Ni,srcPos:Ti,dest:si,width:qe,height:Ye})),$e.putImageData(di,0,ai*Te)}}function We($e,Ge){const ze=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const qe of ze)$e[qe]!==void 0&&(Ge[qe]=$e[qe]);$e.setLineDash!==void 0&&(Ge.setLineDash($e.getLineDash()),Ge.lineDashOffset=$e.lineDashOffset)}function Je($e,Ge){$e.strokeStyle=$e.fillStyle=Ge||"#000000",$e.fillRule="nonzero",$e.globalAlpha=1,$e.lineWidth=1,$e.lineCap="butt",$e.lineJoin="miter",$e.miterLimit=10,$e.globalCompositeOperation="source-over",$e.font="10px sans-serif",$e.setLineDash!==void 0&&($e.setLineDash([]),$e.lineDashOffset=0)}function Qe($e,Ge,ze,qe){const ei=$e.length;for(let ni=3;ni<ei;ni+=4){const ci=$e[ni];if(ci===0)$e[ni-3]=Ge,$e[ni-2]=ze,$e[ni-1]=qe;else if(ci<255){const di=255-ci;$e[ni-3]=$e[ni-3]*ci+Ge*di>>8,$e[ni-2]=$e[ni-2]*ci+ze*di>>8,$e[ni-1]=$e[ni-1]*ci+qe*di>>8}}}function fi($e,Ge,ze){const qe=$e.length,ei=1/255;for(let ni=3;ni<qe;ni+=4){const ci=ze?ze[$e[ni]]:$e[ni];Ge[ni]=Ge[ni]*ci*ei|0}}function oi($e,Ge,ze){const qe=$e.length;for(let ei=3;ei<qe;ei+=4){const ni=$e[ei-3]*77+$e[ei-2]*152+$e[ei-1]*28;Ge[ei]=ze?Ge[ei]*ze[ni>>8]>>8:Ge[ei]*ni>>16}}function ii($e,Ge,ze,qe,ei,ni,ci,di,Ti,Ni,si){const ai=!!ni,Ye=ai?ni[0]:0,Ze=ai?ni[1]:0,Xe=ai?ni[2]:0;let ui;ei==="Luminosity"?ui=oi:ui=fi;const gi=Math.min(qe,Math.ceil(1048576/ze));for(let Li=0;Li<qe;Li+=gi){const Ri=Math.min(gi,qe-Li),wi=$e.getImageData(di-Ni,Li+(Ti-si),ze,Ri),Vi=Ge.getImageData(di,Li+Ti,ze,Ri);ai&&Qe(wi.data,Ye,Ze,Xe),ui(wi.data,Vi.data,ci),Ge.putImageData(Vi,di,Li+Ti)}}function li($e,Ge,ze,qe){const ei=qe[0],ni=qe[1],ci=qe[2]-ei,di=qe[3]-ni;ci===0||di===0||(ii(Ge.context,ze,ci,di,Ge.subtype,Ge.backdrop,Ge.transferMap,ei,ni,Ge.offsetX,Ge.offsetY),$e.save(),$e.globalAlpha=1,$e.globalCompositeOperation="source-over",$e.setTransform(1,0,0,1,0,0),$e.drawImage(ze.canvas,0,0),$e.restore())}function bi($e,Ge){const ze=Ce.Util.singularValueDecompose2dScale($e);ze[0]=Math.fround(ze[0]),ze[1]=Math.fround(ze[1]);const qe=Math.fround((globalThis.devicePixelRatio||1)*Me.PixelsPerInch.PDF_TO_CSS_UNITS);return Ge!==void 0?Ge:ze[0]<=qe||ze[1]<=qe}const mi=["butt","round","square"],Si=["miter","round","bevel"],_i={},xi={},Ci=class{constructor(Ge,ze,qe,ei,ni,ci,di){sn(this,ri);this.ctx=Ge,this.current=new Be(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ze,this.objs=qe,this.canvasFactory=ei,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=ni,this.cachedCanvases=new Ee(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ci,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(di==null?void 0:di.background)||null,this.foregroundColor=(di==null?void 0:di.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Ge,ze=null){return typeof Ge=="string"?Ge.startsWith("g_")?this.commonObjs.get(Ge):this.objs.get(Ge):ze}beginDrawing({transform:Ge,viewport:ze,transparency:qe=!1,background:ei=null}){const ni=this.ctx.canvas.width,ci=this.ctx.canvas.height,di=ei||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const Ti=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Ni=this.backgroundColor=this.ctx.fillStyle;let si=!0,ai=di;if(this.ctx.fillStyle=di,ai=this.ctx.fillStyle,si=typeof ai=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ai),Ti==="#000000"&&Ni==="#ffffff"||Ti===Ni||!si)this.foregroundColor=this.backgroundColor=null;else{const[Ye,Ze,Xe]=(0,Me.getRGB)(ai),ui=gi=>(gi/=255,gi<=.03928?gi/12.92:((gi+.055)/1.055)**2.4),pi=Math.round(.2126*ui(Ye)+.7152*ui(Ze)+.0722*ui(Xe));this.selectColor=(gi,Li,Ri)=>{const wi=.2126*ui(gi)+.7152*ui(Li)+.0722*ui(Ri);return Math.round(wi)===pi?Ni:Ti}}}if(this.ctx.fillStyle=this.backgroundColor||di,this.ctx.fillRect(0,0,ni,ci),this.ctx.restore(),qe){const Ti=this.cachedCanvases.getCanvas("transparent",ni,ci);this.compositeCtx=this.ctx,this.transparentCanvas=Ti.canvas,this.ctx=Ti.context,this.ctx.save(),this.ctx.transform(...(0,Me.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Je(this.ctx,this.foregroundColor),Ge&&(this.ctx.transform(...Ge),this.outputScaleX=Ge[0],this.outputScaleY=Ge[0]),this.ctx.transform(...ze.transform),this.viewportScale=ze.scale,this.baseTransform=(0,Me.getCurrentTransform)(this.ctx)}executeOperatorList(Ge,ze,qe,ei){const ni=Ge.argsArray,ci=Ge.fnArray;let di=ze||0;const Ti=ni.length;if(Ti===di)return di;const Ni=Ti-di>Se&&typeof qe=="function",si=Ni?Date.now()+Ae:0;let ai=0;const Ye=this.commonObjs,Ze=this.objs;let Xe;for(;;){if(ei!==void 0&&di===ei.nextBreakPoint)return ei.breakIt(di,qe),di;if(Xe=ci[di],Xe!==Ce.OPS.dependency)this[Xe].apply(this,ni[di]);else for(const ui of ni[di]){const pi=ui.startsWith("g_")?Ye:Ze;if(!pi.has(ui))return pi.get(ui,qe),di}if(di++,di===Ti)return di;if(Ni&&++ai>Se){if(Date.now()>si)return qe(),di;ai=0}}}endDrawing(){dn(this,ri,Rl).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Ge of this._cachedBitmapsMap.values()){for(const ze of Ge.values())typeof HTMLCanvasElement<"u"&&ze instanceof HTMLCanvasElement&&(ze.width=ze.height=0);Ge.clear()}this._cachedBitmapsMap.clear()}_scaleImage(Ge,ze){const qe=Ge.width,ei=Ge.height;let ni=Math.max(Math.hypot(ze[0],ze[1]),1),ci=Math.max(Math.hypot(ze[2],ze[3]),1),di=qe,Ti=ei,Ni="prescale1",si,ai;for(;ni>2&&di>1||ci>2&&Ti>1;){let Ye=di,Ze=Ti;ni>2&&di>1&&(Ye=Math.ceil(di/2),ni/=di/Ye),ci>2&&Ti>1&&(Ze=Math.ceil(Ti/2),ci/=Ti/Ze),si=this.cachedCanvases.getCanvas(Ni,Ye,Ze),ai=si.context,ai.clearRect(0,0,Ye,Ze),ai.drawImage(Ge,0,0,di,Ti,0,0,Ye,Ze),Ge=si.canvas,di=Ye,Ti=Ze,Ni=Ni==="prescale1"?"prescale2":"prescale1"}return{img:Ge,paintWidth:di,paintHeight:Ti}}_createMaskCanvas(Ge){const ze=this.ctx,{width:qe,height:ei}=Ge,ni=this.current.fillColor,ci=this.current.patternFill,di=(0,Me.getCurrentTransform)(ze);let Ti,Ni,si,ai;if((Ge.bitmap||Ge.data)&&Ge.count>1){const qi=Ge.bitmap||Ge.data.buffer;Ni=JSON.stringify(ci?di:[di.slice(0,4),ni]),Ti=this._cachedBitmapsMap.get(qi),Ti||(Ti=new Map,this._cachedBitmapsMap.set(qi,Ti));const Xi=Ti.get(Ni);if(Xi&&!ci){const Zi=Math.round(Math.min(di[0],di[2])+di[4]),ji=Math.round(Math.min(di[1],di[3])+di[5]);return{canvas:Xi,offsetX:Zi,offsetY:ji}}si=Xi}si||(ai=this.cachedCanvases.getCanvas("maskCanvas",qe,ei),Ue(ai.context,Ge));let Ye=Ce.Util.transform(di,[1/qe,0,0,-1/ei,0,0]);Ye=Ce.Util.transform(Ye,[1,0,0,1,0,-ei]);const Ze=Ce.Util.applyTransform([0,0],Ye),Xe=Ce.Util.applyTransform([qe,ei],Ye),ui=Ce.Util.normalizeRect([Ze[0],Ze[1],Xe[0],Xe[1]]),pi=Math.round(ui[2]-ui[0])||1,gi=Math.round(ui[3]-ui[1])||1,Li=this.cachedCanvases.getCanvas("fillCanvas",pi,gi),Ri=Li.context,wi=Math.min(Ze[0],Xe[0]),Vi=Math.min(Ze[1],Xe[1]);Ri.translate(-wi,-Vi),Ri.transform(...Ye),si||(si=this._scaleImage(ai.canvas,(0,Me.getCurrentTransformInverse)(Ri)),si=si.img,Ti&&ci&&Ti.set(Ni,si)),Ri.imageSmoothingEnabled=bi((0,Me.getCurrentTransform)(Ri),Ge.interpolate),ke(Ri,si,0,0,si.width,si.height,0,0,qe,ei),Ri.globalCompositeOperation="source-in";const Mi=Ce.Util.transform((0,Me.getCurrentTransformInverse)(Ri),[1,0,0,1,-wi,-Vi]);return Ri.fillStyle=ci?ni.getPattern(ze,this,Mi,Ie.PathType.FILL):ni,Ri.fillRect(0,0,qe,ei),Ti&&!ci&&(this.cachedCanvases.delete("fillCanvas"),Ti.set(Ni,Li.canvas)),{canvas:Li.canvas,offsetX:Math.round(wi),offsetY:Math.round(Vi)}}setLineWidth(Ge){Ge!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=Ge,this.ctx.lineWidth=Ge}setLineCap(Ge){this.ctx.lineCap=mi[Ge]}setLineJoin(Ge){this.ctx.lineJoin=Si[Ge]}setMiterLimit(Ge){this.ctx.miterLimit=Ge}setDash(Ge,ze){const qe=this.ctx;qe.setLineDash!==void 0&&(qe.setLineDash(Ge),qe.lineDashOffset=ze)}setRenderingIntent(Ge){}setFlatness(Ge){}setGState(Ge){for(const[ze,qe]of Ge)switch(ze){case"LW":this.setLineWidth(qe);break;case"LC":this.setLineCap(qe);break;case"LJ":this.setLineJoin(qe);break;case"ML":this.setMiterLimit(qe);break;case"D":this.setDash(qe[0],qe[1]);break;case"RI":this.setRenderingIntent(qe);break;case"FL":this.setFlatness(qe);break;case"Font":this.setFont(qe[0],qe[1]);break;case"CA":this.current.strokeAlpha=qe;break;case"ca":this.current.fillAlpha=qe,this.ctx.globalAlpha=qe;break;case"BM":this.ctx.globalCompositeOperation=qe;break;case"SMask":this.current.activeSMask=qe?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=qe}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Ge=this.inSMaskMode;this.current.activeSMask&&!Ge?this.beginSMaskMode():!this.current.activeSMask&&Ge&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Ge=this.ctx.canvas.width,ze=this.ctx.canvas.height,qe="smaskGroupAt"+this.groupLevel,ei=this.cachedCanvases.getCanvas(qe,Ge,ze);this.suspendedCtx=this.ctx,this.ctx=ei.context;const ni=this.ctx;ni.setTransform(...(0,Me.getCurrentTransform)(this.suspendedCtx)),We(this.suspendedCtx,ni),Re(ni,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),We(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Ge){if(!this.current.activeSMask)return;Ge?(Ge[0]=Math.floor(Ge[0]),Ge[1]=Math.floor(Ge[1]),Ge[2]=Math.ceil(Ge[2]),Ge[3]=Math.ceil(Ge[3])):Ge=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ze=this.current.activeSMask,qe=this.suspendedCtx;li(qe,ze,this.ctx,Ge),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(We(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Ge=this.current;this.stateStack.push(Ge),this.current=Ge.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),We(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(Ge,ze,qe,ei,ni,ci){this.ctx.transform(Ge,ze,qe,ei,ni,ci),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(Ge,ze,qe){const ei=this.ctx,ni=this.current;let ci=ni.x,di=ni.y,Ti,Ni;const si=(0,Me.getCurrentTransform)(ei),ai=si[0]===0&&si[3]===0||si[1]===0&&si[2]===0,Ye=ai?qe.slice(0):null;for(let Ze=0,Xe=0,ui=Ge.length;Ze<ui;Ze++)switch(Ge[Ze]|0){case Ce.OPS.rectangle:ci=ze[Xe++],di=ze[Xe++];const pi=ze[Xe++],gi=ze[Xe++],Li=ci+pi,Ri=di+gi;ei.moveTo(ci,di),pi===0||gi===0?ei.lineTo(Li,Ri):(ei.lineTo(Li,di),ei.lineTo(Li,Ri),ei.lineTo(ci,Ri)),ai||ni.updateRectMinMax(si,[ci,di,Li,Ri]),ei.closePath();break;case Ce.OPS.moveTo:ci=ze[Xe++],di=ze[Xe++],ei.moveTo(ci,di),ai||ni.updatePathMinMax(si,ci,di);break;case Ce.OPS.lineTo:ci=ze[Xe++],di=ze[Xe++],ei.lineTo(ci,di),ai||ni.updatePathMinMax(si,ci,di);break;case Ce.OPS.curveTo:Ti=ci,Ni=di,ci=ze[Xe+4],di=ze[Xe+5],ei.bezierCurveTo(ze[Xe],ze[Xe+1],ze[Xe+2],ze[Xe+3],ci,di),ni.updateCurvePathMinMax(si,Ti,Ni,ze[Xe],ze[Xe+1],ze[Xe+2],ze[Xe+3],ci,di,Ye),Xe+=6;break;case Ce.OPS.curveTo2:Ti=ci,Ni=di,ei.bezierCurveTo(ci,di,ze[Xe],ze[Xe+1],ze[Xe+2],ze[Xe+3]),ni.updateCurvePathMinMax(si,Ti,Ni,ci,di,ze[Xe],ze[Xe+1],ze[Xe+2],ze[Xe+3],Ye),ci=ze[Xe+2],di=ze[Xe+3],Xe+=4;break;case Ce.OPS.curveTo3:Ti=ci,Ni=di,ci=ze[Xe+2],di=ze[Xe+3],ei.bezierCurveTo(ze[Xe],ze[Xe+1],ci,di,ci,di),ni.updateCurvePathMinMax(si,Ti,Ni,ze[Xe],ze[Xe+1],ci,di,ci,di,Ye),Xe+=4;break;case Ce.OPS.closePath:ei.closePath();break}ai&&ni.updateScalingPathMinMax(si,Ye),ni.setCurrentPoint(ci,di)}closePath(){this.ctx.closePath()}stroke(Ge){Ge=typeof Ge<"u"?Ge:!0;const ze=this.ctx,qe=this.current.strokeColor;ze.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof qe=="object"&&(qe==null?void 0:qe.getPattern)?(ze.save(),ze.strokeStyle=qe.getPattern(ze,this,(0,Me.getCurrentTransformInverse)(ze),Ie.PathType.STROKE),this.rescaleAndStroke(!1),ze.restore()):this.rescaleAndStroke(!0)),Ge&&this.consumePath(this.current.getClippedPathBoundingBox()),ze.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Ge){Ge=typeof Ge<"u"?Ge:!0;const ze=this.ctx,qe=this.current.fillColor,ei=this.current.patternFill;let ni=!1;ei&&(ze.save(),ze.fillStyle=qe.getPattern(ze,this,(0,Me.getCurrentTransformInverse)(ze),Ie.PathType.FILL),ni=!0);const ci=this.current.getClippedPathBoundingBox();this.contentVisible&&ci!==null&&(this.pendingEOFill?(ze.fill("evenodd"),this.pendingEOFill=!1):ze.fill()),ni&&ze.restore(),Ge&&this.consumePath(ci)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_i}eoClip(){this.pendingClip=xi}beginText(){this.current.textMatrix=Ce.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Ge=this.pendingTextPaths,ze=this.ctx;if(Ge===void 0){ze.beginPath();return}ze.save(),ze.beginPath();for(const qe of Ge)ze.setTransform(...qe.transform),ze.translate(qe.x,qe.y),qe.addToPath(ze,qe.fontSize);ze.restore(),ze.clip(),ze.beginPath(),delete this.pendingTextPaths}setCharSpacing(Ge){this.current.charSpacing=Ge}setWordSpacing(Ge){this.current.wordSpacing=Ge}setHScale(Ge){this.current.textHScale=Ge/100}setLeading(Ge){this.current.leading=-Ge}setFont(Ge,ze){const qe=this.commonObjs.get(Ge),ei=this.current;if(!qe)throw new Error(`Can't find font for ${Ge}`);if(ei.fontMatrix=qe.fontMatrix||Ce.FONT_IDENTITY_MATRIX,(ei.fontMatrix[0]===0||ei.fontMatrix[3]===0)&&(0,Ce.warn)("Invalid font matrix for font "+Ge),ze<0?(ze=-ze,ei.fontDirection=-1):ei.fontDirection=1,this.current.font=qe,this.current.fontSize=ze,qe.isType3Font)return;const ni=qe.loadedName||"sans-serif";let ci="normal";qe.black?ci="900":qe.bold&&(ci="bold");const di=qe.italic?"italic":"normal",Ti=`"${ni}", ${qe.fallbackName}`;let Ni=ze;ze<_e?Ni=_e:ze>xe&&(Ni=xe),this.current.fontSizeScale=ze/Ni,this.ctx.font=`${di} ${ci} ${Ni}px ${Ti}`}setTextRenderingMode(Ge){this.current.textRenderingMode=Ge}setTextRise(Ge){this.current.textRise=Ge}moveText(Ge,ze){this.current.x=this.current.lineX+=Ge,this.current.y=this.current.lineY+=ze}setLeadingMoveText(Ge,ze){this.setLeading(-ze),this.moveText(Ge,ze)}setTextMatrix(Ge,ze,qe,ei,ni,ci){this.current.textMatrix=[Ge,ze,qe,ei,ni,ci],this.current.textMatrixScale=Math.hypot(Ge,ze),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Ge,ze,qe,ei){const ni=this.ctx,ci=this.current,di=ci.font,Ti=ci.textRenderingMode,Ni=ci.fontSize/ci.fontSizeScale,si=Ti&Ce.TextRenderingMode.FILL_STROKE_MASK,ai=!!(Ti&Ce.TextRenderingMode.ADD_TO_PATH_FLAG),Ye=ci.patternFill&&!di.missingFile;let Ze;(di.disableFontFace||ai||Ye)&&(Ze=di.getPathGenerator(this.commonObjs,Ge)),di.disableFontFace||Ye?(ni.save(),ni.translate(ze,qe),ni.beginPath(),Ze(ni,Ni),ei&&ni.setTransform(...ei),(si===Ce.TextRenderingMode.FILL||si===Ce.TextRenderingMode.FILL_STROKE)&&ni.fill(),(si===Ce.TextRenderingMode.STROKE||si===Ce.TextRenderingMode.FILL_STROKE)&&ni.stroke(),ni.restore()):((si===Ce.TextRenderingMode.FILL||si===Ce.TextRenderingMode.FILL_STROKE)&&ni.fillText(Ge,ze,qe),(si===Ce.TextRenderingMode.STROKE||si===Ce.TextRenderingMode.FILL_STROKE)&&ni.strokeText(Ge,ze,qe)),ai&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,Me.getCurrentTransform)(ni),x:ze,y:qe,fontSize:Ni,addToPath:Ze})}get isFontSubpixelAAEnabled(){const{context:Ge}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Ge.scale(1.5,1),Ge.fillText("I",0,10);const ze=Ge.getImageData(0,0,10,10).data;let qe=!1;for(let ei=3;ei<ze.length;ei+=4)if(ze[ei]>0&&ze[ei]<255){qe=!0;break}return(0,Ce.shadow)(this,"isFontSubpixelAAEnabled",qe)}showText(Ge){const ze=this.current,qe=ze.font;if(qe.isType3Font)return this.showType3Text(Ge);const ei=ze.fontSize;if(ei===0)return;const ni=this.ctx,ci=ze.fontSizeScale,di=ze.charSpacing,Ti=ze.wordSpacing,Ni=ze.fontDirection,si=ze.textHScale*Ni,ai=Ge.length,Ye=qe.vertical,Ze=Ye?1:-1,Xe=qe.defaultVMetrics,ui=ei*ze.fontMatrix[0],pi=ze.textRenderingMode===Ce.TextRenderingMode.FILL&&!qe.disableFontFace&&!ze.patternFill;ni.save(),ni.transform(...ze.textMatrix),ni.translate(ze.x,ze.y+ze.textRise),Ni>0?ni.scale(si,-1):ni.scale(si,1);let gi;if(ze.patternFill){ni.save();const Mi=ze.fillColor.getPattern(ni,this,(0,Me.getCurrentTransformInverse)(ni),Ie.PathType.FILL);gi=(0,Me.getCurrentTransform)(ni),ni.restore(),ni.fillStyle=Mi}let Li=ze.lineWidth;const Ri=ze.textMatrixScale;if(Ri===0||Li===0){const Mi=ze.textRenderingMode&Ce.TextRenderingMode.FILL_STROKE_MASK;(Mi===Ce.TextRenderingMode.STROKE||Mi===Ce.TextRenderingMode.FILL_STROKE)&&(Li=this.getSinglePixelWidth())}else Li/=Ri;ci!==1&&(ni.scale(ci,ci),Li/=ci),ni.lineWidth=Li;let wi=0,Vi;for(Vi=0;Vi<ai;++Vi){const Mi=Ge[Vi];if(typeof Mi=="number"){wi+=Ze*Mi*ei/1e3;continue}let qi=!1;const Xi=(Mi.isSpace?Ti:0)+di,Zi=Mi.fontChar,ji=Mi.accent;let Ki,cn,rn=Mi.width;if(Ye){const Sn=Mi.vmetric||Xe,Tn=-(Mi.vmetric?Sn[1]:rn*.5)*ui,Ln=Sn[2]*ui;rn=Sn?-Sn[0]:rn,Ki=Tn/ci,cn=(wi+Ln)/ci}else Ki=wi/ci,cn=0;if(qe.remeasure&&rn>0){const Sn=ni.measureText(Zi).width*1e3/ei*ci;if(rn<Sn&&this.isFontSubpixelAAEnabled){const Tn=rn/Sn;qi=!0,ni.save(),ni.scale(Tn,1),Ki/=Tn}else rn!==Sn&&(Ki+=(rn-Sn)/2e3*ei/ci)}if(this.contentVisible&&(Mi.isInFont||qe.missingFile)){if(pi&&!ji)ni.fillText(Zi,Ki,cn);else if(this.paintChar(Zi,Ki,cn,gi),ji){const Sn=Ki+ei*ji.offset.x/ci,Tn=cn-ei*ji.offset.y/ci;this.paintChar(ji.fontChar,Sn,Tn,gi)}}let xn;Ye?xn=rn*ui-Xi*Ni:xn=rn*ui+Xi*Ni,wi+=xn,qi&&ni.restore()}Ye?ze.y-=wi:ze.x+=wi*si,ni.restore(),this.compose()}showType3Text(Ge){const ze=this.ctx,qe=this.current,ei=qe.font,ni=qe.fontSize,ci=qe.fontDirection,di=ei.vertical?1:-1,Ti=qe.charSpacing,Ni=qe.wordSpacing,si=qe.textHScale*ci,ai=qe.fontMatrix||Ce.FONT_IDENTITY_MATRIX,Ye=Ge.length,Ze=qe.textRenderingMode===Ce.TextRenderingMode.INVISIBLE;let Xe,ui,pi,gi;if(!(Ze||ni===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,ze.save(),ze.transform(...qe.textMatrix),ze.translate(qe.x,qe.y),ze.scale(si,ci),Xe=0;Xe<Ye;++Xe){if(ui=Ge[Xe],typeof ui=="number"){gi=di*ui*ni/1e3,this.ctx.translate(gi,0),qe.x+=gi*si;continue}const Li=(ui.isSpace?Ni:0)+Ti,Ri=ei.charProcOperatorList[ui.operatorListId];if(!Ri){(0,Ce.warn)(`Type3 character "${ui.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ui,this.save(),ze.scale(ni,ni),ze.transform(...ai),this.executeOperatorList(Ri),this.restore()),pi=Ce.Util.applyTransform([ui.width,0],ai)[0]*ni+Li,ze.translate(pi,0),qe.x+=pi*si}ze.restore(),this.processingType3=null}}setCharWidth(Ge,ze){}setCharWidthAndBounds(Ge,ze,qe,ei,ni,ci){this.ctx.rect(qe,ei,ni-qe,ci-ei),this.ctx.clip(),this.endPath()}getColorN_Pattern(Ge){let ze;if(Ge[0]==="TilingPattern"){const qe=Ge[1],ei=this.baseTransform||(0,Me.getCurrentTransform)(this.ctx),ni={createCanvasGraphics:ci=>new Ci(ci,this.commonObjs,this.objs,this.canvasFactory)};ze=new Ie.TilingPattern(Ge,qe,this.ctx,ni,ei)}else ze=this._getPattern(Ge[1],Ge[2]);return ze}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Ge,ze,qe){var ni;const ei=((ni=this.selectColor)==null?void 0:ni.call(this,Ge,ze,qe))||Ce.Util.makeHexColor(Ge,ze,qe);this.ctx.strokeStyle=ei,this.current.strokeColor=ei}setFillRGBColor(Ge,ze,qe){var ni;const ei=((ni=this.selectColor)==null?void 0:ni.call(this,Ge,ze,qe))||Ce.Util.makeHexColor(Ge,ze,qe);this.ctx.fillStyle=ei,this.current.fillColor=ei,this.current.patternFill=!1}_getPattern(Ge,ze=null){let qe;return this.cachedPatterns.has(Ge)?qe=this.cachedPatterns.get(Ge):(qe=(0,Ie.getShadingPattern)(this.objs.get(Ge)),this.cachedPatterns.set(Ge,qe)),ze&&(qe.matrix=ze),qe}shadingFill(Ge){if(!this.contentVisible)return;const ze=this.ctx;this.save();const qe=this._getPattern(Ge);ze.fillStyle=qe.getPattern(ze,this,(0,Me.getCurrentTransformInverse)(ze),Ie.PathType.SHADING);const ei=(0,Me.getCurrentTransformInverse)(ze);if(ei){const ni=ze.canvas,ci=ni.width,di=ni.height,Ti=Ce.Util.applyTransform([0,0],ei),Ni=Ce.Util.applyTransform([0,di],ei),si=Ce.Util.applyTransform([ci,0],ei),ai=Ce.Util.applyTransform([ci,di],ei),Ye=Math.min(Ti[0],Ni[0],si[0],ai[0]),Ze=Math.min(Ti[1],Ni[1],si[1],ai[1]),Xe=Math.max(Ti[0],Ni[0],si[0],ai[0]),ui=Math.max(Ti[1],Ni[1],si[1],ai[1]);this.ctx.fillRect(Ye,Ze,Xe-Ye,ui-Ze)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,Ce.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,Ce.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Ge,ze){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Ge)&&Ge.length===6&&this.transform(...Ge),this.baseTransform=(0,Me.getCurrentTransform)(this.ctx),ze)){const qe=ze[2]-ze[0],ei=ze[3]-ze[1];this.ctx.rect(ze[0],ze[1],qe,ei),this.current.updateRectMinMax((0,Me.getCurrentTransform)(this.ctx),ze),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Ge){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ze=this.ctx;Ge.isolated||(0,Ce.info)("TODO: Support non-isolated groups."),Ge.knockout&&(0,Ce.warn)("Knockout groups not supported.");const qe=(0,Me.getCurrentTransform)(ze);if(Ge.matrix&&ze.transform(...Ge.matrix),!Ge.bbox)throw new Error("Bounding box is required.");let ei=Ce.Util.getAxialAlignedBoundingBox(Ge.bbox,(0,Me.getCurrentTransform)(ze));const ni=[0,0,ze.canvas.width,ze.canvas.height];ei=Ce.Util.intersect(ei,ni)||[0,0,0,0];const ci=Math.floor(ei[0]),di=Math.floor(ei[1]);let Ti=Math.max(Math.ceil(ei[2])-ci,1),Ni=Math.max(Math.ceil(ei[3])-di,1),si=1,ai=1;Ti>Pe&&(si=Ti/Pe,Ti=Pe),Ni>Pe&&(ai=Ni/Pe,Ni=Pe),this.current.startNewPathAndClipBox([0,0,Ti,Ni]);let Ye="groupAt"+this.groupLevel;Ge.smask&&(Ye+="_smask_"+this.smaskCounter++%2);const Ze=this.cachedCanvases.getCanvas(Ye,Ti,Ni),Xe=Ze.context;Xe.scale(1/si,1/ai),Xe.translate(-ci,-di),Xe.transform(...qe),Ge.smask?this.smaskStack.push({canvas:Ze.canvas,context:Xe,offsetX:ci,offsetY:di,scaleX:si,scaleY:ai,subtype:Ge.smask.subtype,backdrop:Ge.smask.backdrop,transferMap:Ge.smask.transferMap||null,startTransformInverse:null}):(ze.setTransform(1,0,0,1,0,0),ze.translate(ci,di),ze.scale(si,ai),ze.save()),We(ze,Xe),this.ctx=Xe,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ze),this.groupLevel++}endGroup(Ge){if(!this.contentVisible)return;this.groupLevel--;const ze=this.ctx,qe=this.groupStack.pop();if(this.ctx=qe,this.ctx.imageSmoothingEnabled=!1,Ge.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const ei=(0,Me.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ei);const ni=Ce.Util.getAxialAlignedBoundingBox([0,0,ze.canvas.width,ze.canvas.height],ei);this.ctx.drawImage(ze.canvas,0,0),this.ctx.restore(),this.compose(ni)}}beginAnnotation(Ge,ze,qe,ei,ni){if(dn(this,ri,Rl).call(this),Je(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ze)&&ze.length===4){const ci=ze[2]-ze[0],di=ze[3]-ze[1];if(ni&&this.annotationCanvasMap){qe=qe.slice(),qe[4]-=ze[0],qe[5]-=ze[1],ze=ze.slice(),ze[0]=ze[1]=0,ze[2]=ci,ze[3]=di;const[Ti,Ni]=Ce.Util.singularValueDecompose2dScale((0,Me.getCurrentTransform)(this.ctx)),{viewportScale:si}=this,ai=Math.ceil(ci*this.outputScaleX*si),Ye=Math.ceil(di*this.outputScaleY*si);this.annotationCanvas=this.canvasFactory.create(ai,Ye);const{canvas:Ze,context:Xe}=this.annotationCanvas;this.annotationCanvasMap.set(Ge,Ze),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Xe,this.ctx.setTransform(Ti,0,0,-Ni,0,di*Ni),Je(this.ctx,this.foregroundColor)}else Je(this.ctx,this.foregroundColor),this.ctx.rect(ze[0],ze[1],ci,di),this.ctx.clip(),this.endPath()}this.current=new Be(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...qe),this.transform(...ei)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Ge){if(!this.contentVisible)return;const ze=Ge.count;Ge=this.getObject(Ge.data,Ge),Ge.count=ze;const qe=this.ctx,ei=this.processingType3;if(ei&&(ei.compiled===void 0&&(ei.compiled=De(Ge)),ei.compiled)){ei.compiled(qe);return}const ni=this._createMaskCanvas(Ge),ci=ni.canvas;qe.save(),qe.setTransform(1,0,0,1,0,0),qe.drawImage(ci,ni.offsetX,ni.offsetY),qe.restore(),this.compose()}paintImageMaskXObjectRepeat(Ge,ze,qe=0,ei=0,ni,ci){if(!this.contentVisible)return;Ge=this.getObject(Ge.data,Ge);const di=this.ctx;di.save();const Ti=(0,Me.getCurrentTransform)(di);di.transform(ze,qe,ei,ni,0,0);const Ni=this._createMaskCanvas(Ge);di.setTransform(1,0,0,1,0,0);for(let si=0,ai=ci.length;si<ai;si+=2){const Ye=Ce.Util.transform(Ti,[ze,qe,ei,ni,ci[si],ci[si+1]]),[Ze,Xe]=Ce.Util.applyTransform([0,0],Ye);di.drawImage(Ni.canvas,Ze,Xe)}di.restore(),this.compose()}paintImageMaskXObjectGroup(Ge){if(!this.contentVisible)return;const ze=this.ctx,qe=this.current.fillColor,ei=this.current.patternFill;for(const ni of Ge){const{data:ci,width:di,height:Ti,transform:Ni}=ni,si=this.cachedCanvases.getCanvas("maskCanvas",di,Ti),ai=si.context;ai.save();const Ye=this.getObject(ci,ni);Ue(ai,Ye),ai.globalCompositeOperation="source-in",ai.fillStyle=ei?qe.getPattern(ai,this,(0,Me.getCurrentTransformInverse)(ze),Ie.PathType.FILL):qe,ai.fillRect(0,0,di,Ti),ai.restore(),ze.save(),ze.transform(...Ni),ze.scale(1,-1),ke(ze,si.canvas,0,0,di,Ti,0,-1,1,1),ze.restore()}this.compose()}paintImageXObject(Ge){if(!this.contentVisible)return;const ze=this.getObject(Ge);if(!ze){(0,Ce.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ze)}paintImageXObjectRepeat(Ge,ze,qe,ei){if(!this.contentVisible)return;const ni=this.getObject(Ge);if(!ni){(0,Ce.warn)("Dependent image isn't ready yet");return}const ci=ni.width,di=ni.height,Ti=[];for(let Ni=0,si=ei.length;Ni<si;Ni+=2)Ti.push({transform:[ze,0,0,qe,ei[Ni],ei[Ni+1]],x:0,y:0,w:ci,h:di});this.paintInlineImageXObjectGroup(ni,Ti)}paintInlineImageXObject(Ge){if(!this.contentVisible)return;const ze=Ge.width,qe=Ge.height,ei=this.ctx;this.save(),ei.scale(1/ze,-1/qe);let ni;if(typeof HTMLElement=="function"&&Ge instanceof HTMLElement||!Ge.data)ni=Ge;else{const di=this.cachedCanvases.getCanvas("inlineImage",ze,qe),Ti=di.context;He(Ti,Ge,this.current.transferMaps),ni=di.canvas}const ci=this._scaleImage(ni,(0,Me.getCurrentTransformInverse)(ei));ei.imageSmoothingEnabled=bi((0,Me.getCurrentTransform)(ei),Ge.interpolate),ke(ei,ci.img,0,0,ci.paintWidth,ci.paintHeight,0,-qe,ze,qe),this.compose(),this.restore()}paintInlineImageXObjectGroup(Ge,ze){if(!this.contentVisible)return;const qe=this.ctx,ei=Ge.width,ni=Ge.height,ci=this.cachedCanvases.getCanvas("inlineImage",ei,ni),di=ci.context;He(di,Ge,this.current.transferMaps);for(const Ti of ze)qe.save(),qe.transform(...Ti.transform),qe.scale(1,-1),ke(qe,ci.canvas,Ti.x,Ti.y,Ti.w,Ti.h,0,-1,1,1),qe.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Ge){}markPointProps(Ge,ze){}beginMarkedContent(Ge){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Ge,ze){Ge==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ze)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Ge){const ze=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Ge);const qe=this.ctx;this.pendingClip&&(ze||(this.pendingClip===xi?qe.clip("evenodd"):qe.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),qe.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Ge=(0,Me.getCurrentTransform)(this.ctx);if(Ge[1]===0&&Ge[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Ge[0]),Math.abs(Ge[3]));else{const ze=Math.abs(Ge[0]*Ge[3]-Ge[2]*Ge[1]),qe=Math.hypot(Ge[0],Ge[2]),ei=Math.hypot(Ge[1],Ge[3]);this._cachedGetSinglePixelWidth=Math.max(qe,ei)/ze}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:Ge}=this.current,ze=(0,Me.getCurrentTransform)(this.ctx);let qe,ei;if(ze[1]===0&&ze[2]===0){const ni=Math.abs(ze[0]),ci=Math.abs(ze[3]);if(Ge===0)qe=1/ni,ei=1/ci;else{const di=ni*Ge,Ti=ci*Ge;qe=di<1?1/di:1,ei=Ti<1?1/Ti:1}}else{const ni=Math.abs(ze[0]*ze[3]-ze[2]*ze[1]),ci=Math.hypot(ze[0],ze[1]),di=Math.hypot(ze[2],ze[3]);if(Ge===0)qe=di/ni,ei=ci/ni;else{const Ti=Ge*ni;qe=di>Ti?di/Ti:1,ei=ci>Ti?ci/Ti:1}}this._cachedScaleForStroking=[qe,ei]}return this._cachedScaleForStroking}rescaleAndStroke(Ge){const{ctx:ze}=this,{lineWidth:qe}=this.current,[ei,ni]=this.getScaleForStroking();if(ze.lineWidth=qe||1,ei===1&&ni===1){ze.stroke();return}let ci,di,Ti;Ge&&(ci=(0,Me.getCurrentTransform)(ze),di=ze.getLineDash().slice(),Ti=ze.lineDashOffset),ze.scale(ei,ni);const Ni=Math.max(ei,ni);ze.setLineDash(ze.getLineDash().map(si=>si/Ni)),ze.lineDashOffset/=Ni,ze.stroke(),Ge&&(ze.setTransform(...ci),ze.setLineDash(di),ze.lineDashOffset=Ti)}isContentVisible(){for(let Ge=this.markedContentStack.length-1;Ge>=0;Ge--)if(!this.markedContentStack[Ge].visible)return!1;return!0}};let Ei=Ci;ri=new WeakSet,Rl=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},t.CanvasGraphics=Ei;for(const $e in Ce.OPS)Ei.prototype[$e]!==void 0&&(Ei.prototype[Ce.OPS[$e]]=Ei.prototype[$e])},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=Te;var Ce=r(1),Me=r(6),Ie=r(12);const Fe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=Fe;function Oe(ke,De){if(!De||Ie.isNodeJS)return;const Be=De[2]-De[0],He=De[3]-De[1],Ue=new Path2D;Ue.rect(De[0],De[1],Be,He),ke.clip(Ue)}class _e{constructor(){this.constructor===_e&&(0,Ce.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,Ce.unreachable)("Abstract method `getPattern` called.")}}class xe extends _e{constructor(De){super(),this._type=De[1],this._bbox=De[2],this._colorStops=De[3],this._p0=De[4],this._p1=De[5],this._r0=De[6],this._r1=De[7],this.matrix=null}_createGradient(De){let Be;this._type==="axial"?Be=De.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Be=De.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const He of this._colorStops)Be.addColorStop(He[0],He[1]);return Be}getPattern(De,Be,He,Ue){let We;if(Ue===Fe.STROKE||Ue===Fe.FILL){const Je=Be.current.getClippedPathBoundingBox(Ue,(0,Me.getCurrentTransform)(De))||[0,0,0,0],Qe=Math.ceil(Je[2]-Je[0])||1,fi=Math.ceil(Je[3]-Je[1])||1,oi=Be.cachedCanvases.getCanvas("pattern",Qe,fi,!0),ii=oi.context;ii.clearRect(0,0,ii.canvas.width,ii.canvas.height),ii.beginPath(),ii.rect(0,0,ii.canvas.width,ii.canvas.height),ii.translate(-Je[0],-Je[1]),He=Ce.Util.transform(He,[1,0,0,1,Je[0],Je[1]]),ii.transform(...Be.baseTransform),this.matrix&&ii.transform(...this.matrix),Oe(ii,this._bbox),ii.fillStyle=this._createGradient(ii),ii.fill(),We=De.createPattern(oi.canvas,"no-repeat");const li=new DOMMatrix(He);We.setTransform(li)}else Oe(De,this._bbox),We=this._createGradient(De);return We}}function Pe(ke,De,Be,He,Ue,We,Je,Qe){const fi=De.coords,oi=De.colors,ii=ke.data,li=ke.width*4;let bi;fi[Be+1]>fi[He+1]&&(bi=Be,Be=He,He=bi,bi=We,We=Je,Je=bi),fi[He+1]>fi[Ue+1]&&(bi=He,He=Ue,Ue=bi,bi=Je,Je=Qe,Qe=bi),fi[Be+1]>fi[He+1]&&(bi=Be,Be=He,He=bi,bi=We,We=Je,Je=bi);const mi=(fi[Be]+De.offsetX)*De.scaleX,Si=(fi[Be+1]+De.offsetY)*De.scaleY,_i=(fi[He]+De.offsetX)*De.scaleX,xi=(fi[He+1]+De.offsetY)*De.scaleY,Ei=(fi[Ue]+De.offsetX)*De.scaleX,ri=(fi[Ue+1]+De.offsetY)*De.scaleY;if(Si>=ri)return;const vi=oi[We],Ci=oi[We+1],$e=oi[We+2],Ge=oi[Je],ze=oi[Je+1],qe=oi[Je+2],ei=oi[Qe],ni=oi[Qe+1],ci=oi[Qe+2],di=Math.round(Si),Ti=Math.round(ri);let Ni,si,ai,Ye,Ze,Xe,ui,pi;for(let gi=di;gi<=Ti;gi++){if(gi<xi){let Mi;gi<Si?Mi=0:Mi=(Si-gi)/(Si-xi),Ni=mi-(mi-_i)*Mi,si=vi-(vi-Ge)*Mi,ai=Ci-(Ci-ze)*Mi,Ye=$e-($e-qe)*Mi}else{let Mi;gi>ri?Mi=1:xi===ri?Mi=0:Mi=(xi-gi)/(xi-ri),Ni=_i-(_i-Ei)*Mi,si=Ge-(Ge-ei)*Mi,ai=ze-(ze-ni)*Mi,Ye=qe-(qe-ci)*Mi}let Li;gi<Si?Li=0:gi>ri?Li=1:Li=(Si-gi)/(Si-ri),Ze=mi-(mi-Ei)*Li,Xe=vi-(vi-ei)*Li,ui=Ci-(Ci-ni)*Li,pi=$e-($e-ci)*Li;const Ri=Math.round(Math.min(Ni,Ze)),wi=Math.round(Math.max(Ni,Ze));let Vi=li*gi+Ri*4;for(let Mi=Ri;Mi<=wi;Mi++)Li=(Ni-Mi)/(Ni-Ze),Li<0?Li=0:Li>1&&(Li=1),ii[Vi++]=si-(si-Xe)*Li|0,ii[Vi++]=ai-(ai-ui)*Li|0,ii[Vi++]=Ye-(Ye-pi)*Li|0,ii[Vi++]=255}}function Ae(ke,De,Be){const He=De.coords,Ue=De.colors;let We,Je;switch(De.type){case"lattice":const Qe=De.verticesPerRow,fi=Math.floor(He.length/Qe)-1,oi=Qe-1;for(We=0;We<fi;We++){let ii=We*Qe;for(let li=0;li<oi;li++,ii++)Pe(ke,Be,He[ii],He[ii+1],He[ii+Qe],Ue[ii],Ue[ii+1],Ue[ii+Qe]),Pe(ke,Be,He[ii+Qe+1],He[ii+1],He[ii+Qe],Ue[ii+Qe+1],Ue[ii+1],Ue[ii+Qe])}break;case"triangles":for(We=0,Je=He.length;We<Je;We+=3)Pe(ke,Be,He[We],He[We+1],He[We+2],Ue[We],Ue[We+1],Ue[We+2]);break;default:throw new Error("illegal figure")}}class Se extends _e{constructor(De){super(),this._coords=De[2],this._colors=De[3],this._figures=De[4],this._bounds=De[5],this._bbox=De[7],this._background=De[8],this.matrix=null}_createMeshCanvas(De,Be,He){const Qe=Math.floor(this._bounds[0]),fi=Math.floor(this._bounds[1]),oi=Math.ceil(this._bounds[2])-Qe,ii=Math.ceil(this._bounds[3])-fi,li=Math.min(Math.ceil(Math.abs(oi*De[0]*1.1)),3e3),bi=Math.min(Math.ceil(Math.abs(ii*De[1]*1.1)),3e3),mi=oi/li,Si=ii/bi,_i={coords:this._coords,colors:this._colors,offsetX:-Qe,offsetY:-fi,scaleX:1/mi,scaleY:1/Si},xi=li+2*2,Ei=bi+2*2,ri=He.getCanvas("mesh",xi,Ei,!1),vi=ri.context,Ci=vi.createImageData(li,bi);if(Be){const Ge=Ci.data;for(let ze=0,qe=Ge.length;ze<qe;ze+=4)Ge[ze]=Be[0],Ge[ze+1]=Be[1],Ge[ze+2]=Be[2],Ge[ze+3]=255}for(const Ge of this._figures)Ae(Ci,Ge,_i);return vi.putImageData(Ci,2,2),{canvas:ri.canvas,offsetX:Qe-2*mi,offsetY:fi-2*Si,scaleX:mi,scaleY:Si}}getPattern(De,Be,He,Ue){Oe(De,this._bbox);let We;if(Ue===Fe.SHADING)We=Ce.Util.singularValueDecompose2dScale((0,Me.getCurrentTransform)(De));else if(We=Ce.Util.singularValueDecompose2dScale(Be.baseTransform),this.matrix){const Qe=Ce.Util.singularValueDecompose2dScale(this.matrix);We=[We[0]*Qe[0],We[1]*Qe[1]]}const Je=this._createMeshCanvas(We,Ue===Fe.SHADING?null:this._background,Be.cachedCanvases);return Ue!==Fe.SHADING&&(De.setTransform(...Be.baseTransform),this.matrix&&De.transform(...this.matrix)),De.translate(Je.offsetX,Je.offsetY),De.scale(Je.scaleX,Je.scaleY),De.createPattern(Je.canvas,"no-repeat")}}class St extends _e{getPattern(){return"hotpink"}}function Te(ke){switch(ke[0]){case"RadialAxial":return new xe(ke);case"Mesh":return new Se(ke);case"Dummy":return new St}throw new Error(`Unknown IR type: ${ke[0]}`)}const Re={COLORED:1,UNCOLORED:2};class Ee{static get MAX_PATTERN_SIZE(){return(0,Ce.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(De,Be,He,Ue,We){this.operatorList=De[2],this.matrix=De[3]||[1,0,0,1,0,0],this.bbox=De[4],this.xstep=De[5],this.ystep=De[6],this.paintType=De[7],this.tilingType=De[8],this.color=Be,this.ctx=He,this.canvasGraphicsFactory=Ue,this.baseTransform=We}createPatternCanvas(De){const Be=this.operatorList,He=this.bbox,Ue=this.xstep,We=this.ystep,Je=this.paintType,Qe=this.tilingType,fi=this.color,oi=this.canvasGraphicsFactory;(0,Ce.info)("TilingType: "+Qe);const ii=He[0],li=He[1],bi=He[2],mi=He[3],Si=Ce.Util.singularValueDecompose2dScale(this.matrix),_i=Ce.Util.singularValueDecompose2dScale(this.baseTransform),xi=[Si[0]*_i[0],Si[1]*_i[1]],Ei=this.getSizeAndScale(Ue,this.ctx.canvas.width,xi[0]),ri=this.getSizeAndScale(We,this.ctx.canvas.height,xi[1]),vi=De.cachedCanvases.getCanvas("pattern",Ei.size,ri.size,!0),Ci=vi.context,$e=oi.createCanvasGraphics(Ci);$e.groupLevel=De.groupLevel,this.setFillAndStrokeStyleToContext($e,Je,fi);let Ge=ii,ze=li,qe=bi,ei=mi;return ii<0&&(Ge=0,qe+=Math.abs(ii)),li<0&&(ze=0,ei+=Math.abs(li)),Ci.translate(-(Ei.scale*Ge),-(ri.scale*ze)),$e.transform(Ei.scale,0,0,ri.scale,0,0),Ci.save(),this.clipBbox($e,Ge,ze,qe,ei),$e.baseTransform=(0,Me.getCurrentTransform)($e.ctx),$e.executeOperatorList(Be),$e.endDrawing(),{canvas:vi.canvas,scaleX:Ei.scale,scaleY:ri.scale,offsetX:Ge,offsetY:ze}}getSizeAndScale(De,Be,He){De=Math.abs(De);const Ue=Math.max(Ee.MAX_PATTERN_SIZE,Be);let We=Math.ceil(De*He);return We>=Ue?We=Ue:He=We/De,{scale:He,size:We}}clipBbox(De,Be,He,Ue,We){const Je=Ue-Be,Qe=We-He;De.ctx.rect(Be,He,Je,Qe),De.current.updateRectMinMax((0,Me.getCurrentTransform)(De.ctx),[Be,He,Ue,We]),De.clip(),De.endPath()}setFillAndStrokeStyleToContext(De,Be,He){const Ue=De.ctx,We=De.current;switch(Be){case Re.COLORED:const Je=this.ctx;Ue.fillStyle=Je.fillStyle,Ue.strokeStyle=Je.strokeStyle,We.fillColor=Je.fillStyle,We.strokeColor=Je.strokeStyle;break;case Re.UNCOLORED:const Qe=Ce.Util.makeHexColor(He[0],He[1],He[2]);Ue.fillStyle=Qe,Ue.strokeStyle=Qe,We.fillColor=Qe,We.strokeColor=Qe;break;default:throw new Ce.FormatError(`Unsupported paint type: ${Be}`)}}getPattern(De,Be,He,Ue){let We=He;Ue!==Fe.SHADING&&(We=Ce.Util.transform(We,Be.baseTransform),this.matrix&&(We=Ce.Util.transform(We,this.matrix)));const Je=this.createPatternCanvas(Be);let Qe=new DOMMatrix(We);Qe=Qe.translate(Je.offsetX,Je.offsetY),Qe=Qe.scale(1/Je.scaleX,1/Je.scaleY);const fi=De.createPattern(Je.canvas,"repeat");return fi.setTransform(Qe),fi}}t.TilingPattern=Ee},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=r},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=Me;var Ce=r(1);function Me({src:Ie,srcPos:Fe=0,dest:Oe,destPos:_e=0,width:xe,height:Pe,inverseDecode:Ae=!1}){const Se=Ce.FeatureTest.isLittleEndian?4278190080:255,[St,Te]=Ae?[0,Se]:[Se,0],Re=xe>>3,Ee=xe&7,ke=Ie.length;Oe=new Uint32Array(Oe.buffer);for(let De=0;De<Pe;De++){for(const He=Fe+Re;Fe<He;Fe++){const Ue=Fe<ke?Ie[Fe]:255;Oe[_e++]=Ue&128?Te:St,Oe[_e++]=Ue&64?Te:St,Oe[_e++]=Ue&32?Te:St,Oe[_e++]=Ue&16?Te:St,Oe[_e++]=Ue&8?Te:St,Oe[_e++]=Ue&4?Te:St,Oe[_e++]=Ue&2?Te:St,Oe[_e++]=Ue&1?Te:St}if(Ee===0)continue;const Be=Fe<ke?Ie[Fe++]:255;for(let He=0;He<Ee;He++)Oe[_e++]=Be&1<<7-He?Te:St}return{srcPos:Fe,destPos:_e}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var Ce=r(1);const Me={UNKNOWN:0,DATA:1,ERROR:2},Ie={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fe(_e){switch(_e instanceof Error||typeof _e=="object"&&_e!==null||(0,Ce.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),_e.name){case"AbortException":return new Ce.AbortException(_e.message);case"MissingPDFException":return new Ce.MissingPDFException(_e.message);case"PasswordException":return new Ce.PasswordException(_e.message,_e.code);case"UnexpectedResponseException":return new Ce.UnexpectedResponseException(_e.message,_e.status);case"UnknownErrorException":return new Ce.UnknownErrorException(_e.message,_e.details);default:return new Ce.UnknownErrorException(_e.message,_e.toString())}}class Oe{constructor(xe,Pe,Ae){this.sourceName=xe,this.targetName=Pe,this.comObj=Ae,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Se=>{const St=Se.data;if(St.targetName!==this.sourceName)return;if(St.stream){this._processStreamMessage(St);return}if(St.callback){const Re=St.callbackId,Ee=this.callbackCapabilities[Re];if(!Ee)throw new Error(`Cannot resolve callback ${Re}`);if(delete this.callbackCapabilities[Re],St.callback===Me.DATA)Ee.resolve(St.data);else if(St.callback===Me.ERROR)Ee.reject(Fe(St.reason));else throw new Error("Unexpected callback case");return}const Te=this.actionHandler[St.action];if(!Te)throw new Error(`Unknown action from worker: ${St.action}`);if(St.callbackId){const Re=this.sourceName,Ee=St.sourceName;new Promise(function(ke){ke(Te(St.data))}).then(function(ke){Ae.postMessage({sourceName:Re,targetName:Ee,callback:Me.DATA,callbackId:St.callbackId,data:ke})},function(ke){Ae.postMessage({sourceName:Re,targetName:Ee,callback:Me.ERROR,callbackId:St.callbackId,reason:Fe(ke)})});return}if(St.streamId){this._createStreamSink(St);return}Te(St.data)},Ae.addEventListener("message",this._onComObjOnMessage)}on(xe,Pe){const Ae=this.actionHandler;if(Ae[xe])throw new Error(`There is already an actionName called "${xe}"`);Ae[xe]=Pe}send(xe,Pe,Ae){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:xe,data:Pe},Ae)}sendWithPromise(xe,Pe,Ae){const Se=this.callbackId++,St=(0,Ce.createPromiseCapability)();this.callbackCapabilities[Se]=St;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:xe,callbackId:Se,data:Pe},Ae)}catch(Te){St.reject(Te)}return St.promise}sendWithStream(xe,Pe,Ae,Se){const St=this.streamId++,Te=this.sourceName,Re=this.targetName,Ee=this.comObj;return new ReadableStream({start:ke=>{const De=(0,Ce.createPromiseCapability)();return this.streamControllers[St]={controller:ke,startCall:De,pullCall:null,cancelCall:null,isClosed:!1},Ee.postMessage({sourceName:Te,targetName:Re,action:xe,streamId:St,data:Pe,desiredSize:ke.desiredSize},Se),De.promise},pull:ke=>{const De=(0,Ce.createPromiseCapability)();return this.streamControllers[St].pullCall=De,Ee.postMessage({sourceName:Te,targetName:Re,stream:Ie.PULL,streamId:St,desiredSize:ke.desiredSize}),De.promise},cancel:ke=>{(0,Ce.assert)(ke instanceof Error,"cancel must have a valid reason");const De=(0,Ce.createPromiseCapability)();return this.streamControllers[St].cancelCall=De,this.streamControllers[St].isClosed=!0,Ee.postMessage({sourceName:Te,targetName:Re,stream:Ie.CANCEL,streamId:St,reason:Fe(ke)}),De.promise}},Ae)}_createStreamSink(xe){const Pe=xe.streamId,Ae=this.sourceName,Se=xe.sourceName,St=this.comObj,Te=this,Re=this.actionHandler[xe.action],Ee={enqueue(ke,De=1,Be){if(this.isCancelled)return;const He=this.desiredSize;this.desiredSize-=De,He>0&&this.desiredSize<=0&&(this.sinkCapability=(0,Ce.createPromiseCapability)(),this.ready=this.sinkCapability.promise),St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.ENQUEUE,streamId:Pe,chunk:ke},Be)},close(){this.isCancelled||(this.isCancelled=!0,St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.CLOSE,streamId:Pe}),delete Te.streamSinks[Pe])},error(ke){(0,Ce.assert)(ke instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.ERROR,streamId:Pe,reason:Fe(ke)}))},sinkCapability:(0,Ce.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:xe.desiredSize,ready:null};Ee.sinkCapability.resolve(),Ee.ready=Ee.sinkCapability.promise,this.streamSinks[Pe]=Ee,new Promise(function(ke){ke(Re(xe.data,Ee))}).then(function(){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.START_COMPLETE,streamId:Pe,success:!0})},function(ke){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.START_COMPLETE,streamId:Pe,reason:Fe(ke)})})}_processStreamMessage(xe){const Pe=xe.streamId,Ae=this.sourceName,Se=xe.sourceName,St=this.comObj,Te=this.streamControllers[Pe],Re=this.streamSinks[Pe];switch(xe.stream){case Ie.START_COMPLETE:xe.success?Te.startCall.resolve():Te.startCall.reject(Fe(xe.reason));break;case Ie.PULL_COMPLETE:xe.success?Te.pullCall.resolve():Te.pullCall.reject(Fe(xe.reason));break;case Ie.PULL:if(!Re){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.PULL_COMPLETE,streamId:Pe,success:!0});break}Re.desiredSize<=0&&xe.desiredSize>0&&Re.sinkCapability.resolve(),Re.desiredSize=xe.desiredSize,new Promise(function(Ee){Ee(Re.onPull&&Re.onPull())}).then(function(){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.PULL_COMPLETE,streamId:Pe,success:!0})},function(Ee){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.PULL_COMPLETE,streamId:Pe,reason:Fe(Ee)})});break;case Ie.ENQUEUE:if((0,Ce.assert)(Te,"enqueue should have stream controller"),Te.isClosed)break;Te.controller.enqueue(xe.chunk);break;case Ie.CLOSE:if((0,Ce.assert)(Te,"close should have stream controller"),Te.isClosed)break;Te.isClosed=!0,Te.controller.close(),this._deleteStreamController(Te,Pe);break;case Ie.ERROR:(0,Ce.assert)(Te,"error should have stream controller"),Te.controller.error(Fe(xe.reason)),this._deleteStreamController(Te,Pe);break;case Ie.CANCEL_COMPLETE:xe.success?Te.cancelCall.resolve():Te.cancelCall.reject(Fe(xe.reason)),this._deleteStreamController(Te,Pe);break;case Ie.CANCEL:if(!Re)break;new Promise(function(Ee){Ee(Re.onCancel&&Re.onCancel(Fe(xe.reason)))}).then(function(){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.CANCEL_COMPLETE,streamId:Pe,success:!0})},function(Ee){St.postMessage({sourceName:Ae,targetName:Se,stream:Ie.CANCEL_COMPLETE,streamId:Pe,reason:Fe(Ee)})}),Re.sinkCapability.reject(Fe(xe.reason)),Re.isCancelled=!0,delete this.streamSinks[Pe];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(xe,Pe){await Promise.allSettled([xe.startCall&&xe.startCall.promise,xe.pullCall&&xe.pullCall.promise,xe.cancelCall&&xe.cancelCall.promise]),delete this.streamControllers[Pe]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=Oe},(e,t,r)=>{var Ie,Fe;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var Ce=r(1);class Me{constructor({parsedData:_e,rawData:xe}){sn(this,Ie,void 0);sn(this,Fe,void 0);bn(this,Ie,_e),bn(this,Fe,xe)}getRaw(){return Di(this,Fe)}get(_e){var xe;return(xe=Di(this,Ie).get(_e))!=null?xe:null}getAll(){return(0,Ce.objectFromMap)(Di(this,Ie))}has(_e){return Di(this,Ie).has(_e)}}Ie=new WeakMap,Fe=new WeakMap,t.Metadata=Me},(e,t,r)=>{var _e,xe,Pe,Ae,Se,St,Ml;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var Ce=r(1),Me=r(8);const Ie=Symbol("INTERNAL");class Fe{constructor(Ee,ke){sn(this,_e,!0);this.name=Ee,this.intent=ke}get visible(){return Di(this,_e)}_setVisible(Ee,ke){Ee!==Ie&&(0,Ce.unreachable)("Internal method `_setVisible` called."),bn(this,_e,ke)}}_e=new WeakMap;class Oe{constructor(Ee){sn(this,St);sn(this,xe,null);sn(this,Pe,new Map);sn(this,Ae,null);sn(this,Se,null);if(this.name=null,this.creator=null,Ee!==null){this.name=Ee.name,this.creator=Ee.creator,bn(this,Se,Ee.order);for(const ke of Ee.groups)Di(this,Pe).set(ke.id,new Fe(ke.name,ke.intent));if(Ee.baseState==="OFF")for(const ke of Di(this,Pe).values())ke._setVisible(Ie,!1);for(const ke of Ee.on)Di(this,Pe).get(ke)._setVisible(Ie,!0);for(const ke of Ee.off)Di(this,Pe).get(ke)._setVisible(Ie,!1);bn(this,Ae,this.getHash())}}isVisible(Ee){if(Di(this,Pe).size===0)return!0;if(!Ee)return(0,Ce.warn)("Optional content group not defined."),!0;if(Ee.type==="OCG")return Di(this,Pe).has(Ee.id)?Di(this,Pe).get(Ee.id).visible:((0,Ce.warn)(`Optional content group not found: ${Ee.id}`),!0);if(Ee.type==="OCMD"){if(Ee.expression)return dn(this,St,Ml).call(this,Ee.expression);if(!Ee.policy||Ee.policy==="AnyOn"){for(const ke of Ee.ids){if(!Di(this,Pe).has(ke))return(0,Ce.warn)(`Optional content group not found: ${ke}`),!0;if(Di(this,Pe).get(ke).visible)return!0}return!1}else if(Ee.policy==="AllOn"){for(const ke of Ee.ids){if(!Di(this,Pe).has(ke))return(0,Ce.warn)(`Optional content group not found: ${ke}`),!0;if(!Di(this,Pe).get(ke).visible)return!1}return!0}else if(Ee.policy==="AnyOff"){for(const ke of Ee.ids){if(!Di(this,Pe).has(ke))return(0,Ce.warn)(`Optional content group not found: ${ke}`),!0;if(!Di(this,Pe).get(ke).visible)return!0}return!1}else if(Ee.policy==="AllOff"){for(const ke of Ee.ids){if(!Di(this,Pe).has(ke))return(0,Ce.warn)(`Optional content group not found: ${ke}`),!0;if(Di(this,Pe).get(ke).visible)return!1}return!0}return(0,Ce.warn)(`Unknown optional content policy ${Ee.policy}.`),!0}return(0,Ce.warn)(`Unknown group type ${Ee.type}.`),!0}setVisibility(Ee,ke=!0){if(!Di(this,Pe).has(Ee)){(0,Ce.warn)(`Optional content group not found: ${Ee}`);return}Di(this,Pe).get(Ee)._setVisible(Ie,!!ke),bn(this,xe,null)}get hasInitialVisibility(){return this.getHash()===Di(this,Ae)}getOrder(){return Di(this,Pe).size?Di(this,Se)?Di(this,Se).slice():[...Di(this,Pe).keys()]:null}getGroups(){return Di(this,Pe).size>0?(0,Ce.objectFromMap)(Di(this,Pe)):null}getGroup(Ee){return Di(this,Pe).get(Ee)||null}getHash(){if(Di(this,xe)!==null)return Di(this,xe);const Ee=new Me.MurmurHash3_64;for(const[ke,De]of Di(this,Pe))Ee.update(`${ke}:${De.visible}`);return bn(this,xe,Ee.hexdigest())}}xe=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,Se=new WeakMap,St=new WeakSet,Ml=function(Ee){const ke=Ee.length;if(ke<2)return!0;const De=Ee[0];for(let Be=1;Be<ke;Be++){const He=Ee[Be];let Ue;if(Array.isArray(He))Ue=dn(this,St,Ml).call(this,He);else if(Di(this,Pe).has(He))Ue=Di(this,Pe).get(He).visible;else return(0,Ce.warn)(`Optional content group not found: ${He}`),!0;switch(De){case"And":if(!Ue)return!1;break;case"Or":if(Ue)return!0;break;case"Not":return!Ue;default:return!0}}return De==="And"},t.OptionalContentConfig=Oe},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var Ce=r(1),Me=r(6);class Ie{constructor(xe,Pe){(0,Ce.assert)(Pe,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=xe.progressiveDone||!1,this._contentDispositionFilename=xe.contentDispositionFilename||null;const Ae=xe.initialData;if((Ae==null?void 0:Ae.length)>0){const Se=new Uint8Array(Ae).buffer;this._queuedChunks.push(Se)}this._pdfDataRangeTransport=Pe,this._isStreamingSupported=!xe.disableStream,this._isRangeSupported=!xe.disableRange,this._contentLength=xe.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Se,St)=>{this._onReceiveData({begin:Se,chunk:St})}),this._pdfDataRangeTransport.addProgressListener((Se,St)=>{this._onProgress({loaded:Se,total:St})}),this._pdfDataRangeTransport.addProgressiveReadListener(Se=>{this._onReceiveData({chunk:Se})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(xe){const Pe=new Uint8Array(xe.chunk).buffer;if(xe.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Pe):this._queuedChunks.push(Pe);else{const Ae=this._rangeReaders.some(function(Se){return Se._begin!==xe.begin?!1:(Se._enqueue(Pe),!0)});(0,Ce.assert)(Ae,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var xe,Pe;return(Pe=(xe=this._fullRequestReader)==null?void 0:xe._loaded)!=null?Pe:0}_onProgress(xe){var Pe,Ae,Se,St;xe.total===void 0?(Ae=(Pe=this._rangeReaders[0])==null?void 0:Pe.onProgress)==null||Ae.call(Pe,{loaded:xe.loaded}):(St=(Se=this._fullRequestReader)==null?void 0:Se.onProgress)==null||St.call(Se,{loaded:xe.loaded,total:xe.total})}_onProgressiveDone(){var xe;(xe=this._fullRequestReader)==null||xe.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(xe){const Pe=this._rangeReaders.indexOf(xe);Pe>=0&&this._rangeReaders.splice(Pe,1)}getFullReader(){(0,Ce.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const xe=this._queuedChunks;return this._queuedChunks=null,new Fe(this,xe,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(xe,Pe){if(Pe<=this._progressiveDataLength)return null;const Ae=new Oe(this,xe,Pe);return this._pdfDataRangeTransport.requestDataRange(xe,Pe),this._rangeReaders.push(Ae),Ae}cancelAllRequests(xe){var Pe;(Pe=this._fullRequestReader)==null||Pe.cancel(xe);for(const Ae of this._rangeReaders.slice(0))Ae.cancel(xe);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=Ie;class Fe{constructor(xe,Pe,Ae=!1,Se=null){this._stream=xe,this._done=Ae||!1,this._filename=(0,Me.isPdfFile)(Se)?Se:null,this._queuedChunks=Pe||[],this._loaded=0;for(const St of this._queuedChunks)this._loaded+=St.byteLength;this._requests=[],this._headersReady=Promise.resolve(),xe._fullRequestReader=this,this.onProgress=null}_enqueue(xe){this._done||(this._requests.length>0?this._requests.shift().resolve({value:xe,done:!1}):this._queuedChunks.push(xe),this._loaded+=xe.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const xe=(0,Ce.createPromiseCapability)();return this._requests.push(xe),xe.promise}cancel(xe){this._done=!0;for(const Pe of this._requests)Pe.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Oe{constructor(xe,Pe,Ae){this._stream=xe,this._begin=Pe,this._end=Ae,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(xe){if(!this._done){if(this._requests.length===0)this._queuedChunk=xe;else{this._requests.shift().resolve({value:xe,done:!1});for(const Ae of this._requests)Ae.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Pe=this._queuedChunk;return this._queuedChunk=null,{value:Pe,done:!1}}if(this._done)return{value:void 0,done:!0};const xe=(0,Ce.createPromiseCapability)();return this._requests.push(xe),xe.promise}cancel(xe){this._done=!0;for(const Pe of this._requests)Pe.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class r{static textContent(Me){const Ie=[],Fe={items:Ie,styles:Object.create(null)};function Oe(_e){var Ae;if(!_e)return;let xe=null;const Pe=_e.name;if(Pe==="#text")xe=_e.value;else if(r.shouldBuildText(Pe))(Ae=_e==null?void 0:_e.attributes)!=null&&Ae.textContent?xe=_e.attributes.textContent:_e.value&&(xe=_e.value);else return;if(xe!==null&&Ie.push({str:xe}),!!_e.children)for(const Se of _e.children)Oe(Se)}return Oe(Me),Fe}static shouldBuildText(Me){return!(Me==="textarea"||Me==="input"||Me==="option"||Me==="select")}}t.XfaText=r},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var Ce=r(7);const Me=function(_e){return new Promise((xe,Pe)=>{require$$2.readFile(_e,(Se,St)=>{if(Se||!St){Pe(new Error(Se));return}xe(new Uint8Array(St))})})};class Ie extends Ce.BaseCanvasFactory{_createCanvas(xe,Pe){return require$$2.createCanvas(xe,Pe)}}t.NodeCanvasFactory=Ie;class Fe extends Ce.BaseCMapReaderFactory{_fetchData(xe,Pe){return Me(xe).then(Ae=>({cMapData:Ae,compressionType:Pe}))}}t.NodeCMapReaderFactory=Fe;class Oe extends Ce.BaseStandardFontDataFactory{_fetchData(xe){return Me(xe)}}t.NodeStandardFontDataFactory=Oe},(e,t,r)=>{var _e,xe,Pe,Ae,Se,St,Te,Re,Ee,Il,De,Ic,He,Dl,We,Dc;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var Ce=r(5),Me=r(1),Ie=r(22),Fe=r(23);const Qe=class{constructor(oi){sn(this,Ee);sn(this,De);sn(this,He);sn(this,We);sn(this,_e,void 0);sn(this,xe,!1);sn(this,Pe,this.pointerup.bind(this));sn(this,Ae,this.pointerdown.bind(this));sn(this,Se,new Map);sn(this,St,!1);sn(this,Te,!1);sn(this,Re,void 0);Qe._initialized||(Qe._initialized=!0,Ie.FreeTextEditor.initialize(oi.l10n),Fe.InkEditor.initialize(oi.l10n)),oi.uiManager.registerEditorTypes([Ie.FreeTextEditor,Fe.InkEditor]),bn(this,Re,oi.uiManager),this.annotationStorage=oi.annotationStorage,this.pageIndex=oi.pageIndex,this.div=oi.div,bn(this,_e,oi.accessibilityManager),Di(this,Re).addLayer(this)}updateToolbar(oi){Di(this,Re).updateToolbar(oi)}updateMode(oi=Di(this,Re).getMode()){dn(this,We,Dc).call(this),oi===Me.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Di(this,Re).unselectAll(),this.div.classList.toggle("freeTextEditing",oi===Me.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",oi===Me.AnnotationEditorType.INK)}addInkEditorIfNeeded(oi){if(!oi&&Di(this,Re).getMode()!==Me.AnnotationEditorType.INK)return;if(!oi){for(const li of Di(this,Se).values())if(li.isEmpty()){li.setInBackground();return}}dn(this,He,Dl).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(oi){Di(this,Re).setEditingState(oi)}addCommands(oi){Di(this,Re).addCommands(oi)}enable(){this.div.style.pointerEvents="auto";for(const oi of Di(this,Se).values())oi.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const oi of Di(this,Se).values())oi.disableEditing()}setActiveEditor(oi){Di(this,Re).getActive()!==oi&&Di(this,Re).setActiveEditor(oi)}enableClick(){this.div.addEventListener("pointerdown",Di(this,Ae)),this.div.addEventListener("pointerup",Di(this,Pe))}disableClick(){this.div.removeEventListener("pointerdown",Di(this,Ae)),this.div.removeEventListener("pointerup",Di(this,Pe))}attach(oi){Di(this,Se).set(oi.id,oi)}detach(oi){var ii;Di(this,Se).delete(oi.id),(ii=Di(this,_e))==null||ii.removePointerInTextLayer(oi.contentDiv)}remove(oi){Di(this,Re).removeEditor(oi),this.detach(oi),this.annotationStorage.remove(oi.id),oi.div.style.display="none",setTimeout(()=>{oi.div.style.display="",oi.div.remove(),oi.isAttachedToDOM=!1,document.activeElement===document.body&&Di(this,Re).focusMainContainer()},0),Di(this,Te)||this.addInkEditorIfNeeded(!1)}add(oi){if(dn(this,Ee,Il).call(this,oi),Di(this,Re).addEditor(oi),this.attach(oi),!oi.isAttachedToDOM){const ii=oi.render();this.div.append(ii),oi.isAttachedToDOM=!0}this.moveEditorInDOM(oi),oi.onceAdded(),this.addToAnnotationStorage(oi)}moveEditorInDOM(oi){var ii;(ii=Di(this,_e))==null||ii.moveElementInDOM(this.div,oi.div,oi.contentDiv,!0)}addToAnnotationStorage(oi){!oi.isEmpty()&&!this.annotationStorage.has(oi.id)&&this.annotationStorage.setValue(oi.id,oi)}addOrRebuild(oi){oi.needsToBeRebuilt()?oi.rebuild():this.add(oi)}addANewEditor(oi){const ii=()=>{this.addOrRebuild(oi)},li=()=>{oi.remove()};this.addCommands({cmd:ii,undo:li,mustExec:!0})}addUndoableEditor(oi){const ii=()=>{this.addOrRebuild(oi)},li=()=>{oi.remove()};this.addCommands({cmd:ii,undo:li,mustExec:!1})}getNextId(){return Di(this,Re).getId()}deserialize(oi){switch(oi.annotationType){case Me.AnnotationEditorType.FREETEXT:return Ie.FreeTextEditor.deserialize(oi,this);case Me.AnnotationEditorType.INK:return Fe.InkEditor.deserialize(oi,this)}return null}setSelected(oi){Di(this,Re).setSelected(oi)}toggleSelected(oi){Di(this,Re).toggleSelected(oi)}isSelected(oi){return Di(this,Re).isSelected(oi)}unselect(oi){Di(this,Re).unselect(oi)}pointerup(oi){const ii=Ce.KeyboardManager.platform.isMac;if(!(oi.button!==0||oi.ctrlKey&&ii)&&oi.target===this.div&&!!Di(this,St)){if(bn(this,St,!1),!Di(this,xe)){bn(this,xe,!0);return}dn(this,He,Dl).call(this,oi)}}pointerdown(oi){const ii=Ce.KeyboardManager.platform.isMac;if(oi.button!==0||oi.ctrlKey&&ii||oi.target!==this.div)return;bn(this,St,!0);const li=Di(this,Re).getActive();bn(this,xe,!li||li.isEmpty())}drop(oi){const ii=oi.dataTransfer.getData("text/plain"),li=Di(this,Re).getEditor(ii);if(!li)return;oi.preventDefault(),oi.dataTransfer.dropEffect="move",dn(this,Ee,Il).call(this,li);const bi=this.div.getBoundingClientRect(),mi=oi.clientX-bi.x,Si=oi.clientY-bi.y;li.translate(mi-li.startX,Si-li.startY),this.moveEditorInDOM(li),li.div.focus()}dragover(oi){oi.preventDefault()}destroy(){var oi,ii;((oi=Di(this,Re).getActive())==null?void 0:oi.parent)===this&&Di(this,Re).setActiveEditor(null);for(const li of Di(this,Se).values())(ii=Di(this,_e))==null||ii.removePointerInTextLayer(li.contentDiv),li.isAttachedToDOM=!1,li.div.remove(),li.parent=null;this.div=null,Di(this,Se).clear(),Di(this,Re).removeLayer(this)}render(oi){this.viewport=oi.viewport,(0,Ce.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const ii of Di(this,Re).getEditors(this.pageIndex))this.add(ii);this.updateMode()}update(oi){Di(this,Re).commitOrRemove(),this.viewport=oi.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[oi,ii,li,bi]=this.viewport.viewBox,mi=li-oi,Si=bi-ii;return[mi,Si]}get viewportBaseDimensions(){const{width:oi,height:ii,rotation:li}=this.viewport;return li%180===0?[oi,ii]:[ii,oi]}setDimensions(){const{width:oi,height:ii,rotation:li}=this.viewport,bi=li%180!==0,mi=Math.floor(oi)+"px",Si=Math.floor(ii)+"px";this.div.style.width=bi?Si:mi,this.div.style.height=bi?mi:Si,this.div.setAttribute("data-main-rotation",li)}};let Oe=Qe;_e=new WeakMap,xe=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,Se=new WeakMap,St=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ee=new WeakSet,Il=function(oi){var ii;oi.parent!==this&&(this.attach(oi),oi.pageIndex=this.pageIndex,(ii=oi.parent)==null||ii.detach(oi),oi.parent=this,oi.div&&oi.isAttachedToDOM&&(oi.div.remove(),this.div.append(oi.div)))},De=new WeakSet,Ic=function(oi){switch(Di(this,Re).getMode()){case Me.AnnotationEditorType.FREETEXT:return new Ie.FreeTextEditor(oi);case Me.AnnotationEditorType.INK:return new Fe.InkEditor(oi)}return null},He=new WeakSet,Dl=function(oi){const ii=this.getNextId(),li=dn(this,De,Ic).call(this,{parent:this,id:ii,x:oi.offsetX,y:oi.offsetY});return li&&this.add(li),li},We=new WeakSet,Dc=function(){bn(this,Te,!0);for(const oi of Di(this,Se).values())oi.isEmpty()&&oi.remove();bn(this,Te,!1)},lr(Oe,"_initialized",!1),t.AnnotationEditorLayer=Oe},(e,t,r)=>{var Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,Fc,De,Bc,He,jc,We,Fl;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var Ce=r(1),Me=r(5),Ie=r(4);const Qe=class extends Ie.AnnotationEditor{constructor(ii){super({...ii,name:"freeTextEditor"});sn(this,Ee);sn(this,De);sn(this,He);sn(this,We);sn(this,Oe,this.editorDivBlur.bind(this));sn(this,_e,this.editorDivFocus.bind(this));sn(this,xe,this.editorDivInput.bind(this));sn(this,Pe,this.editorDivKeydown.bind(this));sn(this,Ae,void 0);sn(this,Se,"");sn(this,St,`${this.id}-editor`);sn(this,Te,!1);sn(this,Re,void 0);bn(this,Ae,ii.color||Qe._defaultColor||Ie.AnnotationEditor._defaultLineColor),bn(this,Re,ii.fontSize||Qe._defaultFontSize)}static initialize(ii){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(bi=>[bi,ii.get(bi)]));const li=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(li.getPropertyValue("--freetext-padding"))}static updateDefaultParams(ii,li){switch(ii){case Ce.AnnotationEditorParamsType.FREETEXT_SIZE:Qe._defaultFontSize=li;break;case Ce.AnnotationEditorParamsType.FREETEXT_COLOR:Qe._defaultColor=li;break}}updateParams(ii,li){switch(ii){case Ce.AnnotationEditorParamsType.FREETEXT_SIZE:dn(this,Ee,Fc).call(this,li);break;case Ce.AnnotationEditorParamsType.FREETEXT_COLOR:dn(this,De,Bc).call(this,li);break}}static get defaultPropertiesToUpdate(){return[[Ce.AnnotationEditorParamsType.FREETEXT_SIZE,Qe._defaultFontSize],[Ce.AnnotationEditorParamsType.FREETEXT_COLOR,Qe._defaultColor||Ie.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.AnnotationEditorParamsType.FREETEXT_SIZE,Di(this,Re)],[Ce.AnnotationEditorParamsType.FREETEXT_COLOR,Di(this,Ae)]]}getInitialTranslation(){return[-Qe._internalPadding*this.parent.scaleFactor,-(Qe._internalPadding+Di(this,Re))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Ce.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Di(this,Pe)),this.editorDiv.addEventListener("focus",Di(this,_e)),this.editorDiv.addEventListener("blur",Di(this,Oe)),this.editorDiv.addEventListener("input",Di(this,xe)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Di(this,St)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",Di(this,Pe)),this.editorDiv.removeEventListener("focus",Di(this,_e)),this.editorDiv.removeEventListener("blur",Di(this,Oe)),this.editorDiv.removeEventListener("input",Di(this,xe)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(ii){super.focusin(ii),ii.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),Di(this,Te)||(bn(this,Te,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),bn(this,Se,dn(this,He,jc).call(this).trimEnd()),dn(this,We,Fl).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(ii){this.enableEditMode(),this.editorDiv.focus()}keydown(ii){ii.target===this.div&&ii.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(ii){Qe._keyboardManager.exec(this,ii)}editorDivFocus(ii){this.isEditing=!0}editorDivBlur(ii){this.isEditing=!1}editorDivInput(ii){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let ii,li;this.width&&(ii=this.x,li=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Di(this,St)),this.enableEditing(),Qe._l10nPromise.get("editor_free_text2_aria_label").then(mi=>{var Si;return(Si=this.editorDiv)==null?void 0:Si.setAttribute("aria-label",mi)}),Qe._l10nPromise.get("free_text2_default_content").then(mi=>{var Si;return(Si=this.editorDiv)==null?void 0:Si.setAttribute("default-content",mi)}),this.editorDiv.contentEditable=!0;const{style:bi}=this.editorDiv;if(bi.fontSize=`calc(${Di(this,Re)}px * var(--scale-factor))`,bi.color=Di(this,Ae),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,Me.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[mi,Si]=this.parent.viewportBaseDimensions;this.setAt(ii*mi,li*Si,this.width*mi,this.height*Si);for(const _i of Di(this,Se).split(`
`)){const xi=document.createElement("div");xi.append(_i?document.createTextNode(_i):document.createElement("br")),this.editorDiv.append(xi)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(ii,li){const bi=super.deserialize(ii,li);return bn(bi,Re,ii.fontSize),bn(bi,Ae,Ce.Util.makeHexColor(...ii.color)),bn(bi,Se,ii.value),bi}serialize(){if(this.isEmpty())return null;const ii=Qe._internalPadding*this.parent.scaleFactor,li=this.getRect(ii,ii),bi=Ie.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:Ce.AnnotationEditorType.FREETEXT,color:bi,fontSize:Di(this,Re),value:Di(this,Se),pageIndex:this.parent.pageIndex,rect:li,rotation:this.rotation}}};let Fe=Qe;Oe=new WeakMap,_e=new WeakMap,xe=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,Se=new WeakMap,St=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ee=new WeakSet,Fc=function(ii){const li=mi=>{this.editorDiv.style.fontSize=`calc(${mi}px * var(--scale-factor))`,this.translate(0,-(mi-Di(this,Re))*this.parent.scaleFactor),bn(this,Re,mi),dn(this,We,Fl).call(this)},bi=Di(this,Re);this.parent.addCommands({cmd:()=>{li(ii)},undo:()=>{li(bi)},mustExec:!0,type:Ce.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},De=new WeakSet,Bc=function(ii){const li=Di(this,Ae);this.parent.addCommands({cmd:()=>{bn(this,Ae,ii),this.editorDiv.style.color=ii},undo:()=>{bn(this,Ae,li),this.editorDiv.style.color=li},mustExec:!0,type:Ce.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},He=new WeakSet,jc=function(){const ii=this.editorDiv.getElementsByTagName("div");if(ii.length===0)return this.editorDiv.innerText;const li=[];for(const bi of ii){const mi=bi.firstChild;(mi==null?void 0:mi.nodeName)==="#text"?li.push(mi.data):li.push("")}return li.join(`
`)},We=new WeakSet,Fl=function(){const[ii,li]=this.parent.viewportBaseDimensions,bi=this.div.getBoundingClientRect();this.width=bi.width/ii,this.height=bi.height/li},lr(Fe,"_freeTextDefaultContent",""),lr(Fe,"_l10nPromise"),lr(Fe,"_internalPadding",0),lr(Fe,"_defaultColor",null),lr(Fe,"_defaultFontSize",10),lr(Fe,"_keyboardManager",new Me.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Qe.prototype.commitOrRemove]])),lr(Fe,"_type","freetext"),t.FreeTextEditor=Fe},(e,t,r)=>{var Pe,Ae,Se,St,Te,Re,Ee,ke,De,Be,He,Ue,We,Je,Qe,Hc,oi,Uc,li,Vc,mi,Wc,_i,Bl,Ei,qc,vi,zc,$e,$c,ze,is,ei,jl,ci,ko,Ti,Ro,si,ha,Ye,Hl,Xe,Mo,pi,Ul,Li,Yc,wi,Gc,Mi,Xc,Xi,Vl,ji,Io,cn,ua,xn,Wl;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return Ie.fitCurve}});var Ce=r(1),Me=r(4),Ie=r(24),Fe=r(5);const Oe=16,_e=100,Tn=class extends Me.AnnotationEditor{constructor(Hi){super({...Hi,name:"inkEditor"});sn(this,Qe);sn(this,oi);sn(this,li);sn(this,mi);sn(this,_i);sn(this,Ei);sn(this,vi);sn(this,$e);sn(this,ze);sn(this,ei);sn(this,ci);sn(this,Ti);sn(this,si);sn(this,Ye);sn(this,Xe);sn(this,Li);sn(this,wi);sn(this,Mi);sn(this,Xi);sn(this,ji);sn(this,cn);sn(this,xn);sn(this,Pe,0);sn(this,Ae,0);sn(this,Se,0);sn(this,St,this.canvasPointermove.bind(this));sn(this,Te,this.canvasPointerleave.bind(this));sn(this,Re,this.canvasPointerup.bind(this));sn(this,Ee,this.canvasPointerdown.bind(this));sn(this,ke,!1);sn(this,De,!1);sn(this,Be,null);sn(this,He,null);sn(this,Ue,0);sn(this,We,0);sn(this,Je,null);this.color=Hi.color||null,this.thickness=Hi.thickness||null,this.opacity=Hi.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Hi){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(Fi=>[Fi,Hi.get(Fi)]))}static updateDefaultParams(Hi,Fi){switch(Hi){case Ce.AnnotationEditorParamsType.INK_THICKNESS:Tn._defaultThickness=Fi;break;case Ce.AnnotationEditorParamsType.INK_COLOR:Tn._defaultColor=Fi;break;case Ce.AnnotationEditorParamsType.INK_OPACITY:Tn._defaultOpacity=Fi/100;break}}updateParams(Hi,Fi){switch(Hi){case Ce.AnnotationEditorParamsType.INK_THICKNESS:dn(this,Qe,Hc).call(this,Fi);break;case Ce.AnnotationEditorParamsType.INK_COLOR:dn(this,oi,Uc).call(this,Fi);break;case Ce.AnnotationEditorParamsType.INK_OPACITY:dn(this,li,Vc).call(this,Fi);break}}static get defaultPropertiesToUpdate(){return[[Ce.AnnotationEditorParamsType.INK_THICKNESS,Tn._defaultThickness],[Ce.AnnotationEditorParamsType.INK_COLOR,Tn._defaultColor||Me.AnnotationEditor._defaultLineColor],[Ce.AnnotationEditorParamsType.INK_OPACITY,Math.round(Tn._defaultOpacity*100)]]}get propertiesToUpdate(){var Hi;return[[Ce.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Tn._defaultThickness],[Ce.AnnotationEditorParamsType.INK_COLOR,this.color||Tn._defaultColor||Me.AnnotationEditor._defaultLineColor],[Ce.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((Hi=this.opacity)!=null?Hi:Tn._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(dn(this,ci,ko).call(this),dn(this,Ti,Ro).call(this)),this.isAttachedToDOM||(this.parent.add(this),dn(this,si,ha).call(this)),dn(this,cn,ua).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Di(this,He).disconnect(),bn(this,He,null),super.remove())}enableEditMode(){Di(this,ke)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",Di(this,Ee)),this.canvas.addEventListener("pointerup",Di(this,Re)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Di(this,Ee)),this.canvas.removeEventListener("pointerup",Di(this,Re)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Di(this,ke)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),bn(this,ke,!0),this.div.classList.add("disabled"),dn(this,cn,ua).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Hi){super.focusin(Hi),this.enableEditMode()}canvasPointerdown(Hi){Hi.button!==0||!this.isInEditMode()||Di(this,ke)||(this.setInForeground(),Hi.type!=="mouse"&&this.div.focus(),Hi.stopPropagation(),this.canvas.addEventListener("pointerleave",Di(this,Te)),this.canvas.addEventListener("pointermove",Di(this,St)),dn(this,Ei,qc).call(this,Hi.offsetX,Hi.offsetY))}canvasPointermove(Hi){Hi.stopPropagation(),dn(this,vi,zc).call(this,Hi.offsetX,Hi.offsetY)}canvasPointerup(Hi){Hi.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Hi.stopPropagation(),dn(this,ei,jl).call(this,Hi),this.setInBackground())}canvasPointerleave(Hi){dn(this,ei,jl).call(this,Hi),this.setInBackground()}render(){if(this.div)return this.div;let Hi,Fi;this.width&&(Hi=this.x,Fi=this.y),super.render(),Tn._l10nPromise.get("editor_ink2_aria_label").then(vn=>{var mn;return(mn=this.div)==null?void 0:mn.setAttribute("aria-label",vn)});const[Wi,on,_n,On]=dn(this,mi,Wc).call(this);if(this.setAt(Wi,on,0,0),this.setDims(_n,On),dn(this,ci,ko).call(this),this.width){const[vn,mn]=this.parent.viewportBaseDimensions;this.setAt(Hi*vn,Fi*mn,this.width*vn,this.height*mn),bn(this,De,!0),dn(this,si,ha).call(this),this.setDims(this.width*vn,this.height*mn),dn(this,ze,is).call(this),dn(this,xn,Wl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return dn(this,Ti,Ro).call(this),this.div}setDimensions(Hi,Fi){const Wi=Math.round(Hi),on=Math.round(Fi);if(Di(this,Ue)===Wi&&Di(this,We)===on)return;bn(this,Ue,Wi),bn(this,We,on),this.canvas.style.visibility="hidden",Di(this,Pe)&&Math.abs(Di(this,Pe)-Hi/Fi)>.01&&(Fi=Math.ceil(Hi/Di(this,Pe)),this.setDims(Hi,Fi));const[_n,On]=this.parent.viewportBaseDimensions;this.width=Hi/_n,this.height=Fi/On,Di(this,ke)&&dn(this,Ye,Hl).call(this,Hi,Fi),dn(this,si,ha).call(this),dn(this,ze,is).call(this),this.canvas.style.visibility="visible"}static deserialize(Hi,Fi){var Mn,Vn;const Wi=super.deserialize(Hi,Fi);Wi.thickness=Hi.thickness,Wi.color=Ce.Util.makeHexColor(...Hi.color),Wi.opacity=Hi.opacity;const[on,_n]=Fi.pageDimensions,On=Wi.width*on,vn=Wi.height*_n,mn=Fi.scaleFactor,Pn=Hi.thickness/2;bn(Wi,Pe,On/vn),bn(Wi,ke,!0),bn(Wi,Ue,Math.round(On)),bn(Wi,We,Math.round(vn));for(const{bezier:Rn}of Hi.paths){const Cn=[];Wi.paths.push(Cn);let Bn=mn*(Rn[0]-Pn),tr=mn*(vn-Rn[1]-Pn);for(let Wn=2,Yn=Rn.length;Wn<Yn;Wn+=6){const rr=mn*(Rn[Wn]-Pn),nr=mn*(vn-Rn[Wn+1]-Pn),ur=mn*(Rn[Wn+2]-Pn),fr=mn*(vn-Rn[Wn+3]-Pn),yr=mn*(Rn[Wn+4]-Pn),Cr=mn*(vn-Rn[Wn+5]-Pn);Cn.push([[Bn,tr],[rr,nr],[ur,fr],[yr,Cr]]),Bn=yr,tr=Cr}const Xn=dn(this,pi,Ul).call(this,Cn);Wi.bezierPath2D.push(Xn)}const Fn=dn(Mn=Wi,Xi,Vl).call(Mn);return bn(Wi,Se,Math.max(Oe,Fn[2]-Fn[0])),bn(Wi,Ae,Math.max(Oe,Fn[3]-Fn[1])),dn(Vn=Wi,Ye,Hl).call(Vn,On,vn),Wi}serialize(){if(this.isEmpty())return null;const Hi=this.getRect(0,0),Fi=this.rotation%180===0?Hi[3]-Hi[1]:Hi[2]-Hi[0],Wi=Me.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ce.AnnotationEditorType.INK,color:Wi,thickness:this.thickness,opacity:this.opacity,paths:dn(this,Li,Yc).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Fi),pageIndex:this.parent.pageIndex,rect:Hi,rotation:this.rotation}}};let xe=Tn;Pe=new WeakMap,Ae=new WeakMap,Se=new WeakMap,St=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ee=new WeakMap,ke=new WeakMap,De=new WeakMap,Be=new WeakMap,He=new WeakMap,Ue=new WeakMap,We=new WeakMap,Je=new WeakMap,Qe=new WeakSet,Hc=function(Hi){const Fi=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=Hi,dn(this,cn,ua).call(this)},undo:()=>{this.thickness=Fi,dn(this,cn,ua).call(this)},mustExec:!0,type:Ce.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},oi=new WeakSet,Uc=function(Hi){const Fi=this.color;this.parent.addCommands({cmd:()=>{this.color=Hi,dn(this,ze,is).call(this)},undo:()=>{this.color=Fi,dn(this,ze,is).call(this)},mustExec:!0,type:Ce.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},li=new WeakSet,Vc=function(Hi){Hi/=100;const Fi=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=Hi,dn(this,ze,is).call(this)},undo:()=>{this.opacity=Fi,dn(this,ze,is).call(this)},mustExec:!0,type:Ce.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},mi=new WeakSet,Wc=function(){const{width:Hi,height:Fi,rotation:Wi}=this.parent.viewport;switch(Wi){case 90:return[0,Hi,Hi,Fi];case 180:return[Hi,Fi,Hi,Fi];case 270:return[Fi,0,Hi,Fi];default:return[0,0,Hi,Fi]}},_i=new WeakSet,Bl=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,Fe.opacityToHex)(this.opacity)}`},Ei=new WeakSet,qc=function(Hi,Fi){var Wi;this.isEditing=!0,Di(this,De)||(bn(this,De,!0),dn(this,si,ha).call(this),this.thickness||(this.thickness=Tn._defaultThickness),this.color||(this.color=Tn._defaultColor||Me.AnnotationEditor._defaultLineColor),(Wi=this.opacity)!=null||(this.opacity=Tn._defaultOpacity)),this.currentPath.push([Hi,Fi]),bn(this,Be,null),dn(this,_i,Bl).call(this),this.ctx.beginPath(),this.ctx.moveTo(Hi,Fi),bn(this,Je,()=>{!Di(this,Je)||(Di(this,Be)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):dn(this,ze,is).call(this),this.ctx.lineTo(...Di(this,Be)),bn(this,Be,null),this.ctx.stroke()),window.requestAnimationFrame(Di(this,Je)))}),window.requestAnimationFrame(Di(this,Je))},vi=new WeakSet,zc=function(Hi,Fi){const[Wi,on]=this.currentPath.at(-1);Hi===Wi&&Fi===on||(this.currentPath.push([Hi,Fi]),bn(this,Be,[Hi,Fi]))},$e=new WeakSet,$c=function(Hi,Fi){var Pn;this.ctx.closePath(),bn(this,Je,null),Hi=Math.min(Math.max(Hi,0),this.canvas.width),Fi=Math.min(Math.max(Fi,0),this.canvas.height);const[Wi,on]=this.currentPath.at(-1);(Hi!==Wi||Fi!==on)&&this.currentPath.push([Hi,Fi]);let _n;if(this.currentPath.length!==1)_n=(0,Ie.fitCurve)(this.currentPath,30,null);else{const Fn=[Hi,Fi];_n=[[Fn,Fn.slice(),Fn.slice(),Fn]]}const On=dn(Pn=Tn,pi,Ul).call(Pn,_n);this.currentPath.length=0;const vn=()=>{this.paths.push(_n),this.bezierPath2D.push(On),this.rebuild()},mn=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(dn(this,ci,ko).call(this),dn(this,Ti,Ro).call(this)),dn(this,cn,ua).call(this))};this.parent.addCommands({cmd:vn,undo:mn,mustExec:!0})},ze=new WeakSet,is=function(){if(this.isEmpty()){dn(this,Xe,Mo).call(this);return}dn(this,_i,Bl).call(this);const{canvas:Hi,ctx:Fi}=this;Fi.setTransform(1,0,0,1,0,0),Fi.clearRect(0,0,Hi.width,Hi.height),dn(this,Xe,Mo).call(this);for(const Wi of this.bezierPath2D)Fi.stroke(Wi)},ei=new WeakSet,jl=function(Hi){dn(this,$e,$c).call(this,Hi.offsetX,Hi.offsetY),this.canvas.removeEventListener("pointerleave",Di(this,Te)),this.canvas.removeEventListener("pointermove",Di(this,St)),this.parent.addToAnnotationStorage(this)},ci=new WeakSet,ko=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Tn._l10nPromise.get("editor_ink_canvas_aria_label").then(Hi=>{var Fi;return(Fi=this.canvas)==null?void 0:Fi.setAttribute("aria-label",Hi)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ti=new WeakSet,Ro=function(){let Hi=null;bn(this,He,new ResizeObserver(Fi=>{const Wi=Fi[0].contentRect;Wi.width&&Wi.height&&(Hi!==null&&clearTimeout(Hi),Hi=setTimeout(()=>{this.fixDims(),Hi=null},_e),this.setDimensions(Wi.width,Wi.height))})),Di(this,He).observe(this.div)},si=new WeakSet,ha=function(){if(!Di(this,De))return;const[Hi,Fi]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Hi),this.canvas.height=Math.ceil(this.height*Fi),dn(this,Xe,Mo).call(this)},Ye=new WeakSet,Hl=function(Hi,Fi){const Wi=dn(this,ji,Io).call(this),on=(Hi-Wi)/Di(this,Se),_n=(Fi-Wi)/Di(this,Ae);this.scaleFactor=Math.min(on,_n)},Xe=new WeakSet,Mo=function(){const Hi=dn(this,ji,Io).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Hi,this.translationY*this.scaleFactor+Hi)},pi=new WeakSet,Ul=function(Hi){const Fi=new Path2D;for(let Wi=0,on=Hi.length;Wi<on;Wi++){const[_n,On,vn,mn]=Hi[Wi];Wi===0&&Fi.moveTo(..._n),Fi.bezierCurveTo(On[0],On[1],vn[0],vn[1],mn[0],mn[1])}return Fi},Li=new WeakSet,Yc=function(Hi,Fi,Wi,on){const On=[],vn=this.thickness/2;let mn,Pn;for(const Fn of this.paths){mn=[],Pn=[];for(let Mn=0,Vn=Fn.length;Mn<Vn;Mn++){const[Rn,Cn,Bn,tr]=Fn[Mn],Xn=Hi*(Rn[0]+Fi)+vn,Wn=on-Hi*(Rn[1]+Wi)-vn,Yn=Hi*(Cn[0]+Fi)+vn,rr=on-Hi*(Cn[1]+Wi)-vn,nr=Hi*(Bn[0]+Fi)+vn,ur=on-Hi*(Bn[1]+Wi)-vn,fr=Hi*(tr[0]+Fi)+vn,yr=on-Hi*(tr[1]+Wi)-vn;Mn===0&&(mn.push(Xn,Wn),Pn.push(Xn,Wn)),mn.push(Yn,rr,nr,ur,fr,yr),dn(this,wi,Gc).call(this,Xn,Wn,Yn,rr,nr,ur,fr,yr,4,Pn)}On.push({bezier:mn,points:Pn})}return On},wi=new WeakSet,Gc=function(Hi,Fi,Wi,on,_n,On,vn,mn,Pn,Fn){if(dn(this,Mi,Xc).call(this,Hi,Fi,Wi,on,_n,On,vn,mn)){Fn.push(vn,mn);return}for(let Mn=1;Mn<Pn-1;Mn++){const Vn=Mn/Pn,Rn=1-Vn;let Cn=Vn*Hi+Rn*Wi,Bn=Vn*Fi+Rn*on,tr=Vn*Wi+Rn*_n,Xn=Vn*on+Rn*On;const Wn=Vn*_n+Rn*vn,Yn=Vn*On+Rn*mn;Cn=Vn*Cn+Rn*tr,Bn=Vn*Bn+Rn*Xn,tr=Vn*tr+Rn*Wn,Xn=Vn*Xn+Rn*Yn,Cn=Vn*Cn+Rn*tr,Bn=Vn*Bn+Rn*Xn,Fn.push(Cn,Bn)}Fn.push(vn,mn)},Mi=new WeakSet,Xc=function(Hi,Fi,Wi,on,_n,On,vn,mn){const Fn=(3*Wi-2*Hi-vn)**2,Mn=(3*on-2*Fi-mn)**2,Vn=(3*_n-Hi-2*vn)**2,Rn=(3*On-Fi-2*mn)**2;return Math.max(Fn,Vn)+Math.max(Mn,Rn)<=10},Xi=new WeakSet,Vl=function(){let Hi=1/0,Fi=-1/0,Wi=1/0,on=-1/0;for(const _n of this.paths)for(const[On,vn,mn,Pn]of _n){const Fn=Ce.Util.bezierBoundingBox(...On,...vn,...mn,...Pn);Hi=Math.min(Hi,Fn[0]),Wi=Math.min(Wi,Fn[1]),Fi=Math.max(Fi,Fn[2]),on=Math.max(on,Fn[3])}return[Hi,Wi,Fi,on]},ji=new WeakSet,Io=function(){return Di(this,ke)?Math.ceil(this.thickness*this.parent.scaleFactor):0},cn=new WeakSet,ua=function(Hi=!1){if(this.isEmpty())return;if(!Di(this,ke)){dn(this,ze,is).call(this);return}const Fi=dn(this,Xi,Vl).call(this),Wi=dn(this,ji,Io).call(this);bn(this,Se,Math.max(Oe,Fi[2]-Fi[0])),bn(this,Ae,Math.max(Oe,Fi[3]-Fi[1]));const on=Math.ceil(Wi+Di(this,Se)*this.scaleFactor),_n=Math.ceil(Wi+Di(this,Ae)*this.scaleFactor),[On,vn]=this.parent.viewportBaseDimensions;this.width=on/On,this.height=_n/vn,bn(this,Pe,on/_n),dn(this,xn,Wl).call(this);const mn=this.translationX,Pn=this.translationY;this.translationX=-Fi[0],this.translationY=-Fi[1],dn(this,si,ha).call(this),dn(this,ze,is).call(this),bn(this,Ue,on),bn(this,We,_n),this.setDims(on,_n);const Fn=Hi?Wi/this.scaleFactor/2:0;this.translate(mn-this.translationX-Fn,Pn-this.translationY-Fn)},xn=new WeakSet,Wl=function(){const{style:Hi}=this.div;Di(this,Pe)>=1?(Hi.minHeight=`${Oe}px`,Hi.minWidth=`${Math.round(Di(this,Pe)*Oe)}px`):(Hi.minWidth=`${Oe}px`,Hi.minHeight=`${Math.round(Oe/Di(this,Pe))}px`)},sn(xe,pi),lr(xe,"_defaultColor",null),lr(xe,"_defaultOpacity",1),lr(xe,"_defaultThickness",1),lr(xe,"_l10nPromise"),lr(xe,"_type","ink"),t.InkEditor=xe},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const Ce=r(25);t.fitCurve=Ce},e=>{function t(Te,Re,Ee){if(!Array.isArray(Te))throw new TypeError("First argument should be an array");if(Te.forEach(He=>{if(!Array.isArray(He)||He.some(Ue=>typeof Ue!="number")||He.length!==Te[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),Te=Te.filter((He,Ue)=>Ue===0||!He.every((We,Je)=>We===Te[Ue-1][Je])),Te.length<2)return[];const ke=Te.length,De=Ae(Te[1],Te[0]),Be=Ae(Te[ke-2],Te[ke-1]);return r(Te,De,Be,Re,Ee)}function r(Te,Re,Ee,ke,De){var He,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i;if(Te.length===2)return Si=Se.vectorLen(Se.subtract(Te[0],Te[1]))/3,He=[Te[0],Se.addArrays(Te[0],Se.mulItems(Re,Si)),Se.addArrays(Te[1],Se.mulItems(Ee,Si)),Te[1]],[He];if(Ue=Oe(Te),[He,Je,fi]=Ce(Te,Ue,Ue,Re,Ee,De),Je===0||Je<ke)return[He];if(Je<ke*ke)for(We=Ue,Qe=Je,oi=fi,_i=0;_i<20;_i++){if(We=Ie(He,Te,We),[He,Je,fi]=Ce(Te,Ue,We,Re,Ee,De),Je<ke)return[He];if(fi===oi){let xi=Je/Qe;if(xi>.9999&&xi<1.0001)break}Qe=Je,oi=fi}return mi=[],ii=Se.subtract(Te[fi-1],Te[fi+1]),ii.every(xi=>xi===0)&&(ii=Se.subtract(Te[fi-1],Te[fi]),[ii[0],ii[1]]=[-ii[1],ii[0]]),li=Se.normalize(ii),bi=Se.mulItems(li,-1),mi=mi.concat(r(Te.slice(0,fi+1),Re,li,ke,De)),mi=mi.concat(r(Te.slice(fi),bi,Ee,ke,De)),mi}function Ce(Te,Re,Ee,ke,De,Be){var He,Ue,We;return He=Me(Te,Ee,ke,De),[Ue,We]=_e(Te,He,Re),Be&&Be({bez:He,points:Te,params:Re,maxErr:Ue,maxPoint:We}),[He,Ue,We]}function Me(Te,Re,Ee,ke){var De,Be,He,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri=Te[0],vi=Te[Te.length-1];for(De=[ri,null,null,vi],Be=Se.zeros_Xx2x2(Re.length),mi=0,Si=Re.length;mi<Si;mi++)xi=Re[mi],Ei=1-xi,He=Be[mi],He[0]=Se.mulItems(Ee,3*xi*(Ei*Ei)),He[1]=Se.mulItems(ke,3*Ei*(xi*xi));for(Ue=[[0,0],[0,0]],We=[0,0],mi=0,Si=Te.length;mi<Si;mi++)xi=Re[mi],He=Be[mi],Ue[0][0]+=Se.dot(He[0],He[0]),Ue[0][1]+=Se.dot(He[0],He[1]),Ue[1][0]+=Se.dot(He[0],He[1]),Ue[1][1]+=Se.dot(He[1],He[1]),_i=Se.subtract(Te[mi],St.q([ri,ri,vi,vi],xi)),We[0]+=Se.dot(He[0],_i),We[1]+=Se.dot(He[1],_i);return Je=Ue[0][0]*Ue[1][1]-Ue[1][0]*Ue[0][1],Qe=Ue[0][0]*We[1]-Ue[1][0]*We[0],fi=We[0]*Ue[1][1]-We[1]*Ue[0][1],oi=Je===0?0:fi/Je,ii=Je===0?0:Qe/Je,bi=Se.vectorLen(Se.subtract(ri,vi)),li=1e-6*bi,oi<li||ii<li?(De[1]=Se.addArrays(ri,Se.mulItems(Ee,bi/3)),De[2]=Se.addArrays(vi,Se.mulItems(ke,bi/3))):(De[1]=Se.addArrays(ri,Se.mulItems(Ee,oi)),De[2]=Se.addArrays(vi,Se.mulItems(ke,ii))),De}function Ie(Te,Re,Ee){return Ee.map((ke,De)=>Fe(Te,Re[De],ke))}function Fe(Te,Re,Ee){var ke=Se.subtract(St.q(Te,Ee),Re),De=St.qprime(Te,Ee),Be=Se.mulMatrix(ke,De),He=Se.sum(Se.squareItems(De))+2*Se.mulMatrix(ke,St.qprimeprime(Te,Ee));return He===0?Ee:Ee-Be/He}function Oe(Te){var Re=[],Ee,ke,De;return Te.forEach((Be,He)=>{Ee=He?ke+Se.vectorLen(Se.subtract(Be,De)):0,Re.push(Ee),ke=Ee,De=Be}),Re=Re.map(Be=>Be/ke),Re}function _e(Te,Re,Ee){var ke,De,Be,He,Ue,We,Je,Qe;De=0,Be=Math.floor(Te.length/2);const fi=xe(Re,10);for(Ue=0,We=Te.length;Ue<We;Ue++)Je=Te[Ue],Qe=Pe(Re,Ee[Ue],fi,10),He=Se.subtract(St.q(Re,Qe),Je),ke=He[0]*He[0]+He[1]*He[1],ke>De&&(De=ke,Be=Ue);return[De,Be]}var xe=function(Te,Re){for(var Ee,ke=[0],De=Te[0],Be=0,He=1;He<=Re;He++)Ee=St.q(Te,He/Re),Be+=Se.vectorLen(Se.subtract(Ee,De)),ke.push(Be),De=Ee;return ke=ke.map(Ue=>Ue/Be),ke};function Pe(Te,Re,Ee,ke){if(Re<0)return 0;if(Re>1)return 1;for(var De,Be,He,Ue,We,Je=1;Je<=ke;Je++)if(Re<=Ee[Je]){Ue=(Je-1)/ke,He=Je/ke,Be=Ee[Je-1],De=Ee[Je],We=(Re-Be)/(De-Be)*(He-Ue)+Ue;break}return We}function Ae(Te,Re){return Se.normalize(Se.subtract(Te,Re))}class Se{static zeros_Xx2x2(Re){for(var Ee=[];Re--;)Ee.push([0,0]);return Ee}static mulItems(Re,Ee){return Re.map(ke=>ke*Ee)}static mulMatrix(Re,Ee){return Re.reduce((ke,De,Be)=>ke+De*Ee[Be],0)}static subtract(Re,Ee){return Re.map((ke,De)=>ke-Ee[De])}static addArrays(Re,Ee){return Re.map((ke,De)=>ke+Ee[De])}static addItems(Re,Ee){return Re.map(ke=>ke+Ee)}static sum(Re){return Re.reduce((Ee,ke)=>Ee+ke)}static dot(Re,Ee){return Se.mulMatrix(Re,Ee)}static vectorLen(Re){return Math.hypot(...Re)}static divItems(Re,Ee){return Re.map(ke=>ke/Ee)}static squareItems(Re){return Re.map(Ee=>Ee*Ee)}static normalize(Re){return this.divItems(Re,this.vectorLen(Re))}}class St{static q(Re,Ee){var ke=1-Ee,De=Se.mulItems(Re[0],ke*ke*ke),Be=Se.mulItems(Re[1],3*ke*ke*Ee),He=Se.mulItems(Re[2],3*ke*Ee*Ee),Ue=Se.mulItems(Re[3],Ee*Ee*Ee);return Se.addArrays(Se.addArrays(De,Be),Se.addArrays(He,Ue))}static qprime(Re,Ee){var ke=1-Ee,De=Se.mulItems(Se.subtract(Re[1],Re[0]),3*ke*ke),Be=Se.mulItems(Se.subtract(Re[2],Re[1]),6*ke*Ee),He=Se.mulItems(Se.subtract(Re[3],Re[2]),3*Ee*Ee);return Se.addArrays(Se.addArrays(De,Be),He)}static qprimeprime(Re,Ee){return Se.addArrays(Se.mulItems(Se.addArrays(Se.subtract(Re[2],Se.mulItems(Re[1],2)),Re[0]),6*(1-Ee)),Se.mulItems(Se.addArrays(Se.subtract(Re[3],Se.mulItems(Re[2],2)),Re[1]),6*Ee))}}e.exports=t,e.exports.fitCubic=r,e.exports.createTangent=Ae},(e,t,r)=>{var Ge,Kc,ei,ql,ci,zl,Ti,$l;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var Ce=r(1),Me=r(6),Ie=r(3),Fe=r(27),Oe=r(28);const _e=1e3,xe=9,Pe=new WeakSet;function Ae(ai){return{width:ai[2]-ai[0],height:ai[3]-ai[1]}}class Se{static create(Ye){switch(Ye.data.annotationType){case Ce.AnnotationType.LINK:return new Te(Ye);case Ce.AnnotationType.TEXT:return new Re(Ye);case Ce.AnnotationType.WIDGET:switch(Ye.data.fieldType){case"Tx":return new ke(Ye);case"Btn":return Ye.data.radioButton?new Be(Ye):Ye.data.checkBox?new De(Ye):new He(Ye);case"Ch":return new Ue(Ye)}return new Ee(Ye);case Ce.AnnotationType.POPUP:return new We(Ye);case Ce.AnnotationType.FREETEXT:return new Qe(Ye);case Ce.AnnotationType.LINE:return new fi(Ye);case Ce.AnnotationType.SQUARE:return new oi(Ye);case Ce.AnnotationType.CIRCLE:return new ii(Ye);case Ce.AnnotationType.POLYLINE:return new li(Ye);case Ce.AnnotationType.CARET:return new mi(Ye);case Ce.AnnotationType.INK:return new Si(Ye);case Ce.AnnotationType.POLYGON:return new bi(Ye);case Ce.AnnotationType.HIGHLIGHT:return new _i(Ye);case Ce.AnnotationType.UNDERLINE:return new xi(Ye);case Ce.AnnotationType.SQUIGGLY:return new Ei(Ye);case Ce.AnnotationType.STRIKEOUT:return new ri(Ye);case Ce.AnnotationType.STAMP:return new vi(Ye);case Ce.AnnotationType.FILEATTACHMENT:return new Ci(Ye);default:return new St(Ye)}}}class St{constructor(Ye,{isRenderable:Ze=!1,ignoreBorder:Xe=!1,createQuadrilaterals:ui=!1}={}){this.isRenderable=Ze,this.data=Ye.data,this.layer=Ye.layer,this.page=Ye.page,this.viewport=Ye.viewport,this.linkService=Ye.linkService,this.downloadManager=Ye.downloadManager,this.imageResourcesPath=Ye.imageResourcesPath,this.renderForms=Ye.renderForms,this.svgFactory=Ye.svgFactory,this.annotationStorage=Ye.annotationStorage,this.enableScripting=Ye.enableScripting,this.hasJSActions=Ye.hasJSActions,this._fieldObjects=Ye.fieldObjects,this._mouseState=Ye.mouseState,Ze&&(this.container=this._createContainer(Xe)),ui&&(this.quadrilaterals=this._createQuadrilaterals(Xe))}_createContainer(Ye=!1){const Ze=this.data,Xe=this.page,ui=this.viewport,pi=document.createElement("section"),{width:gi,height:Li}=Ae(Ze.rect),[Ri,wi,Vi,Mi]=ui.viewBox,qi=Vi-Ri,Xi=Mi-wi;pi.setAttribute("data-annotation-id",Ze.id);const Zi=Ce.Util.normalizeRect([Ze.rect[0],Xe.view[3]-Ze.rect[1]+Xe.view[1],Ze.rect[2],Xe.view[3]-Ze.rect[3]+Xe.view[1]]);if(!Ye&&Ze.borderStyle.width>0){pi.style.borderWidth=`${Ze.borderStyle.width}px`;const Ki=Ze.borderStyle.horizontalCornerRadius,cn=Ze.borderStyle.verticalCornerRadius;if(Ki>0||cn>0){const xn=`calc(${Ki}px * var(--scale-factor)) / calc(${cn}px * var(--scale-factor))`;pi.style.borderRadius=xn}else if(this instanceof Be){const xn=`calc(${gi}px * var(--scale-factor)) / calc(${Li}px * var(--scale-factor))`;pi.style.borderRadius=xn}switch(Ze.borderStyle.style){case Ce.AnnotationBorderStyleType.SOLID:pi.style.borderStyle="solid";break;case Ce.AnnotationBorderStyleType.DASHED:pi.style.borderStyle="dashed";break;case Ce.AnnotationBorderStyleType.BEVELED:(0,Ce.warn)("Unimplemented border style: beveled");break;case Ce.AnnotationBorderStyleType.INSET:(0,Ce.warn)("Unimplemented border style: inset");break;case Ce.AnnotationBorderStyleType.UNDERLINE:pi.style.borderBottomStyle="solid";break}const rn=Ze.borderColor||null;rn?pi.style.borderColor=Ce.Util.makeHexColor(rn[0]|0,rn[1]|0,rn[2]|0):pi.style.borderWidth=0}pi.style.left=`${100*(Zi[0]-Ri)/qi}%`,pi.style.top=`${100*(Zi[1]-wi)/Xi}%`;const{rotation:ji}=Ze;return Ze.hasOwnCanvas||ji===0?(pi.style.width=`${100*gi/qi}%`,pi.style.height=`${100*Li/Xi}%`):this.setRotation(ji,pi),pi}setRotation(Ye,Ze=this.container){const[Xe,ui,pi,gi]=this.viewport.viewBox,Li=pi-Xe,Ri=gi-ui,{width:wi,height:Vi}=Ae(this.data.rect);let Mi,qi;Ye%180===0?(Mi=100*wi/Li,qi=100*Vi/Ri):(Mi=100*Vi/Li,qi=100*wi/Ri),Ze.style.width=`${Mi}%`,Ze.style.height=`${qi}%`,Ze.setAttribute("data-main-rotation",(360-Ye)%360)}get _commonActions(){const Ye=(Ze,Xe,ui)=>{const pi=ui.detail[Ze];ui.target.style[Xe]=Fe.ColorConverters[`${pi[0]}_HTML`](pi.slice(1))};return(0,Ce.shadow)(this,"_commonActions",{display:Ze=>{const Xe=Ze.detail.display%2===1;this.container.style.visibility=Xe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Xe,print:Ze.detail.display===0||Ze.detail.display===3})},print:Ze=>{this.annotationStorage.setValue(this.data.id,{print:Ze.detail.print})},hidden:Ze=>{this.container.style.visibility=Ze.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Ze.detail.hidden})},focus:Ze=>{setTimeout(()=>Ze.target.focus({preventScroll:!1}),0)},userName:Ze=>{Ze.target.title=Ze.detail.userName},readonly:Ze=>{Ze.detail.readonly?Ze.target.setAttribute("readonly",""):Ze.target.removeAttribute("readonly")},required:Ze=>{this._setRequired(Ze.target,Ze.detail.required)},bgColor:Ze=>{Ye("bgColor","backgroundColor",Ze)},fillColor:Ze=>{Ye("fillColor","backgroundColor",Ze)},fgColor:Ze=>{Ye("fgColor","color",Ze)},textColor:Ze=>{Ye("textColor","color",Ze)},borderColor:Ze=>{Ye("borderColor","borderColor",Ze)},strokeColor:Ze=>{Ye("strokeColor","borderColor",Ze)},rotation:Ze=>{const Xe=Ze.detail.rotation;this.setRotation(Xe),this.annotationStorage.setValue(this.data.id,{rotation:Xe})}})}_dispatchEventFromSandbox(Ye,Ze){const Xe=this._commonActions;for(const ui of Object.keys(Ze.detail)){const pi=Ye[ui]||Xe[ui];pi==null||pi(Ze)}}_setDefaultPropertiesFromJS(Ye){if(!this.enableScripting)return;const Ze=this.annotationStorage.getRawValue(this.data.id);if(!Ze)return;const Xe=this._commonActions;for(const[ui,pi]of Object.entries(Ze)){const gi=Xe[ui];if(gi){const Li={detail:{[ui]:pi},target:Ye};gi(Li),delete Ze[ui]}}}_createQuadrilaterals(Ye=!1){if(!this.data.quadPoints)return null;const Ze=[],Xe=this.data.rect;for(const ui of this.data.quadPoints)this.data.rect=[ui[2].x,ui[2].y,ui[1].x,ui[1].y],Ze.push(this._createContainer(Ye));return this.data.rect=Xe,Ze}_createPopup(Ye,Ze){let Xe=this.container;this.quadrilaterals&&(Ye=Ye||this.quadrilaterals,Xe=this.quadrilaterals[0]),Ye||(Ye=document.createElement("div"),Ye.className="popupTriggerArea",Xe.append(Ye));const pi=new Je({container:Xe,trigger:Ye,color:Ze.color,titleObj:Ze.titleObj,modificationDate:Ze.modificationDate,contentsObj:Ze.contentsObj,richText:Ze.richText,hideWrapper:!0}).render();pi.style.left="100%",Xe.append(pi)}_renderQuadrilaterals(Ye){for(const Ze of this.quadrilaterals)Ze.className=Ye;return this.quadrilaterals}render(){(0,Ce.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ye,Ze=null){const Xe=[];if(this._fieldObjects){const ui=this._fieldObjects[Ye];if(ui)for(const{page:pi,id:gi,exportValues:Li}of ui){if(pi===-1||gi===Ze)continue;const Ri=typeof Li=="string"?Li:null,wi=document.querySelector(`[data-element-id="${gi}"]`);if(wi&&!Pe.has(wi)){(0,Ce.warn)(`_getElementsByName - element not allowed: ${gi}`);continue}Xe.push({id:gi,exportValue:Ri,domElement:wi})}return Xe}for(const ui of document.getElementsByName(Ye)){const{exportValue:pi}=ui,gi=ui.getAttribute("data-element-id");gi!==Ze&&(!Pe.has(ui)||Xe.push({id:gi,exportValue:pi,domElement:ui}))}return Xe}static get platform(){const Ye=typeof navigator<"u"?navigator.platform:"";return(0,Ce.shadow)(this,"platform",{isWin:Ye.includes("Win"),isMac:Ye.includes("Mac")})}}class Te extends St{constructor(Ze,Xe=null){super(Ze,{isRenderable:!0,ignoreBorder:!!(Xe!=null&&Xe.ignoreBorder),createQuadrilaterals:!0});sn(this,Ge);this.isTooltipOnly=Ze.data.isTooltipOnly}render(){const{data:Ze,linkService:Xe}=this,ui=document.createElement("a");ui.setAttribute("data-element-id",Ze.id);let pi=!1;return Ze.url?(Xe.addLinkAttributes(ui,Ze.url,Ze.newWindow),pi=!0):Ze.action?(this._bindNamedAction(ui,Ze.action),pi=!0):Ze.attachment?(this._bindAttachment(ui,Ze.attachment),pi=!0):Ze.setOCGState?(dn(this,Ge,Kc).call(this,ui,Ze.setOCGState),pi=!0):Ze.dest?(this._bindLink(ui,Ze.dest),pi=!0):(Ze.actions&&(Ze.actions.Action||Ze.actions["Mouse Up"]||Ze.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ui,Ze),pi=!0),Ze.resetForm?(this._bindResetFormAction(ui,Ze.resetForm),pi=!0):this.isTooltipOnly&&!pi&&(this._bindLink(ui,""),pi=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((gi,Li)=>{const Ri=Li===0?ui:ui.cloneNode();return gi.append(Ri),gi}):(this.container.className="linkAnnotation",pi&&this.container.append(ui),this.container)}_bindLink(Ze,Xe){Ze.href=this.linkService.getDestinationHash(Xe),Ze.onclick=()=>(Xe&&this.linkService.goToDestination(Xe),!1),(Xe||Xe==="")&&(Ze.className="internalLink")}_bindNamedAction(Ze,Xe){Ze.href=this.linkService.getAnchorUrl(""),Ze.onclick=()=>(this.linkService.executeNamedAction(Xe),!1),Ze.className="internalLink"}_bindAttachment(Ze,Xe){Ze.href=this.linkService.getAnchorUrl(""),Ze.onclick=()=>{var ui;return(ui=this.downloadManager)==null||ui.openOrDownloadData(this.container,Xe.content,Xe.filename),!1},Ze.className="internalLink"}_bindJSAction(Ze,Xe){Ze.href=this.linkService.getAnchorUrl("");const ui=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pi of Object.keys(Xe.actions)){const gi=ui.get(pi);!gi||(Ze[gi]=()=>{var Li;return(Li=this.linkService.eventBus)==null||Li.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xe.id,name:pi}}),!1})}Ze.onclick||(Ze.onclick=()=>!1),Ze.className="internalLink"}_bindResetFormAction(Ze,Xe){const ui=Ze.onclick;if(ui||(Ze.href=this.linkService.getAnchorUrl("")),Ze.className="internalLink",!this._fieldObjects){(0,Ce.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ui||(Ze.onclick=()=>!1);return}Ze.onclick=()=>{var Mi;ui==null||ui();const{fields:pi,refs:gi,include:Li}=Xe,Ri=[];if(pi.length!==0||gi.length!==0){const qi=new Set(gi);for(const Xi of pi){const Zi=this._fieldObjects[Xi]||[];for(const{id:ji}of Zi)qi.add(ji)}for(const Xi of Object.values(this._fieldObjects))for(const Zi of Xi)qi.has(Zi.id)===Li&&Ri.push(Zi)}else for(const qi of Object.values(this._fieldObjects))Ri.push(...qi);const wi=this.annotationStorage,Vi=[];for(const qi of Ri){const{id:Xi}=qi;switch(Vi.push(Xi),qi.type){case"text":{const ji=qi.defaultValue||"";wi.setValue(Xi,{value:ji});break}case"checkbox":case"radiobutton":{const ji=qi.defaultValue===qi.exportValues;wi.setValue(Xi,{value:ji});break}case"combobox":case"listbox":{const ji=qi.defaultValue||"";wi.setValue(Xi,{value:ji});break}default:continue}const Zi=document.querySelector(`[data-element-id="${Xi}"]`);if(Zi){if(!Pe.has(Zi)){(0,Ce.warn)(`_bindResetFormAction - element not allowed: ${Xi}`);continue}}else continue;Zi.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Mi=this.linkService.eventBus)==null||Mi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Vi,name:"ResetForm"}})),!1}}}Ge=new WeakSet,Kc=function(Ze,Xe){Ze.href=this.linkService.getAnchorUrl(""),Ze.onclick=()=>(this.linkService.executeSetOCGState(Xe),!1),Ze.className="internalLink"};class Re extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze})}render(){this.container.className="textAnnotation";const Ye=document.createElement("img");return Ye.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ye.alt="[{{type}} Annotation]",Ye.dataset.l10nId="text_annotation_type",Ye.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Ye,this.data),this.container.append(Ye),this.container}}class Ee extends St{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(Ye){const{isWin:Ze,isMac:Xe}=St.platform;return Ze&&Ye.ctrlKey||Xe&&Ye.metaKey}_setEventListener(Ye,Ze,Xe,ui){Ze.includes("mouse")?Ye.addEventListener(Ze,pi=>{var gi;(gi=this.linkService.eventBus)==null||gi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xe,value:ui(pi),shift:pi.shiftKey,modifier:this._getKeyModifier(pi)}})}):Ye.addEventListener(Ze,pi=>{var gi;(gi=this.linkService.eventBus)==null||gi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Xe,value:ui(pi)}})})}_setEventListeners(Ye,Ze,Xe){var ui;for(const[pi,gi]of Ze)(gi==="Action"||((ui=this.data.actions)==null?void 0:ui[gi]))&&this._setEventListener(Ye,pi,gi,Xe)}_setBackgroundColor(Ye){const Ze=this.data.backgroundColor||null;Ye.style.backgroundColor=Ze===null?"transparent":Ce.Util.makeHexColor(Ze[0],Ze[1],Ze[2])}_setTextStyle(Ye){const Ze=["left","center","right"],{fontColor:Xe}=this.data.defaultAppearanceData,ui=this.data.defaultAppearanceData.fontSize||xe,pi=Ye.style;let gi;const Li=2,Ri=wi=>Math.round(10*wi)/10;if(this.data.multiLine){const wi=Math.abs(this.data.rect[3]-this.data.rect[1]-Li),Vi=Math.round(wi/(Ce.LINE_FACTOR*ui))||1,Mi=wi/Vi;gi=Math.min(ui,Ri(Mi/Ce.LINE_FACTOR))}else{const wi=Math.abs(this.data.rect[3]-this.data.rect[1]-Li);gi=Math.min(ui,Ri(wi/Ce.LINE_FACTOR))}pi.fontSize=`calc(${gi}px * var(--scale-factor))`,pi.color=Ce.Util.makeHexColor(Xe[0],Xe[1],Xe[2]),this.data.textAlignment!==null&&(pi.textAlign=Ze[this.data.textAlignment])}_setRequired(Ye,Ze){Ze?Ye.setAttribute("required",!0):Ye.removeAttribute("required"),Ye.setAttribute("aria-required",Ze)}}class ke extends Ee{constructor(Ye){const Ze=Ye.renderForms||!Ye.data.hasAppearance&&!!Ye.data.fieldValue;super(Ye,{isRenderable:Ze})}setPropertyOnSiblings(Ye,Ze,Xe,ui){const pi=this.annotationStorage;for(const gi of this._getElementsByName(Ye.name,Ye.id))gi.domElement&&(gi.domElement[Ze]=Xe),pi.setValue(gi.id,{[ui]:Xe})}render(){var ui;const Ye=this.annotationStorage,Ze=this.data.id;this.container.className="textWidgetAnnotation";let Xe=null;if(this.renderForms){const pi=Ye.getValue(Ze,{value:this.data.fieldValue});let gi=pi.formattedValue||pi.value||"";const Li=Ye.getValue(Ze,{charLimit:this.data.maxLen}).charLimit;Li&&gi.length>Li&&(gi=gi.slice(0,Li));const Ri={userValue:gi,formattedValue:null,valueOnFocus:""};this.data.multiLine?(Xe=document.createElement("textarea"),Xe.textContent=gi,this.data.doNotScroll&&(Xe.style.overflowY="hidden")):(Xe=document.createElement("input"),Xe.type="text",Xe.setAttribute("value",gi),this.data.doNotScroll&&(Xe.style.overflowX="hidden")),Pe.add(Xe),Xe.setAttribute("data-element-id",Ze),Xe.disabled=this.data.readOnly,Xe.name=this.data.fieldName,Xe.tabIndex=_e,this._setRequired(Xe,this.data.required),Li&&(Xe.maxLength=Li),Xe.addEventListener("input",Vi=>{Ye.setValue(Ze,{value:Vi.target.value}),this.setPropertyOnSiblings(Xe,"value",Vi.target.value,"value")}),Xe.addEventListener("resetform",Vi=>{var qi;const Mi=(qi=this.data.defaultFieldValue)!=null?qi:"";Xe.value=Ri.userValue=Mi,Ri.formattedValue=null});let wi=Vi=>{const{formattedValue:Mi}=Ri;Mi!=null&&(Vi.target.value=Mi),Vi.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Xe.addEventListener("focus",Mi=>{Ri.userValue&&(Mi.target.value=Ri.userValue),Ri.valueOnFocus=Mi.target.value}),Xe.addEventListener("updatefromsandbox",Mi=>{const qi={value(Xi){var Zi;Ri.userValue=(Zi=Xi.detail.value)!=null?Zi:"",Ye.setValue(Ze,{value:Ri.userValue.toString()}),Xi.target.value=Ri.userValue},formattedValue(Xi){const{formattedValue:Zi}=Xi.detail;Ri.formattedValue=Zi,Zi!=null&&Xi.target!==document.activeElement&&(Xi.target.value=Zi),Ye.setValue(Ze,{formattedValue:Zi})},selRange(Xi){Xi.target.setSelectionRange(...Xi.detail.selRange)},charLimit:Xi=>{var cn;const{charLimit:Zi}=Xi.detail,{target:ji}=Xi;if(Zi===0){ji.removeAttribute("maxLength");return}ji.setAttribute("maxLength",Zi);let Ki=Ri.userValue;!Ki||Ki.length<=Zi||(Ki=Ki.slice(0,Zi),ji.value=Ri.userValue=Ki,Ye.setValue(Ze,{value:Ki}),(cn=this.linkService.eventBus)==null||cn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ze,name:"Keystroke",value:Ki,willCommit:!0,commitKey:1,selStart:ji.selectionStart,selEnd:ji.selectionEnd}}))}};this._dispatchEventFromSandbox(qi,Mi)}),Xe.addEventListener("keydown",Mi=>{var Zi;let qi=-1;if(Mi.key==="Escape"?qi=0:Mi.key==="Enter"&&!this.data.multiLine?qi=2:Mi.key==="Tab"&&(qi=3),qi===-1)return;const{value:Xi}=Mi.target;Ri.valueOnFocus!==Xi&&(Ri.userValue=Xi,(Zi=this.linkService.eventBus)==null||Zi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ze,name:"Keystroke",value:Xi,willCommit:!0,commitKey:qi,selStart:Mi.target.selectionStart,selEnd:Mi.target.selectionEnd}}))});const Vi=wi;wi=null,Xe.addEventListener("blur",Mi=>{var Xi;const{value:qi}=Mi.target;Ri.userValue=qi,this._mouseState.isDown&&Ri.valueOnFocus!==qi&&((Xi=this.linkService.eventBus)==null||Xi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ze,name:"Keystroke",value:qi,willCommit:!0,commitKey:1,selStart:Mi.target.selectionStart,selEnd:Mi.target.selectionEnd}})),Vi(Mi)}),(ui=this.data.actions)!=null&&ui.Keystroke&&Xe.addEventListener("beforeinput",Mi=>{var xn;const{data:qi,target:Xi}=Mi,{value:Zi,selectionStart:ji,selectionEnd:Ki}=Xi;let cn=ji,rn=Ki;switch(Mi.inputType){case"deleteWordBackward":{const Sn=Zi.substring(0,ji).match(/\w*[^\w]*$/);Sn&&(cn-=Sn[0].length);break}case"deleteWordForward":{const Sn=Zi.substring(ji).match(/^[^\w]*\w*/);Sn&&(rn+=Sn[0].length);break}case"deleteContentBackward":ji===Ki&&(cn-=1);break;case"deleteContentForward":ji===Ki&&(rn+=1);break}Mi.preventDefault(),(xn=this.linkService.eventBus)==null||xn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ze,name:"Keystroke",value:Zi,change:qi||"",willCommit:!1,selStart:cn,selEnd:rn}})}),this._setEventListeners(Xe,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mi=>Mi.target.value)}if(wi&&Xe.addEventListener("blur",wi),this.data.comb){const Mi=(this.data.rect[2]-this.data.rect[0])/Li;Xe.classList.add("comb"),Xe.style.letterSpacing=`calc(${Mi}px * var(--scale-factor) - 1ch)`}}else Xe=document.createElement("div"),Xe.textContent=this.data.fieldValue,Xe.style.verticalAlign="middle",Xe.style.display="table-cell";return this._setTextStyle(Xe),this._setBackgroundColor(Xe),this._setDefaultPropertiesFromJS(Xe),this.container.append(Xe),this.container}}class De extends Ee{constructor(Ye){super(Ye,{isRenderable:Ye.renderForms})}render(){const Ye=this.annotationStorage,Ze=this.data,Xe=Ze.id;let ui=Ye.getValue(Xe,{value:Ze.exportValue===Ze.fieldValue}).value;typeof ui=="string"&&(ui=ui!=="Off",Ye.setValue(Xe,{value:ui})),this.container.className="buttonWidgetAnnotation checkBox";const pi=document.createElement("input");return Pe.add(pi),pi.setAttribute("data-element-id",Xe),pi.disabled=Ze.readOnly,this._setRequired(pi,this.data.required),pi.type="checkbox",pi.name=Ze.fieldName,ui&&pi.setAttribute("checked",!0),pi.setAttribute("exportValue",Ze.exportValue),pi.tabIndex=_e,pi.addEventListener("change",gi=>{const{name:Li,checked:Ri}=gi.target;for(const wi of this._getElementsByName(Li,Xe)){const Vi=Ri&&wi.exportValue===Ze.exportValue;wi.domElement&&(wi.domElement.checked=Vi),Ye.setValue(wi.id,{value:Vi})}Ye.setValue(Xe,{value:Ri})}),pi.addEventListener("resetform",gi=>{const Li=Ze.defaultFieldValue||"Off";gi.target.checked=Li===Ze.exportValue}),this.enableScripting&&this.hasJSActions&&(pi.addEventListener("updatefromsandbox",gi=>{const Li={value(Ri){Ri.target.checked=Ri.detail.value!=="Off",Ye.setValue(Xe,{value:Ri.target.checked})}};this._dispatchEventFromSandbox(Li,gi)}),this._setEventListeners(pi,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gi=>gi.target.checked)),this._setBackgroundColor(pi),this._setDefaultPropertiesFromJS(pi),this.container.append(pi),this.container}}class Be extends Ee{constructor(Ye){super(Ye,{isRenderable:Ye.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const Ye=this.annotationStorage,Ze=this.data,Xe=Ze.id;let ui=Ye.getValue(Xe,{value:Ze.fieldValue===Ze.buttonValue}).value;typeof ui=="string"&&(ui=ui!==Ze.buttonValue,Ye.setValue(Xe,{value:ui}));const pi=document.createElement("input");if(Pe.add(pi),pi.setAttribute("data-element-id",Xe),pi.disabled=Ze.readOnly,this._setRequired(pi,this.data.required),pi.type="radio",pi.name=Ze.fieldName,ui&&pi.setAttribute("checked",!0),pi.tabIndex=_e,pi.addEventListener("change",gi=>{const{name:Li,checked:Ri}=gi.target;for(const wi of this._getElementsByName(Li,Xe))Ye.setValue(wi.id,{value:!1});Ye.setValue(Xe,{value:Ri})}),pi.addEventListener("resetform",gi=>{const Li=Ze.defaultFieldValue;gi.target.checked=Li!=null&&Li===Ze.buttonValue}),this.enableScripting&&this.hasJSActions){const gi=Ze.buttonValue;pi.addEventListener("updatefromsandbox",Li=>{const Ri={value:wi=>{const Vi=gi===wi.detail.value;for(const Mi of this._getElementsByName(wi.target.name)){const qi=Vi&&Mi.id===Xe;Mi.domElement&&(Mi.domElement.checked=qi),Ye.setValue(Mi.id,{value:qi})}}};this._dispatchEventFromSandbox(Ri,Li)}),this._setEventListeners(pi,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Li=>Li.target.checked)}return this._setBackgroundColor(pi),this._setDefaultPropertiesFromJS(pi),this.container.append(pi),this.container}}class He extends Te{constructor(Ye){super(Ye,{ignoreBorder:Ye.data.hasAppearance})}render(){const Ye=super.render();Ye.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(Ye.title=this.data.alternativeText);const Ze=Ye.lastChild;return this.enableScripting&&this.hasJSActions&&Ze&&(this._setDefaultPropertiesFromJS(Ze),Ze.addEventListener("updatefromsandbox",Xe=>{this._dispatchEventFromSandbox({},Xe)})),Ye}}class Ue extends Ee{constructor(Ye){super(Ye,{isRenderable:Ye.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const Ye=this.annotationStorage,Ze=this.data.id,Xe=Ye.getValue(Ze,{value:this.data.fieldValue}),ui=document.createElement("select");Pe.add(ui),ui.setAttribute("data-element-id",Ze),ui.disabled=this.data.readOnly,this._setRequired(ui,this.data.required),ui.name=this.data.fieldName,ui.tabIndex=_e;let pi=this.data.combo&&this.data.options.length>0;this.data.combo||(ui.size=this.data.options.length,this.data.multiSelect&&(ui.multiple=!0)),ui.addEventListener("resetform",wi=>{const Vi=this.data.defaultFieldValue;for(const Mi of ui.options)Mi.selected=Mi.value===Vi});for(const wi of this.data.options){const Vi=document.createElement("option");Vi.textContent=wi.displayValue,Vi.value=wi.exportValue,Xe.value.includes(wi.exportValue)&&(Vi.setAttribute("selected",!0),pi=!1),ui.append(Vi)}let gi=null;if(pi){const wi=document.createElement("option");wi.value=" ",wi.setAttribute("hidden",!0),wi.setAttribute("selected",!0),ui.prepend(wi),gi=()=>{wi.remove(),ui.removeEventListener("input",gi),gi=null},ui.addEventListener("input",gi)}const Li=(wi,Vi)=>{const Mi=Vi?"value":"textContent",qi=wi.target.options;return wi.target.multiple?Array.prototype.filter.call(qi,Xi=>Xi.selected).map(Xi=>Xi[Mi]):qi.selectedIndex===-1?null:qi[qi.selectedIndex][Mi]},Ri=wi=>{const Vi=wi.target.options;return Array.prototype.map.call(Vi,Mi=>({displayValue:Mi.textContent,exportValue:Mi.value}))};return this.enableScripting&&this.hasJSActions?(ui.addEventListener("updatefromsandbox",wi=>{const Vi={value(Mi){gi==null||gi();const qi=Mi.detail.value,Xi=new Set(Array.isArray(qi)?qi:[qi]);for(const Zi of ui.options)Zi.selected=Xi.has(Zi.value);Ye.setValue(Ze,{value:Li(Mi,!0)})},multipleSelection(Mi){ui.multiple=!0},remove(Mi){const qi=ui.options,Xi=Mi.detail.remove;qi[Xi].selected=!1,ui.remove(Xi),qi.length>0&&Array.prototype.findIndex.call(qi,ji=>ji.selected)===-1&&(qi[0].selected=!0),Ye.setValue(Ze,{value:Li(Mi,!0),items:Ri(Mi)})},clear(Mi){for(;ui.length!==0;)ui.remove(0);Ye.setValue(Ze,{value:null,items:[]})},insert(Mi){const{index:qi,displayValue:Xi,exportValue:Zi}=Mi.detail.insert,ji=ui.children[qi],Ki=document.createElement("option");Ki.textContent=Xi,Ki.value=Zi,ji?ji.before(Ki):ui.append(Ki),Ye.setValue(Ze,{value:Li(Mi,!0),items:Ri(Mi)})},items(Mi){const{items:qi}=Mi.detail;for(;ui.length!==0;)ui.remove(0);for(const Xi of qi){const{displayValue:Zi,exportValue:ji}=Xi,Ki=document.createElement("option");Ki.textContent=Zi,Ki.value=ji,ui.append(Ki)}ui.options.length>0&&(ui.options[0].selected=!0),Ye.setValue(Ze,{value:Li(Mi,!0),items:Ri(Mi)})},indices(Mi){const qi=new Set(Mi.detail.indices);for(const Xi of Mi.target.options)Xi.selected=qi.has(Xi.index);Ye.setValue(Ze,{value:Li(Mi,!0)})},editable(Mi){Mi.target.disabled=!Mi.detail.editable}};this._dispatchEventFromSandbox(Vi,wi)}),ui.addEventListener("input",wi=>{var qi;const Vi=Li(wi,!0),Mi=Li(wi,!1);Ye.setValue(Ze,{value:Vi}),(qi=this.linkService.eventBus)==null||qi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ze,name:"Keystroke",value:Mi,changeEx:Vi,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(ui,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],wi=>wi.target.checked)):ui.addEventListener("input",function(wi){Ye.setValue(Ze,{value:Li(wi,!0)})}),this.data.combo&&this._setTextStyle(ui),this._setBackgroundColor(ui),this._setDefaultPropertiesFromJS(ui),this.container.append(ui),this.container}}const qe=class extends St{constructor(Ye){var ui,pi,gi;const{data:Ze}=Ye,Xe=!qe.IGNORE_TYPES.has(Ze.parentType)&&!!(((ui=Ze.titleObj)==null?void 0:ui.str)||((pi=Ze.contentsObj)==null?void 0:pi.str)||((gi=Ze.richText)==null?void 0:gi.str));super(Ye,{isRenderable:Xe})}render(){this.container.className="popupAnnotation";const Ye=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(Ye.length===0)return this.container;const Ze=new Je({container:this.container,trigger:Array.from(Ye),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),Xe=this.page,ui=Ce.Util.normalizeRect([this.data.parentRect[0],Xe.view[3]-this.data.parentRect[1]+Xe.view[1],this.data.parentRect[2],Xe.view[3]-this.data.parentRect[3]+Xe.view[1]]),pi=ui[0]+this.data.parentRect[2]-this.data.parentRect[0],gi=ui[1],[Li,Ri,wi,Vi]=this.viewport.viewBox,Mi=wi-Li,qi=Vi-Ri;return this.container.style.left=`${100*(pi-Li)/Mi}%`,this.container.style.top=`${100*(gi-Ri)/qi}%`,this.container.append(Ze.render()),this.container}};let We=qe;lr(We,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class Je{constructor(Ye){this.container=Ye.container,this.trigger=Ye.trigger,this.color=Ye.color,this.titleObj=Ye.titleObj,this.modificationDate=Ye.modificationDate,this.contentsObj=Ye.contentsObj,this.richText=Ye.richText,this.hideWrapper=Ye.hideWrapper||!1,this.pinned=!1}render(){var Li,Ri;const Ze=document.createElement("div");Ze.className="popupWrapper",this.hideElement=this.hideWrapper?Ze:this.container,this.hideElement.hidden=!0;const Xe=document.createElement("div");Xe.className="popup";const ui=this.color;if(ui){const wi=.7*(255-ui[0])+ui[0],Vi=.7*(255-ui[1])+ui[1],Mi=.7*(255-ui[2])+ui[2];Xe.style.backgroundColor=Ce.Util.makeHexColor(wi|0,Vi|0,Mi|0)}const pi=document.createElement("h1");pi.dir=this.titleObj.dir,pi.textContent=this.titleObj.str,Xe.append(pi);const gi=Me.PDFDateString.toDateObject(this.modificationDate);if(gi){const wi=document.createElement("span");wi.className="popupDate",wi.textContent="{{date}}, {{time}}",wi.dataset.l10nId="annotation_date_string",wi.dataset.l10nArgs=JSON.stringify({date:gi.toLocaleDateString(),time:gi.toLocaleTimeString()}),Xe.append(wi)}if(((Li=this.richText)==null?void 0:Li.str)&&(!((Ri=this.contentsObj)!=null&&Ri.str)||this.contentsObj.str===this.richText.str))Oe.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:Xe}),Xe.lastChild.className="richText popupContent";else{const wi=this._formatContents(this.contentsObj);Xe.append(wi)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const wi of this.trigger)wi.addEventListener("click",this._toggle.bind(this)),wi.addEventListener("mouseover",this._show.bind(this,!1)),wi.addEventListener("mouseout",this._hide.bind(this,!1));return Xe.addEventListener("click",this._hide.bind(this,!0)),Ze.append(Xe),Ze}_formatContents({str:Ye,dir:Ze}){const Xe=document.createElement("p");Xe.className="popupContent",Xe.dir=Ze;const ui=Ye.split(/(?:\r\n?|\n)/);for(let pi=0,gi=ui.length;pi<gi;++pi){const Li=ui[pi];Xe.append(document.createTextNode(Li)),pi<gi-1&&Xe.append(document.createElement("br"))}return Xe}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(Ye=!1){Ye&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(Ye=!0){Ye&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Qe extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0}),this.textContent=Ye.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const Ye=document.createElement("div");Ye.className="annotationTextContent",Ye.setAttribute("role","comment");for(const Ze of this.textContent){const Xe=document.createElement("span");Xe.textContent=Ze,Ye.append(Xe)}this.container.append(Ye)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class fi extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const Ye=this.data,{width:Ze,height:Xe}=Ae(Ye.rect),ui=this.svgFactory.create(Ze,Xe,!0),pi=this.svgFactory.createElement("svg:line");return pi.setAttribute("x1",Ye.rect[2]-Ye.lineCoordinates[0]),pi.setAttribute("y1",Ye.rect[3]-Ye.lineCoordinates[1]),pi.setAttribute("x2",Ye.rect[2]-Ye.lineCoordinates[2]),pi.setAttribute("y2",Ye.rect[3]-Ye.lineCoordinates[3]),pi.setAttribute("stroke-width",Ye.borderStyle.width||1),pi.setAttribute("stroke","transparent"),pi.setAttribute("fill","transparent"),ui.append(pi),this.container.append(ui),this._createPopup(pi,Ye),this.container}}class oi extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const Ye=this.data,{width:Ze,height:Xe}=Ae(Ye.rect),ui=this.svgFactory.create(Ze,Xe,!0),pi=Ye.borderStyle.width,gi=this.svgFactory.createElement("svg:rect");return gi.setAttribute("x",pi/2),gi.setAttribute("y",pi/2),gi.setAttribute("width",Ze-pi),gi.setAttribute("height",Xe-pi),gi.setAttribute("stroke-width",pi||1),gi.setAttribute("stroke","transparent"),gi.setAttribute("fill","transparent"),ui.append(gi),this.container.append(ui),this._createPopup(gi,Ye),this.container}}class ii extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const Ye=this.data,{width:Ze,height:Xe}=Ae(Ye.rect),ui=this.svgFactory.create(Ze,Xe,!0),pi=Ye.borderStyle.width,gi=this.svgFactory.createElement("svg:ellipse");return gi.setAttribute("cx",Ze/2),gi.setAttribute("cy",Xe/2),gi.setAttribute("rx",Ze/2-pi/2),gi.setAttribute("ry",Xe/2-pi/2),gi.setAttribute("stroke-width",pi||1),gi.setAttribute("stroke","transparent"),gi.setAttribute("fill","transparent"),ui.append(gi),this.container.append(ui),this._createPopup(gi,Ye),this.container}}class li extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Ye=this.data,{width:Ze,height:Xe}=Ae(Ye.rect),ui=this.svgFactory.create(Ze,Xe,!0);let pi=[];for(const Li of Ye.vertices){const Ri=Li.x-Ye.rect[0],wi=Ye.rect[3]-Li.y;pi.push(Ri+","+wi)}pi=pi.join(" ");const gi=this.svgFactory.createElement(this.svgElementName);return gi.setAttribute("points",pi),gi.setAttribute("stroke-width",Ye.borderStyle.width||1),gi.setAttribute("stroke","transparent"),gi.setAttribute("fill","transparent"),ui.append(gi),this.container.append(ui),this._createPopup(gi,Ye),this.container}}class bi extends li{constructor(Ye){super(Ye),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mi extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Si extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Ye=this.data,{width:Ze,height:Xe}=Ae(Ye.rect),ui=this.svgFactory.create(Ze,Xe,!0);for(const pi of Ye.inkLists){let gi=[];for(const Ri of pi){const wi=Ri.x-Ye.rect[0],Vi=Ye.rect[3]-Ri.y;gi.push(`${wi},${Vi}`)}gi=gi.join(" ");const Li=this.svgFactory.createElement(this.svgElementName);Li.setAttribute("points",gi),Li.setAttribute("stroke-width",Ye.borderStyle.width||1),Li.setAttribute("stroke","transparent"),Li.setAttribute("fill","transparent"),this._createPopup(Li,Ye),ui.append(Li)}return this.container.append(ui),this.container}}class _i extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class xi extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Ei extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ri extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class vi extends St{constructor(Ye){var Xe,ui,pi;const Ze=!!(Ye.data.hasPopup||((Xe=Ye.data.titleObj)==null?void 0:Xe.str)||((ui=Ye.data.contentsObj)==null?void 0:ui.str)||((pi=Ye.data.richText)==null?void 0:pi.str));super(Ye,{isRenderable:Ze,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ci extends St{constructor(Ye){var ui;super(Ye,{isRenderable:!0});const{filename:Ze,content:Xe}=this.data.file;this.filename=(0,Me.getFilenameFromUrl)(Ze),this.content=Xe,(ui=this.linkService.eventBus)==null||ui.dispatch("fileattachmentannotation",{source:this,filename:Ze,content:Xe})}render(){var Ze,Xe;this.container.className="fileAttachmentAnnotation";const Ye=document.createElement("div");return Ye.className="popupTriggerArea",Ye.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((Ze=this.data.titleObj)==null?void 0:Ze.str)||((Xe=this.data.contentsObj)==null?void 0:Xe.str)||this.data.richText)&&this._createPopup(Ye,this.data),this.container.append(Ye),this.container}_download(){var Ye;(Ye=this.downloadManager)==null||Ye.openOrDownloadData(this.container,this.content,this.filename)}}const si=class{static render(Ye){var Li,Ri;const{annotations:Ze,div:Xe,viewport:ui,accessibilityManager:pi}=Ye;dn(this,ci,zl).call(this,Xe,ui);let gi=0;for(const wi of Ze){if(wi.annotationType!==Ce.AnnotationType.POPUP){const{width:Mi,height:qi}=Ae(wi.rect);if(Mi<=0||qi<=0)continue}const Vi=Se.create({data:wi,layer:Xe,page:Ye.page,viewport:ui,linkService:Ye.linkService,downloadManager:Ye.downloadManager,imageResourcesPath:Ye.imageResourcesPath||"",renderForms:Ye.renderForms!==!1,svgFactory:new Me.DOMSVGFactory,annotationStorage:Ye.annotationStorage||new Ie.AnnotationStorage,enableScripting:Ye.enableScripting,hasJSActions:Ye.hasJSActions,fieldObjects:Ye.fieldObjects,mouseState:Ye.mouseState||{isDown:!1}});if(Vi.isRenderable){const Mi=Vi.render();if(wi.hidden&&(Mi.style.visibility="hidden"),Array.isArray(Mi))for(const qi of Mi)qi.style.zIndex=gi++,dn(Li=si,ei,ql).call(Li,qi,wi.id,Xe,pi);else Mi.style.zIndex=gi++,Vi instanceof We?Xe.prepend(Mi):dn(Ri=si,ei,ql).call(Ri,Mi,wi.id,Xe,pi)}}dn(this,Ti,$l).call(this,Xe,Ye.annotationCanvasMap)}static update(Ye){const{annotationCanvasMap:Ze,div:Xe,viewport:ui}=Ye;dn(this,ci,zl).call(this,Xe,ui),dn(this,Ti,$l).call(this,Xe,Ze),Xe.hidden=!1}};let $e=si;ei=new WeakSet,ql=function(Ye,Ze,Xe,ui){const pi=Ye.firstChild||Ye;pi.id=`${Me.AnnotationPrefix}${Ze}`,Xe.append(Ye),ui==null||ui.moveElementInDOM(Xe,Ye,pi,!1)},ci=new WeakSet,zl=function(Ye,{width:Ze,height:Xe,rotation:ui}){const{style:pi}=Ye,gi=ui%180!==0,Li=Math.floor(Ze)+"px",Ri=Math.floor(Xe)+"px";pi.width=gi?Ri:Li,pi.height=gi?Li:Ri,Ye.setAttribute("data-main-rotation",ui)},Ti=new WeakSet,$l=function(Ye,Ze){if(!!Ze){for(const[Xe,ui]of Ze){const pi=Ye.querySelector(`[data-annotation-id="${Xe}"]`);if(!pi)continue;const{firstChild:gi}=pi;gi?gi.nodeName==="CANVAS"?gi.replaceWith(ui):gi.before(ui):pi.append(ui)}Ze.clear()}},sn($e,ei),sn($e,ci),sn($e,Ti),t.AnnotationLayer=$e},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function r(Me){return Math.floor(Math.max(0,Math.min(1,Me))*255).toString(16).padStart(2,"0")}class Ce{static CMYK_G([Ie,Fe,Oe,_e]){return["G",1-Math.min(1,.3*Ie+.59*Oe+.11*Fe+_e)]}static G_CMYK([Ie]){return["CMYK",0,0,0,1-Ie]}static G_RGB([Ie]){return["RGB",Ie,Ie,Ie]}static G_HTML([Ie]){const Fe=r(Ie);return`#${Fe}${Fe}${Fe}`}static RGB_G([Ie,Fe,Oe]){return["G",.3*Ie+.59*Fe+.11*Oe]}static RGB_HTML([Ie,Fe,Oe]){const _e=r(Ie),xe=r(Fe),Pe=r(Oe);return`#${_e}${xe}${Pe}`}static T_HTML(){return"#00000000"}static CMYK_RGB([Ie,Fe,Oe,_e]){return["RGB",1-Math.min(1,Ie+_e),1-Math.min(1,Oe+_e),1-Math.min(1,Fe+_e)]}static CMYK_HTML(Ie){const Fe=this.CMYK_RGB(Ie).slice(1);return this.RGB_HTML(Fe)}static RGB_CMYK([Ie,Fe,Oe]){const _e=1-Ie,xe=1-Fe,Pe=1-Oe,Ae=Math.min(_e,xe,Pe);return["CMYK",_e,xe,Pe,Ae]}}t.ColorConverters=Ce},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var Ce=r(19);class Me{static setupStorage(Fe,Oe,_e,xe,Pe){const Ae=xe.getValue(Oe,{value:null});switch(_e.name){case"textarea":if(Ae.value!==null&&(Fe.textContent=Ae.value),Pe==="print")break;Fe.addEventListener("input",Se=>{xe.setValue(Oe,{value:Se.target.value})});break;case"input":if(_e.attributes.type==="radio"||_e.attributes.type==="checkbox"){if(Ae.value===_e.attributes.xfaOn?Fe.setAttribute("checked",!0):Ae.value===_e.attributes.xfaOff&&Fe.removeAttribute("checked"),Pe==="print")break;Fe.addEventListener("change",Se=>{xe.setValue(Oe,{value:Se.target.checked?Se.target.getAttribute("xfaOn"):Se.target.getAttribute("xfaOff")})})}else{if(Ae.value!==null&&Fe.setAttribute("value",Ae.value),Pe==="print")break;Fe.addEventListener("input",Se=>{xe.setValue(Oe,{value:Se.target.value})})}break;case"select":if(Ae.value!==null)for(const Se of _e.children)Se.attributes.value===Ae.value&&(Se.attributes.selected=!0);Fe.addEventListener("input",Se=>{const St=Se.target.options,Te=St.selectedIndex===-1?"":St[St.selectedIndex].value;xe.setValue(Oe,{value:Te})});break}}static setAttributes({html:Fe,element:Oe,storage:_e=null,intent:xe,linkService:Pe}){const{attributes:Ae}=Oe,Se=Fe instanceof HTMLAnchorElement;Ae.type==="radio"&&(Ae.name=`${Ae.name}-${xe}`);for(const[St,Te]of Object.entries(Ae))if(Te!=null)switch(St){case"class":Te.length&&Fe.setAttribute(St,Te.join(" "));break;case"dataId":break;case"id":Fe.setAttribute("data-element-id",Te);break;case"style":Object.assign(Fe.style,Te);break;case"textContent":Fe.textContent=Te;break;default:(!Se||St!=="href"&&St!=="newWindow")&&Fe.setAttribute(St,Te)}Se&&Pe.addLinkAttributes(Fe,Ae.href,Ae.newWindow),_e&&Ae.dataId&&this.setupStorage(Fe,Ae.dataId,Oe,_e)}static render(Fe){var Re;const Oe=Fe.annotationStorage,_e=Fe.linkService,xe=Fe.xfaHtml,Pe=Fe.intent||"display",Ae=document.createElement(xe.name);xe.attributes&&this.setAttributes({html:Ae,element:xe,intent:Pe,linkService:_e});const Se=[[xe,-1,Ae]],St=Fe.div;if(St.append(Ae),Fe.viewport){const Ee=`matrix(${Fe.viewport.transform.join(",")})`;St.style.transform=Ee}Pe!=="richText"&&St.setAttribute("class","xfaLayer xfaFont");const Te=[];for(;Se.length>0;){const[Ee,ke,De]=Se.at(-1);if(ke+1===Ee.children.length){Se.pop();continue}const Be=Ee.children[++Se.at(-1)[1]];if(Be===null)continue;const{name:He}=Be;if(He==="#text"){const We=document.createTextNode(Be.value);Te.push(We),De.append(We);continue}let Ue;if((Re=Be==null?void 0:Be.attributes)!=null&&Re.xmlns?Ue=document.createElementNS(Be.attributes.xmlns,He):Ue=document.createElement(He),De.append(Ue),Be.attributes&&this.setAttributes({html:Ue,element:Be,storage:Oe,intent:Pe,linkService:_e}),Be.children&&Be.children.length>0)Se.push([Be,-1,Ue]);else if(Be.value){const We=document.createTextNode(Be.value);Ce.XfaText.shouldBuildText(He)&&Te.push(We),Ue.append(We)}}for(const Ee of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ee.setAttribute("readOnly",!0);return{textDivs:Te}}static update(Fe){const Oe=`matrix(${Fe.viewport.transform.join(",")})`;Fe.div.style.transform=Oe,Fe.div.hidden=!1}}t.XfaLayer=Me},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=Se;var Ce=r(1);const Me=1e5,Ie=30,Fe=.8,Oe=new Map;function _e(St,Te){const Re=Oe.get(St);if(Re)return Re;Te.save(),Te.font=`${Ie}px ${St}`;const Ee=Te.measureText("");let ke=Ee.fontBoundingBoxAscent,De=Math.abs(Ee.fontBoundingBoxDescent);if(ke){Te.restore();const He=ke/(ke+De);return Oe.set(St,He),He}Te.strokeStyle="red",Te.clearRect(0,0,Ie,Ie),Te.strokeText("g",0,0);let Be=Te.getImageData(0,0,Ie,Ie).data;De=0;for(let He=Be.length-1-3;He>=0;He-=4)if(Be[He]>0){De=Math.ceil(He/4/Ie);break}Te.clearRect(0,0,Ie,Ie),Te.strokeText("A",0,Ie),Be=Te.getImageData(0,0,Ie,Ie).data,ke=0;for(let He=0,Ue=Be.length;He<Ue;He+=4)if(Be[He]>0){ke=Ie-Math.floor(He/4/Ie);break}if(Te.restore(),ke){const He=ke/(ke+De);return Oe.set(St,He),He}return Oe.set(St,Fe),Fe}function xe(St,Te,Re,Ee){const ke=document.createElement("span"),De={angle:0,canvasWidth:0,hasText:Te.str!=="",hasEOL:Te.hasEOL,fontSize:0};St._textDivs.push(ke);const Be=Ce.Util.transform(St._viewport.transform,Te.transform);let He=Math.atan2(Be[1],Be[0]);const Ue=Re[Te.fontName];Ue.vertical&&(He+=Math.PI/2);const We=Math.hypot(Be[2],Be[3]),Je=We*_e(Ue.fontFamily,Ee);let Qe,fi;He===0?(Qe=Be[4],fi=Be[5]-Je):(Qe=Be[4]+Je*Math.sin(He),fi=Be[5]-Je*Math.cos(He)),ke.style.left=`${Qe}px`,ke.style.top=`${fi}px`,ke.style.fontSize=`${We}px`,ke.style.fontFamily=Ue.fontFamily,De.fontSize=We,ke.setAttribute("role","presentation"),ke.textContent=Te.str,ke.dir=Te.dir,St._fontInspectorEnabled&&(ke.dataset.fontName=Te.fontName),He!==0&&(De.angle=He*(180/Math.PI));let oi=!1;if(Te.str.length>1)oi=!0;else if(Te.str!==" "&&Te.transform[0]!==Te.transform[3]){const ii=Math.abs(Te.transform[0]),li=Math.abs(Te.transform[3]);ii!==li&&Math.max(ii,li)/Math.min(ii,li)>1.5&&(oi=!0)}oi&&(Ue.vertical?De.canvasWidth=Te.height*St._viewport.scale:De.canvasWidth=Te.width*St._viewport.scale),St._textDivProperties.set(ke,De),St._textContentStream&&St._layoutText(ke)}function Pe(St){if(St._canceled)return;const Te=St._textDivs,Re=St._capability;if(Te.length>Me){St._renderingDone=!0,Re.resolve();return}if(!St._textContentStream)for(const ke of Te)St._layoutText(ke);St._renderingDone=!0,Re.resolve()}class Ae{constructor({textContent:Te,textContentStream:Re,container:Ee,viewport:ke,textDivs:De,textContentItemsStr:Be}){var He;this._textContent=Te,this._textContentStream=Re,this._container=Ee,this._document=Ee.ownerDocument,this._viewport=ke,this._textDivs=De||[],this._textContentItemsStr=Be||[],this._fontInspectorEnabled=!!((He=globalThis.FontInspector)!=null&&He.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,Ce.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new Ce.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(Te,Re){for(const Ee of Te){if(Ee.str===void 0){if(Ee.type==="beginMarkedContentProps"||Ee.type==="beginMarkedContent"){const ke=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Ee.id!==null&&this._container.setAttribute("id",`${Ee.id}`),ke.append(this._container)}else Ee.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Ee.str),xe(this,Ee,Re,this._layoutTextCtx)}}_layoutText(Te){const Re=this._textDivProperties.get(Te);let Ee="";if(Re.canvasWidth!==0&&Re.hasText){const{fontFamily:ke}=Te.style,{fontSize:De}=Re;(De!==this._layoutTextLastFontSize||ke!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${De*this._devicePixelRatio}px ${ke}`,this._layoutTextLastFontSize=De,this._layoutTextLastFontFamily=ke);const{width:Be}=this._layoutTextCtx.measureText(Te.textContent);Be>0&&(Ee=`scaleX(${this._devicePixelRatio*Re.canvasWidth/Be})`)}if(Re.angle!==0&&(Ee=`rotate(${Re.angle}deg) ${Ee}`),Ee.length>0&&(Te.style.transform=Ee),Re.hasText&&this._container.append(Te),Re.hasEOL){const ke=document.createElement("br");ke.setAttribute("role","presentation"),this._container.append(ke)}}_render(Te=0){const Re=(0,Ce.createPromiseCapability)();let Ee=Object.create(null);const ke=this._document.createElement("canvas");if(ke.height=ke.width=Ie,this._layoutTextCtx=ke.getContext("2d",{alpha:!1}),this._textContent){const De=this._textContent.items,Be=this._textContent.styles;this._processItems(De,Be),Re.resolve()}else if(this._textContentStream){const De=()=>{this._reader.read().then(({value:Be,done:He})=>{if(He){Re.resolve();return}Object.assign(Ee,Be.styles),this._processItems(Be.items,Ee),De()},Re.reject)};this._reader=this._textContentStream.getReader(),De()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');Re.promise.then(()=>{Ee=null,Te?this._renderTimer=setTimeout(()=>{Pe(this),this._renderTimer=null},Te):Pe(this)},this._capability.reject)}}t.TextLayerRenderTask=Ae;function Se(St){const Te=new Ae({textContent:St.textContent,textContentStream:St.textContentStream,container:St.container,viewport:St.viewport,textDivs:St.textDivs,textContentItemsStr:St.textContentItemsStr});return Te._render(St.timeout),Te}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var Ce=r(6),Me=r(1),Ie=r(12);let Fe=class{constructor(){(0,Me.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=Fe;{let Re=function(Ue){let We=[];const Je=[];for(const Qe of Ue){if(Qe.fn==="save"){We.push({fnId:92,fn:"group",items:[]}),Je.push(We),We=We.at(-1).items;continue}Qe.fn==="restore"?We=Je.pop():We.push(Qe)}return We},Ee=function(Ue){if(Number.isInteger(Ue))return Ue.toString();const We=Ue.toFixed(10);let Je=We.length-1;if(We[Je]!=="0")return We;do Je--;while(We[Je]==="0");return We.substring(0,We[Je]==="."?Je:Je+1)},ke=function(Ue){if(Ue[4]===0&&Ue[5]===0){if(Ue[1]===0&&Ue[2]===0)return Ue[0]===1&&Ue[3]===1?"":`scale(${Ee(Ue[0])} ${Ee(Ue[3])})`;if(Ue[0]===Ue[3]&&Ue[1]===-Ue[2]){const We=Math.acos(Ue[0])*180/Math.PI;return`rotate(${Ee(We)})`}}else if(Ue[0]===1&&Ue[1]===0&&Ue[2]===0&&Ue[3]===1)return`translate(${Ee(Ue[4])} ${Ee(Ue[5])})`;return`matrix(${Ee(Ue[0])} ${Ee(Ue[1])} ${Ee(Ue[2])} ${Ee(Ue[3])} ${Ee(Ue[4])} ${Ee(Ue[5])})`};const Oe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_e="http://www.w3.org/XML/1998/namespace",xe="http://www.w3.org/1999/xlink",Pe=["butt","round","square"],Ae=["miter","round","bevel"],Se=function(Ue,We="",Je=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Je)return URL.createObjectURL(new Blob([Ue],{type:We}));const Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let fi=`data:${We};base64,`;for(let oi=0,ii=Ue.length;oi<ii;oi+=3){const li=Ue[oi]&255,bi=Ue[oi+1]&255,mi=Ue[oi+2]&255,Si=li>>2,_i=(li&3)<<4|bi>>4,xi=oi+1<ii?(bi&15)<<2|mi>>6:64,Ei=oi+2<ii?mi&63:64;fi+=Qe[Si]+Qe[_i]+Qe[xi]+Qe[Ei]}return fi},St=function(){const Ue=new Uint8Array([137,80,78,71,13,10,26,10]),We=12,Je=new Int32Array(256);for(let mi=0;mi<256;mi++){let Si=mi;for(let _i=0;_i<8;_i++)Si&1?Si=3988292384^Si>>1&2147483647:Si=Si>>1&2147483647;Je[mi]=Si}function Qe(mi,Si,_i){let xi=-1;for(let Ei=Si;Ei<_i;Ei++){const ri=(xi^mi[Ei])&255,vi=Je[ri];xi=xi>>>8^vi}return xi^-1}function fi(mi,Si,_i,xi){let Ei=xi;const ri=Si.length;_i[Ei]=ri>>24&255,_i[Ei+1]=ri>>16&255,_i[Ei+2]=ri>>8&255,_i[Ei+3]=ri&255,Ei+=4,_i[Ei]=mi.charCodeAt(0)&255,_i[Ei+1]=mi.charCodeAt(1)&255,_i[Ei+2]=mi.charCodeAt(2)&255,_i[Ei+3]=mi.charCodeAt(3)&255,Ei+=4,_i.set(Si,Ei),Ei+=Si.length;const vi=Qe(_i,xi+4,Ei);_i[Ei]=vi>>24&255,_i[Ei+1]=vi>>16&255,_i[Ei+2]=vi>>8&255,_i[Ei+3]=vi&255}function oi(mi,Si,_i){let xi=1,Ei=0;for(let ri=Si;ri<_i;++ri)xi=(xi+(mi[ri]&255))%65521,Ei=(Ei+xi)%65521;return Ei<<16|xi}function ii(mi){if(!Ie.isNodeJS)return li(mi);try{let Si;parseInt(process.versions.node)>=8?Si=mi:Si=Buffer.from(mi);const _i=require$$2.deflateSync(Si,{level:9});return _i instanceof Uint8Array?_i:new Uint8Array(_i)}catch(Si){(0,Me.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Si)}return li(mi)}function li(mi){let Si=mi.length;const _i=65535,xi=Math.ceil(Si/_i),Ei=new Uint8Array(2+Si+xi*5+4);let ri=0;Ei[ri++]=120,Ei[ri++]=156;let vi=0;for(;Si>_i;)Ei[ri++]=0,Ei[ri++]=255,Ei[ri++]=255,Ei[ri++]=0,Ei[ri++]=0,Ei.set(mi.subarray(vi,vi+_i),ri),ri+=_i,vi+=_i,Si-=_i;Ei[ri++]=1,Ei[ri++]=Si&255,Ei[ri++]=Si>>8&255,Ei[ri++]=~Si&65535&255,Ei[ri++]=(~Si&65535)>>8&255,Ei.set(mi.subarray(vi),ri),ri+=mi.length-vi;const Ci=oi(mi,0,mi.length);return Ei[ri++]=Ci>>24&255,Ei[ri++]=Ci>>16&255,Ei[ri++]=Ci>>8&255,Ei[ri++]=Ci&255,Ei}function bi(mi,Si,_i,xi){const Ei=mi.width,ri=mi.height;let vi,Ci,$e;const Ge=mi.data;switch(Si){case Me.ImageKind.GRAYSCALE_1BPP:Ci=0,vi=1,$e=Ei+7>>3;break;case Me.ImageKind.RGB_24BPP:Ci=2,vi=8,$e=Ei*3;break;case Me.ImageKind.RGBA_32BPP:Ci=6,vi=8,$e=Ei*4;break;default:throw new Error("invalid format")}const ze=new Uint8Array((1+$e)*ri);let qe=0,ei=0;for(let si=0;si<ri;++si)ze[qe++]=0,ze.set(Ge.subarray(ei,ei+$e),qe),ei+=$e,qe+=$e;if(Si===Me.ImageKind.GRAYSCALE_1BPP&&xi){qe=0;for(let si=0;si<ri;si++){qe++;for(let ai=0;ai<$e;ai++)ze[qe++]^=255}}const ni=new Uint8Array([Ei>>24&255,Ei>>16&255,Ei>>8&255,Ei&255,ri>>24&255,ri>>16&255,ri>>8&255,ri&255,vi,Ci,0,0,0]),ci=ii(ze),di=Ue.length+We*3+ni.length+ci.length,Ti=new Uint8Array(di);let Ni=0;return Ti.set(Ue,Ni),Ni+=Ue.length,fi("IHDR",ni,Ti,Ni),Ni+=We+ni.length,fi("IDATA",ci,Ti,Ni),Ni+=We+ci.length,fi("IEND",new Uint8Array(0),Ti,Ni),Se(Ti,"image/png",_i)}return function(Si,_i,xi){const Ei=Si.kind===void 0?Me.ImageKind.GRAYSCALE_1BPP:Si.kind;return bi(Si,Ei,_i,xi)}}();class Te{constructor(){this.fontSizeScale=1,this.fontWeight=Oe.fontWeight,this.fontSize=0,this.textMatrix=Me.IDENTITY_MATRIX,this.fontMatrix=Me.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Me.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Oe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(We,Je){this.x=We,this.y=Je}}let De=0,Be=0,He=0;t.SVGGraphics=Fe=class{constructor(Ue,We,Je=!1){(0,Ce.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new Ce.DOMSVGFactory,this.current=new Te,this.transformMatrix=Me.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Ue,this.objs=We,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Je,this._operatorIdMapping=[];for(const Qe in Me.OPS)this._operatorIdMapping[Me.OPS[Qe]]=Qe}getObject(Ue,We=null){return typeof Ue=="string"?Ue.startsWith("g_")?this.commonObjs.get(Ue):this.objs.get(Ue):We}save(){this.transformStack.push(this.transformMatrix);const Ue=this.current;this.extraStack.push(Ue),this.current=Ue.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Ue){this.save(),this.executeOpTree(Ue),this.restore()}loadDependencies(Ue){const We=Ue.fnArray,Je=Ue.argsArray;for(let Qe=0,fi=We.length;Qe<fi;Qe++)if(We[Qe]===Me.OPS.dependency)for(const oi of Je[Qe]){const ii=oi.startsWith("g_")?this.commonObjs:this.objs,li=new Promise(bi=>{ii.get(oi,bi)});this.current.dependencies.push(li)}return Promise.all(this.current.dependencies)}transform(Ue,We,Je,Qe,fi,oi){const ii=[Ue,We,Je,Qe,fi,oi];this.transformMatrix=Me.Util.transform(this.transformMatrix,ii),this.tgrp=null}getSVG(Ue,We){this.viewport=We;const Je=this._initialize(We);return this.loadDependencies(Ue).then(()=>(this.transformMatrix=Me.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Ue)),Je))}convertOpList(Ue){const We=this._operatorIdMapping,Je=Ue.argsArray,Qe=Ue.fnArray,fi=[];for(let oi=0,ii=Qe.length;oi<ii;oi++){const li=Qe[oi];fi.push({fnId:li,fn:We[li],args:Je[oi]})}return Re(fi)}executeOpTree(Ue){for(const We of Ue){const Je=We.fn,Qe=We.fnId,fi=We.args;switch(Qe|0){case Me.OPS.beginText:this.beginText();break;case Me.OPS.dependency:break;case Me.OPS.setLeading:this.setLeading(fi);break;case Me.OPS.setLeadingMoveText:this.setLeadingMoveText(fi[0],fi[1]);break;case Me.OPS.setFont:this.setFont(fi);break;case Me.OPS.showText:this.showText(fi[0]);break;case Me.OPS.showSpacedText:this.showText(fi[0]);break;case Me.OPS.endText:this.endText();break;case Me.OPS.moveText:this.moveText(fi[0],fi[1]);break;case Me.OPS.setCharSpacing:this.setCharSpacing(fi[0]);break;case Me.OPS.setWordSpacing:this.setWordSpacing(fi[0]);break;case Me.OPS.setHScale:this.setHScale(fi[0]);break;case Me.OPS.setTextMatrix:this.setTextMatrix(fi[0],fi[1],fi[2],fi[3],fi[4],fi[5]);break;case Me.OPS.setTextRise:this.setTextRise(fi[0]);break;case Me.OPS.setTextRenderingMode:this.setTextRenderingMode(fi[0]);break;case Me.OPS.setLineWidth:this.setLineWidth(fi[0]);break;case Me.OPS.setLineJoin:this.setLineJoin(fi[0]);break;case Me.OPS.setLineCap:this.setLineCap(fi[0]);break;case Me.OPS.setMiterLimit:this.setMiterLimit(fi[0]);break;case Me.OPS.setFillRGBColor:this.setFillRGBColor(fi[0],fi[1],fi[2]);break;case Me.OPS.setStrokeRGBColor:this.setStrokeRGBColor(fi[0],fi[1],fi[2]);break;case Me.OPS.setStrokeColorN:this.setStrokeColorN(fi);break;case Me.OPS.setFillColorN:this.setFillColorN(fi);break;case Me.OPS.shadingFill:this.shadingFill(fi[0]);break;case Me.OPS.setDash:this.setDash(fi[0],fi[1]);break;case Me.OPS.setRenderingIntent:this.setRenderingIntent(fi[0]);break;case Me.OPS.setFlatness:this.setFlatness(fi[0]);break;case Me.OPS.setGState:this.setGState(fi[0]);break;case Me.OPS.fill:this.fill();break;case Me.OPS.eoFill:this.eoFill();break;case Me.OPS.stroke:this.stroke();break;case Me.OPS.fillStroke:this.fillStroke();break;case Me.OPS.eoFillStroke:this.eoFillStroke();break;case Me.OPS.clip:this.clip("nonzero");break;case Me.OPS.eoClip:this.clip("evenodd");break;case Me.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Me.OPS.paintImageXObject:this.paintImageXObject(fi[0]);break;case Me.OPS.paintInlineImageXObject:this.paintInlineImageXObject(fi[0]);break;case Me.OPS.paintImageMaskXObject:this.paintImageMaskXObject(fi[0]);break;case Me.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(fi[0],fi[1]);break;case Me.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Me.OPS.closePath:this.closePath();break;case Me.OPS.closeStroke:this.closeStroke();break;case Me.OPS.closeFillStroke:this.closeFillStroke();break;case Me.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Me.OPS.nextLine:this.nextLine();break;case Me.OPS.transform:this.transform(fi[0],fi[1],fi[2],fi[3],fi[4],fi[5]);break;case Me.OPS.constructPath:this.constructPath(fi[0],fi[1]);break;case Me.OPS.endPath:this.endPath();break;case 92:this.group(We.items);break;default:(0,Me.warn)(`Unimplemented operator ${Je}`);break}}}setWordSpacing(Ue){this.current.wordSpacing=Ue}setCharSpacing(Ue){this.current.charSpacing=Ue}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Ue,We,Je,Qe,fi,oi){const ii=this.current;ii.textMatrix=ii.lineMatrix=[Ue,We,Je,Qe,fi,oi],ii.textMatrixScale=Math.hypot(Ue,We),ii.x=ii.lineX=0,ii.y=ii.lineY=0,ii.xcoords=[],ii.ycoords=[],ii.tspan=this.svgFactory.createElement("svg:tspan"),ii.tspan.setAttributeNS(null,"font-family",ii.fontFamily),ii.tspan.setAttributeNS(null,"font-size",`${Ee(ii.fontSize)}px`),ii.tspan.setAttributeNS(null,"y",Ee(-ii.y)),ii.txtElement=this.svgFactory.createElement("svg:text"),ii.txtElement.append(ii.tspan)}beginText(){const Ue=this.current;Ue.x=Ue.lineX=0,Ue.y=Ue.lineY=0,Ue.textMatrix=Me.IDENTITY_MATRIX,Ue.lineMatrix=Me.IDENTITY_MATRIX,Ue.textMatrixScale=1,Ue.tspan=this.svgFactory.createElement("svg:tspan"),Ue.txtElement=this.svgFactory.createElement("svg:text"),Ue.txtgrp=this.svgFactory.createElement("svg:g"),Ue.xcoords=[],Ue.ycoords=[]}moveText(Ue,We){const Je=this.current;Je.x=Je.lineX+=Ue,Je.y=Je.lineY+=We,Je.xcoords=[],Je.ycoords=[],Je.tspan=this.svgFactory.createElement("svg:tspan"),Je.tspan.setAttributeNS(null,"font-family",Je.fontFamily),Je.tspan.setAttributeNS(null,"font-size",`${Ee(Je.fontSize)}px`),Je.tspan.setAttributeNS(null,"y",Ee(-Je.y))}showText(Ue){const We=this.current,Je=We.font,Qe=We.fontSize;if(Qe===0)return;const fi=We.fontSizeScale,oi=We.charSpacing,ii=We.wordSpacing,li=We.fontDirection,bi=We.textHScale*li,mi=Je.vertical,Si=mi?1:-1,_i=Je.defaultVMetrics,xi=Qe*We.fontMatrix[0];let Ei=0;for(const Ci of Ue){if(Ci===null){Ei+=li*ii;continue}else if(typeof Ci=="number"){Ei+=Si*Ci*Qe/1e3;continue}const $e=(Ci.isSpace?ii:0)+oi,Ge=Ci.fontChar;let ze,qe,ei=Ci.width;if(mi){let ci;const di=Ci.vmetric||_i;ci=Ci.vmetric?di[1]:ei*.5,ci=-ci*xi;const Ti=di[2]*xi;ei=di?-di[0]:ei,ze=ci/fi,qe=(Ei+Ti)/fi}else ze=Ei/fi,qe=0;(Ci.isInFont||Je.missingFile)&&(We.xcoords.push(We.x+ze),mi&&We.ycoords.push(-We.y+qe),We.tspan.textContent+=Ge);let ni;mi?ni=ei*xi-$e*li:ni=ei*xi+$e*li,Ei+=ni}We.tspan.setAttributeNS(null,"x",We.xcoords.map(Ee).join(" ")),mi?We.tspan.setAttributeNS(null,"y",We.ycoords.map(Ee).join(" ")):We.tspan.setAttributeNS(null,"y",Ee(-We.y)),mi?We.y-=Ei:We.x+=Ei*bi,We.tspan.setAttributeNS(null,"font-family",We.fontFamily),We.tspan.setAttributeNS(null,"font-size",`${Ee(We.fontSize)}px`),We.fontStyle!==Oe.fontStyle&&We.tspan.setAttributeNS(null,"font-style",We.fontStyle),We.fontWeight!==Oe.fontWeight&&We.tspan.setAttributeNS(null,"font-weight",We.fontWeight);const ri=We.textRenderingMode&Me.TextRenderingMode.FILL_STROKE_MASK;if(ri===Me.TextRenderingMode.FILL||ri===Me.TextRenderingMode.FILL_STROKE?(We.fillColor!==Oe.fillColor&&We.tspan.setAttributeNS(null,"fill",We.fillColor),We.fillAlpha<1&&We.tspan.setAttributeNS(null,"fill-opacity",We.fillAlpha)):We.textRenderingMode===Me.TextRenderingMode.ADD_TO_PATH?We.tspan.setAttributeNS(null,"fill","transparent"):We.tspan.setAttributeNS(null,"fill","none"),ri===Me.TextRenderingMode.STROKE||ri===Me.TextRenderingMode.FILL_STROKE){const Ci=1/(We.textMatrixScale||1);this._setStrokeAttributes(We.tspan,Ci)}let vi=We.textMatrix;We.textRise!==0&&(vi=vi.slice(),vi[5]+=We.textRise),We.txtElement.setAttributeNS(null,"transform",`${ke(vi)} scale(${Ee(bi)}, -1)`),We.txtElement.setAttributeNS(_e,"xml:space","preserve"),We.txtElement.append(We.tspan),We.txtgrp.append(We.txtElement),this._ensureTransformGroup().append(We.txtElement)}setLeadingMoveText(Ue,We){this.setLeading(-We),this.moveText(Ue,We)}addFontStyle(Ue){if(!Ue.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const We=Se(Ue.data,Ue.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Ue.loadedName}"; src: url(${We}); }
`}setFont(Ue){const We=this.current,Je=this.commonObjs.get(Ue[0]);let Qe=Ue[1];We.font=Je,this.embedFonts&&!Je.missingFile&&!this.embeddedFonts[Je.loadedName]&&(this.addFontStyle(Je),this.embeddedFonts[Je.loadedName]=Je),We.fontMatrix=Je.fontMatrix||Me.FONT_IDENTITY_MATRIX;let fi="normal";Je.black?fi="900":Je.bold&&(fi="bold");const oi=Je.italic?"italic":"normal";Qe<0?(Qe=-Qe,We.fontDirection=-1):We.fontDirection=1,We.fontSize=Qe,We.fontFamily=Je.loadedName,We.fontWeight=fi,We.fontStyle=oi,We.tspan=this.svgFactory.createElement("svg:tspan"),We.tspan.setAttributeNS(null,"y",Ee(-We.y)),We.xcoords=[],We.ycoords=[]}endText(){var We;const Ue=this.current;Ue.textRenderingMode&Me.TextRenderingMode.ADD_TO_PATH_FLAG&&((We=Ue.txtElement)==null?void 0:We.hasChildNodes())&&(Ue.element=Ue.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Ue){Ue>0&&(this.current.lineWidth=Ue)}setLineCap(Ue){this.current.lineCap=Pe[Ue]}setLineJoin(Ue){this.current.lineJoin=Ae[Ue]}setMiterLimit(Ue){this.current.miterLimit=Ue}setStrokeAlpha(Ue){this.current.strokeAlpha=Ue}setStrokeRGBColor(Ue,We,Je){this.current.strokeColor=Me.Util.makeHexColor(Ue,We,Je)}setFillAlpha(Ue){this.current.fillAlpha=Ue}setFillRGBColor(Ue,We,Je){this.current.fillColor=Me.Util.makeHexColor(Ue,We,Je),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Ue){this.current.strokeColor=this._makeColorN_Pattern(Ue)}setFillColorN(Ue){this.current.fillColor=this._makeColorN_Pattern(Ue)}shadingFill(Ue){const We=this.viewport.width,Je=this.viewport.height,Qe=Me.Util.inverseTransform(this.transformMatrix),fi=Me.Util.applyTransform([0,0],Qe),oi=Me.Util.applyTransform([0,Je],Qe),ii=Me.Util.applyTransform([We,0],Qe),li=Me.Util.applyTransform([We,Je],Qe),bi=Math.min(fi[0],oi[0],ii[0],li[0]),mi=Math.min(fi[1],oi[1],ii[1],li[1]),Si=Math.max(fi[0],oi[0],ii[0],li[0]),_i=Math.max(fi[1],oi[1],ii[1],li[1]),xi=this.svgFactory.createElement("svg:rect");xi.setAttributeNS(null,"x",bi),xi.setAttributeNS(null,"y",mi),xi.setAttributeNS(null,"width",Si-bi),xi.setAttributeNS(null,"height",_i-mi),xi.setAttributeNS(null,"fill",this._makeShadingPattern(Ue)),this.current.fillAlpha<1&&xi.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(xi)}_makeColorN_Pattern(Ue){return Ue[0]==="TilingPattern"?this._makeTilingPattern(Ue):this._makeShadingPattern(Ue)}_makeTilingPattern(Ue){const We=Ue[1],Je=Ue[2],Qe=Ue[3]||Me.IDENTITY_MATRIX,[fi,oi,ii,li]=Ue[4],bi=Ue[5],mi=Ue[6],Si=Ue[7],_i=`shading${He++}`,[xi,Ei,ri,vi]=Me.Util.normalizeRect([...Me.Util.applyTransform([fi,oi],Qe),...Me.Util.applyTransform([ii,li],Qe)]),[Ci,$e]=Me.Util.singularValueDecompose2dScale(Qe),Ge=bi*Ci,ze=mi*$e,qe=this.svgFactory.createElement("svg:pattern");qe.setAttributeNS(null,"id",_i),qe.setAttributeNS(null,"patternUnits","userSpaceOnUse"),qe.setAttributeNS(null,"width",Ge),qe.setAttributeNS(null,"height",ze),qe.setAttributeNS(null,"x",`${xi}`),qe.setAttributeNS(null,"y",`${Ei}`);const ei=this.svg,ni=this.transformMatrix,ci=this.current.fillColor,di=this.current.strokeColor,Ti=this.svgFactory.create(ri-xi,vi-Ei);if(this.svg=Ti,this.transformMatrix=Qe,Si===2){const Ni=Me.Util.makeHexColor(...We);this.current.fillColor=Ni,this.current.strokeColor=Ni}return this.executeOpTree(this.convertOpList(Je)),this.svg=ei,this.transformMatrix=ni,this.current.fillColor=ci,this.current.strokeColor=di,qe.append(Ti.childNodes[0]),this.defs.append(qe),`url(#${_i})`}_makeShadingPattern(Ue){switch(typeof Ue=="string"&&(Ue=this.objs.get(Ue)),Ue[0]){case"RadialAxial":const We=`shading${He++}`,Je=Ue[3];let Qe;switch(Ue[1]){case"axial":const fi=Ue[4],oi=Ue[5];Qe=this.svgFactory.createElement("svg:linearGradient"),Qe.setAttributeNS(null,"id",We),Qe.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Qe.setAttributeNS(null,"x1",fi[0]),Qe.setAttributeNS(null,"y1",fi[1]),Qe.setAttributeNS(null,"x2",oi[0]),Qe.setAttributeNS(null,"y2",oi[1]);break;case"radial":const ii=Ue[4],li=Ue[5],bi=Ue[6],mi=Ue[7];Qe=this.svgFactory.createElement("svg:radialGradient"),Qe.setAttributeNS(null,"id",We),Qe.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Qe.setAttributeNS(null,"cx",li[0]),Qe.setAttributeNS(null,"cy",li[1]),Qe.setAttributeNS(null,"r",mi),Qe.setAttributeNS(null,"fx",ii[0]),Qe.setAttributeNS(null,"fy",ii[1]),Qe.setAttributeNS(null,"fr",bi);break;default:throw new Error(`Unknown RadialAxial type: ${Ue[1]}`)}for(const fi of Je){const oi=this.svgFactory.createElement("svg:stop");oi.setAttributeNS(null,"offset",fi[0]),oi.setAttributeNS(null,"stop-color",fi[1]),Qe.append(oi)}return this.defs.append(Qe),`url(#${We})`;case"Mesh":return(0,Me.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Ue[0]}`)}}setDash(Ue,We){this.current.dashArray=Ue,this.current.dashPhase=We}constructPath(Ue,We){const Je=this.current;let Qe=Je.x,fi=Je.y,oi=[],ii=0;for(const li of Ue)switch(li|0){case Me.OPS.rectangle:Qe=We[ii++],fi=We[ii++];const bi=We[ii++],mi=We[ii++],Si=Qe+bi,_i=fi+mi;oi.push("M",Ee(Qe),Ee(fi),"L",Ee(Si),Ee(fi),"L",Ee(Si),Ee(_i),"L",Ee(Qe),Ee(_i),"Z");break;case Me.OPS.moveTo:Qe=We[ii++],fi=We[ii++],oi.push("M",Ee(Qe),Ee(fi));break;case Me.OPS.lineTo:Qe=We[ii++],fi=We[ii++],oi.push("L",Ee(Qe),Ee(fi));break;case Me.OPS.curveTo:Qe=We[ii+4],fi=We[ii+5],oi.push("C",Ee(We[ii]),Ee(We[ii+1]),Ee(We[ii+2]),Ee(We[ii+3]),Ee(Qe),Ee(fi)),ii+=6;break;case Me.OPS.curveTo2:oi.push("C",Ee(Qe),Ee(fi),Ee(We[ii]),Ee(We[ii+1]),Ee(We[ii+2]),Ee(We[ii+3])),Qe=We[ii+2],fi=We[ii+3],ii+=4;break;case Me.OPS.curveTo3:Qe=We[ii+2],fi=We[ii+3],oi.push("C",Ee(We[ii]),Ee(We[ii+1]),Ee(Qe),Ee(fi),Ee(Qe),Ee(fi)),ii+=4;break;case Me.OPS.closePath:oi.push("Z");break}oi=oi.join(" "),Je.path&&Ue.length>0&&Ue[0]!==Me.OPS.rectangle&&Ue[0]!==Me.OPS.moveTo?oi=Je.path.getAttributeNS(null,"d")+oi:(Je.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Je.path)),Je.path.setAttributeNS(null,"d",oi),Je.path.setAttributeNS(null,"fill","none"),Je.element=Je.path,Je.setCurrentPoint(Qe,fi)}endPath(){const Ue=this.current;if(Ue.path=null,!this.pendingClip)return;if(!Ue.element){this.pendingClip=null;return}const We=`clippath${De++}`,Je=this.svgFactory.createElement("svg:clipPath");Je.setAttributeNS(null,"id",We),Je.setAttributeNS(null,"transform",ke(this.transformMatrix));const Qe=Ue.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Qe.setAttributeNS(null,"clip-rule","evenodd"):Qe.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Je.append(Qe),this.defs.append(Je),Ue.activeClipUrl){Ue.clipGroup=null;for(const fi of this.extraStack)fi.clipGroup=null;Je.setAttributeNS(null,"clip-path",Ue.activeClipUrl)}Ue.activeClipUrl=`url(#${We})`,this.tgrp=null}clip(Ue){this.pendingClip=Ue}closePath(){const Ue=this.current;if(Ue.path){const We=`${Ue.path.getAttributeNS(null,"d")}Z`;Ue.path.setAttributeNS(null,"d",We)}}setLeading(Ue){this.current.leading=-Ue}setTextRise(Ue){this.current.textRise=Ue}setTextRenderingMode(Ue){this.current.textRenderingMode=Ue}setHScale(Ue){this.current.textHScale=Ue/100}setRenderingIntent(Ue){}setFlatness(Ue){}setGState(Ue){for(const[We,Je]of Ue)switch(We){case"LW":this.setLineWidth(Je);break;case"LC":this.setLineCap(Je);break;case"LJ":this.setLineJoin(Je);break;case"ML":this.setMiterLimit(Je);break;case"D":this.setDash(Je[0],Je[1]);break;case"RI":this.setRenderingIntent(Je);break;case"FL":this.setFlatness(Je);break;case"Font":this.setFont(Je);break;case"CA":this.setStrokeAlpha(Je);break;case"ca":this.setFillAlpha(Je);break;default:(0,Me.warn)(`Unimplemented graphic state operator ${We}`);break}}fill(){const Ue=this.current;Ue.element&&(Ue.element.setAttributeNS(null,"fill",Ue.fillColor),Ue.element.setAttributeNS(null,"fill-opacity",Ue.fillAlpha),this.endPath())}stroke(){const Ue=this.current;Ue.element&&(this._setStrokeAttributes(Ue.element),Ue.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Ue,We=1){const Je=this.current;let Qe=Je.dashArray;We!==1&&Qe.length>0&&(Qe=Qe.map(function(fi){return We*fi})),Ue.setAttributeNS(null,"stroke",Je.strokeColor),Ue.setAttributeNS(null,"stroke-opacity",Je.strokeAlpha),Ue.setAttributeNS(null,"stroke-miterlimit",Ee(Je.miterLimit)),Ue.setAttributeNS(null,"stroke-linecap",Je.lineCap),Ue.setAttributeNS(null,"stroke-linejoin",Je.lineJoin),Ue.setAttributeNS(null,"stroke-width",Ee(We*Je.lineWidth)+"px"),Ue.setAttributeNS(null,"stroke-dasharray",Qe.map(Ee).join(" ")),Ue.setAttributeNS(null,"stroke-dashoffset",Ee(We*Je.dashPhase)+"px")}eoFill(){var Ue;(Ue=this.current.element)==null||Ue.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Ue;(Ue=this.current.element)==null||Ue.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Ue=this.svgFactory.createElement("svg:rect");Ue.setAttributeNS(null,"x","0"),Ue.setAttributeNS(null,"y","0"),Ue.setAttributeNS(null,"width","1px"),Ue.setAttributeNS(null,"height","1px"),Ue.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Ue)}paintImageXObject(Ue){const We=this.getObject(Ue);if(!We){(0,Me.warn)(`Dependent image with object ID ${Ue} is not ready yet`);return}this.paintInlineImageXObject(We)}paintInlineImageXObject(Ue,We){const Je=Ue.width,Qe=Ue.height,fi=St(Ue,this.forceDataSchema,!!We),oi=this.svgFactory.createElement("svg:rect");oi.setAttributeNS(null,"x","0"),oi.setAttributeNS(null,"y","0"),oi.setAttributeNS(null,"width",Ee(Je)),oi.setAttributeNS(null,"height",Ee(Qe)),this.current.element=oi,this.clip("nonzero");const ii=this.svgFactory.createElement("svg:image");ii.setAttributeNS(xe,"xlink:href",fi),ii.setAttributeNS(null,"x","0"),ii.setAttributeNS(null,"y",Ee(-Qe)),ii.setAttributeNS(null,"width",Ee(Je)+"px"),ii.setAttributeNS(null,"height",Ee(Qe)+"px"),ii.setAttributeNS(null,"transform",`scale(${Ee(1/Je)} ${Ee(-1/Qe)})`),We?We.append(ii):this._ensureTransformGroup().append(ii)}paintImageMaskXObject(Ue){const We=this.getObject(Ue.data,Ue);if(We.bitmap){(0,Me.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Je=this.current,Qe=We.width,fi=We.height,oi=Je.fillColor;Je.maskId=`mask${Be++}`;const ii=this.svgFactory.createElement("svg:mask");ii.setAttributeNS(null,"id",Je.maskId);const li=this.svgFactory.createElement("svg:rect");li.setAttributeNS(null,"x","0"),li.setAttributeNS(null,"y","0"),li.setAttributeNS(null,"width",Ee(Qe)),li.setAttributeNS(null,"height",Ee(fi)),li.setAttributeNS(null,"fill",oi),li.setAttributeNS(null,"mask",`url(#${Je.maskId})`),this.defs.append(ii),this._ensureTransformGroup().append(li),this.paintInlineImageXObject(We,ii)}paintFormXObjectBegin(Ue,We){if(Array.isArray(Ue)&&Ue.length===6&&this.transform(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5]),We){const Je=We[2]-We[0],Qe=We[3]-We[1],fi=this.svgFactory.createElement("svg:rect");fi.setAttributeNS(null,"x",We[0]),fi.setAttributeNS(null,"y",We[1]),fi.setAttributeNS(null,"width",Ee(Je)),fi.setAttributeNS(null,"height",Ee(Qe)),this.current.element=fi,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Ue){const We=this.svgFactory.create(Ue.width,Ue.height),Je=this.svgFactory.createElement("svg:defs");We.append(Je),this.defs=Je;const Qe=this.svgFactory.createElement("svg:g");return Qe.setAttributeNS(null,"transform",ke(Ue.transform)),We.append(Qe),this.svg=Qe,We}_ensureClipGroup(){if(!this.current.clipGroup){const Ue=this.svgFactory.createElement("svg:g");Ue.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Ue),this.current.clipGroup=Ue}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ke(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var Ce=r(1),Me=r(32);const Ie=require$$2,Fe=require$$2,Oe=require$$2,_e=require$$2,xe=/^file:\/\/\/[a-zA-Z]:\//;function Pe(Be){const He=_e.parse(Be);return He.protocol==="file:"||He.host?He:/^[a-z]:[/\\]/i.test(Be)?_e.parse(`file:///${Be}`):(He.host||(He.protocol="file:"),He)}class Ae{constructor(He){this.source=He,this.url=Pe(He.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&He.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var He,Ue;return(Ue=(He=this._fullRequestReader)==null?void 0:He._loaded)!=null?Ue:0}getFullReader(){return(0,Ce.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new ke(this):new Re(this),this._fullRequestReader}getRangeReader(He,Ue){if(Ue<=this._progressiveDataLength)return null;const We=this.isFsUrl?new De(this,He,Ue):new Ee(this,He,Ue);return this._rangeRequestReaders.push(We),We}cancelAllRequests(He){var Ue;(Ue=this._fullRequestReader)==null||Ue.cancel(He);for(const We of this._rangeRequestReaders.slice(0))We.cancel(He)}}t.PDFNodeStream=Ae;class Se{constructor(He){this._url=He.url,this._done=!1,this._storedError=null,this.onProgress=null;const Ue=He.source;this._contentLength=Ue.length,this._loaded=0,this._filename=null,this._disableRange=Ue.disableRange||!1,this._rangeChunkSize=Ue.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Ue.disableStream,this._isRangeSupported=!Ue.disableRange,this._readableStream=null,this._readCapability=(0,Ce.createPromiseCapability)(),this._headersCapability=(0,Ce.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var We;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const He=this._readableStream.read();return He===null?(this._readCapability=(0,Ce.createPromiseCapability)(),this.read()):(this._loaded+=He.length,(We=this.onProgress)==null||We.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(He).buffer,done:!1})}cancel(He){if(!this._readableStream){this._error(He);return}this._readableStream.destroy(He)}_error(He){this._storedError=He,this._readCapability.resolve()}_setReadableStream(He){this._readableStream=He,He.on("readable",()=>{this._readCapability.resolve()}),He.on("end",()=>{He.destroy(),this._done=!0,this._readCapability.resolve()}),He.on("error",Ue=>{this._error(Ue)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ce.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class St{constructor(He){this._url=He.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,Ce.createPromiseCapability)();const Ue=He.source;this._isStreamingSupported=!Ue.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var We;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const He=this._readableStream.read();return He===null?(this._readCapability=(0,Ce.createPromiseCapability)(),this.read()):(this._loaded+=He.length,(We=this.onProgress)==null||We.call(this,{loaded:this._loaded}),{value:new Uint8Array(He).buffer,done:!1})}cancel(He){if(!this._readableStream){this._error(He);return}this._readableStream.destroy(He)}_error(He){this._storedError=He,this._readCapability.resolve()}_setReadableStream(He){this._readableStream=He,He.on("readable",()=>{this._readCapability.resolve()}),He.on("end",()=>{He.destroy(),this._done=!0,this._readCapability.resolve()}),He.on("error",Ue=>{this._error(Ue)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Te(Be,He){return{protocol:Be.protocol,auth:Be.auth,host:Be.hostname,port:Be.port,path:Be.path,method:"GET",headers:He}}class Re extends Se{constructor(He){super(He);const Ue=We=>{if(We.statusCode===404){const oi=new Ce.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=oi,this._headersCapability.reject(oi);return}this._headersCapability.resolve(),this._setReadableStream(We);const Je=oi=>this._readableStream.headers[oi.toLowerCase()],{allowRangeRequests:Qe,suggestedLength:fi}=(0,Me.validateRangeRequestCapabilities)({getResponseHeader:Je,isHttp:He.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Qe,this._contentLength=fi||this._contentLength,this._filename=(0,Me.extractFilenameFromHeader)(Je)};this._request=null,this._url.protocol==="http:"?this._request=Fe.request(Te(this._url,He.httpHeaders),Ue):this._request=Oe.request(Te(this._url,He.httpHeaders),Ue),this._request.on("error",We=>{this._storedError=We,this._headersCapability.reject(We)}),this._request.end()}}class Ee extends St{constructor(He,Ue,We){super(He),this._httpHeaders={};for(const Qe in He.httpHeaders){const fi=He.httpHeaders[Qe];typeof fi>"u"||(this._httpHeaders[Qe]=fi)}this._httpHeaders.Range=`bytes=${Ue}-${We-1}`;const Je=Qe=>{if(Qe.statusCode===404){const fi=new Ce.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=fi;return}this._setReadableStream(Qe)};this._request=null,this._url.protocol==="http:"?this._request=Fe.request(Te(this._url,this._httpHeaders),Je):this._request=Oe.request(Te(this._url,this._httpHeaders),Je),this._request.on("error",Qe=>{this._storedError=Qe}),this._request.end()}}class ke extends Se{constructor(He){super(He);let Ue=decodeURIComponent(this._url.path);xe.test(this._url.href)&&(Ue=Ue.replace(/^\//,"")),Ie.lstat(Ue,(We,Je)=>{if(We){We.code==="ENOENT"&&(We=new Ce.MissingPDFException(`Missing PDF "${Ue}".`)),this._storedError=We,this._headersCapability.reject(We);return}this._contentLength=Je.size,this._setReadableStream(Ie.createReadStream(Ue)),this._headersCapability.resolve()})}}class De extends St{constructor(He,Ue,We){super(He);let Je=decodeURIComponent(this._url.path);xe.test(this._url.href)&&(Je=Je.replace(/^\//,"")),this._setReadableStream(Ie.createReadStream(Je,{start:Ue,end:We-1}))}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=_e,t.extractFilenameFromHeader=Oe,t.validateRangeRequestCapabilities=Fe,t.validateResponseStatus=xe;var Ce=r(1),Me=r(33),Ie=r(6);function Fe({getResponseHeader:Pe,isHttp:Ae,rangeChunkSize:Se,disableRange:St}){const Te={allowRangeRequests:!1,suggestedLength:void 0},Re=parseInt(Pe("Content-Length"),10);return!Number.isInteger(Re)||(Te.suggestedLength=Re,Re<=2*Se)||St||!Ae||Pe("Accept-Ranges")!=="bytes"||(Pe("Content-Encoding")||"identity")!=="identity"||(Te.allowRangeRequests=!0),Te}function Oe(Pe){const Ae=Pe("Content-Disposition");if(Ae){let Se=(0,Me.getFilenameFromContentDispositionHeader)(Ae);if(Se.includes("%"))try{Se=decodeURIComponent(Se)}catch{}if((0,Ie.isPdfFile)(Se))return Se}return null}function _e(Pe,Ae){return Pe===404||Pe===0&&Ae.startsWith("file:")?new Ce.MissingPDFException('Missing PDF "'+Ae+'".'):new Ce.UnexpectedResponseException(`Unexpected server response (${Pe}) while retrieving PDF "${Ae}".`,Pe)}function xe(Pe){return Pe===200||Pe===206}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=Me;var Ce=r(1);function Me(Ie){let Fe=!0,Oe=_e("filename\\*","i").exec(Ie);if(Oe){Oe=Oe[1];let Re=Se(Oe);return Re=unescape(Re),Re=St(Re),Re=Te(Re),Pe(Re)}if(Oe=Ae(Ie),Oe){const Re=Te(Oe);return Pe(Re)}if(Oe=_e("filename","i").exec(Ie),Oe){Oe=Oe[1];let Re=Se(Oe);return Re=Te(Re),Pe(Re)}function _e(Re,Ee){return new RegExp("(?:^|;)\\s*"+Re+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ee)}function xe(Re,Ee){if(Re){if(!/^[\x00-\xFF]+$/.test(Ee))return Ee;try{const ke=new TextDecoder(Re,{fatal:!0}),De=(0,Ce.stringToBytes)(Ee);Ee=ke.decode(De),Fe=!1}catch{}}return Ee}function Pe(Re){return Fe&&/[\x80-\xff]/.test(Re)&&(Re=xe("utf-8",Re),Fe&&(Re=xe("iso-8859-1",Re))),Re}function Ae(Re){const Ee=[];let ke;const De=_e("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(ke=De.exec(Re))!==null;){let[,He,Ue,We]=ke;if(He=parseInt(He,10),He in Ee){if(He===0)break;continue}Ee[He]=[Ue,We]}const Be=[];for(let He=0;He<Ee.length&&He in Ee;++He){let[Ue,We]=Ee[He];We=Se(We),Ue&&(We=unescape(We),He===0&&(We=St(We))),Be.push(We)}return Be.join("")}function Se(Re){if(Re.startsWith('"')){const Ee=Re.slice(1).split('\\"');for(let ke=0;ke<Ee.length;++ke){const De=Ee[ke].indexOf('"');De!==-1&&(Ee[ke]=Ee[ke].slice(0,De),Ee.length=ke+1),Ee[ke]=Ee[ke].replace(/\\(.)/g,"$1")}Re=Ee.join('"')}return Re}function St(Re){const Ee=Re.indexOf("'");if(Ee===-1)return Re;const ke=Re.slice(0,Ee),Be=Re.slice(Ee+1).replace(/^[^']*'/,"");return xe(ke,Be)}function Te(Re){return!Re.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Re)?Re:Re.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ee,ke,De,Be){if(De==="q"||De==="Q")return Be=Be.replace(/_/g," "),Be=Be.replace(/=([0-9a-fA-F]{2})/g,function(He,Ue){return String.fromCharCode(parseInt(Ue,16))}),xe(ke,Be);try{Be=atob(Be)}catch{}return xe(ke,Be)})}return""}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var Ce=r(1),Me=r(32);const Ie=200,Fe=206;function Oe(Se){const St=Se.response;return typeof St!="string"?St:(0,Ce.stringToBytes)(St).buffer}class _e{constructor(St,Te={}){this.url=St,this.isHttp=/^https?:/i.test(St),this.httpHeaders=this.isHttp&&Te.httpHeaders||Object.create(null),this.withCredentials=Te.withCredentials||!1,this.getXhr=Te.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(St,Te,Re){const Ee={begin:St,end:Te};for(const ke in Re)Ee[ke]=Re[ke];return this.request(Ee)}requestFull(St){return this.request(St)}request(St){const Te=this.getXhr(),Re=this.currXhrId++,Ee=this.pendingRequests[Re]={xhr:Te};Te.open("GET",this.url),Te.withCredentials=this.withCredentials;for(const ke in this.httpHeaders){const De=this.httpHeaders[ke];typeof De>"u"||Te.setRequestHeader(ke,De)}return this.isHttp&&"begin"in St&&"end"in St?(Te.setRequestHeader("Range",`bytes=${St.begin}-${St.end-1}`),Ee.expectedStatus=Fe):Ee.expectedStatus=Ie,Te.responseType="arraybuffer",St.onError&&(Te.onerror=function(ke){St.onError(Te.status)}),Te.onreadystatechange=this.onStateChange.bind(this,Re),Te.onprogress=this.onProgress.bind(this,Re),Ee.onHeadersReceived=St.onHeadersReceived,Ee.onDone=St.onDone,Ee.onError=St.onError,Ee.onProgress=St.onProgress,Te.send(null),Re}onProgress(St,Te){var Ee;const Re=this.pendingRequests[St];!Re||(Ee=Re.onProgress)==null||Ee.call(Re,Te)}onStateChange(St,Te){var He,Ue,We;const Re=this.pendingRequests[St];if(!Re)return;const Ee=Re.xhr;if(Ee.readyState>=2&&Re.onHeadersReceived&&(Re.onHeadersReceived(),delete Re.onHeadersReceived),Ee.readyState!==4||!(St in this.pendingRequests))return;if(delete this.pendingRequests[St],Ee.status===0&&this.isHttp){(He=Re.onError)==null||He.call(Re,Ee.status);return}const ke=Ee.status||Ie;if(!(ke===Ie&&Re.expectedStatus===Fe)&&ke!==Re.expectedStatus){(Ue=Re.onError)==null||Ue.call(Re,Ee.status);return}const Be=Oe(Ee);if(ke===Fe){const Je=Ee.getResponseHeader("Content-Range"),Qe=/bytes (\d+)-(\d+)\/(\d+)/.exec(Je);Re.onDone({begin:parseInt(Qe[1],10),chunk:Be})}else Be?Re.onDone({begin:0,chunk:Be}):(We=Re.onError)==null||We.call(Re,Ee.status)}getRequestXhr(St){return this.pendingRequests[St].xhr}isPendingRequest(St){return St in this.pendingRequests}abortRequest(St){const Te=this.pendingRequests[St].xhr;delete this.pendingRequests[St],Te.abort()}}class xe{constructor(St){this._source=St,this._manager=new _e(St.url,{httpHeaders:St.httpHeaders,withCredentials:St.withCredentials}),this._rangeChunkSize=St.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(St){const Te=this._rangeRequestReaders.indexOf(St);Te>=0&&this._rangeRequestReaders.splice(Te,1)}getFullReader(){return(0,Ce.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Pe(this._manager,this._source),this._fullRequestReader}getRangeReader(St,Te){const Re=new Ae(this._manager,St,Te);return Re.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(Re),Re}cancelAllRequests(St){var Te;(Te=this._fullRequestReader)==null||Te.cancel(St);for(const Re of this._rangeRequestReaders.slice(0))Re.cancel(St)}}t.PDFNetworkStream=xe;class Pe{constructor(St,Te){this._manager=St;const Re={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Te.url,this._fullRequestId=St.requestFull(Re),this._headersReceivedCapability=(0,Ce.createPromiseCapability)(),this._disableRange=Te.disableRange||!1,this._contentLength=Te.length,this._rangeChunkSize=Te.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const St=this._fullRequestId,Te=this._manager.getRequestXhr(St),Re=De=>Te.getResponseHeader(De),{allowRangeRequests:Ee,suggestedLength:ke}=(0,Me.validateRangeRequestCapabilities)({getResponseHeader:Re,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Ee&&(this._isRangeSupported=!0),this._contentLength=ke||this._contentLength,this._filename=(0,Me.extractFilenameFromHeader)(Re),this._isRangeSupported&&this._manager.abortRequest(St),this._headersReceivedCapability.resolve()}_onDone(St){if(St&&(this._requests.length>0?this._requests.shift().resolve({value:St.chunk,done:!1}):this._cachedChunks.push(St.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Te of this._requests)Te.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(St){this._storedError=(0,Me.createResponseStatusError)(St,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Te of this._requests)Te.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(St){var Te;(Te=this.onProgress)==null||Te.call(this,{loaded:St.loaded,total:St.lengthComputable?St.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const St=(0,Ce.createPromiseCapability)();return this._requests.push(St),St.promise}cancel(St){this._done=!0,this._headersReceivedCapability.reject(St);for(const Te of this._requests)Te.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ae{constructor(St,Te,Re){this._manager=St;const Ee={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=St.url,this._requestId=St.requestRange(Te,Re,Ee),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var St;(St=this.onClosed)==null||St.call(this,this)}_onDone(St){const Te=St.chunk;this._requests.length>0?this._requests.shift().resolve({value:Te,done:!1}):this._queuedChunk=Te,this._done=!0;for(const Re of this._requests)Re.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(St){this._storedError=(0,Me.createResponseStatusError)(St,this._url);for(const Te of this._requests)Te.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(St){var Te;this.isStreamingSupported||(Te=this.onProgress)==null||Te.call(this,{loaded:St.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Te=this._queuedChunk;return this._queuedChunk=null,{value:Te,done:!1}}if(this._done)return{value:void 0,done:!0};const St=(0,Ce.createPromiseCapability)();return this._requests.push(St),St.promise}cancel(St){this._done=!0;for(const Te of this._requests)Te.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var Ce=r(1),Me=r(32);function Ie(Pe,Ae,Se){return{method:"GET",headers:Pe,signal:Se.signal,mode:"cors",credentials:Ae?"include":"same-origin",redirect:"follow"}}function Fe(Pe){const Ae=new Headers;for(const Se in Pe){const St=Pe[Se];typeof St>"u"||Ae.append(Se,St)}return Ae}class Oe{constructor(Ae){this.source=Ae,this.isHttp=/^https?:/i.test(Ae.url),this.httpHeaders=this.isHttp&&Ae.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ae,Se;return(Se=(Ae=this._fullRequestReader)==null?void 0:Ae._loaded)!=null?Se:0}getFullReader(){return(0,Ce.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _e(this),this._fullRequestReader}getRangeReader(Ae,Se){if(Se<=this._progressiveDataLength)return null;const St=new xe(this,Ae,Se);return this._rangeRequestReaders.push(St),St}cancelAllRequests(Ae){var Se;(Se=this._fullRequestReader)==null||Se.cancel(Ae);for(const St of this._rangeRequestReaders.slice(0))St.cancel(Ae)}}t.PDFFetchStream=Oe;class _e{constructor(Ae){this._stream=Ae,this._reader=null,this._loaded=0,this._filename=null;const Se=Ae.source;this._withCredentials=Se.withCredentials||!1,this._contentLength=Se.length,this._headersCapability=(0,Ce.createPromiseCapability)(),this._disableRange=Se.disableRange||!1,this._rangeChunkSize=Se.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Se.disableStream,this._isRangeSupported=!Se.disableRange,this._headers=Fe(this._stream.httpHeaders);const St=Se.url;fetch(St,Ie(this._headers,this._withCredentials,this._abortController)).then(Te=>{if(!(0,Me.validateResponseStatus)(Te.status))throw(0,Me.createResponseStatusError)(Te.status,St);this._reader=Te.body.getReader(),this._headersCapability.resolve();const Re=De=>Te.headers.get(De),{allowRangeRequests:Ee,suggestedLength:ke}=(0,Me.validateRangeRequestCapabilities)({getResponseHeader:Re,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ee,this._contentLength=ke||this._contentLength,this._filename=(0,Me.extractFilenameFromHeader)(Re),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ce.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Te;await this._headersCapability.promise;const{value:Ae,done:Se}=await this._reader.read();return Se?{value:Ae,done:Se}:(this._loaded+=Ae.byteLength,(Te=this.onProgress)==null||Te.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ae).buffer,done:!1})}cancel(Ae){var Se;(Se=this._reader)==null||Se.cancel(Ae),this._abortController.abort()}}class xe{constructor(Ae,Se,St){this._stream=Ae,this._reader=null,this._loaded=0;const Te=Ae.source;this._withCredentials=Te.withCredentials||!1,this._readCapability=(0,Ce.createPromiseCapability)(),this._isStreamingSupported=!Te.disableStream,this._abortController=new AbortController,this._headers=Fe(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Se}-${St-1}`);const Re=Te.url;fetch(Re,Ie(this._headers,this._withCredentials,this._abortController)).then(Ee=>{if(!(0,Me.validateResponseStatus)(Ee.status))throw(0,Me.createResponseStatusError)(Ee.status,Re);this._readCapability.resolve(),this._reader=Ee.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Te;await this._readCapability.promise;const{value:Ae,done:Se}=await this._reader.read();return Se?{value:Ae,done:Se}:(this._loaded+=Ae.byteLength,(Te=this.onProgress)==null||Te.call(this,{loaded:this._loaded}),{value:new Uint8Array(Ae).buffer,done:!1})}cancel(Ae){var Se;(Se=this._reader)==null||Se.cancel(Ae),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Me.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Ie.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return Fe.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Oe.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return Ce.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return Ce.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return Ce.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return Pe.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return Ae.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return Ce.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return Ce.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return Ce.getXfaPageViewport}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return Ce.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return Ce.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return xe.renderTextLayer}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var t=__w_pdfjs_require__(1),r=__w_pdfjs_require__(2),Ce=__w_pdfjs_require__(6),Me=__w_pdfjs_require__(21),Ie=__w_pdfjs_require__(5),Fe=__w_pdfjs_require__(26),Oe=__w_pdfjs_require__(14),_e=__w_pdfjs_require__(12),xe=__w_pdfjs_require__(29),Pe=__w_pdfjs_require__(30),Ae=__w_pdfjs_require__(28);if(_e.isNodeJS){const{PDFNodeStream:Se}=__w_pdfjs_require__(31);(0,r.setPDFNetworkStreamFactory)(St=>new Se(St))}else{const{PDFNetworkStream:Se}=__w_pdfjs_require__(34),{PDFFetchStream:St}=__w_pdfjs_require__(35);(0,r.setPDFNetworkStreamFactory)(Te=>(0,Ce.isValidFetchUrl)(Te.url)?new St(Te):new Se(Te))}})(),__webpack_exports__})())})(pdf);var fabric={};(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.2.4"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var r=require$$2,Ce=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=Ce.document,t.jsdomImplForWrapper=require$$2.implForWrapper,t.nodeCanvas=require$$2.Canvas,t.window=Ce,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function Oe(St,Te){if(!!this.__eventListeners[St]){var Re=this.__eventListeners[St];Te?Re[Re.indexOf(Te)]=!1:t.util.array.fill(Re,!1)}}function _e(St,Te){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var Re in St)this.on(Re,St[Re]);else this.__eventListeners[St]||(this.__eventListeners[St]=[]),this.__eventListeners[St].push(Te);return this}function xe(St,Te){var Re=function(){Te.apply(this,arguments),this.off(St,Re)}.bind(this);this.on(St,Re)}function Pe(St,Te){if(arguments.length===1)for(var Re in St)xe.call(this,Re,St[Re]);else xe.call(this,St,Te);return this}function Ae(St,Te){if(!this.__eventListeners)return this;if(arguments.length===0)for(St in this.__eventListeners)Oe.call(this,St);else if(arguments.length===1&&typeof arguments[0]=="object")for(var Re in St)Oe.call(this,Re,St[Re]);else Oe.call(this,St,Te);return this}function Se(St,Te){if(!this.__eventListeners)return this;var Re=this.__eventListeners[St];if(!Re)return this;for(var Ee=0,ke=Re.length;Ee<ke;Ee++)Re[Ee]&&Re[Ee].call(this,Te||{});return this.__eventListeners[St]=Re.filter(function(De){return De!==!1}),this}t.Observable={fire:Se,on:_e,once:Pe,off:Ae}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var Oe=0,_e=arguments.length;Oe<_e;Oe++)this._onObjectAdded(arguments[Oe]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(Oe,_e,xe){var Pe=this._objects;return xe?Pe[_e]=Oe:Pe.splice(_e,0,Oe),this._onObjectAdded&&this._onObjectAdded(Oe),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var Oe=this._objects,_e,xe=!1,Pe=0,Ae=arguments.length;Pe<Ae;Pe++)_e=Oe.indexOf(arguments[Pe]),_e!==-1&&(xe=!0,Oe.splice(_e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[Pe]));return this.renderOnAddRemove&&xe&&this.requestRenderAll(),this},forEachObject:function(Oe,_e){for(var xe=this.getObjects(),Pe=0,Ae=xe.length;Pe<Ae;Pe++)Oe.call(_e,xe[Pe],Pe,xe);return this},getObjects:function(Oe){return typeof Oe>"u"?this._objects.concat():this._objects.filter(function(_e){return _e.type===Oe})},item:function(Oe){return this._objects[Oe]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(Oe,_e){return this._objects.indexOf(Oe)>-1?!0:_e?this._objects.some(function(xe){return typeof xe.contains=="function"&&xe.contains(Oe,!0)}):!1},complexity:function(){return this._objects.reduce(function(Oe,_e){return Oe+=_e.complexity?_e.complexity():0,Oe},0)}},t.CommonMethods={_setOptions:function(Oe){for(var _e in Oe)this.set(_e,Oe[_e])},_initGradient:function(Oe,_e){Oe&&Oe.colorStops&&!(Oe instanceof t.Gradient)&&this.set(_e,new t.Gradient(Oe))},_initPattern:function(Oe,_e,xe){Oe&&Oe.source&&!(Oe instanceof t.Pattern)?this.set(_e,new t.Pattern(Oe,xe)):xe&&xe()},_setObject:function(Oe){for(var _e in Oe)this._set(_e,Oe[_e])},set:function(Oe,_e){return typeof Oe=="object"?this._setObject(Oe):this._set(Oe,_e),this},_set:function(Oe,_e){this[Oe]=_e},toggle:function(Oe){var _e=this.get(Oe);return typeof _e=="boolean"&&this.set(Oe,!_e),this},get:function(Oe){return this[Oe]}},function(Oe){var _e=Math.sqrt,xe=Math.atan2,Pe=Math.pow,Ae=Math.PI/180,Se=Math.PI/2;t.util={cos:function(St){if(St===0)return 1;St<0&&(St=-St);var Te=St/Se;switch(Te){case 1:case 3:return 0;case 2:return-1}return Math.cos(St)},sin:function(St){if(St===0)return 0;var Te=St/Se,Re=1;switch(St<0&&(Re=-1),Te){case 1:return Re;case 2:return 0;case 3:return-Re}return Math.sin(St)},removeFromArray:function(St,Te){var Re=St.indexOf(Te);return Re!==-1&&St.splice(Re,1),St},getRandomInt:function(St,Te){return Math.floor(Math.random()*(Te-St+1))+St},degreesToRadians:function(St){return St*Ae},radiansToDegrees:function(St){return St/Ae},rotatePoint:function(St,Te,Re){var Ee=new t.Point(St.x-Te.x,St.y-Te.y),ke=t.util.rotateVector(Ee,Re);return new t.Point(ke.x,ke.y).addEquals(Te)},rotateVector:function(St,Te){var Re=t.util.sin(Te),Ee=t.util.cos(Te),ke=St.x*Ee-St.y*Re,De=St.x*Re+St.y*Ee;return{x:ke,y:De}},createVector:function(St,Te){return new t.Point(Te.x-St.x,Te.y-St.y)},calcAngleBetweenVectors:function(St,Te){return Math.acos((St.x*Te.x+St.y*Te.y)/(Math.hypot(St.x,St.y)*Math.hypot(Te.x,Te.y)))},getHatVector:function(St){return new t.Point(St.x,St.y).multiply(1/Math.hypot(St.x,St.y))},getBisector:function(St,Te,Re){var Ee=t.util.createVector(St,Te),ke=t.util.createVector(St,Re),De=t.util.calcAngleBetweenVectors(Ee,ke),Be=t.util.calcAngleBetweenVectors(t.util.rotateVector(Ee,De),ke),He=De*(Be===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(Ee,He)),angle:De}},projectStrokeOnPoints:function(St,Te,Re){var Ee=[],ke=Te.strokeWidth/2,De=Te.strokeUniform?new t.Point(1/Te.scaleX,1/Te.scaleY):new t.Point(1,1),Be=function(He){var Ue=ke/Math.hypot(He.x,He.y);return new t.Point(He.x*Ue*De.x,He.y*Ue*De.y)};return St.length<=1||St.forEach(function(He,Ue){var We=new t.Point(He.x,He.y),Je,Qe;Ue===0?(Qe=St[Ue+1],Je=Re?Be(t.util.createVector(Qe,We)).addEquals(We):St[St.length-1]):Ue===St.length-1?(Je=St[Ue-1],Qe=Re?Be(t.util.createVector(Je,We)).addEquals(We):St[0]):(Je=St[Ue-1],Qe=St[Ue+1]);var fi=t.util.getBisector(We,Je,Qe),oi=fi.vector,ii=fi.angle,li,bi;if(Te.strokeLineJoin==="miter"&&(li=-ke/Math.sin(ii/2),bi=new t.Point(oi.x*li*De.x,oi.y*li*De.y),Math.hypot(bi.x,bi.y)/ke<=Te.strokeMiterLimit)){Ee.push(We.add(bi)),Ee.push(We.subtract(bi));return}li=-ke*Math.SQRT2,bi=new t.Point(oi.x*li*De.x,oi.y*li*De.y),Ee.push(We.add(bi)),Ee.push(We.subtract(bi))}),Ee},transformPoint:function(St,Te,Re){return Re?new t.Point(Te[0]*St.x+Te[2]*St.y,Te[1]*St.x+Te[3]*St.y):new t.Point(Te[0]*St.x+Te[2]*St.y+Te[4],Te[1]*St.x+Te[3]*St.y+Te[5])},makeBoundingBoxFromPoints:function(St,Te){if(Te)for(var Re=0;Re<St.length;Re++)St[Re]=t.util.transformPoint(St[Re],Te);var Ee=[St[0].x,St[1].x,St[2].x,St[3].x],ke=t.util.array.min(Ee),De=t.util.array.max(Ee),Be=De-ke,He=[St[0].y,St[1].y,St[2].y,St[3].y],Ue=t.util.array.min(He),We=t.util.array.max(He),Je=We-Ue;return{left:ke,top:Ue,width:Be,height:Je}},invertTransform:function(St){var Te=1/(St[0]*St[3]-St[1]*St[2]),Re=[Te*St[3],-Te*St[1],-Te*St[2],Te*St[0]],Ee=t.util.transformPoint({x:St[4],y:St[5]},Re,!0);return Re[4]=-Ee.x,Re[5]=-Ee.y,Re},toFixed:function(St,Te){return parseFloat(Number(St).toFixed(Te))},parseUnit:function(St,Te){var Re=/\D{0,2}$/.exec(St),Ee=parseFloat(St);switch(Te||(Te=t.Text.DEFAULT_SVG_FONT_SIZE),Re[0]){case"mm":return Ee*t.DPI/25.4;case"cm":return Ee*t.DPI/2.54;case"in":return Ee*t.DPI;case"pt":return Ee*t.DPI/72;case"pc":return Ee*t.DPI/72*12;case"em":return Ee*Te;default:return Ee}},falseFunction:function(){return!1},getKlass:function(St,Te){return St=t.util.string.camelize(St.charAt(0).toUpperCase()+St.slice(1)),t.util.resolveNamespace(Te)[St]},getSvgAttributes:function(St){var Te=["instantiated_by_use","style","id","class"];switch(St){case"linearGradient":Te=Te.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":Te=Te.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":Te=Te.concat(["offset","stop-color","stop-opacity"]);break}return Te},resolveNamespace:function(St){if(!St)return t;var Te=St.split("."),Re=Te.length,Ee,ke=Oe||t.window;for(Ee=0;Ee<Re;++Ee)ke=ke[Te[Ee]];return ke},loadImage:function(St,Te,Re,Ee){if(!St){Te&&Te.call(Re,St);return}var ke=t.util.createImage(),De=function(){Te&&Te.call(Re,ke,!1),ke=ke.onload=ke.onerror=null};ke.onload=De,ke.onerror=function(){t.log("Error loading "+ke.src),Te&&Te.call(Re,null,!0),ke=ke.onload=ke.onerror=null},St.indexOf("data")!==0&&Ee!==void 0&&Ee!==null&&(ke.crossOrigin=Ee),St.substring(0,14)==="data:image/svg"&&(ke.onload=null,t.util.loadImageInDom(ke,De)),ke.src=St},loadImageInDom:function(St,Te){var Re=t.document.createElement("div");Re.style.width=Re.style.height="1px",Re.style.left=Re.style.top="-100%",Re.style.position="absolute",Re.appendChild(St),t.document.querySelector("body").appendChild(Re),St.onload=function(){Te(),Re.parentNode.removeChild(Re),Re=null}},enlivenObjects:function(St,Te,Re,Ee){St=St||[];var ke=[],De=0,Be=St.length;function He(){++De===Be&&Te&&Te(ke.filter(function(Ue){return Ue}))}if(!Be){Te&&Te(ke);return}St.forEach(function(Ue,We){if(!Ue||!Ue.type){He();return}var Je=t.util.getKlass(Ue.type,Re);Je.fromObject(Ue,function(Qe,fi){fi||(ke[We]=Qe),Ee&&Ee(Ue,Qe,fi),He()})})},enlivenObjectEnlivables:function(St,Te,Re){var Ee=t.Object.ENLIVEN_PROPS.filter(function(ke){return!!St[ke]});t.util.enlivenObjects(Ee.map(function(ke){return St[ke]}),function(ke){var De={};Ee.forEach(function(Be,He){De[Be]=ke[He],Te&&(Te[Be]=ke[He])}),Re&&Re(De)})},enlivenPatterns:function(St,Te){St=St||[];function Re(){++ke===De&&Te&&Te(Ee)}var Ee=[],ke=0,De=St.length;if(!De){Te&&Te(Ee);return}St.forEach(function(Be,He){Be&&Be.source?new t.Pattern(Be,function(Ue){Ee[He]=Ue,Re()}):(Ee[He]=Be,Re())})},groupSVGElements:function(St,Te,Re){var Ee;return St&&St.length===1?(typeof Re<"u"&&(St[0].sourcePath=Re),St[0]):(Te&&(Te.width&&Te.height?Te.centerPoint={x:Te.width/2,y:Te.height/2}:(delete Te.width,delete Te.height)),Ee=new t.Group(St,Te),typeof Re<"u"&&(Ee.sourcePath=Re),Ee)},populateWithProperties:function(St,Te,Re){if(Re&&Array.isArray(Re))for(var Ee=0,ke=Re.length;Ee<ke;Ee++)Re[Ee]in St&&(Te[Re[Ee]]=St[Re[Ee]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(St){var Te=t.util.createCanvasElement();return Te.width=St.width,Te.height=St.height,Te.getContext("2d").drawImage(St,0,0),Te},toDataURL:function(St,Te,Re){return St.toDataURL("image/"+Te,Re)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(St,Te,Re){return[St[0]*Te[0]+St[2]*Te[1],St[1]*Te[0]+St[3]*Te[1],St[0]*Te[2]+St[2]*Te[3],St[1]*Te[2]+St[3]*Te[3],Re?0:St[0]*Te[4]+St[2]*Te[5]+St[4],Re?0:St[1]*Te[4]+St[3]*Te[5]+St[5]]},qrDecompose:function(St){var Te=xe(St[1],St[0]),Re=Pe(St[0],2)+Pe(St[1],2),Ee=_e(Re),ke=(St[0]*St[3]-St[2]*St[1])/Ee,De=xe(St[0]*St[2]+St[1]*St[3],Re);return{angle:Te/Ae,scaleX:Ee,scaleY:ke,skewX:De/Ae,skewY:0,translateX:St[4],translateY:St[5]}},calcRotateMatrix:function(St){if(!St.angle)return t.iMatrix.concat();var Te=t.util.degreesToRadians(St.angle),Re=t.util.cos(Te),Ee=t.util.sin(Te);return[Re,Ee,-Ee,Re,0,0]},calcDimensionsMatrix:function(St){var Te=typeof St.scaleX>"u"?1:St.scaleX,Re=typeof St.scaleY>"u"?1:St.scaleY,Ee=[St.flipX?-Te:Te,0,0,St.flipY?-Re:Re,0,0],ke=t.util.multiplyTransformMatrices,De=t.util.degreesToRadians;return St.skewX&&(Ee=ke(Ee,[1,0,Math.tan(De(St.skewX)),1],!0)),St.skewY&&(Ee=ke(Ee,[1,Math.tan(De(St.skewY)),0,1],!0)),Ee},composeMatrix:function(St){var Te=[1,0,0,1,St.translateX||0,St.translateY||0],Re=t.util.multiplyTransformMatrices;return St.angle&&(Te=Re(Te,t.util.calcRotateMatrix(St))),(St.scaleX!==1||St.scaleY!==1||St.skewX||St.skewY||St.flipX||St.flipY)&&(Te=Re(Te,t.util.calcDimensionsMatrix(St))),Te},resetObjectTransform:function(St){St.scaleX=1,St.scaleY=1,St.skewX=0,St.skewY=0,St.flipX=!1,St.flipY=!1,St.rotate(0)},saveObjectTransform:function(St){return{scaleX:St.scaleX,scaleY:St.scaleY,skewX:St.skewX,skewY:St.skewY,angle:St.angle,left:St.left,flipX:St.flipX,flipY:St.flipY,top:St.top}},isTransparent:function(St,Te,Re,Ee){Ee>0&&(Te>Ee?Te-=Ee:Te=0,Re>Ee?Re-=Ee:Re=0);var ke=!0,De,Be,He=St.getImageData(Te,Re,Ee*2||1,Ee*2||1),Ue=He.data.length;for(De=3;De<Ue&&(Be=He.data[De],ke=Be<=0,ke!==!1);De+=4);return He=null,ke},parsePreserveAspectRatioAttribute:function(St){var Te="meet",Re="Mid",Ee="Mid",ke=St.split(" "),De;return ke&&ke.length&&(Te=ke.pop(),Te!=="meet"&&Te!=="slice"?(De=Te,Te="meet"):ke.length&&(De=ke.pop())),Re=De!=="none"?De.slice(1,4):"none",Ee=De!=="none"?De.slice(5,8):"none",{meetOrSlice:Te,alignX:Re,alignY:Ee}},clearFabricFontCache:function(St){St=(St||"").toLowerCase(),St?t.charWidthsCache[St]&&delete t.charWidthsCache[St]:t.charWidthsCache={}},limitDimsByArea:function(St,Te){var Re=Math.sqrt(Te*St),Ee=Math.floor(Te/Re);return{x:Math.floor(Re),y:Ee}},capValue:function(St,Te,Re){return Math.max(St,Math.min(Te,Re))},findScaleToFit:function(St,Te){return Math.min(Te.width/St.width,Te.height/St.height)},findScaleToCover:function(St,Te){return Math.max(Te.width/St.width,Te.height/St.height)},matrixToSVG:function(St){return"matrix("+St.map(function(Te){return t.util.toFixed(Te,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(St,Te){var Re=t.util.invertTransform(Te),Ee=t.util.multiplyTransformMatrices(Re,St.calcOwnMatrix());t.util.applyTransformToObject(St,Ee)},addTransformToObject:function(St,Te){t.util.applyTransformToObject(St,t.util.multiplyTransformMatrices(Te,St.calcOwnMatrix()))},applyTransformToObject:function(St,Te){var Re=t.util.qrDecompose(Te),Ee=new t.Point(Re.translateX,Re.translateY);St.flipX=!1,St.flipY=!1,St.set("scaleX",Re.scaleX),St.set("scaleY",Re.scaleY),St.skewX=Re.skewX,St.skewY=Re.skewY,St.angle=Re.angle,St.setPositionByOrigin(Ee,"center","center")},sizeAfterTransform:function(St,Te,Re){var Ee=St/2,ke=Te/2,De=[{x:-Ee,y:-ke},{x:Ee,y:-ke},{x:-Ee,y:ke},{x:Ee,y:ke}],Be=t.util.calcDimensionsMatrix(Re),He=t.util.makeBoundingBoxFromPoints(De,Be);return{x:He.width,y:He.height}},mergeClipPaths:function(St,Te){var Re=St,Ee=Te;Re.inverted&&!Ee.inverted&&(Re=Te,Ee=St),t.util.applyTransformToObject(Ee,t.util.multiplyTransformMatrices(t.util.invertTransform(Re.calcTransformMatrix()),Ee.calcTransformMatrix()));var ke=Re.inverted&&Ee.inverted;return ke&&(Re.inverted=Ee.inverted=!1),new t.Group([Re],{clipPath:Ee,inverted:ke})},hasStyleChanged:function(St,Te,Re){return Re=Re||!1,St.fill!==Te.fill||St.stroke!==Te.stroke||St.strokeWidth!==Te.strokeWidth||St.fontSize!==Te.fontSize||St.fontFamily!==Te.fontFamily||St.fontWeight!==Te.fontWeight||St.fontStyle!==Te.fontStyle||St.deltaY!==Te.deltaY||Re&&(St.overline!==Te.overline||St.underline!==Te.underline||St.linethrough!==Te.linethrough)},stylesToArray:function(Re,Te){for(var Re=t.util.object.clone(Re,!0),Ee=Te.split(`
`),ke=-1,De={},Be=[],He=0;He<Ee.length;He++){if(!Re[He]){ke+=Ee[He].length;continue}for(var Ue=0;Ue<Ee[He].length;Ue++){ke++;var We=Re[He][Ue];if(We){var Je=t.util.hasStyleChanged(De,We,!0);Je?Be.push({start:ke,end:ke+1,style:We}):Be[Be.length-1].end++}De=We||{}}}return Be},stylesFromArray:function(St,Te){if(!Array.isArray(St))return St;for(var Re=Te.split(`
`),Ee=-1,ke=0,De={},Be=0;Be<Re.length;Be++)for(var He=0;He<Re[Be].length;He++)Ee++,St[ke]&&St[ke].start<=Ee&&Ee<St[ke].end&&(De[Be]=De[Be]||{},De[Be][He]=Object.assign({},St[ke].style),Ee===St[ke].end-1&&ke++);return De}}}(e),function(){var Oe=Array.prototype.join,_e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},xe={m:"l",M:"L"};function Pe(ri,vi,Ci,$e,Ge,ze,qe,ei,ni,ci,di){var Ti=t.util.cos(ri),Ni=t.util.sin(ri),si=t.util.cos(vi),ai=t.util.sin(vi),Ye=Ci*Ge*si-$e*ze*ai+qe,Ze=$e*Ge*si+Ci*ze*ai+ei,Xe=ci+ni*(-Ci*Ge*Ni-$e*ze*Ti),ui=di+ni*(-$e*Ge*Ni+Ci*ze*Ti),pi=Ye+ni*(Ci*Ge*ai+$e*ze*si),gi=Ze+ni*($e*Ge*ai-Ci*ze*si);return["C",Xe,ui,pi,gi,Ye,Ze]}function Ae(ri,vi,Ci,$e,Ge,ze,qe){var ei=Math.PI,ni=qe*ei/180,ci=t.util.sin(ni),di=t.util.cos(ni),Ti=0,Ni=0;Ci=Math.abs(Ci),$e=Math.abs($e);var si=-di*ri*.5-ci*vi*.5,ai=-di*vi*.5+ci*ri*.5,Ye=Ci*Ci,Ze=$e*$e,Xe=ai*ai,ui=si*si,pi=Ye*Ze-Ye*Xe-Ze*ui,gi=0;if(pi<0){var Li=Math.sqrt(1-pi/(Ye*Ze));Ci*=Li,$e*=Li}else gi=(Ge===ze?-1:1)*Math.sqrt(pi/(Ye*Xe+Ze*ui));var Ri=gi*Ci*ai/$e,wi=-gi*$e*si/Ci,Vi=di*Ri-ci*wi+ri*.5,Mi=ci*Ri+di*wi+vi*.5,qi=Se(1,0,(si-Ri)/Ci,(ai-wi)/$e),Xi=Se((si-Ri)/Ci,(ai-wi)/$e,(-si-Ri)/Ci,(-ai-wi)/$e);ze===0&&Xi>0?Xi-=2*ei:ze===1&&Xi<0&&(Xi+=2*ei);for(var Zi=Math.ceil(Math.abs(Xi/ei*2)),ji=[],Ki=Xi/Zi,cn=8/3*Math.sin(Ki/4)*Math.sin(Ki/4)/Math.sin(Ki/2),rn=qi+Ki,xn=0;xn<Zi;xn++)ji[xn]=Pe(qi,rn,di,ci,Ci,$e,Vi,Mi,cn,Ti,Ni),Ti=ji[xn][5],Ni=ji[xn][6],qi=rn,rn+=Ki;return ji}function Se(ri,vi,Ci,$e){var Ge=Math.atan2(vi,ri),ze=Math.atan2($e,Ci);return ze>=Ge?ze-Ge:2*Math.PI-(Ge-ze)}function St(ri,vi,Ci,$e,Ge,ze,qe,ei){var ni;if(t.cachesBoundsOfCurve&&(ni=Oe.call(arguments),t.boundsOfCurveCache[ni]))return t.boundsOfCurveCache[ni];var ci=Math.sqrt,di=Math.min,Ti=Math.max,Ni=Math.abs,si=[],ai=[[],[]],Ye,Ze,Xe,ui,pi,gi,Li,Ri;Ze=6*ri-12*Ci+6*Ge,Ye=-3*ri+9*Ci-9*Ge+3*qe,Xe=3*Ci-3*ri;for(var wi=0;wi<2;++wi){if(wi>0&&(Ze=6*vi-12*$e+6*ze,Ye=-3*vi+9*$e-9*ze+3*ei,Xe=3*$e-3*vi),Ni(Ye)<1e-12){if(Ni(Ze)<1e-12)continue;ui=-Xe/Ze,0<ui&&ui<1&&si.push(ui);continue}Li=Ze*Ze-4*Xe*Ye,!(Li<0)&&(Ri=ci(Li),pi=(-Ze+Ri)/(2*Ye),0<pi&&pi<1&&si.push(pi),gi=(-Ze-Ri)/(2*Ye),0<gi&&gi<1&&si.push(gi))}for(var Vi,Mi,qi=si.length,Xi=qi,Zi;qi--;)ui=si[qi],Zi=1-ui,Vi=Zi*Zi*Zi*ri+3*Zi*Zi*ui*Ci+3*Zi*ui*ui*Ge+ui*ui*ui*qe,ai[0][qi]=Vi,Mi=Zi*Zi*Zi*vi+3*Zi*Zi*ui*$e+3*Zi*ui*ui*ze+ui*ui*ui*ei,ai[1][qi]=Mi;ai[0][Xi]=ri,ai[1][Xi]=vi,ai[0][Xi+1]=qe,ai[1][Xi+1]=ei;var ji=[{x:di.apply(null,ai[0]),y:di.apply(null,ai[1])},{x:Ti.apply(null,ai[0]),y:Ti.apply(null,ai[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[ni]=ji),ji}function Te(ri,vi,Ci){for(var $e=Ci[1],Ge=Ci[2],ze=Ci[3],qe=Ci[4],ei=Ci[5],ni=Ci[6],ci=Ci[7],di=Ae(ni-ri,ci-vi,$e,Ge,qe,ei,ze),Ti=0,Ni=di.length;Ti<Ni;Ti++)di[Ti][1]+=ri,di[Ti][2]+=vi,di[Ti][3]+=ri,di[Ti][4]+=vi,di[Ti][5]+=ri,di[Ti][6]+=vi;return di}function Re(ri){var vi=0,Ci=0,$e=ri.length,Ge=0,ze=0,qe,ei,ni,ci=[],di,Ti,Ni;for(ei=0;ei<$e;++ei){switch(ni=!1,qe=ri[ei].slice(0),qe[0]){case"l":qe[0]="L",qe[1]+=vi,qe[2]+=Ci;case"L":vi=qe[1],Ci=qe[2];break;case"h":qe[1]+=vi;case"H":qe[0]="L",qe[2]=Ci,vi=qe[1];break;case"v":qe[1]+=Ci;case"V":qe[0]="L",Ci=qe[1],qe[1]=vi,qe[2]=Ci;break;case"m":qe[0]="M",qe[1]+=vi,qe[2]+=Ci;case"M":vi=qe[1],Ci=qe[2],Ge=qe[1],ze=qe[2];break;case"c":qe[0]="C",qe[1]+=vi,qe[2]+=Ci,qe[3]+=vi,qe[4]+=Ci,qe[5]+=vi,qe[6]+=Ci;case"C":Ti=qe[3],Ni=qe[4],vi=qe[5],Ci=qe[6];break;case"s":qe[0]="S",qe[1]+=vi,qe[2]+=Ci,qe[3]+=vi,qe[4]+=Ci;case"S":di==="C"?(Ti=2*vi-Ti,Ni=2*Ci-Ni):(Ti=vi,Ni=Ci),vi=qe[3],Ci=qe[4],qe[0]="C",qe[5]=qe[3],qe[6]=qe[4],qe[3]=qe[1],qe[4]=qe[2],qe[1]=Ti,qe[2]=Ni,Ti=qe[3],Ni=qe[4];break;case"q":qe[0]="Q",qe[1]+=vi,qe[2]+=Ci,qe[3]+=vi,qe[4]+=Ci;case"Q":Ti=qe[1],Ni=qe[2],vi=qe[3],Ci=qe[4];break;case"t":qe[0]="T",qe[1]+=vi,qe[2]+=Ci;case"T":di==="Q"?(Ti=2*vi-Ti,Ni=2*Ci-Ni):(Ti=vi,Ni=Ci),qe[0]="Q",vi=qe[1],Ci=qe[2],qe[1]=Ti,qe[2]=Ni,qe[3]=vi,qe[4]=Ci;break;case"a":qe[0]="A",qe[6]+=vi,qe[7]+=Ci;case"A":ni=!0,ci=ci.concat(Te(vi,Ci,qe)),vi=qe[6],Ci=qe[7];break;case"z":case"Z":vi=Ge,Ci=ze;break}ni||ci.push(qe),di=qe[0]}return ci}function Ee(ri,vi,Ci,$e){return Math.sqrt((Ci-ri)*(Ci-ri)+($e-vi)*($e-vi))}function ke(ri){return ri*ri*ri}function De(ri){return 3*ri*ri*(1-ri)}function Be(ri){return 3*ri*(1-ri)*(1-ri)}function He(ri){return(1-ri)*(1-ri)*(1-ri)}function Ue(ri,vi,Ci,$e,Ge,ze,qe,ei){return function(ni){var ci=ke(ni),di=De(ni),Ti=Be(ni),Ni=He(ni);return{x:qe*ci+Ge*di+Ci*Ti+ri*Ni,y:ei*ci+ze*di+$e*Ti+vi*Ni}}}function We(ri,vi,Ci,$e,Ge,ze,qe,ei){return function(ni){var ci=1-ni,di=3*ci*ci*(Ci-ri)+6*ci*ni*(Ge-Ci)+3*ni*ni*(qe-Ge),Ti=3*ci*ci*($e-vi)+6*ci*ni*(ze-$e)+3*ni*ni*(ei-ze);return Math.atan2(Ti,di)}}function Je(ri){return ri*ri}function Qe(ri){return 2*ri*(1-ri)}function fi(ri){return(1-ri)*(1-ri)}function oi(ri,vi,Ci,$e,Ge,ze){return function(qe){var ei=Je(qe),ni=Qe(qe),ci=fi(qe);return{x:Ge*ei+Ci*ni+ri*ci,y:ze*ei+$e*ni+vi*ci}}}function ii(ri,vi,Ci,$e,Ge,ze){return function(qe){var ei=1-qe,ni=2*ei*(Ci-ri)+2*qe*(Ge-Ci),ci=2*ei*($e-vi)+2*qe*(ze-$e);return Math.atan2(ci,ni)}}function li(ri,vi,Ci){var $e={x:vi,y:Ci},Ge,ze=0,qe;for(qe=1;qe<=100;qe+=1)Ge=ri(qe/100),ze+=Ee($e.x,$e.y,Ge.x,Ge.y),$e=Ge;return ze}function bi(ri,vi){for(var Ci=0,$e=0,Ge=ri.iterator,ze={x:ri.x,y:ri.y},qe,ei,ni=.01,ci=ri.angleFinder,di;$e<vi&&ni>1e-4;)qe=Ge(Ci),di=Ci,ei=Ee(ze.x,ze.y,qe.x,qe.y),ei+$e>vi?(Ci-=ni,ni/=2):(ze=qe,Ci+=ni,$e+=ei);return qe.angle=ci(di),qe}function mi(ri){for(var vi=0,Ci=ri.length,$e,Ge=0,ze=0,qe=0,ei=0,ni=[],ci,di,Ti,Ni=0;Ni<Ci;Ni++){switch($e=ri[Ni],di={x:Ge,y:ze,command:$e[0]},$e[0]){case"M":di.length=0,qe=Ge=$e[1],ei=ze=$e[2];break;case"L":di.length=Ee(Ge,ze,$e[1],$e[2]),Ge=$e[1],ze=$e[2];break;case"C":ci=Ue(Ge,ze,$e[1],$e[2],$e[3],$e[4],$e[5],$e[6]),Ti=We(Ge,ze,$e[1],$e[2],$e[3],$e[4],$e[5],$e[6]),di.iterator=ci,di.angleFinder=Ti,di.length=li(ci,Ge,ze),Ge=$e[5],ze=$e[6];break;case"Q":ci=oi(Ge,ze,$e[1],$e[2],$e[3],$e[4]),Ti=ii(Ge,ze,$e[1],$e[2],$e[3],$e[4]),di.iterator=ci,di.angleFinder=Ti,di.length=li(ci,Ge,ze),Ge=$e[3],ze=$e[4];break;case"Z":case"z":di.destX=qe,di.destY=ei,di.length=Ee(Ge,ze,qe,ei),Ge=qe,ze=ei;break}vi+=di.length,ni.push(di)}return ni.push({length:vi,x:Ge,y:ze}),ni}function Si(ri,vi,Ci){Ci||(Ci=mi(ri));for(var $e=0;vi-Ci[$e].length>0&&$e<Ci.length-2;)vi-=Ci[$e].length,$e++;var Ge=Ci[$e],ze=vi/Ge.length,qe=Ge.command,ei=ri[$e],ni;switch(qe){case"M":return{x:Ge.x,y:Ge.y,angle:0};case"Z":case"z":return ni=new t.Point(Ge.x,Ge.y).lerp(new t.Point(Ge.destX,Ge.destY),ze),ni.angle=Math.atan2(Ge.destY-Ge.y,Ge.destX-Ge.x),ni;case"L":return ni=new t.Point(Ge.x,Ge.y).lerp(new t.Point(ei[1],ei[2]),ze),ni.angle=Math.atan2(ei[2]-Ge.y,ei[1]-Ge.x),ni;case"C":return bi(Ge,vi);case"Q":return bi(Ge,vi)}}function _i(ri){var vi=[],Ci=[],$e,Ge,ze=t.rePathCommand,qe="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ei="("+qe+")"+t.commaWsp,ni="([01])"+t.commaWsp+"?",ci=ei+"?"+ei+"?"+ei+ni+ni+ei+"?("+qe+")",di=new RegExp(ci,"g"),Ti,Ni,si;if(!ri||!ri.match)return vi;si=ri.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ai=0,Ye,Ze=si.length;ai<Ze;ai++){$e=si[ai],Ni=$e.slice(1).trim(),Ci.length=0;var Xe=$e.charAt(0);if(Ye=[Xe],Xe.toLowerCase()==="a")for(var ui;ui=di.exec(Ni);)for(var pi=1;pi<ui.length;pi++)Ci.push(ui[pi]);else for(;Ti=ze.exec(Ni);)Ci.push(Ti[0]);for(var pi=0,gi=Ci.length;pi<gi;pi++)Ge=parseFloat(Ci[pi]),isNaN(Ge)||Ye.push(Ge);var Li=_e[Xe.toLowerCase()],Ri=xe[Xe]||Xe;if(Ye.length-1>Li)for(var wi=1,Vi=Ye.length;wi<Vi;wi+=Li)vi.push([Xe].concat(Ye.slice(wi,wi+Li))),Xe=Ri;else vi.push(Ye)}return vi}function xi(ri,vi){var Ci=[],$e,Ge=new t.Point(ri[0].x,ri[0].y),ze=new t.Point(ri[1].x,ri[1].y),qe=ri.length,ei=1,ni=0,ci=qe>2;for(vi=vi||0,ci&&(ei=ri[2].x<ze.x?-1:ri[2].x===ze.x?0:1,ni=ri[2].y<ze.y?-1:ri[2].y===ze.y?0:1),Ci.push(["M",Ge.x-ei*vi,Ge.y-ni*vi]),$e=1;$e<qe;$e++){if(!Ge.eq(ze)){var di=Ge.midPointFrom(ze);Ci.push(["Q",Ge.x,Ge.y,di.x,di.y])}Ge=ri[$e],$e+1<ri.length&&(ze=ri[$e+1])}return ci&&(ei=Ge.x>ri[$e-2].x?1:Ge.x===ri[$e-2].x?0:-1,ni=Ge.y>ri[$e-2].y?1:Ge.y===ri[$e-2].y?0:-1),Ci.push(["L",Ge.x+ei*vi,Ge.y+ni*vi]),Ci}function Ei(ri,vi,Ci){return Ci&&(vi=t.util.multiplyTransformMatrices(vi,[1,0,0,1,-Ci.x,-Ci.y])),ri.map(function($e){for(var Ge=$e.slice(0),ze={},qe=1;qe<$e.length-1;qe+=2)ze.x=$e[qe],ze.y=$e[qe+1],ze=t.util.transformPoint(ze,vi),Ge[qe]=ze.x,Ge[qe+1]=ze.y;return Ge})}t.util.joinPath=function(ri){return ri.map(function(vi){return vi.join(" ")}).join(" ")},t.util.parsePath=_i,t.util.makePathSimpler=Re,t.util.getSmoothPathFromPoints=xi,t.util.getPathSegmentsInfo=mi,t.util.getBoundsOfCurve=St,t.util.getPointOnPath=Si,t.util.transformPath=Ei}(),function(){var Oe=Array.prototype.slice;function _e(St,Te){for(var Re=Oe.call(arguments,2),Ee=[],ke=0,De=St.length;ke<De;ke++)Ee[ke]=Re.length?St[ke][Te].apply(St[ke],Re):St[ke][Te].call(St[ke]);return Ee}function xe(St,Te){return Se(St,Te,function(Re,Ee){return Re>=Ee})}function Pe(St,Te){return Se(St,Te,function(Re,Ee){return Re<Ee})}function Ae(St,Te){for(var Re=St.length;Re--;)St[Re]=Te;return St}function Se(St,Te,Re){if(!(!St||St.length===0)){var Ee=St.length-1,ke=Te?St[Ee][Te]:St[Ee];if(Te)for(;Ee--;)Re(St[Ee][Te],ke)&&(ke=St[Ee][Te]);else for(;Ee--;)Re(St[Ee],ke)&&(ke=St[Ee]);return ke}}t.util.array={fill:Ae,invoke:_e,min:Pe,max:xe}}(),function(){function Oe(xe,Pe,Ae){if(Ae)if(!t.isLikelyNode&&Pe instanceof Element)xe=Pe;else if(Pe instanceof Array){xe=[];for(var Se=0,St=Pe.length;Se<St;Se++)xe[Se]=Oe({},Pe[Se],Ae)}else if(Pe&&typeof Pe=="object")for(var Te in Pe)Te==="canvas"||Te==="group"?xe[Te]=null:Pe.hasOwnProperty(Te)&&(xe[Te]=Oe({},Pe[Te],Ae));else xe=Pe;else for(var Te in Pe)xe[Te]=Pe[Te];return xe}function _e(xe,Pe){return Oe({},xe,Pe)}t.util.object={extend:Oe,clone:_e},t.util.object.extend(t.util,t.Observable)}(),function(){function Oe(Se){return Se.replace(/-+(.)?/g,function(St,Te){return Te?Te.toUpperCase():""})}function _e(Se,St){return Se.charAt(0).toUpperCase()+(St?Se.slice(1):Se.slice(1).toLowerCase())}function xe(Se){return Se.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pe(Se){var St=0,Te,Re=[];for(St=0,Te;St<Se.length;St++)(Te=Ae(Se,St))!==!1&&Re.push(Te);return Re}function Ae(Se,St){var Te=Se.charCodeAt(St);if(isNaN(Te))return"";if(Te<55296||Te>57343)return Se.charAt(St);if(55296<=Te&&Te<=56319){if(Se.length<=St+1)throw"High surrogate without following low surrogate";var Re=Se.charCodeAt(St+1);if(56320>Re||Re>57343)throw"High surrogate without following low surrogate";return Se.charAt(St)+Se.charAt(St+1)}if(St===0)throw"Low surrogate without preceding high surrogate";var Ee=Se.charCodeAt(St-1);if(55296>Ee||Ee>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:Oe,capitalize:_e,escapeXml:xe,graphemeSplit:Pe}}(),function(){var Oe=Array.prototype.slice,_e=function(){},xe=function(){for(var Te in{toString:1})if(Te==="toString")return!1;return!0}(),Pe=function(Te,Re,Ee){for(var ke in Re)ke in Te.prototype&&typeof Te.prototype[ke]=="function"&&(Re[ke]+"").indexOf("callSuper")>-1?Te.prototype[ke]=function(De){return function(){var Be=this.constructor.superclass;this.constructor.superclass=Ee;var He=Re[De].apply(this,arguments);if(this.constructor.superclass=Be,De!=="initialize")return He}}(ke):Te.prototype[ke]=Re[ke],xe&&(Re.toString!==Object.prototype.toString&&(Te.prototype.toString=Re.toString),Re.valueOf!==Object.prototype.valueOf&&(Te.prototype.valueOf=Re.valueOf))};function Ae(){}function Se(Te){for(var Re=null,Ee=this;Ee.constructor.superclass;){var ke=Ee.constructor.superclass.prototype[Te];if(Ee[Te]!==ke){Re=ke;break}Ee=Ee.constructor.superclass.prototype}return Re?arguments.length>1?Re.apply(this,Oe.call(arguments,1)):Re.call(this):console.log("tried to callSuper "+Te+", method not found in prototype chain",this)}function St(){var Te=null,Re=Oe.call(arguments,0);typeof Re[0]=="function"&&(Te=Re.shift());function Ee(){this.initialize.apply(this,arguments)}Ee.superclass=Te,Ee.subclasses=[],Te&&(Ae.prototype=Te.prototype,Ee.prototype=new Ae,Te.subclasses.push(Ee));for(var ke=0,De=Re.length;ke<De;ke++)Pe(Ee,Re[ke],Te);return Ee.prototype.initialize||(Ee.prototype.initialize=_e),Ee.prototype.constructor=Ee,Ee.prototype.callSuper=Se,Ee}t.util.createClass=St}(),function(){var Oe=!!t.document.createElement("div").attachEvent,_e=["touchstart","touchmove","touchend"];t.util.addListener=function(Pe,Ae,Se,St){Pe&&Pe.addEventListener(Ae,Se,Oe?!1:St)},t.util.removeListener=function(Pe,Ae,Se,St){Pe&&Pe.removeEventListener(Ae,Se,Oe?!1:St)};function xe(Pe){var Ae=Pe.changedTouches;return Ae&&Ae[0]?Ae[0]:Pe}t.util.getPointer=function(Pe){var Ae=Pe.target,Se=t.util.getScrollLeftTop(Ae),St=xe(Pe);return{x:St.clientX+Se.left,y:St.clientY+Se.top}},t.util.isTouchEvent=function(Pe){return _e.indexOf(Pe.type)>-1||Pe.pointerType==="touch"}}(),function(){function Oe(St,Te){var Re=St.style;if(!Re)return St;if(typeof Te=="string")return St.style.cssText+=";"+Te,Te.indexOf("opacity")>-1?Se(St,Te.match(/opacity:\s*(\d?\.?\d*)/)[1]):St;for(var Ee in Te)if(Ee==="opacity")Se(St,Te[Ee]);else{var ke=Ee==="float"||Ee==="cssFloat"?typeof Re.styleFloat>"u"?"cssFloat":"styleFloat":Ee;Re.setProperty(ke,Te[Ee])}return St}var _e=t.document.createElement("div"),xe=typeof _e.style.opacity=="string",Pe=typeof _e.style.filter=="string",Ae=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,Se=function(St){return St};xe?Se=function(St,Te){return St.style.opacity=Te,St}:Pe&&(Se=function(St,Te){var Re=St.style;return St.currentStyle&&!St.currentStyle.hasLayout&&(Re.zoom=1),Ae.test(Re.filter)?(Te=Te>=.9999?"":"alpha(opacity="+Te*100+")",Re.filter=Re.filter.replace(Ae,Te)):Re.filter+=" alpha(opacity="+Te*100+")",St}),t.util.setStyle=Oe}(),function(){var Oe=Array.prototype.slice;function _e(He){return typeof He=="string"?t.document.getElementById(He):He}var xe,Pe=function(He){return Oe.call(He,0)};try{xe=Pe(t.document.childNodes)instanceof Array}catch{}xe||(Pe=function(He){for(var Ue=new Array(He.length),We=He.length;We--;)Ue[We]=He[We];return Ue});function Ae(He,Ue){var We=t.document.createElement(He);for(var Je in Ue)Je==="class"?We.className=Ue[Je]:Je==="for"?We.htmlFor=Ue[Je]:We.setAttribute(Je,Ue[Je]);return We}function Se(He,Ue){He&&(" "+He.className+" ").indexOf(" "+Ue+" ")===-1&&(He.className+=(He.className?" ":"")+Ue)}function St(He,Ue,We){return typeof Ue=="string"&&(Ue=Ae(Ue,We)),He.parentNode&&He.parentNode.replaceChild(Ue,He),Ue.appendChild(He),Ue}function Te(He){for(var Ue=0,We=0,Je=t.document.documentElement,Qe=t.document.body||{scrollLeft:0,scrollTop:0};He&&(He.parentNode||He.host)&&(He=He.parentNode||He.host,He===t.document?(Ue=Qe.scrollLeft||Je.scrollLeft||0,We=Qe.scrollTop||Je.scrollTop||0):(Ue+=He.scrollLeft||0,We+=He.scrollTop||0),!(He.nodeType===1&&He.style.position==="fixed")););return{left:Ue,top:We}}function Re(He){var Ue,We=He&&He.ownerDocument,Je={left:0,top:0},Qe={left:0,top:0},fi,oi={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!We)return Qe;for(var ii in oi)Qe[oi[ii]]+=parseInt(Ee(He,ii),10)||0;return Ue=We.documentElement,typeof He.getBoundingClientRect<"u"&&(Je=He.getBoundingClientRect()),fi=Te(He),{left:Je.left+fi.left-(Ue.clientLeft||0)+Qe.left,top:Je.top+fi.top-(Ue.clientTop||0)+Qe.top}}var Ee;t.document.defaultView&&t.document.defaultView.getComputedStyle?Ee=function(He,Ue){var We=t.document.defaultView.getComputedStyle(He,null);return We?We[Ue]:void 0}:Ee=function(He,Ue){var We=He.style[Ue];return!We&&He.currentStyle&&(We=He.currentStyle[Ue]),We},function(){var He=t.document.documentElement.style,Ue="userSelect"in He?"userSelect":"MozUserSelect"in He?"MozUserSelect":"WebkitUserSelect"in He?"WebkitUserSelect":"KhtmlUserSelect"in He?"KhtmlUserSelect":"";function We(Qe){return typeof Qe.onselectstart<"u"&&(Qe.onselectstart=t.util.falseFunction),Ue?Qe.style[Ue]="none":typeof Qe.unselectable=="string"&&(Qe.unselectable="on"),Qe}function Je(Qe){return typeof Qe.onselectstart<"u"&&(Qe.onselectstart=null),Ue?Qe.style[Ue]="":typeof Qe.unselectable=="string"&&(Qe.unselectable=""),Qe}t.util.makeElementUnselectable=We,t.util.makeElementSelectable=Je}();function ke(He){var Ue=t.jsdomImplForWrapper(He);return Ue._canvas||Ue._image}function De(He){if(!!t.isLikelyNode){var Ue=t.jsdomImplForWrapper(He);Ue&&(Ue._image=null,Ue._canvas=null,Ue._currentSrc=null,Ue._attributes=null,Ue._classList=null)}}function Be(He,Ue){He.imageSmoothingEnabled=He.imageSmoothingEnabled||He.webkitImageSmoothingEnabled||He.mozImageSmoothingEnabled||He.msImageSmoothingEnabled||He.oImageSmoothingEnabled,He.imageSmoothingEnabled=Ue}t.util.setImageSmoothing=Be,t.util.getById=_e,t.util.toArray=Pe,t.util.addClass=Se,t.util.makeElement=Ae,t.util.wrapElement=St,t.util.getScrollLeftTop=Te,t.util.getElementOffset=Re,t.util.getNodeCanvas=ke,t.util.cleanUpJsdomNode=De}(),function(){function Oe(Pe,Ae){return Pe+(/\?/.test(Pe)?"&":"?")+Ae}function _e(){}function xe(Pe,Ae){Ae||(Ae={});var Se=Ae.method?Ae.method.toUpperCase():"GET",St=Ae.onComplete||function(){},Te=new t.window.XMLHttpRequest,Re=Ae.body||Ae.parameters;return Te.onreadystatechange=function(){Te.readyState===4&&(St(Te),Te.onreadystatechange=_e)},Se==="GET"&&(Re=null,typeof Ae.parameters=="string"&&(Pe=Oe(Pe,Ae.parameters))),Te.open(Se,Pe,!0),(Se==="POST"||Se==="PUT")&&Te.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Te.send(Re),Te}t.util.request=xe}(),t.log=console.log,t.warn=console.warn,function(){var Oe=t.util.object.extend,_e=t.util.object.clone,xe=[];t.util.object.extend(xe,{cancelAll:function(){var ke=this.splice(0);return ke.forEach(function(De){De.cancel()}),ke},cancelByCanvas:function(ke){if(!ke)return[];var De=this.filter(function(Be){return typeof Be.target=="object"&&Be.target.canvas===ke});return De.forEach(function(Be){Be.cancel()}),De},cancelByTarget:function(ke){var De=this.findAnimationsByTarget(ke);return De.forEach(function(Be){Be.cancel()}),De},findAnimationIndex:function(ke){return this.indexOf(this.findAnimation(ke))},findAnimation:function(ke){return this.find(function(De){return De.cancel===ke})},findAnimationsByTarget:function(ke){return ke?this.filter(function(De){return De.target===ke}):[]}});function Pe(){return!1}function Ae(ke,De,Be,He){return-Be*Math.cos(ke/He*(Math.PI/2))+Be+De}function Se(ke){ke||(ke={});var De=!1,Be,He=function(){var Ue=t.runningAnimations.indexOf(Be);return Ue>-1&&t.runningAnimations.splice(Ue,1)[0]};return Be=Oe(_e(ke),{cancel:function(){return De=!0,He()},currentValue:"startValue"in ke?ke.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(Be),Re(function(Ue){var We=Ue||+new Date,Je=ke.duration||500,Qe=We+Je,fi,oi=ke.onChange||Pe,ii=ke.abort||Pe,li=ke.onComplete||Pe,bi=ke.easing||Ae,mi="startValue"in ke?ke.startValue.length>0:!1,Si="startValue"in ke?ke.startValue:0,_i="endValue"in ke?ke.endValue:100,xi=ke.byValue||(mi?Si.map(function(Ei,ri){return _i[ri]-Si[ri]}):_i-Si);ke.onStart&&ke.onStart(),function Ei(ri){fi=ri||+new Date;var vi=fi>Qe?Je:fi-We,Ci=vi/Je,$e=mi?Si.map(function(ze,qe){return bi(vi,Si[qe],xi[qe],Je)}):bi(vi,Si,xi,Je),Ge=Math.abs(mi?($e[0]-Si[0])/xi[0]:($e-Si)/xi);if(Be.currentValue=mi?$e.slice():$e,Be.completionRate=Ge,Be.durationRate=Ci,!De){if(ii($e,Ge,Ci)){He();return}if(fi>Qe){Be.currentValue=mi?_i.slice():_i,Be.completionRate=1,Be.durationRate=1,oi(mi?_i.slice():_i,1,1),li(_i,1,1),He();return}else oi($e,Ge,Ci),Re(Ei)}}(We)}),Be.cancel}var St=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(ke){return t.window.setTimeout(ke,1e3/60)},Te=t.window.cancelAnimationFrame||t.window.clearTimeout;function Re(){return St.apply(t.window,arguments)}function Ee(){return Te.apply(t.window,arguments)}t.util.animate=Se,t.util.requestAnimFrame=Re,t.util.cancelAnimFrame=Ee,t.runningAnimations=xe}(),function(){function Oe(xe,Pe,Ae){var Se="rgba("+parseInt(xe[0]+Ae*(Pe[0]-xe[0]),10)+","+parseInt(xe[1]+Ae*(Pe[1]-xe[1]),10)+","+parseInt(xe[2]+Ae*(Pe[2]-xe[2]),10);return Se+=","+(xe&&Pe?parseFloat(xe[3]+Ae*(Pe[3]-xe[3])):1),Se+=")",Se}function _e(xe,Pe,Ae,Se){var St=new t.Color(xe).getSource(),Te=new t.Color(Pe).getSource(),Re=Se.onComplete,Ee=Se.onChange;return Se=Se||{},t.util.animate(t.util.object.extend(Se,{duration:Ae||500,startValue:St,endValue:Te,byValue:Te,easing:function(ke,De,Be,He){var Ue=Se.colorEasing?Se.colorEasing(ke,He):1-Math.cos(ke/He*(Math.PI/2));return Oe(De,Be,Ue)},onComplete:function(ke,De,Be){if(Re)return Re(Oe(Te,Te,0),De,Be)},onChange:function(ke,De,Be){if(Ee){if(Array.isArray(ke))return Ee(Oe(ke,ke,0),De,Be);Ee(ke,De,Be)}}}))}t.util.animateColor=_e}(),function(){function Oe(ri,vi,Ci,$e){return ri<Math.abs(vi)?(ri=vi,$e=Ci/4):vi===0&&ri===0?$e=Ci/(2*Math.PI)*Math.asin(1):$e=Ci/(2*Math.PI)*Math.asin(vi/ri),{a:ri,c:vi,p:Ci,s:$e}}function _e(ri,vi,Ci){return ri.a*Math.pow(2,10*(vi-=1))*Math.sin((vi*Ci-ri.s)*(2*Math.PI)/ri.p)}function xe(ri,vi,Ci,$e){return Ci*((ri=ri/$e-1)*ri*ri+1)+vi}function Pe(ri,vi,Ci,$e){return ri/=$e/2,ri<1?Ci/2*ri*ri*ri+vi:Ci/2*((ri-=2)*ri*ri+2)+vi}function Ae(ri,vi,Ci,$e){return Ci*(ri/=$e)*ri*ri*ri+vi}function Se(ri,vi,Ci,$e){return-Ci*((ri=ri/$e-1)*ri*ri*ri-1)+vi}function St(ri,vi,Ci,$e){return ri/=$e/2,ri<1?Ci/2*ri*ri*ri*ri+vi:-Ci/2*((ri-=2)*ri*ri*ri-2)+vi}function Te(ri,vi,Ci,$e){return Ci*(ri/=$e)*ri*ri*ri*ri+vi}function Re(ri,vi,Ci,$e){return Ci*((ri=ri/$e-1)*ri*ri*ri*ri+1)+vi}function Ee(ri,vi,Ci,$e){return ri/=$e/2,ri<1?Ci/2*ri*ri*ri*ri*ri+vi:Ci/2*((ri-=2)*ri*ri*ri*ri+2)+vi}function ke(ri,vi,Ci,$e){return-Ci*Math.cos(ri/$e*(Math.PI/2))+Ci+vi}function De(ri,vi,Ci,$e){return Ci*Math.sin(ri/$e*(Math.PI/2))+vi}function Be(ri,vi,Ci,$e){return-Ci/2*(Math.cos(Math.PI*ri/$e)-1)+vi}function He(ri,vi,Ci,$e){return ri===0?vi:Ci*Math.pow(2,10*(ri/$e-1))+vi}function Ue(ri,vi,Ci,$e){return ri===$e?vi+Ci:Ci*(-Math.pow(2,-10*ri/$e)+1)+vi}function We(ri,vi,Ci,$e){return ri===0?vi:ri===$e?vi+Ci:(ri/=$e/2,ri<1?Ci/2*Math.pow(2,10*(ri-1))+vi:Ci/2*(-Math.pow(2,-10*--ri)+2)+vi)}function Je(ri,vi,Ci,$e){return-Ci*(Math.sqrt(1-(ri/=$e)*ri)-1)+vi}function Qe(ri,vi,Ci,$e){return Ci*Math.sqrt(1-(ri=ri/$e-1)*ri)+vi}function fi(ri,vi,Ci,$e){return ri/=$e/2,ri<1?-Ci/2*(Math.sqrt(1-ri*ri)-1)+vi:Ci/2*(Math.sqrt(1-(ri-=2)*ri)+1)+vi}function oi(ri,vi,Ci,$e){var Ge=1.70158,ze=0,qe=Ci;if(ri===0)return vi;if(ri/=$e,ri===1)return vi+Ci;ze||(ze=$e*.3);var ei=Oe(qe,Ci,ze,Ge);return-_e(ei,ri,$e)+vi}function ii(ri,vi,Ci,$e){var Ge=1.70158,ze=0,qe=Ci;if(ri===0)return vi;if(ri/=$e,ri===1)return vi+Ci;ze||(ze=$e*.3);var ei=Oe(qe,Ci,ze,Ge);return ei.a*Math.pow(2,-10*ri)*Math.sin((ri*$e-ei.s)*(2*Math.PI)/ei.p)+ei.c+vi}function li(ri,vi,Ci,$e){var Ge=1.70158,ze=0,qe=Ci;if(ri===0)return vi;if(ri/=$e/2,ri===2)return vi+Ci;ze||(ze=$e*(.3*1.5));var ei=Oe(qe,Ci,ze,Ge);return ri<1?-.5*_e(ei,ri,$e)+vi:ei.a*Math.pow(2,-10*(ri-=1))*Math.sin((ri*$e-ei.s)*(2*Math.PI)/ei.p)*.5+ei.c+vi}function bi(ri,vi,Ci,$e,Ge){return Ge===void 0&&(Ge=1.70158),Ci*(ri/=$e)*ri*((Ge+1)*ri-Ge)+vi}function mi(ri,vi,Ci,$e,Ge){return Ge===void 0&&(Ge=1.70158),Ci*((ri=ri/$e-1)*ri*((Ge+1)*ri+Ge)+1)+vi}function Si(ri,vi,Ci,$e,Ge){return Ge===void 0&&(Ge=1.70158),ri/=$e/2,ri<1?Ci/2*(ri*ri*(((Ge*=1.525)+1)*ri-Ge))+vi:Ci/2*((ri-=2)*ri*(((Ge*=1.525)+1)*ri+Ge)+2)+vi}function _i(ri,vi,Ci,$e){return Ci-xi($e-ri,0,Ci,$e)+vi}function xi(ri,vi,Ci,$e){return(ri/=$e)<1/2.75?Ci*(7.5625*ri*ri)+vi:ri<2/2.75?Ci*(7.5625*(ri-=1.5/2.75)*ri+.75)+vi:ri<2.5/2.75?Ci*(7.5625*(ri-=2.25/2.75)*ri+.9375)+vi:Ci*(7.5625*(ri-=2.625/2.75)*ri+.984375)+vi}function Ei(ri,vi,Ci,$e){return ri<$e/2?_i(ri*2,0,Ci,$e)*.5+vi:xi(ri*2-$e,0,Ci,$e)*.5+Ci*.5+vi}t.util.ease={easeInQuad:function(ri,vi,Ci,$e){return Ci*(ri/=$e)*ri+vi},easeOutQuad:function(ri,vi,Ci,$e){return-Ci*(ri/=$e)*(ri-2)+vi},easeInOutQuad:function(ri,vi,Ci,$e){return ri/=$e/2,ri<1?Ci/2*ri*ri+vi:-Ci/2*(--ri*(ri-2)-1)+vi},easeInCubic:function(ri,vi,Ci,$e){return Ci*(ri/=$e)*ri*ri+vi},easeOutCubic:xe,easeInOutCubic:Pe,easeInQuart:Ae,easeOutQuart:Se,easeInOutQuart:St,easeInQuint:Te,easeOutQuint:Re,easeInOutQuint:Ee,easeInSine:ke,easeOutSine:De,easeInOutSine:Be,easeInExpo:He,easeOutExpo:Ue,easeInOutExpo:We,easeInCirc:Je,easeOutCirc:Qe,easeInOutCirc:fi,easeInElastic:oi,easeOutElastic:ii,easeInOutElastic:li,easeInBack:bi,easeOutBack:mi,easeInOutBack:Si,easeInBounce:_i,easeOutBounce:xi,easeInOutBounce:Ei}}(),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.util.object.clone,Ae=_e.util.toFixed,Se=_e.util.parseUnit,St=_e.util.multiplyTransformMatrices,Te=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],Re=["symbol","image","marker","pattern","view","svg"],Ee=["pattern","defs","symbol","metadata","clipPath","mask","desc"],ke=["symbol","g","a","svg","clipPath","defs"],De={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Be={stroke:"strokeOpacity",fill:"fillOpacity"},He="font-size",Ue="clip-path";_e.svgValidTagNamesRegEx=Qe(Te),_e.svgViewBoxElementsRegEx=Qe(Re),_e.svgInvalidAncestorsRegEx=Qe(Ee),_e.svgValidParentsRegEx=Qe(ke),_e.cssRules={},_e.gradientDefs={},_e.clipPaths={};function We(ze){return ze in De?De[ze]:ze}function Je(ze,qe,ei,ni){var ci=Array.isArray(qe),di;if((ze==="fill"||ze==="stroke")&&qe==="none")qe="";else{if(ze==="strokeUniform")return qe==="non-scaling-stroke";if(ze==="strokeDashArray")qe==="none"?qe=null:qe=qe.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(ze==="transformMatrix")ei&&ei.transformMatrix?qe=St(ei.transformMatrix,_e.parseTransformAttribute(qe)):qe=_e.parseTransformAttribute(qe);else if(ze==="visible")qe=qe!=="none"&&qe!=="hidden",ei&&ei.visible===!1&&(qe=!1);else if(ze==="opacity")qe=parseFloat(qe),ei&&typeof ei.opacity<"u"&&(qe*=ei.opacity);else if(ze==="textAnchor")qe=qe==="start"?"left":qe==="end"?"right":"center";else if(ze==="charSpacing")di=Se(qe,ni)/ni*1e3;else if(ze==="paintFirst"){var Ti=qe.indexOf("fill"),Ni=qe.indexOf("stroke"),qe="fill";(Ti>-1&&Ni>-1&&Ni<Ti||Ti===-1&&Ni>-1)&&(qe="stroke")}else{if(ze==="href"||ze==="xlink:href"||ze==="font")return qe;if(ze==="imageSmoothing")return qe==="optimizeQuality";di=ci?qe.map(Se):Se(qe,ni)}}return!ci&&isNaN(di)?qe:di}function Qe(ze){return new RegExp("^("+ze.join("|")+")\\b","i")}function fi(ze){for(var qe in Be)if(!(typeof ze[Be[qe]]>"u"||ze[qe]==="")){if(typeof ze[qe]>"u"){if(!_e.Object.prototype[qe])continue;ze[qe]=_e.Object.prototype[qe]}if(ze[qe].indexOf("url(")!==0){var ei=new _e.Color(ze[qe]);ze[qe]=ei.setAlpha(Ae(ei.getAlpha()*ze[Be[qe]],2)).toRgba()}}return ze}function oi(ze,qe){var ei,ni=[],ci,di,Ti;for(di=0,Ti=qe.length;di<Ti;di++)ei=qe[di],ci=ze.getElementsByTagName(ei),ni=ni.concat(Array.prototype.slice.call(ci));return ni}_e.parseTransformAttribute=function(){function ze(wi,Vi){var Mi=_e.util.cos(Vi[0]),qi=_e.util.sin(Vi[0]),Xi=0,Zi=0;Vi.length===3&&(Xi=Vi[1],Zi=Vi[2]),wi[0]=Mi,wi[1]=qi,wi[2]=-qi,wi[3]=Mi,wi[4]=Xi-(Mi*Xi-qi*Zi),wi[5]=Zi-(qi*Xi+Mi*Zi)}function qe(wi,Vi){var Mi=Vi[0],qi=Vi.length===2?Vi[1]:Vi[0];wi[0]=Mi,wi[3]=qi}function ei(wi,Vi,Mi){wi[Mi]=Math.tan(_e.util.degreesToRadians(Vi[0]))}function ni(wi,Vi){wi[4]=Vi[0],Vi.length===2&&(wi[5]=Vi[1])}var ci=_e.iMatrix,di=_e.reNum,Ti=_e.commaWsp,Ni="(?:(skewX)\\s*\\(\\s*("+di+")\\s*\\))",si="(?:(skewY)\\s*\\(\\s*("+di+")\\s*\\))",ai="(?:(rotate)\\s*\\(\\s*("+di+")(?:"+Ti+"("+di+")"+Ti+"("+di+"))?\\s*\\))",Ye="(?:(scale)\\s*\\(\\s*("+di+")(?:"+Ti+"("+di+"))?\\s*\\))",Ze="(?:(translate)\\s*\\(\\s*("+di+")(?:"+Ti+"("+di+"))?\\s*\\))",Xe="(?:(matrix)\\s*\\(\\s*("+di+")"+Ti+"("+di+")"+Ti+"("+di+")"+Ti+"("+di+")"+Ti+"("+di+")"+Ti+"("+di+")\\s*\\))",ui="(?:"+Xe+"|"+Ze+"|"+Ye+"|"+ai+"|"+Ni+"|"+si+")",pi="(?:"+ui+"(?:"+Ti+"*"+ui+")*)",gi="^\\s*(?:"+pi+"?)\\s*$",Li=new RegExp(gi),Ri=new RegExp(ui,"g");return function(wi){var Vi=ci.concat(),Mi=[];if(!wi||wi&&!Li.test(wi))return Vi;wi.replace(Ri,function(Xi){var Zi=new RegExp(ui).exec(Xi).filter(function(cn){return!!cn}),ji=Zi[1],Ki=Zi.slice(2).map(parseFloat);switch(ji){case"translate":ni(Vi,Ki);break;case"rotate":Ki[0]=_e.util.degreesToRadians(Ki[0]),ze(Vi,Ki);break;case"scale":qe(Vi,Ki);break;case"skewX":ei(Vi,Ki,2);break;case"skewY":ei(Vi,Ki,1);break;case"matrix":Vi=Ki;break}Mi.push(Vi.concat()),Vi=ci.concat()});for(var qi=Mi[0];Mi.length>1;)Mi.shift(),qi=_e.util.multiplyTransformMatrices(qi,Mi[0]);return qi}}();function ii(ze,qe){var ei,ni;ze.replace(/;\s*$/,"").split(";").forEach(function(ci){var di=ci.split(":");ei=di[0].trim().toLowerCase(),ni=di[1].trim(),qe[ei]=ni})}function li(ze,qe){var ei,ni;for(var ci in ze)typeof ze[ci]>"u"||(ei=ci.toLowerCase(),ni=ze[ci],qe[ei]=ni)}function bi(ze,qe){var ei={};for(var ni in _e.cssRules[qe])if(mi(ze,ni.split(" ")))for(var ci in _e.cssRules[qe][ni])ei[ci]=_e.cssRules[qe][ni][ci];return ei}function mi(ze,qe){var ei,ni=!0;return ei=_i(ze,qe.pop()),ei&&qe.length&&(ni=Si(ze,qe)),ei&&ni&&qe.length===0}function Si(ze,qe){for(var ei,ni=!0;ze.parentNode&&ze.parentNode.nodeType===1&&qe.length;)ni&&(ei=qe.pop()),ze=ze.parentNode,ni=_i(ze,ei);return qe.length===0}function _i(ze,qe){var ei=ze.nodeName,ni=ze.getAttribute("class"),ci=ze.getAttribute("id"),di,Ti;if(di=new RegExp("^"+ei,"i"),qe=qe.replace(di,""),ci&&qe.length&&(di=new RegExp("#"+ci+"(?![a-zA-Z\\-]+)","i"),qe=qe.replace(di,"")),ni&&qe.length)for(ni=ni.split(" "),Ti=ni.length;Ti--;)di=new RegExp("\\."+ni[Ti]+"(?![a-zA-Z\\-]+)","i"),qe=qe.replace(di,"");return qe.length===0}function xi(ze,qe){var ei;if(ze.getElementById&&(ei=ze.getElementById(qe)),ei)return ei;var ni,ci,di,Ti=ze.getElementsByTagName("*");for(ci=0,di=Ti.length;ci<di;ci++)if(ni=Ti[ci],qe===ni.getAttribute("id"))return ni}function Ei(ze){for(var qe=oi(ze,["use","svg:use"]),ei=0;qe.length&&ei<qe.length;){var ni=qe[ei],ci=ni.getAttribute("xlink:href")||ni.getAttribute("href");if(ci===null)return;var di=ci.slice(1),Ti=ni.getAttribute("x")||0,Ni=ni.getAttribute("y")||0,si=xi(ze,di).cloneNode(!0),ai=(si.getAttribute("transform")||"")+" translate("+Ti+", "+Ni+")",Ye,Ze=qe.length,Xe,ui,pi,gi,Li=_e.svgNS;if(vi(si),/^svg$/i.test(si.nodeName)){var Ri=si.ownerDocument.createElementNS(Li,"g");for(ui=0,pi=si.attributes,gi=pi.length;ui<gi;ui++)Xe=pi.item(ui),Ri.setAttributeNS(Li,Xe.nodeName,Xe.nodeValue);for(;si.firstChild;)Ri.appendChild(si.firstChild);si=Ri}for(ui=0,pi=ni.attributes,gi=pi.length;ui<gi;ui++)Xe=pi.item(ui),!(Xe.nodeName==="x"||Xe.nodeName==="y"||Xe.nodeName==="xlink:href"||Xe.nodeName==="href")&&(Xe.nodeName==="transform"?ai=Xe.nodeValue+" "+ai:si.setAttribute(Xe.nodeName,Xe.nodeValue));si.setAttribute("transform",ai),si.setAttribute("instantiated_by_use","1"),si.removeAttribute("id"),Ye=ni.parentNode,Ye.replaceChild(si,ni),qe.length===Ze&&ei++}}var ri=new RegExp("^\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*$");function vi(ze){if(!_e.svgViewBoxElementsRegEx.test(ze.nodeName))return{};var qe=ze.getAttribute("viewBox"),ei=1,ni=1,ci=0,di=0,Ti,Ni,si,ai,Ye=ze.getAttribute("width"),Ze=ze.getAttribute("height"),Xe=ze.getAttribute("x")||0,ui=ze.getAttribute("y")||0,pi=ze.getAttribute("preserveAspectRatio")||"",gi=!qe||!(qe=qe.match(ri)),Li=!Ye||!Ze||Ye==="100%"||Ze==="100%",Ri=gi&&Li,wi={},Vi="",Mi=0,qi=0;if(wi.width=0,wi.height=0,wi.toBeParsed=Ri,gi&&(Xe||ui)&&ze.parentNode&&ze.parentNode.nodeName!=="#document"&&(Vi=" translate("+Se(Xe)+" "+Se(ui)+") ",si=(ze.getAttribute("transform")||"")+Vi,ze.setAttribute("transform",si),ze.removeAttribute("x"),ze.removeAttribute("y")),Ri)return wi;if(gi)return wi.width=Se(Ye),wi.height=Se(Ze),wi;if(ci=-parseFloat(qe[1]),di=-parseFloat(qe[2]),Ti=parseFloat(qe[3]),Ni=parseFloat(qe[4]),wi.minX=ci,wi.minY=di,wi.viewBoxWidth=Ti,wi.viewBoxHeight=Ni,Li?(wi.width=Ti,wi.height=Ni):(wi.width=Se(Ye),wi.height=Se(Ze),ei=wi.width/Ti,ni=wi.height/Ni),pi=_e.util.parsePreserveAspectRatioAttribute(pi),pi.alignX!=="none"&&(pi.meetOrSlice==="meet"&&(ni=ei=ei>ni?ni:ei),pi.meetOrSlice==="slice"&&(ni=ei=ei>ni?ei:ni),Mi=wi.width-Ti*ei,qi=wi.height-Ni*ei,pi.alignX==="Mid"&&(Mi/=2),pi.alignY==="Mid"&&(qi/=2),pi.alignX==="Min"&&(Mi=0),pi.alignY==="Min"&&(qi=0)),ei===1&&ni===1&&ci===0&&di===0&&Xe===0&&ui===0)return wi;if((Xe||ui)&&ze.parentNode.nodeName!=="#document"&&(Vi=" translate("+Se(Xe)+" "+Se(ui)+") "),si=Vi+" matrix("+ei+" 0 0 "+ni+" "+(ci*ei+Mi)+" "+(di*ni+qi)+") ",ze.nodeName==="svg"){for(ai=ze.ownerDocument.createElementNS(_e.svgNS,"g");ze.firstChild;)ai.appendChild(ze.firstChild);ze.appendChild(ai)}else ai=ze,ai.removeAttribute("x"),ai.removeAttribute("y"),si=ai.getAttribute("transform")+si;return ai.setAttribute("transform",si),wi}function Ci(ze,qe){for(;ze&&(ze=ze.parentNode);)if(ze.nodeName&&qe.test(ze.nodeName.replace("svg:",""))&&!ze.getAttribute("instantiated_by_use"))return!0;return!1}_e.parseSVGDocument=function(ze,qe,ei,ni){if(!!ze){Ei(ze);var ci=_e.Object.__uid++,di,Ti,Ni=vi(ze),si=_e.util.toArray(ze.getElementsByTagName("*"));if(Ni.crossOrigin=ni&&ni.crossOrigin,Ni.svgUid=ci,si.length===0&&_e.isLikelyNode){si=ze.selectNodes('//*[name(.)!="svg"]');var ai=[];for(di=0,Ti=si.length;di<Ti;di++)ai[di]=si[di];si=ai}var Ye=si.filter(function(Xe){return vi(Xe),_e.svgValidTagNamesRegEx.test(Xe.nodeName.replace("svg:",""))&&!Ci(Xe,_e.svgInvalidAncestorsRegEx)});if(!Ye||Ye&&!Ye.length){qe&&qe([],{});return}var Ze={};si.filter(function(Xe){return Xe.nodeName.replace("svg:","")==="clipPath"}).forEach(function(Xe){var ui=Xe.getAttribute("id");Ze[ui]=_e.util.toArray(Xe.getElementsByTagName("*")).filter(function(pi){return _e.svgValidTagNamesRegEx.test(pi.nodeName.replace("svg:",""))})}),_e.gradientDefs[ci]=_e.getGradientDefs(ze),_e.cssRules[ci]=_e.getCSSRules(ze),_e.clipPaths[ci]=Ze,_e.parseElements(Ye,function(Xe,ui){qe&&(qe(Xe,Ni,ui,si),delete _e.gradientDefs[ci],delete _e.cssRules[ci],delete _e.clipPaths[ci])},Pe(Ni),ei,ni)}};function $e(ze,qe){var ei=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],ni="xlink:href",ci=qe.getAttribute(ni).slice(1),di=xi(ze,ci);if(di&&di.getAttribute(ni)&&$e(ze,di),ei.forEach(function(Ni){di&&!qe.hasAttribute(Ni)&&di.hasAttribute(Ni)&&qe.setAttribute(Ni,di.getAttribute(Ni))}),!qe.children.length)for(var Ti=di.cloneNode(!0);Ti.firstChild;)qe.appendChild(Ti.firstChild);qe.removeAttribute(ni)}var Ge=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+_e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+_e.reNum+"))?\\s+(.*)");xe(_e,{parseFontDeclaration:function(ze,qe){var ei=ze.match(Ge);if(!!ei){var ni=ei[1],ci=ei[3],di=ei[4],Ti=ei[5],Ni=ei[6];ni&&(qe.fontStyle=ni),ci&&(qe.fontWeight=isNaN(parseFloat(ci))?ci:parseFloat(ci)),di&&(qe.fontSize=Se(di)),Ni&&(qe.fontFamily=Ni),Ti&&(qe.lineHeight=Ti==="normal"?1:Ti)}},getGradientDefs:function(ze){var qe=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],ei=oi(ze,qe),ni,ci=0,di={};for(ci=ei.length;ci--;)ni=ei[ci],ni.getAttribute("xlink:href")&&$e(ze,ni),di[ni.getAttribute("id")]=ni;return di},parseAttributes:function(ze,qe,ei){if(!!ze){var ni,ci={},di,Ti;typeof ei>"u"&&(ei=ze.getAttribute("svgUid")),ze.parentNode&&_e.svgValidParentsRegEx.test(ze.parentNode.nodeName)&&(ci=_e.parseAttributes(ze.parentNode,qe,ei));var Ni=qe.reduce(function(pi,gi){return ni=ze.getAttribute(gi),ni&&(pi[gi]=ni),pi},{}),si=xe(bi(ze,ei),_e.parseStyleAttribute(ze));Ni=xe(Ni,si),si[Ue]&&ze.setAttribute(Ue,si[Ue]),di=Ti=ci.fontSize||_e.Text.DEFAULT_SVG_FONT_SIZE,Ni[He]&&(Ni[He]=di=Se(Ni[He],Ti));var ai,Ye,Ze={};for(var Xe in Ni)ai=We(Xe),Ye=Je(ai,Ni[Xe],ci,di),Ze[ai]=Ye;Ze&&Ze.font&&_e.parseFontDeclaration(Ze.font,Ze);var ui=xe(ci,Ze);return _e.svgValidParentsRegEx.test(ze.nodeName)?ui:fi(ui)}},parseElements:function(ze,qe,ei,ni,ci){new _e.ElementsParser(ze,qe,ei,ni,ci).parse()},parseStyleAttribute:function(ze){var qe={},ei=ze.getAttribute("style");return ei&&(typeof ei=="string"?ii(ei,qe):li(ei,qe)),qe},parsePointsAttribute:function(ze){if(!ze)return null;ze=ze.replace(/,/g," ").trim(),ze=ze.split(/\s+/);var qe=[],ei,ni;for(ei=0,ni=ze.length;ei<ni;ei+=2)qe.push({x:parseFloat(ze[ei]),y:parseFloat(ze[ei+1])});return qe},getCSSRules:function(ze){var qe=ze.getElementsByTagName("style"),ei,ni,ci={},di;for(ei=0,ni=qe.length;ei<ni;ei++){var Ti=qe[ei].textContent;Ti=Ti.replace(/\/\*[\s\S]*?\*\//g,""),Ti.trim()!==""&&(di=Ti.split("}"),di=di.filter(function(Ni){return Ni.trim()}),di.forEach(function(Ni){var si=Ni.split("{"),ai={},Ye=si[1].trim(),Ze=Ye.split(";").filter(function(gi){return gi.trim()});for(ei=0,ni=Ze.length;ei<ni;ei++){var Xe=Ze[ei].split(":"),ui=Xe[0].trim(),pi=Xe[1].trim();ai[ui]=pi}Ni=si[0].trim(),Ni.split(",").forEach(function(gi){gi=gi.replace(/^svg/i,"").trim(),gi!==""&&(ci[gi]?_e.util.object.extend(ci[gi],ai):ci[gi]=_e.util.object.clone(ai))})}))}return ci},loadSVGFromURL:function(ze,qe,ei,ni){ze=ze.replace(/^\n\s*/,"").trim(),new _e.util.request(ze,{method:"get",onComplete:ci});function ci(di){var Ti=di.responseXML;if(!Ti||!Ti.documentElement)return qe&&qe(null),!1;_e.parseSVGDocument(Ti.documentElement,function(Ni,si,ai,Ye){qe&&qe(Ni,si,ai,Ye)},ei,ni)}},loadSVGFromString:function(ze,qe,ei,ni){var ci=new _e.window.DOMParser,di=ci.parseFromString(ze.trim(),"text/xml");_e.parseSVGDocument(di.documentElement,function(Ti,Ni,si,ai){qe(Ti,Ni,si,ai)},ei,ni)}})}(e),t.ElementsParser=function(Oe,_e,xe,Pe,Ae,Se){this.elements=Oe,this.callback=_e,this.options=xe,this.reviver=Pe,this.svgUid=xe&&xe.svgUid||0,this.parsingOptions=Ae,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=Se},function(Oe){Oe.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},Oe.createObjects=function(){var _e=this;this.elements.forEach(function(xe,Pe){xe.setAttribute("svgUid",_e.svgUid),_e.createObject(xe,Pe)})},Oe.findTag=function(_e){return t[t.util.string.capitalize(_e.tagName.replace("svg:",""))]},Oe.createObject=function(_e,xe){var Pe=this.findTag(_e);if(Pe&&Pe.fromElement)try{Pe.fromElement(_e,this.createCallback(xe,_e),this.options)}catch(Ae){t.log(Ae)}else this.checkIfDone()},Oe.createCallback=function(_e,xe){var Pe=this;return function(Ae){var Se;Pe.resolveGradient(Ae,xe,"fill"),Pe.resolveGradient(Ae,xe,"stroke"),Ae instanceof t.Image&&Ae._originalElement&&(Se=Ae.parsePreserveAspectRatioAttribute(xe)),Ae._removeTransformMatrix(Se),Pe.resolveClipPath(Ae,xe),Pe.reviver&&Pe.reviver(xe,Ae),Pe.instances[_e]=Ae,Pe.checkIfDone()}},Oe.extractPropertyDefinition=function(_e,xe,Pe){var Ae=_e[xe],Se=this.regexUrl;if(!!Se.test(Ae)){Se.lastIndex=0;var St=Se.exec(Ae)[1];return Se.lastIndex=0,t[Pe][this.svgUid][St]}},Oe.resolveGradient=function(_e,xe,Pe){var Ae=this.extractPropertyDefinition(_e,Pe,"gradientDefs");if(Ae){var Se=xe.getAttribute(Pe+"-opacity"),St=t.Gradient.fromElement(Ae,_e,Se,this.options);_e.set(Pe,St)}},Oe.createClipPathCallback=function(_e,xe){return function(Pe){Pe._removeTransformMatrix(),Pe.fillRule=Pe.clipRule,xe.push(Pe)}},Oe.resolveClipPath=function(_e,xe){var Pe=this.extractPropertyDefinition(_e,"clipPath","clipPaths"),Ae,Se,St,Te,Re,Ee;if(Pe){Te=[],St=t.util.invertTransform(_e.calcTransformMatrix());for(var ke=Pe[0].parentNode,De=xe;De.parentNode&&De.getAttribute("clip-path")!==_e.clipPath;)De=De.parentNode;De.parentNode.appendChild(ke);for(var Be=0;Be<Pe.length;Be++)Ae=Pe[Be],Se=this.findTag(Ae),Se.fromElement(Ae,this.createClipPathCallback(_e,Te),this.options);Te.length===1?Pe=Te[0]:Pe=new t.Group(Te),Re=t.util.multiplyTransformMatrices(St,Pe.calcTransformMatrix()),Pe.clipPath&&this.resolveClipPath(Pe,De);var Ee=t.util.qrDecompose(Re);Pe.flipX=!1,Pe.flipY=!1,Pe.set("scaleX",Ee.scaleX),Pe.set("scaleY",Ee.scaleY),Pe.angle=Ee.angle,Pe.skewX=Ee.skewX,Pe.skewY=0,Pe.setPositionByOrigin({x:Ee.translateX,y:Ee.translateY},"center","center"),_e.clipPath=Pe}else delete _e.clipPath},Oe.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(_e){return _e!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(Oe){var _e=Oe.fabric||(Oe.fabric={});if(_e.Point){_e.warn("fabric.Point is already defined");return}_e.Point=xe;function xe(Pe,Ae){this.x=Pe,this.y=Ae}xe.prototype={type:"point",constructor:xe,add:function(Pe){return new xe(this.x+Pe.x,this.y+Pe.y)},addEquals:function(Pe){return this.x+=Pe.x,this.y+=Pe.y,this},scalarAdd:function(Pe){return new xe(this.x+Pe,this.y+Pe)},scalarAddEquals:function(Pe){return this.x+=Pe,this.y+=Pe,this},subtract:function(Pe){return new xe(this.x-Pe.x,this.y-Pe.y)},subtractEquals:function(Pe){return this.x-=Pe.x,this.y-=Pe.y,this},scalarSubtract:function(Pe){return new xe(this.x-Pe,this.y-Pe)},scalarSubtractEquals:function(Pe){return this.x-=Pe,this.y-=Pe,this},multiply:function(Pe){return new xe(this.x*Pe,this.y*Pe)},multiplyEquals:function(Pe){return this.x*=Pe,this.y*=Pe,this},divide:function(Pe){return new xe(this.x/Pe,this.y/Pe)},divideEquals:function(Pe){return this.x/=Pe,this.y/=Pe,this},eq:function(Pe){return this.x===Pe.x&&this.y===Pe.y},lt:function(Pe){return this.x<Pe.x&&this.y<Pe.y},lte:function(Pe){return this.x<=Pe.x&&this.y<=Pe.y},gt:function(Pe){return this.x>Pe.x&&this.y>Pe.y},gte:function(Pe){return this.x>=Pe.x&&this.y>=Pe.y},lerp:function(Pe,Ae){return typeof Ae>"u"&&(Ae=.5),Ae=Math.max(Math.min(1,Ae),0),new xe(this.x+(Pe.x-this.x)*Ae,this.y+(Pe.y-this.y)*Ae)},distanceFrom:function(Pe){var Ae=this.x-Pe.x,Se=this.y-Pe.y;return Math.sqrt(Ae*Ae+Se*Se)},midPointFrom:function(Pe){return this.lerp(Pe)},min:function(Pe){return new xe(Math.min(this.x,Pe.x),Math.min(this.y,Pe.y))},max:function(Pe){return new xe(Math.max(this.x,Pe.x),Math.max(this.y,Pe.y))},toString:function(){return this.x+","+this.y},setXY:function(Pe,Ae){return this.x=Pe,this.y=Ae,this},setX:function(Pe){return this.x=Pe,this},setY:function(Pe){return this.y=Pe,this},setFromPoint:function(Pe){return this.x=Pe.x,this.y=Pe.y,this},swap:function(Pe){var Ae=this.x,Se=this.y;this.x=Pe.x,this.y=Pe.y,Pe.x=Ae,Pe.y=Se},clone:function(){return new xe(this.x,this.y)}}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={});if(_e.Intersection){_e.warn("fabric.Intersection is already defined");return}function xe(Pe){this.status=Pe,this.points=[]}_e.Intersection=xe,_e.Intersection.prototype={constructor:xe,appendPoint:function(Pe){return this.points.push(Pe),this},appendPoints:function(Pe){return this.points=this.points.concat(Pe),this}},_e.Intersection.intersectLineLine=function(Pe,Ae,Se,St){var Te,Re=(St.x-Se.x)*(Pe.y-Se.y)-(St.y-Se.y)*(Pe.x-Se.x),Ee=(Ae.x-Pe.x)*(Pe.y-Se.y)-(Ae.y-Pe.y)*(Pe.x-Se.x),ke=(St.y-Se.y)*(Ae.x-Pe.x)-(St.x-Se.x)*(Ae.y-Pe.y);if(ke!==0){var De=Re/ke,Be=Ee/ke;0<=De&&De<=1&&0<=Be&&Be<=1?(Te=new xe("Intersection"),Te.appendPoint(new _e.Point(Pe.x+De*(Ae.x-Pe.x),Pe.y+De*(Ae.y-Pe.y)))):Te=new xe}else Re===0||Ee===0?Te=new xe("Coincident"):Te=new xe("Parallel");return Te},_e.Intersection.intersectLinePolygon=function(Pe,Ae,Se){var St=new xe,Te=Se.length,Re,Ee,ke,De;for(De=0;De<Te;De++)Re=Se[De],Ee=Se[(De+1)%Te],ke=xe.intersectLineLine(Pe,Ae,Re,Ee),St.appendPoints(ke.points);return St.points.length>0&&(St.status="Intersection"),St},_e.Intersection.intersectPolygonPolygon=function(Pe,Ae){var Se=new xe,St=Pe.length,Te;for(Te=0;Te<St;Te++){var Re=Pe[Te],Ee=Pe[(Te+1)%St],ke=xe.intersectLinePolygon(Re,Ee,Ae);Se.appendPoints(ke.points)}return Se.points.length>0&&(Se.status="Intersection"),Se},_e.Intersection.intersectPolygonRectangle=function(Pe,Ae,Se){var St=Ae.min(Se),Te=Ae.max(Se),Re=new _e.Point(Te.x,St.y),Ee=new _e.Point(St.x,Te.y),ke=xe.intersectLinePolygon(St,Re,Pe),De=xe.intersectLinePolygon(Re,Te,Pe),Be=xe.intersectLinePolygon(Te,Ee,Pe),He=xe.intersectLinePolygon(Ee,St,Pe),Ue=new xe;return Ue.appendPoints(ke.points),Ue.appendPoints(De.points),Ue.appendPoints(Be.points),Ue.appendPoints(He.points),Ue.points.length>0&&(Ue.status="Intersection"),Ue}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={});if(_e.Color){_e.warn("fabric.Color is already defined.");return}function xe(Ae){Ae?this._tryParsingColor(Ae):this.setSource([0,0,0,1])}_e.Color=xe,_e.Color.prototype={_tryParsingColor:function(Ae){var Se;Ae in xe.colorNameMap&&(Ae=xe.colorNameMap[Ae]),Ae==="transparent"&&(Se=[255,255,255,0]),Se||(Se=xe.sourceFromHex(Ae)),Se||(Se=xe.sourceFromRgb(Ae)),Se||(Se=xe.sourceFromHsl(Ae)),Se||(Se=[0,0,0,1]),Se&&this.setSource(Se)},_rgbToHsl:function(Ae,Se,St){Ae/=255,Se/=255,St/=255;var Te,Re,Ee,ke=_e.util.array.max([Ae,Se,St]),De=_e.util.array.min([Ae,Se,St]);if(Ee=(ke+De)/2,ke===De)Te=Re=0;else{var Be=ke-De;switch(Re=Ee>.5?Be/(2-ke-De):Be/(ke+De),ke){case Ae:Te=(Se-St)/Be+(Se<St?6:0);break;case Se:Te=(St-Ae)/Be+2;break;case St:Te=(Ae-Se)/Be+4;break}Te/=6}return[Math.round(Te*360),Math.round(Re*100),Math.round(Ee*100)]},getSource:function(){return this._source},setSource:function(Ae){this._source=Ae},toRgb:function(){var Ae=this.getSource();return"rgb("+Ae[0]+","+Ae[1]+","+Ae[2]+")"},toRgba:function(){var Ae=this.getSource();return"rgba("+Ae[0]+","+Ae[1]+","+Ae[2]+","+Ae[3]+")"},toHsl:function(){var Ae=this.getSource(),Se=this._rgbToHsl(Ae[0],Ae[1],Ae[2]);return"hsl("+Se[0]+","+Se[1]+"%,"+Se[2]+"%)"},toHsla:function(){var Ae=this.getSource(),Se=this._rgbToHsl(Ae[0],Ae[1],Ae[2]);return"hsla("+Se[0]+","+Se[1]+"%,"+Se[2]+"%,"+Ae[3]+")"},toHex:function(){var Ae=this.getSource(),Se,St,Te;return Se=Ae[0].toString(16),Se=Se.length===1?"0"+Se:Se,St=Ae[1].toString(16),St=St.length===1?"0"+St:St,Te=Ae[2].toString(16),Te=Te.length===1?"0"+Te:Te,Se.toUpperCase()+St.toUpperCase()+Te.toUpperCase()},toHexa:function(){var Ae=this.getSource(),Se;return Se=Math.round(Ae[3]*255),Se=Se.toString(16),Se=Se.length===1?"0"+Se:Se,this.toHex()+Se.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(Ae){var Se=this.getSource();return Se[3]=Ae,this.setSource(Se),this},toGrayscale:function(){var Ae=this.getSource(),Se=parseInt((Ae[0]*.3+Ae[1]*.59+Ae[2]*.11).toFixed(0),10),St=Ae[3];return this.setSource([Se,Se,Se,St]),this},toBlackWhite:function(Ae){var Se=this.getSource(),St=(Se[0]*.3+Se[1]*.59+Se[2]*.11).toFixed(0),Te=Se[3];return Ae=Ae||127,St=Number(St)<Number(Ae)?0:255,this.setSource([St,St,St,Te]),this},overlayWith:function(Ae){Ae instanceof xe||(Ae=new xe(Ae));var Se=[],St=this.getAlpha(),Te=.5,Re=this.getSource(),Ee=Ae.getSource(),ke;for(ke=0;ke<3;ke++)Se.push(Math.round(Re[ke]*(1-Te)+Ee[ke]*Te));return Se[3]=St,this.setSource(Se),this}},_e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,_e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,_e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,_e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function Pe(Ae,Se,St){return St<0&&(St+=1),St>1&&(St-=1),St<1/6?Ae+(Se-Ae)*6*St:St<1/2?Se:St<2/3?Ae+(Se-Ae)*(2/3-St)*6:Ae}_e.Color.fromRgb=function(Ae){return xe.fromSource(xe.sourceFromRgb(Ae))},_e.Color.sourceFromRgb=function(Ae){var Se=Ae.match(xe.reRGBa);if(Se){var St=parseInt(Se[1],10)/(/%$/.test(Se[1])?100:1)*(/%$/.test(Se[1])?255:1),Te=parseInt(Se[2],10)/(/%$/.test(Se[2])?100:1)*(/%$/.test(Se[2])?255:1),Re=parseInt(Se[3],10)/(/%$/.test(Se[3])?100:1)*(/%$/.test(Se[3])?255:1);return[parseInt(St,10),parseInt(Te,10),parseInt(Re,10),Se[4]?parseFloat(Se[4]):1]}},_e.Color.fromRgba=xe.fromRgb,_e.Color.fromHsl=function(Ae){return xe.fromSource(xe.sourceFromHsl(Ae))},_e.Color.sourceFromHsl=function(Ae){var Se=Ae.match(xe.reHSLa);if(!!Se){var St=(parseFloat(Se[1])%360+360)%360/360,Te=parseFloat(Se[2])/(/%$/.test(Se[2])?100:1),Re=parseFloat(Se[3])/(/%$/.test(Se[3])?100:1),Ee,ke,De;if(Te===0)Ee=ke=De=Re;else{var Be=Re<=.5?Re*(Te+1):Re+Te-Re*Te,He=Re*2-Be;Ee=Pe(He,Be,St+1/3),ke=Pe(He,Be,St),De=Pe(He,Be,St-1/3)}return[Math.round(Ee*255),Math.round(ke*255),Math.round(De*255),Se[4]?parseFloat(Se[4]):1]}},_e.Color.fromHsla=xe.fromHsl,_e.Color.fromHex=function(Ae){return xe.fromSource(xe.sourceFromHex(Ae))},_e.Color.sourceFromHex=function(Ae){if(Ae.match(xe.reHex)){var Se=Ae.slice(Ae.indexOf("#")+1),St=Se.length===3||Se.length===4,Te=Se.length===8||Se.length===4,Re=St?Se.charAt(0)+Se.charAt(0):Se.substring(0,2),Ee=St?Se.charAt(1)+Se.charAt(1):Se.substring(2,4),ke=St?Se.charAt(2)+Se.charAt(2):Se.substring(4,6),De=Te?St?Se.charAt(3)+Se.charAt(3):Se.substring(6,8):"FF";return[parseInt(Re,16),parseInt(Ee,16),parseInt(ke,16),parseFloat((parseInt(De,16)/255).toFixed(2))]}},_e.Color.fromSource=function(Ae){var Se=new xe;return Se.setSource(Ae),Se}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=["e","se","s","sw","w","nw","n","ne","e"],Pe=["ns","nesw","ew","nwse"],Ae={},Se="left",St="top",Te="right",Re="bottom",Ee="center",ke={top:Re,bottom:St,left:Te,right:Se,center:Ee},De=_e.util.radiansToDegrees,Be=Math.sign||function(ai){return(ai>0)-(ai<0)||+ai};function He(ai,Ye){var Ze=ai.angle+De(Math.atan2(Ye.y,Ye.x))+360;return Math.round(Ze%360/45)}function Ue(ai,Ye){var Ze=Ye.transform.target,Xe=Ze.canvas,ui=_e.util.object.clone(Ye);ui.target=Ze,Xe&&Xe.fire("object:"+ai,ui),Ze.fire(ai,Ye)}function We(ai,Ye){var Ze=Ye.canvas,Xe=Ze.uniScaleKey,ui=ai[Xe];return Ze.uniformScaling&&!ui||!Ze.uniformScaling&&ui}function Je(ai){return ai.originX===Ee&&ai.originY===Ee}function Qe(ai,Ye,Ze){var Xe=ai.lockScalingX,ui=ai.lockScalingY;return!!(Xe&&ui||!Ye&&(Xe||ui)&&Ze||Xe&&Ye==="x"||ui&&Ye==="y")}function fi(ai,Ye,Ze){var Xe="not-allowed",ui=We(ai,Ze),pi="";if(Ye.x!==0&&Ye.y===0?pi="x":Ye.x===0&&Ye.y!==0&&(pi="y"),Qe(Ze,pi,ui))return Xe;var gi=He(Ze,Ye);return xe[gi]+"-resize"}function oi(ai,Ye,Ze){var Xe="not-allowed";if(Ye.x!==0&&Ze.lockSkewingY||Ye.y!==0&&Ze.lockSkewingX)return Xe;var ui=He(Ze,Ye)%4;return Pe[ui]+"-resize"}function ii(ai,Ye,Ze){return ai[Ze.canvas.altActionKey]?Ae.skewCursorStyleHandler(ai,Ye,Ze):Ae.scaleCursorStyleHandler(ai,Ye,Ze)}function li(ai,Ye,Ze){var Xe=ai[Ze.canvas.altActionKey];if(Ye.x===0)return Xe?"skewX":"scaleY";if(Ye.y===0)return Xe?"skewY":"scaleX"}function bi(ai,Ye,Ze){return Ze.lockRotation?"not-allowed":Ye.cursorStyle}function mi(ai,Ye,Ze,Xe){return{e:ai,transform:Ye,pointer:{x:Ze,y:Xe}}}function Si(ai){return function(Ye,Ze,Xe,ui){var pi=Ze.target,gi=pi.getCenterPoint(),Li=pi.translateToOriginPoint(gi,Ze.originX,Ze.originY),Ri=ai(Ye,Ze,Xe,ui);return pi.setPositionByOrigin(Li,Ze.originX,Ze.originY),Ri}}function _i(ai,Ye){return function(Ze,Xe,ui,pi){var gi=Ye(Ze,Xe,ui,pi);return gi&&Ue(ai,mi(Ze,Xe,ui,pi)),gi}}function xi(ai,Ye,Ze,Xe,ui){var pi=ai.target,gi=pi.controls[ai.corner],Li=pi.canvas.getZoom(),Ri=pi.padding/Li,wi=pi.toLocalPoint(new _e.Point(Xe,ui),Ye,Ze);return wi.x>=Ri&&(wi.x-=Ri),wi.x<=-Ri&&(wi.x+=Ri),wi.y>=Ri&&(wi.y-=Ri),wi.y<=Ri&&(wi.y+=Ri),wi.x-=gi.offsetX,wi.y-=gi.offsetY,wi}function Ei(ai){return ai.flipX!==ai.flipY}function ri(ai,Ye,Ze,Xe,ui){if(ai[Ye]!==0){var pi=ai._getTransformedDimensions()[Xe],gi=ui/pi*ai[Ze];ai.set(Ze,gi)}}function vi(ai,Ye,Ze,Xe){var ui=Ye.target,pi=ui._getTransformedDimensions(0,ui.skewY),gi=xi(Ye,Ye.originX,Ye.originY,Ze,Xe),Li=Math.abs(gi.x*2)-pi.x,Ri=ui.skewX,wi;Li<2?wi=0:(wi=De(Math.atan2(Li/ui.scaleX,pi.y/ui.scaleY)),Ye.originX===Se&&Ye.originY===Re&&(wi=-wi),Ye.originX===Te&&Ye.originY===St&&(wi=-wi),Ei(ui)&&(wi=-wi));var Vi=Ri!==wi;if(Vi){var Mi=ui._getTransformedDimensions().y;ui.set("skewX",wi),ri(ui,"skewY","scaleY","y",Mi)}return Vi}function Ci(ai,Ye,Ze,Xe){var ui=Ye.target,pi=ui._getTransformedDimensions(ui.skewX,0),gi=xi(Ye,Ye.originX,Ye.originY,Ze,Xe),Li=Math.abs(gi.y*2)-pi.y,Ri=ui.skewY,wi;Li<2?wi=0:(wi=De(Math.atan2(Li/ui.scaleY,pi.x/ui.scaleX)),Ye.originX===Se&&Ye.originY===Re&&(wi=-wi),Ye.originX===Te&&Ye.originY===St&&(wi=-wi),Ei(ui)&&(wi=-wi));var Vi=Ri!==wi;if(Vi){var Mi=ui._getTransformedDimensions().x;ui.set("skewY",wi),ri(ui,"skewX","scaleX","x",Mi)}return Vi}function $e(ai,Ye,Ze,Xe){var ui=Ye.target,pi=ui.skewX,gi,Li=Ye.originY;if(ui.lockSkewingX)return!1;if(pi===0){var Ri=xi(Ye,Ee,Ee,Ze,Xe);Ri.x>0?gi=Se:gi=Te}else pi>0&&(gi=Li===St?Se:Te),pi<0&&(gi=Li===St?Te:Se),Ei(ui)&&(gi=gi===Se?Te:Se);Ye.originX=gi;var wi=_i("skewing",Si(vi));return wi(ai,Ye,Ze,Xe)}function Ge(ai,Ye,Ze,Xe){var ui=Ye.target,pi=ui.skewY,gi,Li=Ye.originX;if(ui.lockSkewingY)return!1;if(pi===0){var Ri=xi(Ye,Ee,Ee,Ze,Xe);Ri.y>0?gi=St:gi=Re}else pi>0&&(gi=Li===Se?St:Re),pi<0&&(gi=Li===Se?Re:St),Ei(ui)&&(gi=gi===St?Re:St);Ye.originY=gi;var wi=_i("skewing",Si(Ci));return wi(ai,Ye,Ze,Xe)}function ze(ai,Ye,Ze,Xe){var ui=Ye,pi=ui.target,gi=pi.translateToOriginPoint(pi.getCenterPoint(),ui.originX,ui.originY);if(pi.lockRotation)return!1;var Li=Math.atan2(ui.ey-gi.y,ui.ex-gi.x),Ri=Math.atan2(Xe-gi.y,Ze-gi.x),wi=De(Ri-Li+ui.theta),Vi=!0;if(pi.snapAngle>0){var Mi=pi.snapAngle,qi=pi.snapThreshold||Mi,Xi=Math.ceil(wi/Mi)*Mi,Zi=Math.floor(wi/Mi)*Mi;Math.abs(wi-Zi)<qi?wi=Zi:Math.abs(wi-Xi)<qi&&(wi=Xi)}return wi<0&&(wi=360+wi),wi%=360,Vi=pi.angle!==wi,pi.angle=wi,Vi}function qe(ai,Ye,Ze,Xe,ui){ui=ui||{};var pi=Ye.target,gi=pi.lockScalingX,Li=pi.lockScalingY,Ri=ui.by,wi,Vi,Mi,qi,Xi=We(ai,pi),Zi=Qe(pi,Ri,Xi),ji,Ki,cn=Ye.gestureScale;if(Zi)return!1;if(cn)Vi=Ye.scaleX*cn,Mi=Ye.scaleY*cn;else{if(wi=xi(Ye,Ye.originX,Ye.originY,Ze,Xe),ji=Ri!=="y"?Be(wi.x):1,Ki=Ri!=="x"?Be(wi.y):1,Ye.signX||(Ye.signX=ji),Ye.signY||(Ye.signY=Ki),pi.lockScalingFlip&&(Ye.signX!==ji||Ye.signY!==Ki))return!1;if(qi=pi._getTransformedDimensions(),Xi&&!Ri){var rn=Math.abs(wi.x)+Math.abs(wi.y),xn=Ye.original,Sn=Math.abs(qi.x*xn.scaleX/pi.scaleX)+Math.abs(qi.y*xn.scaleY/pi.scaleY),Tn=rn/Sn;Vi=xn.scaleX*Tn,Mi=xn.scaleY*Tn}else Vi=Math.abs(wi.x*pi.scaleX/qi.x),Mi=Math.abs(wi.y*pi.scaleY/qi.y);Je(Ye)&&(Vi*=2,Mi*=2),Ye.signX!==ji&&Ri!=="y"&&(Ye.originX=ke[Ye.originX],Vi*=-1,Ye.signX=ji),Ye.signY!==Ki&&Ri!=="x"&&(Ye.originY=ke[Ye.originY],Mi*=-1,Ye.signY=Ki)}var Ln=pi.scaleX,Hn=pi.scaleY;return Ri?(Ri==="x"&&pi.set("scaleX",Vi),Ri==="y"&&pi.set("scaleY",Mi)):(!gi&&pi.set("scaleX",Vi),!Li&&pi.set("scaleY",Mi)),Ln!==pi.scaleX||Hn!==pi.scaleY}function ei(ai,Ye,Ze,Xe){return qe(ai,Ye,Ze,Xe)}function ni(ai,Ye,Ze,Xe){return qe(ai,Ye,Ze,Xe,{by:"x"})}function ci(ai,Ye,Ze,Xe){return qe(ai,Ye,Ze,Xe,{by:"y"})}function di(ai,Ye,Ze,Xe){return ai[Ye.target.canvas.altActionKey]?Ae.skewHandlerX(ai,Ye,Ze,Xe):Ae.scalingY(ai,Ye,Ze,Xe)}function Ti(ai,Ye,Ze,Xe){return ai[Ye.target.canvas.altActionKey]?Ae.skewHandlerY(ai,Ye,Ze,Xe):Ae.scalingX(ai,Ye,Ze,Xe)}function Ni(ai,Ye,Ze,Xe){var ui=Ye.target,pi=xi(Ye,Ye.originX,Ye.originY,Ze,Xe),gi=ui.strokeWidth/(ui.strokeUniform?ui.scaleX:1),Li=Je(Ye)?2:1,Ri=ui.width,wi=Math.abs(pi.x*Li/ui.scaleX)-gi;return ui.set("width",Math.max(wi,0)),Ri!==wi}function si(ai,Ye,Ze,Xe){var ui=Ye.target,pi=Ze-Ye.offsetX,gi=Xe-Ye.offsetY,Li=!ui.get("lockMovementX")&&ui.left!==pi,Ri=!ui.get("lockMovementY")&&ui.top!==gi;return Li&&ui.set("left",pi),Ri&&ui.set("top",gi),(Li||Ri)&&Ue("moving",mi(ai,Ye,Ze,Xe)),Li||Ri}Ae.scaleCursorStyleHandler=fi,Ae.skewCursorStyleHandler=oi,Ae.scaleSkewCursorStyleHandler=ii,Ae.rotationWithSnapping=_i("rotating",Si(ze)),Ae.scalingEqually=_i("scaling",Si(ei)),Ae.scalingX=_i("scaling",Si(ni)),Ae.scalingY=_i("scaling",Si(ci)),Ae.scalingYOrSkewingX=di,Ae.scalingXOrSkewingY=Ti,Ae.changeWidth=_i("resizing",Si(Ni)),Ae.skewHandlerX=$e,Ae.skewHandlerY=Ge,Ae.dragHandler=si,Ae.scaleOrSkewActionName=li,Ae.rotationStyleHandler=bi,Ae.fireEvent=Ue,Ae.wrapWithFixedAnchor=Si,Ae.wrapWithFireEvent=_i,Ae.getLocalPoint=xi,_e.controlsUtils=Ae}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.degreesToRadians,Pe=_e.controlsUtils;function Ae(St,Te,Re,Ee,ke){Ee=Ee||{};var De=this.sizeX||Ee.cornerSize||ke.cornerSize,Be=this.sizeY||Ee.cornerSize||ke.cornerSize,He=typeof Ee.transparentCorners<"u"?Ee.transparentCorners:ke.transparentCorners,Ue=He?"stroke":"fill",We=!He&&(Ee.cornerStrokeColor||ke.cornerStrokeColor),Je=Te,Qe=Re,fi;St.save(),St.fillStyle=Ee.cornerColor||ke.cornerColor,St.strokeStyle=Ee.cornerStrokeColor||ke.cornerStrokeColor,De>Be?(fi=De,St.scale(1,Be/De),Qe=Re*De/Be):Be>De?(fi=Be,St.scale(De/Be,1),Je=Te*Be/De):fi=De,St.lineWidth=1,St.beginPath(),St.arc(Je,Qe,fi/2,0,2*Math.PI,!1),St[Ue](),We&&St.stroke(),St.restore()}function Se(St,Te,Re,Ee,ke){Ee=Ee||{};var De=this.sizeX||Ee.cornerSize||ke.cornerSize,Be=this.sizeY||Ee.cornerSize||ke.cornerSize,He=typeof Ee.transparentCorners<"u"?Ee.transparentCorners:ke.transparentCorners,Ue=He?"stroke":"fill",We=!He&&(Ee.cornerStrokeColor||ke.cornerStrokeColor),Je=De/2,Qe=Be/2;St.save(),St.fillStyle=Ee.cornerColor||ke.cornerColor,St.strokeStyle=Ee.cornerStrokeColor||ke.cornerStrokeColor,St.lineWidth=1,St.translate(Te,Re),St.rotate(xe(ke.angle)),St[Ue+"Rect"](-Je,-Qe,De,Be),We&&St.strokeRect(-Je,-Qe,De,Be),St.restore()}Pe.renderCircleControl=Ae,Pe.renderSquareControl=Se}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={});function xe(Pe){for(var Ae in Pe)this[Ae]=Pe[Ae]}_e.Control=xe,_e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(Pe,Ae){return Ae.cursorStyle},getActionName:function(Pe,Ae){return Ae.actionName},getVisibility:function(Pe,Ae){var Se=Pe._controlsVisibility;return Se&&typeof Se[Ae]<"u"?Se[Ae]:this.visible},setVisibility:function(Pe){this.visible=Pe},positionHandler:function(Pe,Ae){var Se=_e.util.transformPoint({x:this.x*Pe.x+this.offsetX,y:this.y*Pe.y+this.offsetY},Ae);return Se},calcCornerCoords:function(Pe,Ae,Se,St,Te){var Re,Ee,ke,De,Be=Te?this.touchSizeX:this.sizeX,He=Te?this.touchSizeY:this.sizeY;if(Be&&He&&Be!==He){var Ue=Math.atan2(He,Be),We=Math.sqrt(Be*Be+He*He)/2,Je=Ue-_e.util.degreesToRadians(Pe),Qe=Math.PI/2-Ue-_e.util.degreesToRadians(Pe);Re=We*_e.util.cos(Je),Ee=We*_e.util.sin(Je),ke=We*_e.util.cos(Qe),De=We*_e.util.sin(Qe)}else{var fi=Be&&He?Be:Ae;We=fi*.7071067812;var Je=_e.util.degreesToRadians(45-Pe);Re=ke=We*_e.util.cos(Je),Ee=De=We*_e.util.sin(Je)}return{tl:{x:Se-De,y:St-ke},tr:{x:Se+Re,y:St-Ee},bl:{x:Se-Re,y:St+Ee},br:{x:Se+De,y:St+ke}}},render:function(Pe,Ae,Se,St,Te){switch(St=St||{},St.cornerStyle||Te.cornerStyle){case"circle":_e.controlsUtils.renderCircleControl.call(this,Pe,Ae,Se,St,Te);break;default:_e.controlsUtils.renderSquareControl.call(this,Pe,Ae,Se,St,Te)}}}}(e),function(){function Oe(Se,St){var Te=Se.getAttribute("style"),Re=Se.getAttribute("offset")||0,Ee,ke,De,Be;if(Re=parseFloat(Re)/(/%$/.test(Re)?100:1),Re=Re<0?0:Re>1?1:Re,Te){var He=Te.split(/\s*;\s*/);for(He[He.length-1]===""&&He.pop(),Be=He.length;Be--;){var Ue=He[Be].split(/\s*:\s*/),We=Ue[0].trim(),Je=Ue[1].trim();We==="stop-color"?Ee=Je:We==="stop-opacity"&&(De=Je)}}return Ee||(Ee=Se.getAttribute("stop-color")||"rgb(0,0,0)"),De||(De=Se.getAttribute("stop-opacity")),Ee=new t.Color(Ee),ke=Ee.getAlpha(),De=isNaN(parseFloat(De))?1:parseFloat(De),De*=ke*St,{offset:Re,color:Ee.toRgb(),opacity:De}}function _e(Se){return{x1:Se.getAttribute("x1")||0,y1:Se.getAttribute("y1")||0,x2:Se.getAttribute("x2")||"100%",y2:Se.getAttribute("y2")||0}}function xe(Se){return{x1:Se.getAttribute("fx")||Se.getAttribute("cx")||"50%",y1:Se.getAttribute("fy")||Se.getAttribute("cy")||"50%",r1:0,x2:Se.getAttribute("cx")||"50%",y2:Se.getAttribute("cy")||"50%",r2:Se.getAttribute("r")||"50%"}}var Pe=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(Se){Se||(Se={}),Se.coords||(Se.coords={});var St,Te=this;Object.keys(Se).forEach(function(Re){Te[Re]=Se[Re]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,St={x1:Se.coords.x1||0,y1:Se.coords.y1||0,x2:Se.coords.x2||0,y2:Se.coords.y2||0},this.type==="radial"&&(St.r1=Se.coords.r1||0,St.r2=Se.coords.r2||0),this.coords=St,this.colorStops=Se.colorStops.slice()},addColorStop:function(Se){for(var St in Se){var Te=new t.Color(Se[St]);this.colorStops.push({offset:parseFloat(St),color:Te.toRgb(),opacity:Te.getAlpha()})}return this},toObject:function(Se){var St={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,St,Se),St},toSVG:function(Se,ke){var Te=Pe(this.coords,!0),Re,Ee,ke=ke||{},De,Be,He=Pe(this.colorStops,!0),Ue=Te.r1>Te.r2,We=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),Je=-this.offsetX,Qe=-this.offsetY,fi=!!ke.additionalTransform,oi=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(He.sort(function(Si,_i){return Si.offset-_i.offset}),oi==="objectBoundingBox"?(Je/=Se.width,Qe/=Se.height):(Je+=Se.width/2,Qe+=Se.height/2),Se.type==="path"&&this.gradientUnits!=="percentage"&&(Je-=Se.pathOffset.x,Qe-=Se.pathOffset.y),We[4]-=Je,We[5]-=Qe,Be='id="SVGID_'+this.id+'" gradientUnits="'+oi+'"',Be+=' gradientTransform="'+(fi?ke.additionalTransform+" ":"")+t.util.matrixToSVG(We)+'" ',this.type==="linear"?De=["<linearGradient ",Be,' x1="',Te.x1,'" y1="',Te.y1,'" x2="',Te.x2,'" y2="',Te.y2,`">
`]:this.type==="radial"&&(De=["<radialGradient ",Be,' cx="',Ue?Te.x1:Te.x2,'" cy="',Ue?Te.y1:Te.y2,'" r="',Ue?Te.r1:Te.r2,'" fx="',Ue?Te.x2:Te.x1,'" fy="',Ue?Te.y2:Te.y1,`">
`]),this.type==="radial"){if(Ue)for(He=He.concat(),He.reverse(),Re=0,Ee=He.length;Re<Ee;Re++)He[Re].offset=1-He[Re].offset;var ii=Math.min(Te.r1,Te.r2);if(ii>0){var li=Math.max(Te.r1,Te.r2),bi=ii/li;for(Re=0,Ee=He.length;Re<Ee;Re++)He[Re].offset+=bi*(1-He[Re].offset)}}for(Re=0,Ee=He.length;Re<Ee;Re++){var mi=He[Re];De.push("<stop ",'offset="',mi.offset*100+"%",'" style="stop-color:',mi.color,typeof mi.opacity<"u"?";stop-opacity: "+mi.opacity:";",`"/>
`)}return De.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),De.join("")},toLive:function(Se){var St,Te=t.util.object.clone(this.coords),Re,Ee;if(!!this.type){for(this.type==="linear"?St=Se.createLinearGradient(Te.x1,Te.y1,Te.x2,Te.y2):this.type==="radial"&&(St=Se.createRadialGradient(Te.x1,Te.y1,Te.r1,Te.x2,Te.y2,Te.r2)),Re=0,Ee=this.colorStops.length;Re<Ee;Re++){var ke=this.colorStops[Re].color,De=this.colorStops[Re].opacity,Be=this.colorStops[Re].offset;typeof De<"u"&&(ke=new t.Color(ke).setAlpha(De).toRgba()),St.addColorStop(Be,ke)}return St}}}),t.util.object.extend(t.Gradient,{fromElement:function(Se,St,Te,Re){var Ee=parseFloat(Te)/(/%$/.test(Te)?100:1);Ee=Ee<0?0:Ee>1?1:Ee,isNaN(Ee)&&(Ee=1);var ke=Se.getElementsByTagName("stop"),De,Be=Se.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",He=Se.getAttribute("gradientTransform")||"",Ue=[],We,Je,Qe=0,fi=0,oi;for(Se.nodeName==="linearGradient"||Se.nodeName==="LINEARGRADIENT"?(De="linear",We=_e(Se)):(De="radial",We=xe(Se)),Je=ke.length;Je--;)Ue.push(Oe(ke[Je],Ee));oi=t.parseTransformAttribute(He),Ae(St,We,Re,Be),Be==="pixels"&&(Qe=-St.left,fi=-St.top);var ii=new t.Gradient({id:Se.getAttribute("id"),type:De,coords:We,colorStops:Ue,gradientUnits:Be,gradientTransform:oi,offsetX:Qe,offsetY:fi});return ii}});function Ae(Se,St,Te,Re){var Ee,ke;Object.keys(St).forEach(function(De){Ee=St[De],Ee==="Infinity"?ke=1:Ee==="-Infinity"?ke=0:(ke=parseFloat(St[De],10),typeof Ee=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(Ee)&&(ke*=.01,Re==="pixels"&&((De==="x1"||De==="x2"||De==="r2")&&(ke*=Te.viewBoxWidth||Te.width),(De==="y1"||De==="y2")&&(ke*=Te.viewBoxHeight||Te.height)))),St[De]=ke})}}(),function(){var Oe=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(_e,xe){if(_e||(_e={}),this.id=t.Object.__uid++,this.setOptions(_e),!_e.source||_e.source&&typeof _e.source!="string"){xe&&xe(this);return}else{var Pe=this;this.source=t.util.createImage(),t.util.loadImage(_e.source,function(Ae,Se){Pe.source=Ae,xe&&xe(Pe,Se)},null,this.crossOrigin)}},toObject:function(_e){var xe=t.Object.NUM_FRACTION_DIGITS,Pe,Ae;return typeof this.source.src=="string"?Pe=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(Pe=this.source.toDataURL()),Ae={type:"pattern",source:Pe,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:Oe(this.offsetX,xe),offsetY:Oe(this.offsetY,xe),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,Ae,_e),Ae},toSVG:function(_e){var xe=typeof this.source=="function"?this.source():this.source,Pe=xe.width/_e.width,Ae=xe.height/_e.height,Se=this.offsetX/_e.width,St=this.offsetY/_e.height,Te="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(Ae=1,St&&(Ae+=Math.abs(St))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(Pe=1,Se&&(Pe+=Math.abs(Se))),xe.src?Te=xe.src:xe.toDataURL&&(Te=xe.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+Se+'" y="'+St+'" width="'+Pe+'" height="'+Ae+`">
<image x="0" y="0" width="`+xe.width+'" height="'+xe.height+'" xlink:href="'+Te+`"></image>
</pattern>
`},setOptions:function(_e){for(var xe in _e)this[xe]=_e[xe]},toLive:function(_e){var xe=this.source;return!xe||typeof xe.src<"u"&&(!xe.complete||xe.naturalWidth===0||xe.naturalHeight===0)?"":_e.createPattern(xe,this.repeat)}})}(),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.toFixed;if(_e.Shadow){_e.warn("fabric.Shadow is already defined.");return}_e.Shadow=_e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(Pe){typeof Pe=="string"&&(Pe=this._parseShadow(Pe));for(var Ae in Pe)this[Ae]=Pe[Ae];this.id=_e.Object.__uid++},_parseShadow:function(Pe){var Ae=Pe.trim(),Se=_e.Shadow.reOffsetsAndBlur.exec(Ae)||[],St=Ae.replace(_e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:St.trim(),offsetX:parseFloat(Se[1],10)||0,offsetY:parseFloat(Se[2],10)||0,blur:parseFloat(Se[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(Pe){var Ae=40,Se=40,St=_e.Object.NUM_FRACTION_DIGITS,Te=_e.util.rotateVector({x:this.offsetX,y:this.offsetY},_e.util.degreesToRadians(-Pe.angle)),Re=20,Ee=new _e.Color(this.color);return Pe.width&&Pe.height&&(Ae=xe((Math.abs(Te.x)+this.blur)/Pe.width,St)*100+Re,Se=xe((Math.abs(Te.y)+this.blur)/Pe.height,St)*100+Re),Pe.flipX&&(Te.x*=-1),Pe.flipY&&(Te.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+Se+'%" height="'+(100+2*Se)+'%" x="-'+Ae+'%" width="'+(100+2*Ae)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+xe(this.blur?this.blur/2:0,St)+`"></feGaussianBlur>
	<feOffset dx="`+xe(Te.x,St)+'" dy="'+xe(Te.y,St)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+Ee.toRgb()+'" flood-opacity="'+Ee.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var Pe={},Ae=_e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(Se){this[Se]!==Ae[Se]&&(Pe[Se]=this[Se])},this),Pe}}),_e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var Oe=t.util.object.extend,_e=t.util.getElementOffset,xe=t.util.removeFromArray,Pe=t.util.toFixed,Ae=t.util.transformPoint,Se=t.util.invertTransform,St=t.util.getNodeCanvas,Te=t.util.createCanvasElement,Re=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(Ee,ke){ke||(ke={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(Ee,ke)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(Ee,ke){var De=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(Ee),this._initOptions(ke),this.interactive||this._initRetinaScaling(),ke.overlayImage&&this.setOverlayImage(ke.overlayImage,De),ke.backgroundImage&&this.setBackgroundImage(ke.backgroundImage,De),ke.backgroundColor&&this.setBackgroundColor(ke.backgroundColor,De),ke.overlayColor&&this.setOverlayColor(ke.overlayColor,De),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var Ee=t.devicePixelRatio;this.__initRetinaScaling(Ee,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(Ee,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(Ee,ke,De){ke.setAttribute("width",this.width*Ee),ke.setAttribute("height",this.height*Ee),De.scale(Ee,Ee)},calcOffset:function(){return this._offset=_e(this.lowerCanvasEl),this},setOverlayImage:function(Ee,ke,De){return this.__setBgOverlayImage("overlayImage",Ee,ke,De)},setBackgroundImage:function(Ee,ke,De){return this.__setBgOverlayImage("backgroundImage",Ee,ke,De)},setOverlayColor:function(Ee,ke){return this.__setBgOverlayColor("overlayColor",Ee,ke)},setBackgroundColor:function(Ee,ke){return this.__setBgOverlayColor("backgroundColor",Ee,ke)},__setBgOverlayImage:function(Ee,ke,De,Be){return typeof ke=="string"?t.util.loadImage(ke,function(He,Ue){if(He){var We=new t.Image(He,Be);this[Ee]=We,We.canvas=this}De&&De(He,Ue)},this,Be&&Be.crossOrigin):(Be&&ke.setOptions(Be),this[Ee]=ke,ke&&(ke.canvas=this),De&&De(ke,!1)),this},__setBgOverlayColor:function(Ee,ke,De){return this[Ee]=ke,this._initGradient(ke,Ee),this._initPattern(ke,Ee,De),this},_createCanvasElement:function(){var Ee=Te();if(!Ee||(Ee.style||(Ee.style={}),typeof Ee.getContext>"u"))throw Re;return Ee},_initOptions:function(Ee){var ke=this.lowerCanvasEl;this._setOptions(Ee),this.width=this.width||parseInt(ke.width,10)||0,this.height=this.height||parseInt(ke.height,10)||0,this.lowerCanvasEl.style&&(ke.width=this.width,ke.height=this.height,ke.style.width=this.width+"px",ke.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(Ee){Ee&&Ee.getContext?this.lowerCanvasEl=Ee:this.lowerCanvasEl=t.util.getById(Ee)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(Ee,ke){return this.setDimensions({width:Ee},ke)},setHeight:function(Ee,ke){return this.setDimensions({height:Ee},ke)},setDimensions:function(Ee,ke){var De;ke=ke||{};for(var Be in Ee)De=Ee[Be],ke.cssOnly||(this._setBackstoreDimension(Be,Ee[Be]),De+="px",this.hasLostContext=!0),ke.backstoreOnly||this._setCssDimension(Be,De);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),ke.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(Ee,ke){return this.lowerCanvasEl[Ee]=ke,this.upperCanvasEl&&(this.upperCanvasEl[Ee]=ke),this.cacheCanvasEl&&(this.cacheCanvasEl[Ee]=ke),this[Ee]=ke,this},_setCssDimension:function(Ee,ke){return this.lowerCanvasEl.style[Ee]=ke,this.upperCanvasEl&&(this.upperCanvasEl.style[Ee]=ke),this.wrapperEl&&(this.wrapperEl.style[Ee]=ke),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(Ee){var ke=this._activeObject,De=this.backgroundImage,Be=this.overlayImage,He,Ue,We;for(this.viewportTransform=Ee,Ue=0,We=this._objects.length;Ue<We;Ue++)He=this._objects[Ue],He.group||He.setCoords(!0);return ke&&ke.setCoords(),De&&De.setCoords(!0),Be&&Be.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(Ee,ke){var De=Ee,Be=this.viewportTransform.slice(0);Ee=Ae(Ee,Se(this.viewportTransform)),Be[0]=ke,Be[3]=ke;var He=Ae(Ee,Be);return Be[4]+=De.x-He.x,Be[5]+=De.y-He.y,this.setViewportTransform(Be)},setZoom:function(Ee){return this.zoomToPoint(new t.Point(0,0),Ee),this},absolutePan:function(Ee){var ke=this.viewportTransform.slice(0);return ke[4]=-Ee.x,ke[5]=-Ee.y,this.setViewportTransform(ke)},relativePan:function(Ee){return this.absolutePan(new t.Point(-Ee.x-this.viewportTransform[4],-Ee.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(Ee){this.stateful&&Ee.setupState(),Ee._set("canvas",this),Ee.setCoords(),this.fire("object:added",{target:Ee}),Ee.fire("added")},_onObjectRemoved:function(Ee){this.fire("object:removed",{target:Ee}),Ee.fire("removed"),delete Ee.canvas},clearContext:function(Ee){return Ee.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var Ee=this.contextContainer;return this.renderCanvas(Ee,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var Ee={},ke=this.width,De=this.height,Be=Se(this.viewportTransform);return Ee.tl=Ae({x:0,y:0},Be),Ee.br=Ae({x:ke,y:De},Be),Ee.tr=new t.Point(Ee.br.x,Ee.tl.y),Ee.bl=new t.Point(Ee.tl.x,Ee.br.y),this.vptCoords=Ee,Ee},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(Ee,ke){var De=this.viewportTransform,Be=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(Ee),t.util.setImageSmoothing(Ee,this.imageSmoothingEnabled),this.fire("before:render",{ctx:Ee}),this._renderBackground(Ee),Ee.save(),Ee.transform(De[0],De[1],De[2],De[3],De[4],De[5]),this._renderObjects(Ee,ke),Ee.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(Ee),Be&&(Be.canvas=this,Be.shouldCache(),Be._transformDone=!0,Be.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(Ee)),this._renderOverlay(Ee),this.controlsAboveOverlay&&this.interactive&&this.drawControls(Ee),this.fire("after:render",{ctx:Ee})},drawClipPathOnCanvas:function(Ee){var ke=this.viewportTransform,De=this.clipPath;Ee.save(),Ee.transform(ke[0],ke[1],ke[2],ke[3],ke[4],ke[5]),Ee.globalCompositeOperation="destination-in",De.transform(Ee),Ee.scale(1/De.zoomX,1/De.zoomY),Ee.drawImage(De._cacheCanvas,-De.cacheTranslationX,-De.cacheTranslationY),Ee.restore()},_renderObjects:function(Ee,ke){var De,Be;for(De=0,Be=ke.length;De<Be;++De)ke[De]&&ke[De].render(Ee)},_renderBackgroundOrOverlay:function(Ee,ke){var De=this[ke+"Color"],Be=this[ke+"Image"],He=this.viewportTransform,Ue=this[ke+"Vpt"];if(!(!De&&!Be)){if(De){Ee.save(),Ee.beginPath(),Ee.moveTo(0,0),Ee.lineTo(this.width,0),Ee.lineTo(this.width,this.height),Ee.lineTo(0,this.height),Ee.closePath(),Ee.fillStyle=De.toLive?De.toLive(Ee,this):De,Ue&&Ee.transform(He[0],He[1],He[2],He[3],He[4],He[5]),Ee.transform(1,0,0,1,De.offsetX||0,De.offsetY||0);var We=De.gradientTransform||De.patternTransform;We&&Ee.transform(We[0],We[1],We[2],We[3],We[4],We[5]),Ee.fill(),Ee.restore()}Be&&(Ee.save(),Ue&&Ee.transform(He[0],He[1],He[2],He[3],He[4],He[5]),Be.render(Ee),Ee.restore())}},_renderBackground:function(Ee){this._renderBackgroundOrOverlay(Ee,"background")},_renderOverlay:function(Ee){this._renderBackgroundOrOverlay(Ee,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(Ee){return this._centerObject(Ee,new t.Point(this.getCenterPoint().x,Ee.getCenterPoint().y))},centerObjectV:function(Ee){return this._centerObject(Ee,new t.Point(Ee.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(Ee){var ke=this.getCenterPoint();return this._centerObject(Ee,ke)},viewportCenterObject:function(Ee){var ke=this.getVpCenter();return this._centerObject(Ee,ke)},viewportCenterObjectH:function(Ee){var ke=this.getVpCenter();return this._centerObject(Ee,new t.Point(ke.x,Ee.getCenterPoint().y)),this},viewportCenterObjectV:function(Ee){var ke=this.getVpCenter();return this._centerObject(Ee,new t.Point(Ee.getCenterPoint().x,ke.y))},getVpCenter:function(){var Ee=this.getCenterPoint(),ke=Se(this.viewportTransform);return Ae(Ee,ke)},_centerObject:function(Ee,ke){return Ee.setPositionByOrigin(ke,"center","center"),Ee.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(Ee){return this.toDatalessObject(Ee)},toObject:function(Ee){return this._toObjectMethod("toObject",Ee)},toDatalessObject:function(Ee){return this._toObjectMethod("toDatalessObject",Ee)},_toObjectMethod:function(Ee,ke){var De=this.clipPath,Be={version:t.version,objects:this._toObjects(Ee,ke)};return De&&!De.excludeFromExport&&(Be.clipPath=this._toObject(this.clipPath,Ee,ke)),Oe(Be,this.__serializeBgOverlay(Ee,ke)),t.util.populateWithProperties(this,Be,ke),Be},_toObjects:function(Ee,ke){return this._objects.filter(function(De){return!De.excludeFromExport}).map(function(De){return this._toObject(De,Ee,ke)},this)},_toObject:function(Ee,ke,De){var Be;this.includeDefaultValues||(Be=Ee.includeDefaultValues,Ee.includeDefaultValues=!1);var He=Ee[ke](De);return this.includeDefaultValues||(Ee.includeDefaultValues=Be),He},__serializeBgOverlay:function(Ee,ke){var De={},Be=this.backgroundImage,He=this.overlayImage,Ue=this.backgroundColor,We=this.overlayColor;return Ue&&Ue.toObject?Ue.excludeFromExport||(De.background=Ue.toObject(ke)):Ue&&(De.background=Ue),We&&We.toObject?We.excludeFromExport||(De.overlay=We.toObject(ke)):We&&(De.overlay=We),Be&&!Be.excludeFromExport&&(De.backgroundImage=this._toObject(Be,Ee,ke)),He&&!He.excludeFromExport&&(De.overlayImage=this._toObject(He,Ee,ke)),De},svgViewportTransformation:!0,toSVG:function(Ee,ke){Ee||(Ee={}),Ee.reviver=ke;var De=[];return this._setSVGPreamble(De,Ee),this._setSVGHeader(De,Ee),this.clipPath&&De.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(De,"background"),this._setSVGBgOverlayImage(De,"backgroundImage",ke),this._setSVGObjects(De,ke),this.clipPath&&De.push(`</g>
`),this._setSVGBgOverlayColor(De,"overlay"),this._setSVGBgOverlayImage(De,"overlayImage",ke),De.push("</svg>"),De.join("")},_setSVGPreamble:function(Ee,ke){ke.suppressPreamble||Ee.push('<?xml version="1.0" encoding="',ke.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(Ee,ke){var De=ke.width||this.width,Be=ke.height||this.height,He,Ue='viewBox="0 0 '+this.width+" "+this.height+'" ',We=t.Object.NUM_FRACTION_DIGITS;ke.viewBox?Ue='viewBox="'+ke.viewBox.x+" "+ke.viewBox.y+" "+ke.viewBox.width+" "+ke.viewBox.height+'" ':this.svgViewportTransformation&&(He=this.viewportTransform,Ue='viewBox="'+Pe(-He[4]/He[0],We)+" "+Pe(-He[5]/He[3],We)+" "+Pe(this.width/He[0],We)+" "+Pe(this.height/He[3],We)+'" '),Ee.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',De,'" ','height="',Be,'" ',Ue,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(ke),`</defs>
`)},createSVGClipPathMarkup:function(Ee){var ke=this.clipPath;return ke?(ke.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+ke.clipPathId+`" >
`+this.clipPath.toClipPathSVG(Ee.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var Ee=this,ke=["background","overlay"].map(function(De){var Be=Ee[De+"Color"];if(Be&&Be.toLive){var He=Ee[De+"Vpt"],Ue=Ee.viewportTransform,We={width:Ee.width/(He?Ue[0]:1),height:Ee.height/(He?Ue[3]:1)};return Be.toSVG(We,{additionalTransform:He?t.util.matrixToSVG(Ue):""})}});return ke.join("")},createSVGFontFacesMarkup:function(){var Ee="",ke={},De,Be,He,Ue,We,Je,Qe,fi,oi,ii=t.fontPaths,li=[];for(this._objects.forEach(function mi(Si){li.push(Si),Si._objects&&Si._objects.forEach(mi)}),fi=0,oi=li.length;fi<oi;fi++)if(De=li[fi],Be=De.fontFamily,!(De.type.indexOf("text")===-1||ke[Be]||!ii[Be])&&(ke[Be]=!0,!!De.styles)){He=De.styles;for(We in He){Ue=He[We];for(Qe in Ue)Je=Ue[Qe],Be=Je.fontFamily,!ke[Be]&&ii[Be]&&(ke[Be]=!0)}}for(var bi in ke)Ee+=[`		@font-face {
`,"			font-family: '",bi,`';
`,"			src: url('",ii[bi],`');
`,`		}
`].join("");return Ee&&(Ee=['	<style type="text/css">',`<![CDATA[
`,Ee,"]]>",`</style>
`].join("")),Ee},_setSVGObjects:function(Ee,ke){var De,Be,He,Ue=this._objects;for(Be=0,He=Ue.length;Be<He;Be++)De=Ue[Be],!De.excludeFromExport&&this._setSVGObject(Ee,De,ke)},_setSVGObject:function(Ee,ke,De){Ee.push(ke.toSVG(De))},_setSVGBgOverlayImage:function(Ee,ke,De){this[ke]&&!this[ke].excludeFromExport&&this[ke].toSVG&&Ee.push(this[ke].toSVG(De))},_setSVGBgOverlayColor:function(Ee,ke){var De=this[ke+"Color"],Be=this.viewportTransform,He=this.width,Ue=this.height;if(!!De)if(De.toLive){var We=De.repeat,Je=t.util.invertTransform(Be),Qe=this[ke+"Vpt"],fi=Qe?t.util.matrixToSVG(Je):"";Ee.push('<rect transform="'+fi+" translate(",He/2,",",Ue/2,')"',' x="',De.offsetX-He/2,'" y="',De.offsetY-Ue/2,'" ','width="',We==="repeat-y"||We==="no-repeat"?De.source.width:He,'" height="',We==="repeat-x"||We==="no-repeat"?De.source.height:Ue,'" fill="url(#SVGID_'+De.id+')"',`></rect>
`)}else Ee.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',De,'"',`></rect>
`)},sendToBack:function(Ee){if(!Ee)return this;var ke=this._activeObject,De,Be,He;if(Ee===ke&&Ee.type==="activeSelection")for(He=ke._objects,De=He.length;De--;)Be=He[De],xe(this._objects,Be),this._objects.unshift(Be);else xe(this._objects,Ee),this._objects.unshift(Ee);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(Ee){if(!Ee)return this;var ke=this._activeObject,De,Be,He;if(Ee===ke&&Ee.type==="activeSelection")for(He=ke._objects,De=0;De<He.length;De++)Be=He[De],xe(this._objects,Be),this._objects.push(Be);else xe(this._objects,Ee),this._objects.push(Ee);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(Ee,ke){if(!Ee)return this;var De=this._activeObject,Be,He,Ue,We,Je,Qe=0;if(Ee===De&&Ee.type==="activeSelection")for(Je=De._objects,Be=0;Be<Je.length;Be++)He=Je[Be],Ue=this._objects.indexOf(He),Ue>0+Qe&&(We=Ue-1,xe(this._objects,He),this._objects.splice(We,0,He)),Qe++;else Ue=this._objects.indexOf(Ee),Ue!==0&&(We=this._findNewLowerIndex(Ee,Ue,ke),xe(this._objects,Ee),this._objects.splice(We,0,Ee));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(Ee,ke,De){var Be,He;if(De)for(Be=ke,He=ke-1;He>=0;--He){var Ue=Ee.intersectsWithObject(this._objects[He])||Ee.isContainedWithinObject(this._objects[He])||this._objects[He].isContainedWithinObject(Ee);if(Ue){Be=He;break}}else Be=ke-1;return Be},bringForward:function(Ee,ke){if(!Ee)return this;var De=this._activeObject,Be,He,Ue,We,Je,Qe=0;if(Ee===De&&Ee.type==="activeSelection")for(Je=De._objects,Be=Je.length;Be--;)He=Je[Be],Ue=this._objects.indexOf(He),Ue<this._objects.length-1-Qe&&(We=Ue+1,xe(this._objects,He),this._objects.splice(We,0,He)),Qe++;else Ue=this._objects.indexOf(Ee),Ue!==this._objects.length-1&&(We=this._findNewUpperIndex(Ee,Ue,ke),xe(this._objects,Ee),this._objects.splice(We,0,Ee));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(Ee,ke,De){var Be,He,Ue;if(De)for(Be=ke,He=ke+1,Ue=this._objects.length;He<Ue;++He){var We=Ee.intersectsWithObject(this._objects[He])||Ee.isContainedWithinObject(this._objects[He])||this._objects[He].isContainedWithinObject(Ee);if(We){Be=He;break}}else Be=ke+1;return Be},moveTo:function(Ee,ke){return xe(this._objects,Ee),this._objects.splice(ke,0,Ee),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(Ee){Ee.dispose&&Ee.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),Oe(t.StaticCanvas.prototype,t.Observable),Oe(t.StaticCanvas.prototype,t.Collection),Oe(t.StaticCanvas.prototype,t.DataURLExporter),Oe(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(Ee){var ke=Te();if(!ke||!ke.getContext)return null;var De=ke.getContext("2d");if(!De)return null;switch(Ee){case"setLineDash":return typeof De.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var Ee=St(this.lowerCanvasEl);return Ee&&Ee.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(Ee){var ke=St(this.lowerCanvasEl);return ke&&ke.createJPEGStream(Ee)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(Oe){Oe.strokeStyle=this.color,Oe.lineWidth=this.width,Oe.lineCap=this.strokeLineCap,Oe.miterLimit=this.strokeMiterLimit,Oe.lineJoin=this.strokeLineJoin,Oe.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(Oe){var _e=this.canvas.viewportTransform;Oe.save(),Oe.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5])},_setShadow:function(){if(!!this.shadow){var Oe=this.canvas,_e=this.shadow,xe=Oe.contextTop,Pe=Oe.getZoom();Oe&&Oe._isRetinaScaling()&&(Pe*=t.devicePixelRatio),xe.shadowColor=_e.color,xe.shadowBlur=_e.blur*Pe,xe.shadowOffsetX=_e.offsetX*Pe,xe.shadowOffsetY=_e.offsetY*Pe}},needsFullRender:function(){var Oe=new t.Color(this.color);return Oe.getAlpha()<1||!!this.shadow},_resetShadow:function(){var Oe=this.canvas.contextTop;Oe.shadowColor="",Oe.shadowBlur=Oe.shadowOffsetX=Oe.shadowOffsetY=0},_isOutSideCanvas:function(Oe){return Oe.x<0||Oe.x>this.canvas.getWidth()||Oe.y<0||Oe.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(Oe){this.canvas=Oe,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(Oe,_e,xe){var Pe=_e.midPointFrom(xe);return Oe.quadraticCurveTo(_e.x,_e.y,Pe.x,Pe.y),Pe},onMouseDown:function(Oe,_e){!this.canvas._isMainEvent(_e.e)||(this.drawStraightLine=_e.e[this.straightLineKey],this._prepareForDrawing(Oe),this._captureDrawingPath(Oe),this._render())},onMouseMove:function(Oe,_e){if(!!this.canvas._isMainEvent(_e.e)&&(this.drawStraightLine=_e.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(Oe))&&this._captureDrawingPath(Oe)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var xe=this._points,Pe=xe.length,Ae=this.canvas.contextTop;this._saveAndTransform(Ae),this.oldEnd&&(Ae.beginPath(),Ae.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(Ae,xe[Pe-2],xe[Pe-1],!0),Ae.stroke(),Ae.restore()}},onMouseUp:function(Oe){return this.canvas._isMainEvent(Oe.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(Oe){var _e=new t.Point(Oe.x,Oe.y);this._reset(),this._addPoint(_e),this.canvas.contextTop.moveTo(_e.x,_e.y)},_addPoint:function(Oe){return this._points.length>1&&Oe.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(Oe),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(Oe){var _e=new t.Point(Oe.x,Oe.y);return this._addPoint(_e)},_render:function(Oe){var _e,xe,Pe=this._points[0],Ae=this._points[1];if(Oe=Oe||this.canvas.contextTop,this._saveAndTransform(Oe),Oe.beginPath(),this._points.length===2&&Pe.x===Ae.x&&Pe.y===Ae.y){var Se=this.width/1e3;Pe=new t.Point(Pe.x,Pe.y),Ae=new t.Point(Ae.x,Ae.y),Pe.x-=Se,Ae.x+=Se}for(Oe.moveTo(Pe.x,Pe.y),_e=1,xe=this._points.length;_e<xe;_e++)this._drawSegment(Oe,Pe,Ae),Pe=this._points[_e],Ae=this._points[_e+1];Oe.lineTo(Pe.x,Pe.y),Oe.stroke(),Oe.restore()},convertPointsToSVGPath:function(Oe){var _e=this.width/1e3;return t.util.getSmoothPathFromPoints(Oe,_e)},_isEmptySVGPath:function(Oe){var _e=t.util.joinPath(Oe);return _e==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(Oe){var _e=new t.Path(Oe,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,_e.shadow=new t.Shadow(this.shadow)),_e},decimatePoints:function(Oe,_e){if(Oe.length<=2)return Oe;var xe=this.canvas.getZoom(),Pe=Math.pow(_e/xe,2),Ae,Se=Oe.length-1,St=Oe[0],Te=[St],Re;for(Ae=1;Ae<Se-1;Ae++)Re=Math.pow(St.x-Oe[Ae].x,2)+Math.pow(St.y-Oe[Ae].y,2),Re>=Pe&&(St=Oe[Ae],Te.push(St));return Te.push(Oe[Se]),Te},_finalizeAndAddPath:function(){var Oe=this.canvas.contextTop;Oe.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var _e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(_e)){this.canvas.requestRenderAll();return}var xe=this.createPath(_e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:xe}),this.canvas.add(xe),this.canvas.requestRenderAll(),xe.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:xe})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(Oe){this.canvas=Oe,this.points=[]},drawDot:function(Oe){var _e=this.addPoint(Oe),xe=this.canvas.contextTop;this._saveAndTransform(xe),this.dot(xe,_e),xe.restore()},dot:function(Oe,_e){Oe.fillStyle=_e.fill,Oe.beginPath(),Oe.arc(_e.x,_e.y,_e.radius,0,Math.PI*2,!1),Oe.closePath(),Oe.fill()},onMouseDown:function(Oe){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(Oe)},_render:function(){var Oe=this.canvas.contextTop,_e,xe,Pe=this.points;for(this._saveAndTransform(Oe),_e=0,xe=Pe.length;_e<xe;_e++)this.dot(Oe,Pe[_e]);Oe.restore()},onMouseMove:function(Oe){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(Oe)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(Oe),this._render()):this.drawDot(Oe))},onMouseUp:function(){var Oe=this.canvas.renderOnAddRemove,_e,xe;this.canvas.renderOnAddRemove=!1;var Pe=[];for(_e=0,xe=this.points.length;_e<xe;_e++){var Ae=this.points[_e],Se=new t.Circle({radius:Ae.radius,left:Ae.x,top:Ae.y,originX:"center",originY:"center",fill:Ae.fill});this.shadow&&(Se.shadow=new t.Shadow(this.shadow)),Pe.push(Se)}var St=new t.Group(Pe);St.canvas=this.canvas,this.canvas.fire("before:path:created",{path:St}),this.canvas.add(St),this.canvas.fire("path:created",{path:St}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=Oe,this.canvas.requestRenderAll()},addPoint:function(Oe){var _e=new t.Point(Oe.x,Oe.y),xe=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,Pe=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return _e.radius=xe,_e.fill=Pe,this.points.push(_e),_e}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(Oe){this.canvas=Oe,this.sprayChunks=[]},onMouseDown:function(Oe){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(Oe),this.render(this.sprayChunkPoints)},onMouseMove:function(Oe){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(Oe)||(this.addSprayChunk(Oe),this.render(this.sprayChunkPoints))},onMouseUp:function(){var Oe=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var _e=[],xe=0,Pe=this.sprayChunks.length;xe<Pe;xe++)for(var Ae=this.sprayChunks[xe],Se=0,St=Ae.length;Se<St;Se++){var Te=new t.Rect({width:Ae[Se].width,height:Ae[Se].width,left:Ae[Se].x+1,top:Ae[Se].y+1,originX:"center",originY:"center",fill:this.color});_e.push(Te)}this.optimizeOverlapping&&(_e=this._getOptimizedRects(_e));var Re=new t.Group(_e);this.shadow&&Re.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:Re}),this.canvas.add(Re),this.canvas.fire("path:created",{path:Re}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=Oe,this.canvas.requestRenderAll()},_getOptimizedRects:function(Oe){var _e={},xe,Pe,Ae;for(Pe=0,Ae=Oe.length;Pe<Ae;Pe++)xe=Oe[Pe].left+""+Oe[Pe].top,_e[xe]||(_e[xe]=Oe[Pe]);var Se=[];for(xe in _e)Se.push(_e[xe]);return Se},render:function(Oe){var _e=this.canvas.contextTop,xe,Pe;for(_e.fillStyle=this.color,this._saveAndTransform(_e),xe=0,Pe=Oe.length;xe<Pe;xe++){var Ae=Oe[xe];typeof Ae.opacity<"u"&&(_e.globalAlpha=Ae.opacity),_e.fillRect(Ae.x,Ae.y,Ae.width,Ae.width)}_e.restore()},_render:function(){var Oe=this.canvas.contextTop,_e,xe;for(Oe.fillStyle=this.color,this._saveAndTransform(Oe),_e=0,xe=this.sprayChunks.length;_e<xe;_e++)this.render(this.sprayChunks[_e]);Oe.restore()},addSprayChunk:function(Oe){this.sprayChunkPoints=[];var _e,xe,Pe,Ae=this.width/2,Se;for(Se=0;Se<this.density;Se++){_e=t.util.getRandomInt(Oe.x-Ae,Oe.x+Ae),xe=t.util.getRandomInt(Oe.y-Ae,Oe.y+Ae),this.dotWidthVariance?Pe=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):Pe=this.dotWidth;var St=new t.Point(_e,xe);St.width=Pe,this.randomOpacity&&(St.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(St)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var Oe=20,_e=5,xe=t.util.createCanvasElement(),Pe=xe.getContext("2d");return xe.width=xe.height=Oe+_e,Pe.fillStyle=this.color,Pe.beginPath(),Pe.arc(Oe/2,Oe/2,Oe/2,0,Math.PI*2,!1),Pe.closePath(),Pe.fill(),xe},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(Oe){return Oe.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(Oe){this.callSuper("_setBrushStyles",Oe),Oe.strokeStyle=this.getPattern(Oe)},createPath:function(Oe){var _e=this.callSuper("createPath",Oe),xe=_e._getLeftTopCoords().scalarAdd(_e.strokeWidth/2);return _e.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-xe.x,offsetY:-xe.y}),_e}}),function(){var Oe=t.util.getPointer,_e=t.util.degreesToRadians,xe=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(Ae,Se){Se||(Se={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(Ae,Se),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var Ae=this.getActiveObjects(),Se,St,Te;if(Ae.length>0&&!this.preserveObjectStacking){St=[],Te=[];for(var Re=0,Ee=this._objects.length;Re<Ee;Re++)Se=this._objects[Re],Ae.indexOf(Se)===-1?St.push(Se):Te.push(Se);Ae.length>1&&(this._activeObject._objects=Te),St.push.apply(St,Te)}else St=this._objects;return St},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var Ae=this.contextContainer;return this.renderCanvas(Ae,this._chooseObjectsToRender()),this},renderTopLayer:function(Ae){Ae.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(Ae),this.contextTopDirty=!0),Ae.restore()},renderTop:function(){var Ae=this.contextTop;return this.clearContext(Ae),this.renderTopLayer(Ae),this.fire("after:render"),this},_normalizePointer:function(Ae,Se){var St=Ae.calcTransformMatrix(),Te=t.util.invertTransform(St),Re=this.restorePointerVpt(Se);return t.util.transformPoint(Re,Te)},isTargetTransparent:function(Ae,Se,St){if(Ae.shouldCache()&&Ae._cacheCanvas&&Ae!==this._activeObject){var Te=this._normalizePointer(Ae,{x:Se,y:St}),Re=Math.max(Ae.cacheTranslationX+Te.x*Ae.zoomX,0),Ee=Math.max(Ae.cacheTranslationY+Te.y*Ae.zoomY,0),He=t.util.isTransparent(Ae._cacheContext,Math.round(Re),Math.round(Ee),this.targetFindTolerance);return He}var ke=this.contextCache,De=Ae.selectionBackgroundColor,Be=this.viewportTransform;Ae.selectionBackgroundColor="",this.clearContext(ke),ke.save(),ke.transform(Be[0],Be[1],Be[2],Be[3],Be[4],Be[5]),Ae.render(ke),ke.restore(),Ae.selectionBackgroundColor=De;var He=t.util.isTransparent(ke,Se,St,this.targetFindTolerance);return He},_isSelectionKeyPressed:function(Ae){var Se=!1;return Array.isArray(this.selectionKey)?Se=!!this.selectionKey.find(function(St){return Ae[St]===!0}):Se=Ae[this.selectionKey],Se},_shouldClearSelection:function(Ae,Se){var St=this.getActiveObjects(),Te=this._activeObject;return!Se||Se&&Te&&St.length>1&&St.indexOf(Se)===-1&&Te!==Se&&!this._isSelectionKeyPressed(Ae)||Se&&!Se.evented||Se&&!Se.selectable&&Te&&Te!==Se},_shouldCenterTransform:function(Ae,Se,St){if(!!Ae){var Te;return Se==="scale"||Se==="scaleX"||Se==="scaleY"||Se==="resizing"?Te=this.centeredScaling||Ae.centeredScaling:Se==="rotate"&&(Te=this.centeredRotation||Ae.centeredRotation),Te?!St:St}},_getOriginFromCorner:function(Ae,Se){var St={x:Ae.originX,y:Ae.originY};return Se==="ml"||Se==="tl"||Se==="bl"?St.x="right":(Se==="mr"||Se==="tr"||Se==="br")&&(St.x="left"),Se==="tl"||Se==="mt"||Se==="tr"?St.y="bottom":(Se==="bl"||Se==="mb"||Se==="br")&&(St.y="top"),St},_getActionFromCorner:function(Ae,Se,St,Te){if(!Se||!Ae)return"drag";var Re=Te.controls[Se];return Re.getActionName(St,Re,Te)},_setupCurrentTransform:function(Ae,Se,St){if(!!Se){var Te=this.getPointer(Ae),Re=Se.__corner,Ee=Se.controls[Re],ke=St&&Re?Ee.getActionHandler(Ae,Se,Ee):t.controlsUtils.dragHandler,De=this._getActionFromCorner(St,Re,Ae,Se),Be=this._getOriginFromCorner(Se,Re),He=Ae[this.centeredKey],Ue={target:Se,action:De,actionHandler:ke,corner:Re,scaleX:Se.scaleX,scaleY:Se.scaleY,skewX:Se.skewX,skewY:Se.skewY,offsetX:Te.x-Se.left,offsetY:Te.y-Se.top,originX:Be.x,originY:Be.y,ex:Te.x,ey:Te.y,lastX:Te.x,lastY:Te.y,theta:_e(Se.angle),width:Se.width*Se.scaleX,shiftKey:Ae.shiftKey,altKey:He,original:t.util.saveObjectTransform(Se)};this._shouldCenterTransform(Se,De,He)&&(Ue.originX="center",Ue.originY="center"),Ue.original.originX=Be.x,Ue.original.originY=Be.y,this._currentTransform=Ue,this._beforeTransform(Ae)}},setCursor:function(Ae){this.upperCanvasEl.style.cursor=Ae},_drawSelection:function(Ae){var Se=this._groupSelector,St=new t.Point(Se.ex,Se.ey),Te=t.util.transformPoint(St,this.viewportTransform),Re=new t.Point(Se.ex+Se.left,Se.ey+Se.top),Ee=t.util.transformPoint(Re,this.viewportTransform),ke=Math.min(Te.x,Ee.x),De=Math.min(Te.y,Ee.y),Be=Math.max(Te.x,Ee.x),He=Math.max(Te.y,Ee.y),Ue=this.selectionLineWidth/2;this.selectionColor&&(Ae.fillStyle=this.selectionColor,Ae.fillRect(ke,De,Be-ke,He-De)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(Ae.lineWidth=this.selectionLineWidth,Ae.strokeStyle=this.selectionBorderColor,ke+=Ue,De+=Ue,Be-=Ue,He-=Ue,t.Object.prototype._setLineDash.call(this,Ae,this.selectionDashArray),Ae.strokeRect(ke,De,Be-ke,He-De))},findTarget:function(Ae,Se){if(!this.skipTargetFind){var St=!0,Te=this.getPointer(Ae,St),Re=this._activeObject,Ee=this.getActiveObjects(),ke,De,Be=xe(Ae),He=Ee.length>1&&!Se||Ee.length===1;if(this.targets=[],He&&Re._findTargetCorner(Te,Be)||Ee.length>1&&!Se&&Re===this._searchPossibleTargets([Re],Te))return Re;if(Ee.length===1&&Re===this._searchPossibleTargets([Re],Te))if(this.preserveObjectStacking)ke=Re,De=this.targets,this.targets=[];else return Re;var Ue=this._searchPossibleTargets(this._objects,Te);return Ae[this.altSelectionKey]&&Ue&&ke&&Ue!==ke&&(Ue=ke,this.targets=De),Ue}},_checkTarget:function(Ae,Se,St){if(Se&&Se.visible&&Se.evented&&Se.containsPoint(Ae))if((this.perPixelTargetFind||Se.perPixelTargetFind)&&!Se.isEditing){var Te=this.isTargetTransparent(Se,St.x,St.y);if(!Te)return!0}else return!0},_searchPossibleTargets:function(Ae,Se){for(var St,Te=Ae.length,Re;Te--;){var Ee=Ae[Te],ke=Ee.group?this._normalizePointer(Ee.group,Se):Se;if(this._checkTarget(ke,Ee,Se)){St=Ae[Te],St.subTargetCheck&&St instanceof t.Group&&(Re=this._searchPossibleTargets(St._objects,Se),Re&&this.targets.push(Re));break}}return St},restorePointerVpt:function(Ae){return t.util.transformPoint(Ae,t.util.invertTransform(this.viewportTransform))},getPointer:function(Ae,Se){if(this._absolutePointer&&!Se)return this._absolutePointer;if(this._pointer&&Se)return this._pointer;var St=Oe(Ae),Te=this.upperCanvasEl,Re=Te.getBoundingClientRect(),Ee=Re.width||0,ke=Re.height||0,De;(!Ee||!ke)&&("top"in Re&&"bottom"in Re&&(ke=Math.abs(Re.top-Re.bottom)),"right"in Re&&"left"in Re&&(Ee=Math.abs(Re.right-Re.left))),this.calcOffset(),St.x=St.x-this._offset.left,St.y=St.y-this._offset.top,Se||(St=this.restorePointerVpt(St));var Be=this.getRetinaScaling();return Be!==1&&(St.x/=Be,St.y/=Be),Ee===0||ke===0?De={width:1,height:1}:De={width:Te.width/Ee,height:Te.height/ke},{x:St.x*De.width,y:St.y*De.height}},_createUpperCanvas:function(){var Ae=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),Se=this.lowerCanvasEl,St=this.upperCanvasEl;St?St.className="":(St=this._createCanvasElement(),this.upperCanvasEl=St),t.util.addClass(St,"upper-canvas "+Ae),this.wrapperEl.appendChild(St),this._copyCanvasStyle(Se,St),this._applyCanvasStyle(St),this.contextTop=St.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(Ae){var Se=this.width||Ae.width,St=this.height||Ae.height;t.util.setStyle(Ae,{position:"absolute",width:Se+"px",height:St+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),Ae.width=Se,Ae.height=St,t.util.makeElementUnselectable(Ae)},_copyCanvasStyle:function(Ae,Se){Se.style.cssText=Ae.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var Ae=this._activeObject;return Ae?Ae.type==="activeSelection"&&Ae._objects?Ae._objects.slice(0):[Ae]:[]},_onObjectRemoved:function(Ae){Ae===this._activeObject&&(this.fire("before:selection:cleared",{target:Ae}),this._discardActiveObject(),this.fire("selection:cleared",{target:Ae}),Ae.fire("deselected")),Ae===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",Ae)},_fireSelectionEvents:function(Ae,Se){var St=!1,Te=this.getActiveObjects(),Re=[],Ee=[];Ae.forEach(function(ke){Te.indexOf(ke)===-1&&(St=!0,ke.fire("deselected",{e:Se,target:ke}),Ee.push(ke))}),Te.forEach(function(ke){Ae.indexOf(ke)===-1&&(St=!0,ke.fire("selected",{e:Se,target:ke}),Re.push(ke))}),Ae.length>0&&Te.length>0?St&&this.fire("selection:updated",{e:Se,selected:Re,deselected:Ee}):Te.length>0?this.fire("selection:created",{e:Se,selected:Re}):Ae.length>0&&this.fire("selection:cleared",{e:Se,deselected:Ee})},setActiveObject:function(Ae,Se){var St=this.getActiveObjects();return this._setActiveObject(Ae,Se),this._fireSelectionEvents(St,Se),this},_setActiveObject:function(Ae,Se){return this._activeObject===Ae||!this._discardActiveObject(Se,Ae)||Ae.onSelect({e:Se})?!1:(this._activeObject=Ae,!0)},_discardActiveObject:function(Ae,Se){var St=this._activeObject;if(St){if(St.onDeselect({e:Ae,object:Se}))return!1;this._activeObject=null}return!0},discardActiveObject:function(Ae){var Se=this.getActiveObjects(),St=this.getActiveObject();return Se.length&&this.fire("before:selection:cleared",{target:St,e:Ae}),this._discardActiveObject(Ae),this._fireSelectionEvents(Se,Ae),this},dispose:function(){var Ae=this.wrapperEl;return this.removeListeners(),Ae.removeChild(this.upperCanvasEl),Ae.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(Se){t.util.cleanUpJsdomNode(this[Se]),this[Se]=void 0}.bind(this)),Ae.parentNode&&Ae.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(Ae){var Se=this._activeObject;Se&&Se._renderControls(Ae)},_toObject:function(Ae,Se,St){var Te=this._realizeGroupTransformOnObject(Ae),Re=this.callSuper("_toObject",Ae,Se,St);return this._unwindGroupTransformOnObject(Ae,Te),Re},_realizeGroupTransformOnObject:function(Ae){if(Ae.group&&Ae.group.type==="activeSelection"&&this._activeObject===Ae.group){var Se=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],St={};return Se.forEach(function(Te){St[Te]=Ae[Te]}),t.util.addTransformToObject(Ae,this._activeObject.calcOwnMatrix()),St}else return null},_unwindGroupTransformOnObject:function(Ae,Se){Se&&Ae.set(Se)},_setSVGObject:function(Ae,Se,St){var Te=this._realizeGroupTransformOnObject(Se);this.callSuper("_setSVGObject",Ae,Se,St),this._unwindGroupTransformOnObject(Se,Te)},setViewportTransform:function(Ae){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,Ae)}});for(var Pe in t.StaticCanvas)Pe!=="prototype"&&(t.Canvas[Pe]=t.StaticCanvas[Pe])}(),function(){var Oe=t.util.addListener,_e=t.util.removeListener,xe=3,Pe=2,Ae=1,Se={passive:!1};function St(Te,Re){return Te.button&&Te.button===Re-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(Oe,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(Te,Re){var Ee=this.upperCanvasEl,ke=this._getEventPrefix();Te(t.window,"resize",this._onResize),Te(Ee,ke+"down",this._onMouseDown),Te(Ee,ke+"move",this._onMouseMove,Se),Te(Ee,ke+"out",this._onMouseOut),Te(Ee,ke+"enter",this._onMouseEnter),Te(Ee,"wheel",this._onMouseWheel),Te(Ee,"contextmenu",this._onContextMenu),Te(Ee,"dblclick",this._onDoubleClick),Te(Ee,"dragover",this._onDragOver),Te(Ee,"dragenter",this._onDragEnter),Te(Ee,"dragleave",this._onDragLeave),Te(Ee,"drop",this._onDrop),this.enablePointerEvents||Te(Ee,"touchstart",this._onTouchStart,Se),typeof eventjs<"u"&&Re in eventjs&&(eventjs[Re](Ee,"gesture",this._onGesture),eventjs[Re](Ee,"drag",this._onDrag),eventjs[Re](Ee,"orientation",this._onOrientationChange),eventjs[Re](Ee,"shake",this._onShake),eventjs[Re](Ee,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(_e,"remove");var Te=this._getEventPrefix();_e(t.document,Te+"up",this._onMouseUp),_e(t.document,"touchend",this._onTouchEnd,Se),_e(t.document,Te+"move",this._onMouseMove,Se),_e(t.document,"touchmove",this._onMouseMove,Se)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(Te,Re){this.__onTransformGesture&&this.__onTransformGesture(Te,Re)},_onDrag:function(Te,Re){this.__onDrag&&this.__onDrag(Te,Re)},_onMouseWheel:function(Te){this.__onMouseWheel(Te)},_onMouseOut:function(Te){var Re=this._hoveredTarget;this.fire("mouse:out",{target:Re,e:Te}),this._hoveredTarget=null,Re&&Re.fire("mouseout",{e:Te});var Ee=this;this._hoveredTargets.forEach(function(ke){Ee.fire("mouse:out",{target:Re,e:Te}),ke&&Re.fire("mouseout",{e:Te})}),this._hoveredTargets=[]},_onMouseEnter:function(Te){!this._currentTransform&&!this.findTarget(Te)&&(this.fire("mouse:over",{target:null,e:Te}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(Te,Re){this.__onOrientationChange&&this.__onOrientationChange(Te,Re)},_onShake:function(Te,Re){this.__onShake&&this.__onShake(Te,Re)},_onLongPress:function(Te,Re){this.__onLongPress&&this.__onLongPress(Te,Re)},_onDragOver:function(Te){Te.preventDefault();var Re=this._simpleEventHandler("dragover",Te);this._fireEnterLeaveEvents(Re,Te)},_onDrop:function(Te){return this._simpleEventHandler("drop:before",Te),this._simpleEventHandler("drop",Te)},_onContextMenu:function(Te){return this.stopContextMenu&&(Te.stopPropagation(),Te.preventDefault()),!1},_onDoubleClick:function(Te){this._cacheTransformEventData(Te),this._handleEvent(Te,"dblclick"),this._resetTransformEventData(Te)},getPointerId:function(Te){var Re=Te.changedTouches;return Re?Re[0]&&Re[0].identifier:this.enablePointerEvents?Te.pointerId:-1},_isMainEvent:function(Te){return Te.isPrimary===!0?!0:Te.isPrimary===!1?!1:Te.type==="touchend"&&Te.touches.length===0?!0:Te.changedTouches?Te.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(Te){Te.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(Te)),this.__onMouseDown(Te),this._resetTransformEventData();var Re=this.upperCanvasEl,Ee=this._getEventPrefix();Oe(t.document,"touchend",this._onTouchEnd,Se),Oe(t.document,"touchmove",this._onMouseMove,Se),_e(Re,Ee+"down",this._onMouseDown)},_onMouseDown:function(Te){this.__onMouseDown(Te),this._resetTransformEventData();var Re=this.upperCanvasEl,Ee=this._getEventPrefix();_e(Re,Ee+"move",this._onMouseMove,Se),Oe(t.document,Ee+"up",this._onMouseUp),Oe(t.document,Ee+"move",this._onMouseMove,Se)},_onTouchEnd:function(Te){if(!(Te.touches.length>0)){this.__onMouseUp(Te),this._resetTransformEventData(),this.mainTouchId=null;var Re=this._getEventPrefix();_e(t.document,"touchend",this._onTouchEnd,Se),_e(t.document,"touchmove",this._onMouseMove,Se);var Ee=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){Oe(Ee.upperCanvasEl,Re+"down",Ee._onMouseDown),Ee._willAddMouseDown=0},400)}},_onMouseUp:function(Te){this.__onMouseUp(Te),this._resetTransformEventData();var Re=this.upperCanvasEl,Ee=this._getEventPrefix();this._isMainEvent(Te)&&(_e(t.document,Ee+"up",this._onMouseUp),_e(t.document,Ee+"move",this._onMouseMove,Se),Oe(Re,Ee+"move",this._onMouseMove,Se))},_onMouseMove:function(Te){!this.allowTouchScrolling&&Te.preventDefault&&Te.preventDefault(),this.__onMouseMove(Te)},_onResize:function(){this.calcOffset()},_shouldRender:function(Te){var Re=this._activeObject;return!!Re!=!!Te||Re&&Te&&Re!==Te?!0:(Re&&Re.isEditing,!1)},__onMouseUp:function(Te){var Re,Ee=this._currentTransform,ke=this._groupSelector,De=!1,Be=!ke||ke.left===0&&ke.top===0;if(this._cacheTransformEventData(Te),Re=this._target,this._handleEvent(Te,"up:before"),St(Te,xe)){this.fireRightClick&&this._handleEvent(Te,"up",xe,Be);return}if(St(Te,Pe)){this.fireMiddleClick&&this._handleEvent(Te,"up",Pe,Be),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(Te);return}if(!!this._isMainEvent(Te)){if(Ee&&(this._finalizeCurrentTransform(Te),De=Ee.actionPerformed),!Be){var He=Re===this._activeObject;this._maybeGroupObjects(Te),De||(De=this._shouldRender(Re)||!He&&Re===this._activeObject)}var Ue,We;if(Re){if(Ue=Re._findTargetCorner(this.getPointer(Te,!0),t.util.isTouchEvent(Te)),Re.selectable&&Re!==this._activeObject&&Re.activeOn==="up")this.setActiveObject(Re,Te),De=!0;else{var Je=Re.controls[Ue],Qe=Je&&Je.getMouseUpHandler(Te,Re,Je);Qe&&(We=this.getPointer(Te),Qe(Te,Ee,We.x,We.y))}Re.isMoving=!1}if(Ee&&(Ee.target!==Re||Ee.corner!==Ue)){var fi=Ee.target&&Ee.target.controls[Ee.corner],oi=fi&&fi.getMouseUpHandler(Te,Re,Je);We=We||this.getPointer(Te),oi&&oi(Te,Ee,We.x,We.y)}this._setCursorFromEvent(Te,Re),this._handleEvent(Te,"up",Ae,Be),this._groupSelector=null,this._currentTransform=null,Re&&(Re.__corner=0),De?this.requestRenderAll():Be||this.renderTop()}},_simpleEventHandler:function(Te,Re){var Ee=this.findTarget(Re),ke=this.targets,De={e:Re,target:Ee,subTargets:ke};if(this.fire(Te,De),Ee&&Ee.fire(Te,De),!ke)return Ee;for(var Be=0;Be<ke.length;Be++)ke[Be].fire(Te,De);return Ee},_handleEvent:function(Te,Re,Ee,ke){var De=this._target,Be=this.targets||[],He={e:Te,target:De,subTargets:Be,button:Ee||Ae,isClick:ke||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};Re==="up"&&(He.currentTarget=this.findTarget(Te),He.currentSubTargets=this.targets),this.fire("mouse:"+Re,He),De&&De.fire("mouse"+Re,He);for(var Ue=0;Ue<Be.length;Ue++)Be[Ue].fire("mouse"+Re,He)},_finalizeCurrentTransform:function(Te){var Re=this._currentTransform,Ee=Re.target,ke={e:Te,target:Ee,transform:Re,action:Re.action};Ee._scaling&&(Ee._scaling=!1),Ee.setCoords(),(Re.actionPerformed||this.stateful&&Ee.hasStateChanged())&&this._fire("modified",ke)},_onMouseDownInDrawingMode:function(Te){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(Te).requestRenderAll();var Re=this.getPointer(Te);this.freeDrawingBrush.onMouseDown(Re,{e:Te,pointer:Re}),this._handleEvent(Te,"down")},_onMouseMoveInDrawingMode:function(Te){if(this._isCurrentlyDrawing){var Re=this.getPointer(Te);this.freeDrawingBrush.onMouseMove(Re,{e:Te,pointer:Re})}this.setCursor(this.freeDrawingCursor),this._handleEvent(Te,"move")},_onMouseUpInDrawingMode:function(Te){var Re=this.getPointer(Te);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:Te,pointer:Re}),this._handleEvent(Te,"up")},__onMouseDown:function(Te){this._cacheTransformEventData(Te),this._handleEvent(Te,"down:before");var Re=this._target;if(St(Te,xe)){this.fireRightClick&&this._handleEvent(Te,"down",xe);return}if(St(Te,Pe)){this.fireMiddleClick&&this._handleEvent(Te,"down",Pe);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(Te);return}if(!!this._isMainEvent(Te)&&!this._currentTransform){var Ee=this._pointer;this._previousPointer=Ee;var ke=this._shouldRender(Re),De=this._shouldGroup(Te,Re);if(this._shouldClearSelection(Te,Re)?this.discardActiveObject(Te):De&&(this._handleGrouping(Te,Re),Re=this._activeObject),this.selection&&(!Re||!Re.selectable&&!Re.isEditing&&Re!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),Re){var Be=Re===this._activeObject;Re.selectable&&Re.activeOn==="down"&&this.setActiveObject(Re,Te);var He=Re._findTargetCorner(this.getPointer(Te,!0),t.util.isTouchEvent(Te));if(Re.__corner=He,Re===this._activeObject&&(He||!De)){this._setupCurrentTransform(Te,Re,Be);var Ue=Re.controls[He],Ee=this.getPointer(Te),We=Ue&&Ue.getMouseDownHandler(Te,Re,Ue);We&&We(Te,this._currentTransform,Ee.x,Ee.y)}}this._handleEvent(Te,"down"),(ke||De)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(Te){this._resetTransformEventData(),this._pointer=this.getPointer(Te,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(Te)||null},_beforeTransform:function(Te){var Re=this._currentTransform;this.stateful&&Re.target.saveState(),this.fire("before:transform",{e:Te,transform:Re})},__onMouseMove:function(Te){this._handleEvent(Te,"move:before"),this._cacheTransformEventData(Te);var Re,Ee;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(Te);return}if(!!this._isMainEvent(Te)){var ke=this._groupSelector;ke?(Ee=this._absolutePointer,ke.left=Ee.x-ke.ex,ke.top=Ee.y-ke.ey,this.renderTop()):this._currentTransform?this._transformObject(Te):(Re=this.findTarget(Te)||null,this._setCursorFromEvent(Te,Re),this._fireOverOutEvents(Re,Te)),this._handleEvent(Te,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(Te,Re){var Ee=this._hoveredTarget,ke=this._hoveredTargets,De=this.targets,Be=Math.max(ke.length,De.length);this.fireSyntheticInOutEvents(Te,Re,{oldTarget:Ee,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var He=0;He<Be;He++)this.fireSyntheticInOutEvents(De[He],Re,{oldTarget:ke[He],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=Te,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(Te,Re){var Ee=this._draggedoverTarget,ke=this._hoveredTargets,De=this.targets,Be=Math.max(ke.length,De.length);this.fireSyntheticInOutEvents(Te,Re,{oldTarget:Ee,evtOut:"dragleave",evtIn:"dragenter"});for(var He=0;He<Be;He++)this.fireSyntheticInOutEvents(De[He],Re,{oldTarget:ke[He],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=Te},fireSyntheticInOutEvents:function(Te,Re,Ee){var ke,De,Be=Ee.oldTarget,He,Ue,We=Be!==Te,Je=Ee.canvasEvtIn,Qe=Ee.canvasEvtOut;We&&(ke={e:Re,target:Te,previousTarget:Be},De={e:Re,target:Be,nextTarget:Te}),Ue=Te&&We,He=Be&&We,He&&(Qe&&this.fire(Qe,De),Be.fire(Ee.evtOut,De)),Ue&&(Je&&this.fire(Je,ke),Te.fire(Ee.evtIn,ke))},__onMouseWheel:function(Te){this._cacheTransformEventData(Te),this._handleEvent(Te,"wheel"),this._resetTransformEventData()},_transformObject:function(Te){var Re=this.getPointer(Te),Ee=this._currentTransform;Ee.reset=!1,Ee.shiftKey=Te.shiftKey,Ee.altKey=Te[this.centeredKey],this._performTransformAction(Te,Ee,Re),Ee.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(Te,Re,Ee){var ke=Ee.x,De=Ee.y,Be=Re.action,He=!1,Ue=Re.actionHandler;Ue&&(He=Ue(Te,Re,ke,De)),Be==="drag"&&He&&(Re.target.isMoving=!0,this.setCursor(Re.target.moveCursor||this.moveCursor)),Re.actionPerformed=Re.actionPerformed||He},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(Te,Re){if(!Re)return this.setCursor(this.defaultCursor),!1;var Ee=Re.hoverCursor||this.hoverCursor,ke=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,De=(!ke||!ke.contains(Re))&&Re._findTargetCorner(this.getPointer(Te,!0));De?this.setCursor(this.getCornerCursor(De,Re,Te)):(Re.subTargetCheck&&this.targets.concat().reverse().map(function(Be){Ee=Be.hoverCursor||Ee}),this.setCursor(Ee))},getCornerCursor:function(Te,Re,Ee){var ke=Re.controls[Te];return ke.cursorStyleHandler(Ee,ke,Re)}})}(),function(){var Oe=Math.min,_e=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(xe,Pe){var Ae=this._activeObject;return Ae&&this._isSelectionKeyPressed(xe)&&Pe&&Pe.selectable&&this.selection&&(Ae!==Pe||Ae.type==="activeSelection")&&!Pe.onSelect({e:xe})},_handleGrouping:function(xe,Pe){var Ae=this._activeObject;Ae.__corner||Pe===Ae&&(Pe=this.findTarget(xe,!0),!Pe||!Pe.selectable)||(Ae&&Ae.type==="activeSelection"?this._updateActiveSelection(Pe,xe):this._createActiveSelection(Pe,xe))},_updateActiveSelection:function(xe,Pe){var Ae=this._activeObject,Se=Ae._objects.slice(0);Ae.contains(xe)?(Ae.removeWithUpdate(xe),this._hoveredTarget=xe,this._hoveredTargets=this.targets.concat(),Ae.size()===1&&this._setActiveObject(Ae.item(0),Pe)):(Ae.addWithUpdate(xe),this._hoveredTarget=Ae,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(Se,Pe)},_createActiveSelection:function(xe,Pe){var Ae=this.getActiveObjects(),Se=this._createGroup(xe);this._hoveredTarget=Se,this._setActiveObject(Se,Pe),this._fireSelectionEvents(Ae,Pe)},_createGroup:function(xe){var Pe=this._objects,Ae=Pe.indexOf(this._activeObject)<Pe.indexOf(xe),Se=Ae?[this._activeObject,xe]:[xe,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(Se,{canvas:this})},_groupSelectedObjects:function(xe){var Pe=this._collectObjects(xe),Ae;Pe.length===1?this.setActiveObject(Pe[0],xe):Pe.length>1&&(Ae=new t.ActiveSelection(Pe.reverse(),{canvas:this}),this.setActiveObject(Ae,xe))},_collectObjects:function(xe){for(var Pe=[],Ae,Se=this._groupSelector.ex,St=this._groupSelector.ey,Te=Se+this._groupSelector.left,Re=St+this._groupSelector.top,Ee=new t.Point(Oe(Se,Te),Oe(St,Re)),ke=new t.Point(_e(Se,Te),_e(St,Re)),De=!this.selectionFullyContained,Be=Se===Te&&St===Re,He=this._objects.length;He--&&(Ae=this._objects[He],!(!(!Ae||!Ae.selectable||!Ae.visible)&&(De&&Ae.intersectsWithRect(Ee,ke,!0)||Ae.isContainedWithinRect(Ee,ke,!0)||De&&Ae.containsPoint(Ee,null,!0)||De&&Ae.containsPoint(ke,null,!0))&&(Pe.push(Ae),Be))););return Pe.length>1&&(Pe=Pe.filter(function(Ue){return!Ue.onSelect({e:xe})})),Pe},_maybeGroupObjects:function(xe){this.selection&&this._groupSelector&&this._groupSelectedObjects(xe),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(Oe){Oe||(Oe={});var _e=Oe.format||"png",xe=Oe.quality||1,Pe=(Oe.multiplier||1)*(Oe.enableRetinaScaling?this.getRetinaScaling():1),Ae=this.toCanvasElement(Pe,Oe);return t.util.toDataURL(Ae,_e,xe)},toCanvasElement:function(Oe,_e){Oe=Oe||1,_e=_e||{};var xe=(_e.width||this.width)*Oe,Pe=(_e.height||this.height)*Oe,Ae=this.getZoom(),Se=this.width,St=this.height,Te=Ae*Oe,Re=this.viewportTransform,Ee=(Re[4]-(_e.left||0))*Oe,ke=(Re[5]-(_e.top||0))*Oe,De=this.interactive,Be=[Te,0,0,Te,Ee,ke],He=this.enableRetinaScaling,Ue=t.util.createCanvasElement(),We=this.contextTop;return Ue.width=xe,Ue.height=Pe,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=Be,this.width=xe,this.height=Pe,this.calcViewportBoundaries(),this.renderCanvas(Ue.getContext("2d"),this._objects),this.viewportTransform=Re,this.width=Se,this.height=St,this.calcViewportBoundaries(),this.interactive=De,this.enableRetinaScaling=He,this.contextTop=We,Ue}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(Oe,_e,xe){if(!!Oe){var Pe=typeof Oe=="string"?JSON.parse(Oe):t.util.object.clone(Oe),Ae=this,Se=Pe.clipPath,St=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete Pe.clipPath,this._enlivenObjects(Pe.objects,function(Te){Ae.clear(),Ae._setBgOverlay(Pe,function(){Se?Ae._enlivenObjects([Se],function(Re){Ae.clipPath=Re[0],Ae.__setupCanvas.call(Ae,Pe,Te,St,_e)}):Ae.__setupCanvas.call(Ae,Pe,Te,St,_e)})},xe),this}},__setupCanvas:function(Oe,_e,xe,Pe){var Ae=this;_e.forEach(function(Se,St){Ae.insertAt(Se,St)}),this.renderOnAddRemove=xe,delete Oe.objects,delete Oe.backgroundImage,delete Oe.overlayImage,delete Oe.background,delete Oe.overlay,this._setOptions(Oe),this.renderAll(),Pe&&Pe()},_setBgOverlay:function(Oe,_e){var xe={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!Oe.backgroundImage&&!Oe.overlayImage&&!Oe.background&&!Oe.overlay){_e&&_e();return}var Pe=function(){xe.backgroundImage&&xe.overlayImage&&xe.backgroundColor&&xe.overlayColor&&_e&&_e()};this.__setBgOverlay("backgroundImage",Oe.backgroundImage,xe,Pe),this.__setBgOverlay("overlayImage",Oe.overlayImage,xe,Pe),this.__setBgOverlay("backgroundColor",Oe.background,xe,Pe),this.__setBgOverlay("overlayColor",Oe.overlay,xe,Pe)},__setBgOverlay:function(Oe,_e,xe,Pe){var Ae=this;if(!_e){xe[Oe]=!0,Pe&&Pe();return}Oe==="backgroundImage"||Oe==="overlayImage"?t.util.enlivenObjects([_e],function(Se){Ae[Oe]=Se[0],xe[Oe]=!0,Pe&&Pe()}):this["set"+t.util.string.capitalize(Oe,!0)](_e,function(){xe[Oe]=!0,Pe&&Pe()})},_enlivenObjects:function(Oe,_e,xe){if(!Oe||Oe.length===0){_e&&_e([]);return}t.util.enlivenObjects(Oe,function(Pe){_e&&_e(Pe)},null,xe)},_toDataURL:function(Oe,_e){this.clone(function(xe){_e(xe.toDataURL(Oe))})},_toDataURLWithMultiplier:function(Oe,_e,xe){this.clone(function(Pe){xe(Pe.toDataURLWithMultiplier(Oe,_e))})},clone:function(Oe,_e){var xe=JSON.stringify(this.toJSON(_e));this.cloneWithoutData(function(Pe){Pe.loadFromJSON(xe,function(){Oe&&Oe(Pe)})})},cloneWithoutData:function(Oe){var _e=t.util.createCanvasElement();_e.width=this.width,_e.height=this.height;var xe=new t.Canvas(_e);this.backgroundImage?(xe.setBackgroundImage(this.backgroundImage.src,function(){xe.renderAll(),Oe&&Oe(xe)}),xe.backgroundImageOpacity=this.backgroundImageOpacity,xe.backgroundImageStretch=this.backgroundImageStretch):Oe&&Oe(xe)}}),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.util.object.clone,Ae=_e.util.toFixed,Se=_e.util.string.capitalize,St=_e.util.degreesToRadians,Te=!_e.isLikelyNode,Re=2;_e.Object||(_e.Object=_e.util.createClass(_e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:Te,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(Ee){Ee&&this.setOptions(Ee)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=_e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(Ee){var ke=_e.perfLimitSizeTotal,De=Ee.width,Be=Ee.height,He=_e.maxCacheSideLimit,Ue=_e.minCacheSideLimit;if(De<=He&&Be<=He&&De*Be<=ke)return De<Ue&&(Ee.width=Ue),Be<Ue&&(Ee.height=Ue),Ee;var We=De/Be,Je=_e.util.limitDimsByArea(We,ke),Qe=_e.util.capValue,fi=Qe(Ue,Je.x,He),oi=Qe(Ue,Je.y,He);return De>fi&&(Ee.zoomX/=De/fi,Ee.width=fi,Ee.capped=!0),Be>oi&&(Ee.zoomY/=Be/oi,Ee.height=oi,Ee.capped=!0),Ee},_getCacheCanvasDimensions:function(){var Ee=this.getTotalObjectScaling(),ke=this._getTransformedDimensions(0,0),De=ke.x*Ee.scaleX/this.scaleX,Be=ke.y*Ee.scaleY/this.scaleY;return{width:De+Re,height:Be+Re,zoomX:Ee.scaleX,zoomY:Ee.scaleY,x:De,y:Be}},_updateCacheCanvas:function(){var Ee=this.canvas;if(this.noScaleCache&&Ee&&Ee._currentTransform){var ke=Ee._currentTransform.target,De=Ee._currentTransform.action;if(this===ke&&De.slice&&De.slice(0,5)==="scale")return!1}var Be=this._cacheCanvas,He=this._limitCacheSize(this._getCacheCanvasDimensions()),Ue=_e.minCacheSideLimit,We=He.width,Je=He.height,Qe,fi,oi=He.zoomX,ii=He.zoomY,li=We!==this.cacheWidth||Je!==this.cacheHeight,bi=this.zoomX!==oi||this.zoomY!==ii,mi=li||bi,Si=0,_i=0,xi=!1;if(li){var Ei=this._cacheCanvas.width,ri=this._cacheCanvas.height,vi=We>Ei||Je>ri,Ci=(We<Ei*.9||Je<ri*.9)&&Ei>Ue&&ri>Ue;xi=vi||Ci,vi&&!He.capped&&(We>Ue||Je>Ue)&&(Si=We*.1,_i=Je*.1)}return this instanceof _e.Text&&this.path&&(mi=!0,xi=!0,Si+=this.getHeightOfLine(0)*this.zoomX,_i+=this.getHeightOfLine(0)*this.zoomY),mi?(xi?(Be.width=Math.ceil(We+Si),Be.height=Math.ceil(Je+_i)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,Be.width,Be.height)),Qe=He.x/2,fi=He.y/2,this.cacheTranslationX=Math.round(Be.width/2-Qe)+Qe,this.cacheTranslationY=Math.round(Be.height/2-fi)+fi,this.cacheWidth=We,this.cacheHeight=Je,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(oi,ii),this.zoomX=oi,this.zoomY=ii,!0):!1},setOptions:function(Ee){this._setOptions(Ee),this._initGradient(Ee.fill,"fill"),this._initGradient(Ee.stroke,"stroke"),this._initPattern(Ee.fill,"fill"),this._initPattern(Ee.stroke,"stroke")},transform:function(Ee){var ke=this.group&&!this.group._transformDone||this.group&&this.canvas&&Ee===this.canvas.contextTop,De=this.calcTransformMatrix(!ke);Ee.transform(De[0],De[1],De[2],De[3],De[4],De[5])},toObject:function(Ee){var ke=_e.Object.NUM_FRACTION_DIGITS,De={type:this.type,version:_e.version,originX:this.originX,originY:this.originY,left:Ae(this.left,ke),top:Ae(this.top,ke),width:Ae(this.width,ke),height:Ae(this.height,ke),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:Ae(this.strokeWidth,ke),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Ae(this.strokeMiterLimit,ke),scaleX:Ae(this.scaleX,ke),scaleY:Ae(this.scaleY,ke),angle:Ae(this.angle,ke),flipX:this.flipX,flipY:this.flipY,opacity:Ae(this.opacity,ke),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Ae(this.skewX,ke),skewY:Ae(this.skewY,ke)};return this.clipPath&&!this.clipPath.excludeFromExport&&(De.clipPath=this.clipPath.toObject(Ee),De.clipPath.inverted=this.clipPath.inverted,De.clipPath.absolutePositioned=this.clipPath.absolutePositioned),_e.util.populateWithProperties(this,De,Ee),this.includeDefaultValues||(De=this._removeDefaultValues(De)),De},toDatalessObject:function(Ee){return this.toObject(Ee)},_removeDefaultValues:function(Ee){var ke=_e.util.getKlass(Ee.type).prototype,De=ke.stateProperties;return De.forEach(function(Be){Be==="left"||Be==="top"||(Ee[Be]===ke[Be]&&delete Ee[Be],Array.isArray(Ee[Be])&&Array.isArray(ke[Be])&&Ee[Be].length===0&&ke[Be].length===0&&delete Ee[Be])}),Ee},toString:function(){return"#<fabric."+Se(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var Ee=_e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(Ee.scaleX),scaleY:Math.abs(Ee.scaleY)}},getTotalObjectScaling:function(){var Ee=this.getObjectScaling(),ke=Ee.scaleX,De=Ee.scaleY;if(this.canvas){var Be=this.canvas.getZoom(),He=this.canvas.getRetinaScaling();ke*=Be*He,De*=Be*He}return{scaleX:ke,scaleY:De}},getObjectOpacity:function(){var Ee=this.opacity;return this.group&&(Ee*=this.group.getObjectOpacity()),Ee},_set:function(Ee,ke){var De=Ee==="scaleX"||Ee==="scaleY",Be=this[Ee]!==ke,He=!1;return De&&(ke=this._constrainScale(ke)),Ee==="scaleX"&&ke<0?(this.flipX=!this.flipX,ke*=-1):Ee==="scaleY"&&ke<0?(this.flipY=!this.flipY,ke*=-1):Ee==="shadow"&&ke&&!(ke instanceof _e.Shadow)?ke=new _e.Shadow(ke):Ee==="dirty"&&this.group&&this.group.set("dirty",ke),this[Ee]=ke,Be&&(He=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(Ee)>-1?(this.dirty=!0,He&&this.group.set("dirty",!0)):He&&this.stateProperties.indexOf(Ee)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:_e.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(Ee){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(Ee.save(),this._setupCompositeOperation(Ee),this.drawSelectionBackground(Ee),this.transform(Ee),this._setOpacity(Ee),this._setShadow(Ee,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(Ee)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(Ee),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),Ee.restore())},renderCache:function(Ee){Ee=Ee||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,Ee.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(Ee,ke){if(Ee.save(),ke.inverted?Ee.globalCompositeOperation="destination-out":Ee.globalCompositeOperation="destination-in",ke.absolutePositioned){var De=_e.util.invertTransform(this.calcTransformMatrix());Ee.transform(De[0],De[1],De[2],De[3],De[4],De[5])}ke.transform(Ee),Ee.scale(1/ke.zoomX,1/ke.zoomY),Ee.drawImage(ke._cacheCanvas,-ke.cacheTranslationX,-ke.cacheTranslationY),Ee.restore()},drawObject:function(Ee,ke){var De=this.fill,Be=this.stroke;ke?(this.fill="black",this.stroke="",this._setClippingProperties(Ee)):this._renderBackground(Ee),this._render(Ee),this._drawClipPath(Ee,this.clipPath),this.fill=De,this.stroke=Be},_drawClipPath:function(Ee,ke){!ke||(ke.canvas=this.canvas,ke.shouldCache(),ke._transformDone=!0,ke.renderCache({forClipping:!0}),this.drawClipPathOnCache(Ee,ke))},drawCacheOnCanvas:function(Ee){Ee.scale(1/this.zoomX,1/this.zoomY),Ee.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(Ee){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!Ee&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!Ee){var ke=this.cacheWidth/this.zoomX,De=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-ke/2,-De/2,ke,De)}return!0}return!1},_renderBackground:function(Ee){if(!!this.backgroundColor){var ke=this._getNonTransformedDimensions();Ee.fillStyle=this.backgroundColor,Ee.fillRect(-ke.x/2,-ke.y/2,ke.x,ke.y),this._removeShadow(Ee)}},_setOpacity:function(Ee){this.group&&!this.group._transformDone?Ee.globalAlpha=this.getObjectOpacity():Ee.globalAlpha*=this.opacity},_setStrokeStyles:function(Ee,ke){var De=ke.stroke;De&&(Ee.lineWidth=ke.strokeWidth,Ee.lineCap=ke.strokeLineCap,Ee.lineDashOffset=ke.strokeDashOffset,Ee.lineJoin=ke.strokeLineJoin,Ee.miterLimit=ke.strokeMiterLimit,De.toLive?De.gradientUnits==="percentage"||De.gradientTransform||De.patternTransform?this._applyPatternForTransformedGradient(Ee,De):(Ee.strokeStyle=De.toLive(Ee,this),this._applyPatternGradientTransform(Ee,De)):Ee.strokeStyle=ke.stroke)},_setFillStyles:function(Ee,ke){var De=ke.fill;De&&(De.toLive?(Ee.fillStyle=De.toLive(Ee,this),this._applyPatternGradientTransform(Ee,ke.fill)):Ee.fillStyle=De)},_setClippingProperties:function(Ee){Ee.globalAlpha=1,Ee.strokeStyle="transparent",Ee.fillStyle="#000000"},_setLineDash:function(Ee,ke){!ke||ke.length===0||(1&ke.length&&ke.push.apply(ke,ke),Ee.setLineDash(ke))},_renderControls:function(Ee,ke){var De=this.getViewportTransform(),Be=this.calcTransformMatrix(),He,Ue,We;ke=ke||{},Ue=typeof ke.hasBorders<"u"?ke.hasBorders:this.hasBorders,We=typeof ke.hasControls<"u"?ke.hasControls:this.hasControls,Be=_e.util.multiplyTransformMatrices(De,Be),He=_e.util.qrDecompose(Be),Ee.save(),Ee.translate(He.translateX,He.translateY),Ee.lineWidth=1*this.borderScaleFactor,this.group||(Ee.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(He.angle-=180),Ee.rotate(St(this.group?He.angle:this.angle)),ke.forActiveSelection||this.group?Ue&&this.drawBordersInGroup(Ee,He,ke):Ue&&this.drawBorders(Ee,ke),We&&this.drawControls(Ee,ke),Ee.restore()},_setShadow:function(Ee){if(!!this.shadow){var ke=this.shadow,De=this.canvas,Be,He=De&&De.viewportTransform[0]||1,Ue=De&&De.viewportTransform[3]||1;ke.nonScaling?Be={scaleX:1,scaleY:1}:Be=this.getObjectScaling(),De&&De._isRetinaScaling()&&(He*=_e.devicePixelRatio,Ue*=_e.devicePixelRatio),Ee.shadowColor=ke.color,Ee.shadowBlur=ke.blur*_e.browserShadowBlurConstant*(He+Ue)*(Be.scaleX+Be.scaleY)/4,Ee.shadowOffsetX=ke.offsetX*He*Be.scaleX,Ee.shadowOffsetY=ke.offsetY*Ue*Be.scaleY}},_removeShadow:function(Ee){!this.shadow||(Ee.shadowColor="",Ee.shadowBlur=Ee.shadowOffsetX=Ee.shadowOffsetY=0)},_applyPatternGradientTransform:function(Ee,ke){if(!ke||!ke.toLive)return{offsetX:0,offsetY:0};var De=ke.gradientTransform||ke.patternTransform,Be=-this.width/2+ke.offsetX||0,He=-this.height/2+ke.offsetY||0;return ke.gradientUnits==="percentage"?Ee.transform(this.width,0,0,this.height,Be,He):Ee.transform(1,0,0,1,Be,He),De&&Ee.transform(De[0],De[1],De[2],De[3],De[4],De[5]),{offsetX:Be,offsetY:He}},_renderPaintInOrder:function(Ee){this.paintFirst==="stroke"?(this._renderStroke(Ee),this._renderFill(Ee)):(this._renderFill(Ee),this._renderStroke(Ee))},_render:function(){},_renderFill:function(Ee){!this.fill||(Ee.save(),this._setFillStyles(Ee,this),this.fillRule==="evenodd"?Ee.fill("evenodd"):Ee.fill(),Ee.restore())},_renderStroke:function(Ee){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(Ee),Ee.save(),this.strokeUniform&&this.group){var ke=this.getObjectScaling();Ee.scale(1/ke.scaleX,1/ke.scaleY)}else this.strokeUniform&&Ee.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(Ee,this.strokeDashArray),this._setStrokeStyles(Ee,this),Ee.stroke(),Ee.restore()}},_applyPatternForTransformedGradient:function(Ee,ke){var De=this._limitCacheSize(this._getCacheCanvasDimensions()),Be=_e.util.createCanvasElement(),He,Ue=this.canvas.getRetinaScaling(),We=De.x/this.scaleX/Ue,Je=De.y/this.scaleY/Ue;Be.width=We,Be.height=Je,He=Be.getContext("2d"),He.beginPath(),He.moveTo(0,0),He.lineTo(We,0),He.lineTo(We,Je),He.lineTo(0,Je),He.closePath(),He.translate(We/2,Je/2),He.scale(De.zoomX/this.scaleX/Ue,De.zoomY/this.scaleY/Ue),this._applyPatternGradientTransform(He,ke),He.fillStyle=ke.toLive(Ee),He.fill(),Ee.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),Ee.scale(Ue*this.scaleX/De.zoomX,Ue*this.scaleY/De.zoomY),Ee.strokeStyle=He.createPattern(Be,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var Ee=_e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",Ee.scaleX),this.set("scaleY",Ee.scaleY),this.angle=Ee.angle,this.skewX=Ee.skewX,this.skewY=0}},_removeTransformMatrix:function(Ee){var ke=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),ke=_e.util.transformPoint(ke,this.transformMatrix)),this.transformMatrix=null,Ee&&(this.scaleX*=Ee.scaleX,this.scaleY*=Ee.scaleY,this.cropX=Ee.cropX,this.cropY=Ee.cropY,ke.x+=Ee.offsetLeft,ke.y+=Ee.offsetTop,this.width=Ee.width,this.height=Ee.height),this.setPositionByOrigin(ke,"center","center")},clone:function(Ee,ke){var De=this.toObject(ke);this.constructor.fromObject?this.constructor.fromObject(De,Ee):_e.Object._fromObject("Object",De,Ee)},cloneAsImage:function(Ee,ke){var De=this.toCanvasElement(ke);return Ee&&Ee(new _e.Image(De)),this},toCanvasElement:function(Ee){Ee||(Ee={});var ke=_e.util,De=ke.saveObjectTransform(this),Be=this.group,He=this.shadow,Ue=Math.abs,We=(Ee.multiplier||1)*(Ee.enableRetinaScaling?_e.devicePixelRatio:1);delete this.group,Ee.withoutTransform&&ke.resetObjectTransform(this),Ee.withoutShadow&&(this.shadow=null);var Je=_e.util.createCanvasElement(),Qe=this.getBoundingRect(!0,!0),fi=this.shadow,oi,ii={x:0,y:0},li,bi,mi;fi&&(li=fi.blur,fi.nonScaling?oi={scaleX:1,scaleY:1}:oi=this.getObjectScaling(),ii.x=2*Math.round(Ue(fi.offsetX)+li)*Ue(oi.scaleX),ii.y=2*Math.round(Ue(fi.offsetY)+li)*Ue(oi.scaleY)),bi=Qe.width+ii.x,mi=Qe.height+ii.y,Je.width=Math.ceil(bi),Je.height=Math.ceil(mi);var Si=new _e.StaticCanvas(Je,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});Ee.format==="jpeg"&&(Si.backgroundColor="#fff"),this.setPositionByOrigin(new _e.Point(Si.width/2,Si.height/2),"center","center");var _i=this.canvas;Si.add(this);var xi=Si.toCanvasElement(We||1,Ee);return this.shadow=He,this.set("canvas",_i),Be&&(this.group=Be),this.set(De).setCoords(),Si._objects=[],Si.dispose(),Si=null,xi},toDataURL:function(Ee){return Ee||(Ee={}),_e.util.toDataURL(this.toCanvasElement(Ee),Ee.format||"png",Ee.quality||1)},isType:function(Ee){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===Ee},complexity:function(){return 1},toJSON:function(Ee){return this.toObject(Ee)},rotate:function(Ee){var ke=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return ke&&this._setOriginToCenter(),this.set("angle",Ee),ke&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(Ee,ke){ke=ke||this.canvas.getPointer(Ee);var De=new _e.Point(ke.x,ke.y),Be=this._getLeftTopCoords();return this.angle&&(De=_e.util.rotatePoint(De,Be,St(-this.angle))),{x:De.x-Be.x,y:De.y-Be.y}},_setupCompositeOperation:function(Ee){this.globalCompositeOperation&&(Ee.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){_e.runningAnimations&&_e.runningAnimations.cancelByTarget(this)}}),_e.util.createAccessors&&_e.util.createAccessors(_e.Object),xe(_e.Object.prototype,_e.Observable),_e.Object.NUM_FRACTION_DIGITS=2,_e.Object.ENLIVEN_PROPS=["clipPath"],_e.Object._fromObject=function(Ee,ke,De,Be){var He=_e[Ee];ke=Pe(ke,!0),_e.util.enlivenPatterns([ke.fill,ke.stroke],function(Ue){typeof Ue[0]<"u"&&(ke.fill=Ue[0]),typeof Ue[1]<"u"&&(ke.stroke=Ue[1]),_e.util.enlivenObjectEnlivables(ke,ke,function(){var We=Be?new He(ke[Be],ke):new He(ke);De&&De(We)})})},_e.Object.__uid=0)}(e),function(){var Oe=t.util.degreesToRadians,_e={left:-.5,center:0,right:.5},xe={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(Pe,Ae,Se,St,Te){var Re=Pe.x,Ee=Pe.y,ke,De,Be;return typeof Ae=="string"?Ae=_e[Ae]:Ae-=.5,typeof St=="string"?St=_e[St]:St-=.5,ke=St-Ae,typeof Se=="string"?Se=xe[Se]:Se-=.5,typeof Te=="string"?Te=xe[Te]:Te-=.5,De=Te-Se,(ke||De)&&(Be=this._getTransformedDimensions(),Re=Pe.x+ke*Be.x,Ee=Pe.y+De*Be.y),new t.Point(Re,Ee)},translateToCenterPoint:function(Pe,Ae,Se){var St=this.translateToGivenOrigin(Pe,Ae,Se,"center","center");return this.angle?t.util.rotatePoint(St,Pe,Oe(this.angle)):St},translateToOriginPoint:function(Pe,Ae,Se){var St=this.translateToGivenOrigin(Pe,"center","center",Ae,Se);return this.angle?t.util.rotatePoint(St,Pe,Oe(this.angle)):St},getCenterPoint:function(){var Pe=new t.Point(this.left,this.top);return this.translateToCenterPoint(Pe,this.originX,this.originY)},getPointByOrigin:function(Pe,Ae){var Se=this.getCenterPoint();return this.translateToOriginPoint(Se,Pe,Ae)},toLocalPoint:function(Pe,Ae,Se){var St=this.getCenterPoint(),Te,Re;return typeof Ae<"u"&&typeof Se<"u"?Te=this.translateToGivenOrigin(St,"center","center",Ae,Se):Te=new t.Point(this.left,this.top),Re=new t.Point(Pe.x,Pe.y),this.angle&&(Re=t.util.rotatePoint(Re,St,-Oe(this.angle))),Re.subtractEquals(Te)},setPositionByOrigin:function(Pe,Ae,Se){var St=this.translateToCenterPoint(Pe,Ae,Se),Te=this.translateToOriginPoint(St,this.originX,this.originY);this.set("left",Te.x),this.set("top",Te.y)},adjustPosition:function(Pe){var Ae=Oe(this.angle),Se=this.getScaledWidth(),St=t.util.cos(Ae)*Se,Te=t.util.sin(Ae)*Se,Re,Ee;typeof this.originX=="string"?Re=_e[this.originX]:Re=this.originX-.5,typeof Pe=="string"?Ee=_e[Pe]:Ee=Pe-.5,this.left+=St*(Ee-Re),this.top+=Te*(Ee-Re),this.setCoords(),this.originX=Pe},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var Pe=this.getCenterPoint();this.originX="center",this.originY="center",this.left=Pe.x,this.top=Pe.y},_resetOrigin:function(){var Pe=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=Pe.x,this.top=Pe.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function Oe(Se){return[new t.Point(Se.tl.x,Se.tl.y),new t.Point(Se.tr.x,Se.tr.y),new t.Point(Se.br.x,Se.br.y),new t.Point(Se.bl.x,Se.bl.y)]}var _e=t.util,xe=_e.degreesToRadians,Pe=_e.multiplyTransformMatrices,Ae=_e.transformPoint;_e.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(Se,St){return St?Se?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),Se?this.aCoords:this.lineCoords)},getCoords:function(Se,St){return Oe(this._getCoords(Se,St))},intersectsWithRect:function(Se,St,Te,Re){var Ee=this.getCoords(Te,Re),ke=t.Intersection.intersectPolygonRectangle(Ee,Se,St);return ke.status==="Intersection"},intersectsWithObject:function(Se,St,Te){var Re=t.Intersection.intersectPolygonPolygon(this.getCoords(St,Te),Se.getCoords(St,Te));return Re.status==="Intersection"||Se.isContainedWithinObject(this,St,Te)||this.isContainedWithinObject(Se,St,Te)},isContainedWithinObject:function(Se,St,Te){for(var Re=this.getCoords(St,Te),Ee=St?Se.aCoords:Se.lineCoords,ke=0,De=Se._getImageLines(Ee);ke<4;ke++)if(!Se.containsPoint(Re[ke],De))return!1;return!0},isContainedWithinRect:function(Se,St,Te,Re){var Ee=this.getBoundingRect(Te,Re);return Ee.left>=Se.x&&Ee.left+Ee.width<=St.x&&Ee.top>=Se.y&&Ee.top+Ee.height<=St.y},containsPoint:function(Se,ke,Te,Re){var Ee=this._getCoords(Te,Re),ke=ke||this._getImageLines(Ee),De=this._findCrossPoints(Se,ke);return De!==0&&De%2===1},isOnScreen:function(Se){if(!this.canvas)return!1;var St=this.canvas.vptCoords.tl,Te=this.canvas.vptCoords.br,Re=this.getCoords(!0,Se);return Re.some(function(Ee){return Ee.x<=Te.x&&Ee.x>=St.x&&Ee.y<=Te.y&&Ee.y>=St.y})||this.intersectsWithRect(St,Te,!0,Se)?!0:this._containsCenterOfCanvas(St,Te,Se)},_containsCenterOfCanvas:function(Se,St,Te){var Re={x:(Se.x+St.x)/2,y:(Se.y+St.y)/2};return!!this.containsPoint(Re,null,!0,Te)},isPartiallyOnScreen:function(Se){if(!this.canvas)return!1;var St=this.canvas.vptCoords.tl,Te=this.canvas.vptCoords.br;if(this.intersectsWithRect(St,Te,!0,Se))return!0;var Re=this.getCoords(!0,Se).every(function(Ee){return(Ee.x>=Te.x||Ee.x<=St.x)&&(Ee.y>=Te.y||Ee.y<=St.y)});return Re&&this._containsCenterOfCanvas(St,Te,Se)},_getImageLines:function(Se){var St={topline:{o:Se.tl,d:Se.tr},rightline:{o:Se.tr,d:Se.br},bottomline:{o:Se.br,d:Se.bl},leftline:{o:Se.bl,d:Se.tl}};return St},_findCrossPoints:function(Se,St){var Te,Re,Ee,ke,De,Be=0,He;for(var Ue in St)if(He=St[Ue],!(He.o.y<Se.y&&He.d.y<Se.y)&&!(He.o.y>=Se.y&&He.d.y>=Se.y)&&(He.o.x===He.d.x&&He.o.x>=Se.x?De=He.o.x:(Te=0,Re=(He.d.y-He.o.y)/(He.d.x-He.o.x),Ee=Se.y-Te*Se.x,ke=He.o.y-Re*He.o.x,De=-(Ee-ke)/(Te-Re)),De>=Se.x&&(Be+=1),Be===2))break;return Be},getBoundingRect:function(Se,St){var Te=this.getCoords(Se,St);return _e.makeBoundingBoxFromPoints(Te)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(Se){return Math.abs(Se)<this.minScaleLimit?Se<0?-this.minScaleLimit:this.minScaleLimit:Se===0?1e-4:Se},scale:function(Se){return this._set("scaleX",Se),this._set("scaleY",Se),this.setCoords()},scaleToWidth:function(Se,St){var Te=this.getBoundingRect(St).width/this.getScaledWidth();return this.scale(Se/this.width/Te)},scaleToHeight:function(Se,St){var Te=this.getBoundingRect(St).height/this.getScaledHeight();return this.scale(Se/this.height/Te)},calcLineCoords:function(){var Se=this.getViewportTransform(),St=this.padding,Te=xe(this.angle),Re=_e.cos(Te),Ee=_e.sin(Te),ke=Re*St,De=Ee*St,Be=ke+De,He=ke-De,Ue=this.calcACoords(),We={tl:Ae(Ue.tl,Se),tr:Ae(Ue.tr,Se),bl:Ae(Ue.bl,Se),br:Ae(Ue.br,Se)};return St&&(We.tl.x-=He,We.tl.y-=Be,We.tr.x+=Be,We.tr.y-=He,We.bl.x-=Be,We.bl.y+=He,We.br.x+=He,We.br.y+=Be),We},calcOCoords:function(){var Se=this._calcRotateMatrix(),St=this._calcTranslateMatrix(),Te=this.getViewportTransform(),Re=Pe(Te,St),Ee=Pe(Re,Se),Ee=Pe(Ee,[1/Te[0],0,0,1/Te[3],0,0]),ke=this._calculateCurrentDimensions(),De={};return this.forEachControl(function(Be,He,Ue){De[He]=Be.positionHandler(ke,Ee,Ue)}),De},calcACoords:function(){var Se=this._calcRotateMatrix(),St=this._calcTranslateMatrix(),Te=Pe(St,Se),Re=this._getTransformedDimensions(),Ee=Re.x/2,ke=Re.y/2;return{tl:Ae({x:-Ee,y:-ke},Te),tr:Ae({x:Ee,y:-ke},Te),bl:Ae({x:-Ee,y:ke},Te),br:Ae({x:Ee,y:ke},Te)}},setCoords:function(Se){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),Se?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return _e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var Se=this.getCenterPoint();return[1,0,0,1,Se.x,Se.y]},transformMatrixKey:function(Se){var St="_",Te="";return!Se&&this.group&&(Te=this.group.transformMatrixKey(Se)+St),Te+this.top+St+this.left+St+this.scaleX+St+this.scaleY+St+this.skewX+St+this.skewY+St+this.angle+St+this.originX+St+this.originY+St+this.width+St+this.height+St+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(Se){var St=this.calcOwnMatrix();if(Se||!this.group)return St;var Te=this.transformMatrixKey(Se),Re=this.matrixCache||(this.matrixCache={});return Re.key===Te?Re.value:(this.group&&(St=Pe(this.group.calcTransformMatrix(!1),St)),Re.key=Te,Re.value=St,St)},calcOwnMatrix:function(){var Se=this.transformMatrixKey(!0),St=this.ownMatrixCache||(this.ownMatrixCache={});if(St.key===Se)return St.value;var Te=this._calcTranslateMatrix(),Re={angle:this.angle,translateX:Te[4],translateY:Te[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return St.key=Se,St.value=_e.composeMatrix(Re),St.value},_getNonTransformedDimensions:function(){var Se=this.strokeWidth,St=this.width+Se,Te=this.height+Se;return{x:St,y:Te}},_getTransformedDimensions:function(Se,St){typeof Se>"u"&&(Se=this.skewX),typeof St>"u"&&(St=this.skewY);var Te,Re,Ee,ke=Se===0&&St===0;if(this.strokeUniform?(Re=this.width,Ee=this.height):(Te=this._getNonTransformedDimensions(),Re=Te.x,Ee=Te.y),ke)return this._finalizeDimensions(Re*this.scaleX,Ee*this.scaleY);var De=_e.sizeAfterTransform(Re,Ee,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:Se,skewY:St});return this._finalizeDimensions(De.x,De.y)},_finalizeDimensions:function(Se,St){return this.strokeUniform?{x:Se+this.strokeWidth,y:St+this.strokeWidth}:{x:Se,y:St}},_calculateCurrentDimensions:function(){var Se=this.getViewportTransform(),St=this._getTransformedDimensions(),Te=Ae(St,Se,!0);return Te.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(Oe){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,Oe):this.canvas&&this.canvas.sendBackwards(this,Oe),this},bringForward:function(Oe){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,Oe):this.canvas&&this.canvas.bringForward(this,Oe),this},moveTo:function(Oe){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,Oe):this.canvas&&this.canvas.moveTo(this,Oe),this}}),function(){function Oe(xe,Pe){if(Pe){if(Pe.toLive)return xe+": url(#SVGID_"+Pe.id+"); ";var Ae=new t.Color(Pe),Se=xe+": "+Ae.toRgb()+"; ",St=Ae.getAlpha();return St!==1&&(Se+=xe+"-opacity: "+St.toString()+"; "),Se}else return xe+": none; "}var _e=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(xe){var Pe=this.fillRule?this.fillRule:"nonzero",Ae=this.strokeWidth?this.strokeWidth:"0",Se=this.strokeDashArray?this.strokeDashArray.join(" "):"none",St=this.strokeDashOffset?this.strokeDashOffset:"0",Te=this.strokeLineCap?this.strokeLineCap:"butt",Re=this.strokeLineJoin?this.strokeLineJoin:"miter",Ee=this.strokeMiterLimit?this.strokeMiterLimit:"4",ke=typeof this.opacity<"u"?this.opacity:"1",De=this.visible?"":" visibility: hidden;",Be=xe?"":this.getSvgFilter(),He=Oe("fill",this.fill),Ue=Oe("stroke",this.stroke);return[Ue,"stroke-width: ",Ae,"; ","stroke-dasharray: ",Se,"; ","stroke-linecap: ",Te,"; ","stroke-dashoffset: ",St,"; ","stroke-linejoin: ",Re,"; ","stroke-miterlimit: ",Ee,"; ",He,"fill-rule: ",Pe,"; ","opacity: ",ke,";",Be,De].join("")},getSvgSpanStyles:function(xe,Pe){var Ae="; ",St=xe.fontFamily?"font-family: "+(xe.fontFamily.indexOf("'")===-1&&xe.fontFamily.indexOf('"')===-1?"'"+xe.fontFamily+"'":xe.fontFamily)+Ae:"",Se=xe.strokeWidth?"stroke-width: "+xe.strokeWidth+Ae:"",St=St,Te=xe.fontSize?"font-size: "+xe.fontSize+"px"+Ae:"",Re=xe.fontStyle?"font-style: "+xe.fontStyle+Ae:"",Ee=xe.fontWeight?"font-weight: "+xe.fontWeight+Ae:"",ke=xe.fill?Oe("fill",xe.fill):"",De=xe.stroke?Oe("stroke",xe.stroke):"",Be=this.getSvgTextDecoration(xe),He=xe.deltaY?"baseline-shift: "+-xe.deltaY+"; ":"";return Be&&(Be="text-decoration: "+Be+Ae),[De,Se,St,Te,Re,Ee,Be,ke,He,Pe?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(xe){return["overline","underline","line-through"].filter(function(Pe){return xe[Pe.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(xe,Pe){var Ae=xe?this.calcTransformMatrix():this.calcOwnMatrix(),Se='transform="'+t.util.matrixToSVG(Ae);return Se+(Pe||"")+'" '},_setSVGBg:function(xe){if(this.backgroundColor){var Pe=t.Object.NUM_FRACTION_DIGITS;xe.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',_e(-this.width/2,Pe),'" y="',_e(-this.height/2,Pe),'" width="',_e(this.width,Pe),'" height="',_e(this.height,Pe),`"></rect>
`)}},toSVG:function(xe){return this._createBaseSVGMarkup(this._toSVG(xe),{reviver:xe})},toClipPathSVG:function(xe){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(xe),{reviver:xe})},_createBaseClipPathSVGMarkup:function(xe,Pe){Pe=Pe||{};var Ae=Pe.reviver,Se=Pe.additionalTransform||"",St=[this.getSvgTransform(!0,Se),this.getSvgCommons()].join(""),Te=xe.indexOf("COMMON_PARTS");return xe[Te]=St,Ae?Ae(xe.join("")):xe.join("")},_createBaseSVGMarkup:function(xe,Pe){Pe=Pe||{};var Ae=Pe.noStyle,Se=Pe.reviver,St=Ae?"":'style="'+this.getSvgStyles()+'" ',Te=Pe.withShadow?'style="'+this.getSvgFilter()+'" ':"",Re=this.clipPath,Ee=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",ke=Re&&Re.absolutePositioned,De=this.stroke,Be=this.fill,He=this.shadow,Ue,We=[],Je,Qe=xe.indexOf("COMMON_PARTS"),fi=Pe.additionalTransform;return Re&&(Re.clipPathId="CLIPPATH_"+t.Object.__uid++,Je='<clipPath id="'+Re.clipPathId+`" >
`+Re.toClipPathSVG(Se)+`</clipPath>
`),ke&&We.push("<g ",Te,this.getSvgCommons(),` >
`),We.push("<g ",this.getSvgTransform(!1),ke?"":Te+this.getSvgCommons(),` >
`),Ue=[St,Ee,Ae?"":this.addPaintOrder()," ",fi?'transform="'+fi+'" ':""].join(""),xe[Qe]=Ue,Be&&Be.toLive&&We.push(Be.toSVG(this)),De&&De.toLive&&We.push(De.toSVG(this)),He&&We.push(He.toSVG(this)),Re&&We.push(Je),We.push(xe.join("")),We.push(`</g>
`),ke&&We.push(`</g>
`),Se?Se(We.join("")):We.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var Oe=t.util.object.extend,_e="stateProperties";function xe(Ae,Se,St){var Te={},Re=!0;St.forEach(function(Ee){Te[Ee]=Ae[Ee]}),Oe(Ae[Se],Te,Re)}function Pe(Ae,Se,St){if(Ae===Se)return!0;if(Array.isArray(Ae)){if(!Array.isArray(Se)||Ae.length!==Se.length)return!1;for(var Te=0,Re=Ae.length;Te<Re;Te++)if(!Pe(Ae[Te],Se[Te]))return!1;return!0}else if(Ae&&typeof Ae=="object"){var Ee=Object.keys(Ae),ke;if(!Se||typeof Se!="object"||!St&&Ee.length!==Object.keys(Se).length)return!1;for(var Te=0,Re=Ee.length;Te<Re;Te++)if(ke=Ee[Te],!(ke==="canvas"||ke==="group")&&!Pe(Ae[ke],Se[ke]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(Ae){Ae=Ae||_e;var Se="_"+Ae;return Object.keys(this[Se]).length<this[Ae].length?!0:!Pe(this[Se],this,!0)},saveState:function(Ae){var Se=Ae&&Ae.propertySet||_e,St="_"+Se;return this[St]?(xe(this,St,this[Se]),Ae&&Ae.stateProperties&&xe(this,St,Ae.stateProperties),this):this.setupState(Ae)},setupState:function(Ae){Ae=Ae||{};var Se=Ae.propertySet||_e;return Ae.propertySet=Se,this["_"+Se]={},this.saveState(Ae),this}})}(),function(){var Oe=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(_e,xe){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var Pe=_e.x,Ae=_e.y,Se,St,Te=Object.keys(this.oCoords),Re=Te.length-1,Ee;for(this.__corner=0;Re>=0;Re--)if(Ee=Te[Re],!!this.isControlVisible(Ee)&&(St=this._getImageLines(xe?this.oCoords[Ee].touchCorner:this.oCoords[Ee].corner),Se=this._findCrossPoints({x:Pe,y:Ae},St),Se!==0&&Se%2===1))return this.__corner=Ee,Ee;return!1},forEachControl:function(_e){for(var xe in this.controls)_e(this.controls[xe],xe,this)},_setCornerCoords:function(){var _e=this.oCoords;for(var xe in _e){var Pe=this.controls[xe];_e[xe].corner=Pe.calcCornerCoords(this.angle,this.cornerSize,_e[xe].x,_e[xe].y,!1),_e[xe].touchCorner=Pe.calcCornerCoords(this.angle,this.touchCornerSize,_e[xe].x,_e[xe].y,!0)}},drawSelectionBackground:function(_e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;_e.save();var xe=this.getCenterPoint(),Pe=this._calculateCurrentDimensions(),Ae=this.canvas.viewportTransform;return _e.translate(xe.x,xe.y),_e.scale(1/Ae[0],1/Ae[3]),_e.rotate(Oe(this.angle)),_e.fillStyle=this.selectionBackgroundColor,_e.fillRect(-Pe.x/2,-Pe.y/2,Pe.x,Pe.y),_e.restore(),this},drawBorders:function(_e,xe){xe=xe||{};var Pe=this._calculateCurrentDimensions(),Ae=this.borderScaleFactor,Se=Pe.x+Ae,St=Pe.y+Ae,Te=typeof xe.hasControls<"u"?xe.hasControls:this.hasControls,Re=!1;return _e.save(),_e.strokeStyle=xe.borderColor||this.borderColor,this._setLineDash(_e,xe.borderDashArray||this.borderDashArray),_e.strokeRect(-Se/2,-St/2,Se,St),Te&&(_e.beginPath(),this.forEachControl(function(Ee,ke,De){Ee.withConnection&&Ee.getVisibility(De,ke)&&(Re=!0,_e.moveTo(Ee.x*Se,Ee.y*St),_e.lineTo(Ee.x*Se+Ee.offsetX,Ee.y*St+Ee.offsetY))}),Re&&_e.stroke()),_e.restore(),this},drawBordersInGroup:function(_e,xe,Pe){Pe=Pe||{};var Ae=t.util.sizeAfterTransform(this.width,this.height,xe),Se=this.strokeWidth,St=this.strokeUniform,Te=this.borderScaleFactor,Re=Ae.x+Se*(St?this.canvas.getZoom():xe.scaleX)+Te,Ee=Ae.y+Se*(St?this.canvas.getZoom():xe.scaleY)+Te;return _e.save(),this._setLineDash(_e,Pe.borderDashArray||this.borderDashArray),_e.strokeStyle=Pe.borderColor||this.borderColor,_e.strokeRect(-Re/2,-Ee/2,Re,Ee),_e.restore(),this},drawControls:function(_e,xe){xe=xe||{},_e.save();var Pe=this.canvas.getRetinaScaling(),Ae,Se;return _e.setTransform(Pe,0,0,Pe,0,0),_e.strokeStyle=_e.fillStyle=xe.cornerColor||this.cornerColor,this.transparentCorners||(_e.strokeStyle=xe.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(_e,xe.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(Ae=this.group.calcTransformMatrix()),this.forEachControl(function(St,Te,Re){Se=Re.oCoords[Te],St.getVisibility(Re,Te)&&(Ae&&(Se=t.util.transformPoint(Se,Ae)),St.render(_e,Se.x,Se.y,xe,Re))}),_e.restore(),this},isControlVisible:function(_e){return this.controls[_e]&&this.controls[_e].getVisibility(this,_e)},setControlVisible:function(_e,xe){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[_e]=xe,this},setControlsVisibility:function(_e){_e||(_e={});for(var xe in _e)this.setControlVisible(xe,_e[xe]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(Oe,_e){_e=_e||{};var xe=function(){},Pe=_e.onComplete||xe,Ae=_e.onChange||xe,Se=this;return t.util.animate({target:this,startValue:Oe.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(St){Oe.set("left",St),Se.requestRenderAll(),Ae()},onComplete:function(){Oe.setCoords(),Pe()}})},fxCenterObjectV:function(Oe,_e){_e=_e||{};var xe=function(){},Pe=_e.onComplete||xe,Ae=_e.onChange||xe,Se=this;return t.util.animate({target:this,startValue:Oe.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(St){Oe.set("top",St),Se.requestRenderAll(),Ae()},onComplete:function(){Oe.setCoords(),Pe()}})},fxRemove:function(Oe,_e){_e=_e||{};var xe=function(){},Pe=_e.onComplete||xe,Ae=_e.onChange||xe,Se=this;return t.util.animate({target:this,startValue:Oe.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(St){Oe.set("opacity",St),Se.requestRenderAll(),Ae()},onComplete:function(){Se.remove(Oe),Pe()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var Oe=[],_e,xe,Pe=[];for(_e in arguments[0])Oe.push(_e);for(var Ae=0,Se=Oe.length;Ae<Se;Ae++)_e=Oe[Ae],xe=Ae!==Se-1,Pe.push(this._animate(_e,arguments[0][_e],arguments[1],xe));return Pe}else return this._animate.apply(this,arguments)},_animate:function(Oe,_e,xe,Pe){var Ae=this,Se;_e=_e.toString(),xe?xe=t.util.object.clone(xe):xe={},~Oe.indexOf(".")&&(Se=Oe.split("."));var St=Ae.colorProperties.indexOf(Oe)>-1||Se&&Ae.colorProperties.indexOf(Se[1])>-1,Te=Se?this.get(Se[0])[Se[1]]:this.get(Oe);"from"in xe||(xe.from=Te),St||(~_e.indexOf("=")?_e=Te+parseFloat(_e.replace("=","")):_e=parseFloat(_e));var Re={target:this,startValue:xe.from,endValue:_e,byValue:xe.by,easing:xe.easing,duration:xe.duration,abort:xe.abort&&function(Ee,ke,De){return xe.abort.call(Ae,Ee,ke,De)},onChange:function(Ee,ke,De){Se?Ae[Se[0]][Se[1]]=Ee:Ae.set(Oe,Ee),!Pe&&xe.onChange&&xe.onChange(Ee,ke,De)},onComplete:function(Ee,ke,De){Pe||(Ae.setCoords(),xe.onComplete&&xe.onComplete(Ee,ke,De))}};return St?t.util.animateColor(Re.startValue,Re.endValue,Re.duration,Re):t.util.animate(Re)}}),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.util.object.clone,Ae={x1:1,x2:1,y1:1,y2:1};if(_e.Line){_e.warn("fabric.Line is already defined");return}_e.Line=_e.util.createClass(_e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(St,Te){St||(St=[0,0,0,0]),this.callSuper("initialize",Te),this.set("x1",St[0]),this.set("y1",St[1]),this.set("x2",St[2]),this.set("y2",St[3]),this._setWidthHeight(Te)},_setWidthHeight:function(St){St||(St={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in St?St.left:this._getLeftToOriginX(),this.top="top"in St?St.top:this._getTopToOriginY()},_set:function(St,Te){return this.callSuper("_set",St,Te),typeof Ae[St]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:Se({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:Se({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(St){St.beginPath();var Te=this.calcLinePoints();St.moveTo(Te.x1,Te.y1),St.lineTo(Te.x2,Te.y2),St.lineWidth=this.strokeWidth;var Re=St.strokeStyle;St.strokeStyle=this.stroke||St.fillStyle,this.stroke&&this._renderStroke(St),St.strokeStyle=Re},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(St){return xe(this.callSuper("toObject",St),this.calcLinePoints())},_getNonTransformedDimensions:function(){var St=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(St.y-=this.strokeWidth),this.height===0&&(St.x-=this.strokeWidth)),St},calcLinePoints:function(){var St=this.x1<=this.x2?-1:1,Te=this.y1<=this.y2?-1:1,Re=St*this.width*.5,Ee=Te*this.height*.5,ke=St*this.width*-.5,De=Te*this.height*-.5;return{x1:Re,x2:ke,y1:Ee,y2:De}},_toSVG:function(){var St=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',St.x1,'" y1="',St.y1,'" x2="',St.x2,'" y2="',St.y2,`" />
`]}}),_e.Line.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),_e.Line.fromElement=function(St,Te,Re){Re=Re||{};var Ee=_e.parseAttributes(St,_e.Line.ATTRIBUTE_NAMES),ke=[Ee.x1||0,Ee.y1||0,Ee.x2||0,Ee.y2||0];Te(new _e.Line(ke,xe(Ee,Re)))},_e.Line.fromObject=function(St,Te){function Re(ke){delete ke.points,Te&&Te(ke)}var Ee=Pe(St,!0);Ee.points=[St.x1,St.y1,St.x2,St.y2],_e.Object._fromObject("Line",Ee,Re,"points")};function Se(St,Te){var Re=St.origin,Ee=St.axis1,ke=St.axis2,De=St.dimension,Be=Te.nearest,He=Te.center,Ue=Te.farthest;return function(){switch(this.get(Re)){case Be:return Math.min(this.get(Ee),this.get(ke));case He:return Math.min(this.get(Ee),this.get(ke))+.5*this.get(De);case Ue:return Math.max(this.get(Ee),this.get(ke))}}}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.degreesToRadians;if(_e.Circle){_e.warn("fabric.Circle is already defined.");return}_e.Circle=_e.util.createClass(_e.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:_e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(Ae,Se){return this.callSuper("_set",Ae,Se),Ae==="radius"&&this.setRadius(Se),this},toObject:function(Ae){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(Ae))},_toSVG:function(){var Ae,Se=0,St=0,Te=(this.endAngle-this.startAngle)%360;if(Te===0)Ae=["<circle ","COMMON_PARTS",'cx="'+Se+'" cy="'+St+'" ','r="',this.radius,`" />
`];else{var Re=xe(this.startAngle),Ee=xe(this.endAngle),ke=this.radius,De=_e.util.cos(Re)*ke,Be=_e.util.sin(Re)*ke,He=_e.util.cos(Ee)*ke,Ue=_e.util.sin(Ee)*ke,We=Te>180?"1":"0";Ae=['<path d="M '+De+" "+Be," A "+ke+" "+ke," 0 ",+We+" 1"," "+He+" "+Ue,'" ',"COMMON_PARTS",` />
`]}return Ae},_render:function(Ae){Ae.beginPath(),Ae.arc(0,0,this.radius,xe(this.startAngle),xe(this.endAngle),!1),this._renderPaintInOrder(Ae)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(Ae){return this.radius=Ae,this.set("width",Ae*2).set("height",Ae*2)}}),_e.Circle.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),_e.Circle.fromElement=function(Ae,Se){var St=_e.parseAttributes(Ae,_e.Circle.ATTRIBUTE_NAMES);if(!Pe(St))throw new Error("value of `r` attribute is required and can not be negative");St.left=(St.left||0)-St.radius,St.top=(St.top||0)-St.radius,Se(new _e.Circle(St))};function Pe(Ae){return"radius"in Ae&&Ae.radius>=0}_e.Circle.fromObject=function(Ae,Se){_e.Object._fromObject("Circle",Ae,Se)}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={});if(_e.Triangle){_e.warn("fabric.Triangle is already defined");return}_e.Triangle=_e.util.createClass(_e.Object,{type:"triangle",width:100,height:100,_render:function(xe){var Pe=this.width/2,Ae=this.height/2;xe.beginPath(),xe.moveTo(-Pe,Ae),xe.lineTo(0,-Ae),xe.lineTo(Pe,Ae),xe.closePath(),this._renderPaintInOrder(xe)},_toSVG:function(){var xe=this.width/2,Pe=this.height/2,Ae=[-xe+" "+Pe,"0 "+-Pe,xe+" "+Pe].join(",");return["<polygon ","COMMON_PARTS",'points="',Ae,'" />']}}),_e.Triangle.fromObject=function(xe,Pe){return _e.Object._fromObject("Triangle",xe,Pe)}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=Math.PI*2;if(_e.Ellipse){_e.warn("fabric.Ellipse is already defined.");return}_e.Ellipse=_e.util.createClass(_e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(Pe){this.callSuper("initialize",Pe),this.set("rx",Pe&&Pe.rx||0),this.set("ry",Pe&&Pe.ry||0)},_set:function(Pe,Ae){switch(this.callSuper("_set",Pe,Ae),Pe){case"rx":this.rx=Ae,this.set("width",Ae*2);break;case"ry":this.ry=Ae,this.set("height",Ae*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(Pe){return this.callSuper("toObject",["rx","ry"].concat(Pe))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(Pe){Pe.beginPath(),Pe.save(),Pe.transform(1,0,0,this.ry/this.rx,0,0),Pe.arc(0,0,this.rx,0,xe,!1),Pe.restore(),this._renderPaintInOrder(Pe)}}),_e.Ellipse.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),_e.Ellipse.fromElement=function(Pe,Ae){var Se=_e.parseAttributes(Pe,_e.Ellipse.ATTRIBUTE_NAMES);Se.left=(Se.left||0)-Se.rx,Se.top=(Se.top||0)-Se.ry,Ae(new _e.Ellipse(Se))},_e.Ellipse.fromObject=function(Pe,Ae){_e.Object._fromObject("Ellipse",Pe,Ae)}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend;if(_e.Rect){_e.warn("fabric.Rect is already defined");return}_e.Rect=_e.util.createClass(_e.Object,{stateProperties:_e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(Pe){this.callSuper("initialize",Pe),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(Pe){var Ae=this.rx?Math.min(this.rx,this.width/2):0,Se=this.ry?Math.min(this.ry,this.height/2):0,St=this.width,Te=this.height,Re=-this.width/2,Ee=-this.height/2,ke=Ae!==0||Se!==0,De=1-.5522847498;Pe.beginPath(),Pe.moveTo(Re+Ae,Ee),Pe.lineTo(Re+St-Ae,Ee),ke&&Pe.bezierCurveTo(Re+St-De*Ae,Ee,Re+St,Ee+De*Se,Re+St,Ee+Se),Pe.lineTo(Re+St,Ee+Te-Se),ke&&Pe.bezierCurveTo(Re+St,Ee+Te-De*Se,Re+St-De*Ae,Ee+Te,Re+St-Ae,Ee+Te),Pe.lineTo(Re+Ae,Ee+Te),ke&&Pe.bezierCurveTo(Re+De*Ae,Ee+Te,Re,Ee+Te-De*Se,Re,Ee+Te-Se),Pe.lineTo(Re,Ee+Se),ke&&Pe.bezierCurveTo(Re,Ee+De*Se,Re+De*Ae,Ee,Re+Ae,Ee),Pe.closePath(),this._renderPaintInOrder(Pe)},toObject:function(Pe){return this.callSuper("toObject",["rx","ry"].concat(Pe))},_toSVG:function(){var Pe=-this.width/2,Ae=-this.height/2;return["<rect ","COMMON_PARTS",'x="',Pe,'" y="',Ae,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),_e.Rect.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),_e.Rect.fromElement=function(Pe,Ae,Se){if(!Pe)return Ae(null);Se=Se||{};var St=_e.parseAttributes(Pe,_e.Rect.ATTRIBUTE_NAMES);St.left=St.left||0,St.top=St.top||0,St.height=St.height||0,St.width=St.width||0;var Te=new _e.Rect(xe(Se?_e.util.object.clone(Se):{},St));Te.visible=Te.visible&&Te.width>0&&Te.height>0,Ae(Te)},_e.Rect.fromObject=function(Pe,Ae){return _e.Object._fromObject("Rect",Pe,Ae)}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.util.array.min,Ae=_e.util.array.max,Se=_e.util.toFixed,St=_e.util.projectStrokeOnPoints;if(_e.Polyline){_e.warn("fabric.Polyline is already defined");return}_e.Polyline=_e.util.createClass(_e.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:_e.Object.prototype.cacheProperties.concat("points"),initialize:function(Te,Re){Re=Re||{},this.points=Te||[],this.callSuper("initialize",Re),this._setPositionDimensions(Re)},_projectStrokeOnPoints:function(){return St(this.points,this,!0)},_setPositionDimensions:function(Te){var Re=this._calcDimensions(Te),Ee,ke=this.exactBoundingBox?this.strokeWidth:0;this.width=Re.width-ke,this.height=Re.height-ke,Te.fromSVG||(Ee=this.translateToGivenOrigin({x:Re.left-this.strokeWidth/2+ke/2,y:Re.top-this.strokeWidth/2+ke/2},"left","top",this.originX,this.originY)),typeof Te.left>"u"&&(this.left=Te.fromSVG?Re.left:Ee.x),typeof Te.top>"u"&&(this.top=Te.fromSVG?Re.top:Ee.y),this.pathOffset={x:Re.left+this.width/2+ke/2,y:Re.top+this.height/2+ke/2}},_calcDimensions:function(){var Te=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,Re=Pe(Te,"x")||0,Ee=Pe(Te,"y")||0,ke=Ae(Te,"x")||0,De=Ae(Te,"y")||0,Be=ke-Re,He=De-Ee;return{left:Re,top:Ee,width:Be,height:He}},toObject:function(Te){return xe(this.callSuper("toObject",Te),{points:this.points.concat()})},_toSVG:function(){for(var Te=[],Re=this.pathOffset.x,Ee=this.pathOffset.y,ke=_e.Object.NUM_FRACTION_DIGITS,De=0,Be=this.points.length;De<Be;De++)Te.push(Se(this.points[De].x-Re,ke),",",Se(this.points[De].y-Ee,ke)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',Te.join(""),`" />
`]},commonRender:function(Te){var Re,Ee=this.points.length,ke=this.pathOffset.x,De=this.pathOffset.y;if(!Ee||isNaN(this.points[Ee-1].y))return!1;Te.beginPath(),Te.moveTo(this.points[0].x-ke,this.points[0].y-De);for(var Be=0;Be<Ee;Be++)Re=this.points[Be],Te.lineTo(Re.x-ke,Re.y-De);return!0},_render:function(Te){!this.commonRender(Te)||this._renderPaintInOrder(Te)},complexity:function(){return this.get("points").length}}),_e.Polyline.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(),_e.Polyline.fromElementGenerator=function(Te){return function(Re,Ee,ke){if(!Re)return Ee(null);ke||(ke={});var De=_e.parsePointsAttribute(Re.getAttribute("points")),Be=_e.parseAttributes(Re,_e[Te].ATTRIBUTE_NAMES);Be.fromSVG=!0,Ee(new _e[Te](De,xe(Be,ke)))}},_e.Polyline.fromElement=_e.Polyline.fromElementGenerator("Polyline"),_e.Polyline.fromObject=function(Te,Re){return _e.Object._fromObject("Polyline",Te,Re,"points")}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.projectStrokeOnPoints;if(_e.Polygon){_e.warn("fabric.Polygon is already defined");return}_e.Polygon=_e.util.createClass(_e.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return xe(this.points,this)},_render:function(Pe){!this.commonRender(Pe)||(Pe.closePath(),this._renderPaintInOrder(Pe))}}),_e.Polygon.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(),_e.Polygon.fromElement=_e.Polyline.fromElementGenerator("Polygon"),_e.Polygon.fromObject=function(Pe,Ae){_e.Object._fromObject("Polygon",Pe,Ae,"points")}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.array.min,Pe=_e.util.array.max,Ae=_e.util.object.extend,Se=_e.util.object.clone,St=_e.util.toFixed;if(_e.Path){_e.warn("fabric.Path is already defined");return}_e.Path=_e.util.createClass(_e.Object,{type:"path",path:null,cacheProperties:_e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:_e.Object.prototype.stateProperties.concat("path"),initialize:function(Te,Re){Re=Se(Re||{}),delete Re.path,this.callSuper("initialize",Re),this._setPath(Te||[],Re)},_setPath:function(Te,Re){this.path=_e.util.makePathSimpler(Array.isArray(Te)?Te:_e.util.parsePath(Te)),_e.Polyline.prototype._setPositionDimensions.call(this,Re||{})},_renderPathCommands:function(Te){var Re,Ee=0,ke=0,De=0,Be=0,He=0,Ue=0,We=-this.pathOffset.x,Je=-this.pathOffset.y;Te.beginPath();for(var Qe=0,fi=this.path.length;Qe<fi;++Qe)switch(Re=this.path[Qe],Re[0]){case"L":De=Re[1],Be=Re[2],Te.lineTo(De+We,Be+Je);break;case"M":De=Re[1],Be=Re[2],Ee=De,ke=Be,Te.moveTo(De+We,Be+Je);break;case"C":De=Re[5],Be=Re[6],He=Re[3],Ue=Re[4],Te.bezierCurveTo(Re[1]+We,Re[2]+Je,He+We,Ue+Je,De+We,Be+Je);break;case"Q":Te.quadraticCurveTo(Re[1]+We,Re[2]+Je,Re[3]+We,Re[4]+Je),De=Re[3],Be=Re[4],He=Re[1],Ue=Re[2];break;case"z":case"Z":De=Ee,Be=ke,Te.closePath();break}},_render:function(Te){this._renderPathCommands(Te),this._renderPaintInOrder(Te)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(Te){return Ae(this.callSuper("toObject",Te),{path:this.path.map(function(Re){return Re.slice()})})},toDatalessObject:function(Te){var Re=this.toObject(["sourcePath"].concat(Te));return Re.sourcePath&&delete Re.path,Re},_toSVG:function(){var Te=_e.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',Te,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var Te=_e.Object.NUM_FRACTION_DIGITS;return" translate("+St(-this.pathOffset.x,Te)+", "+St(-this.pathOffset.y,Te)+")"},toClipPathSVG:function(Te){var Re=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:Te,additionalTransform:Re})},toSVG:function(Te){var Re=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:Te,additionalTransform:Re})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var Te=[],Re=[],Ee,ke=0,De=0,Be=0,He=0,Ue,We=0,Je=this.path.length;We<Je;++We){switch(Ee=this.path[We],Ee[0]){case"L":Be=Ee[1],He=Ee[2],Ue=[];break;case"M":Be=Ee[1],He=Ee[2],ke=Be,De=He,Ue=[];break;case"C":Ue=_e.util.getBoundsOfCurve(Be,He,Ee[1],Ee[2],Ee[3],Ee[4],Ee[5],Ee[6]),Be=Ee[5],He=Ee[6];break;case"Q":Ue=_e.util.getBoundsOfCurve(Be,He,Ee[1],Ee[2],Ee[1],Ee[2],Ee[3],Ee[4]),Be=Ee[3],He=Ee[4];break;case"z":case"Z":Be=ke,He=De;break}Ue.forEach(function(mi){Te.push(mi.x),Re.push(mi.y)}),Te.push(Be),Re.push(He)}var Qe=xe(Te)||0,fi=xe(Re)||0,oi=Pe(Te)||0,ii=Pe(Re)||0,li=oi-Qe,bi=ii-fi;return{left:Qe,top:fi,width:li,height:bi}}}),_e.Path.fromObject=function(Te,Re){if(typeof Te.sourcePath=="string"){var Ee=Te.sourcePath;_e.loadSVGFromURL(Ee,function(ke){var De=ke[0];De.setOptions(Te),Te.clipPath?_e.util.enlivenObjects([Te.clipPath],function(Be){De.clipPath=Be[0],Re&&Re(De)}):Re&&Re(De)})}else _e.Object._fromObject("Path",Te,Re,"path")},_e.Path.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(["d"]),_e.Path.fromElement=function(Te,Re,Ee){var ke=_e.parseAttributes(Te,_e.Path.ATTRIBUTE_NAMES);ke.fromSVG=!0,Re(new _e.Path(ke.d,Ae(ke,Ee)))}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.array.min,Pe=_e.util.array.max;_e.Group||(_e.Group=_e.util.createClass(_e.Object,_e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(Ae,Se,St){Se=Se||{},this._objects=[],St&&this.callSuper("initialize",Se),this._objects=Ae||[];for(var Te=this._objects.length;Te--;)this._objects[Te].group=this;if(St)this._updateObjectsACoords();else{var Re=Se&&Se.centerPoint;Se.originX!==void 0&&(this.originX=Se.originX),Se.originY!==void 0&&(this.originY=Se.originY),Re||this._calcBounds(),this._updateObjectsCoords(Re),delete Se.centerPoint,this.callSuper("initialize",Se)}this.setCoords()},_updateObjectsACoords:function(){for(var Ae=!0,Se=this._objects.length;Se--;)this._objects[Se].setCoords(Ae)},_updateObjectsCoords:function(Se){for(var Se=Se||this.getCenterPoint(),St=this._objects.length;St--;)this._updateObjectCoords(this._objects[St],Se)},_updateObjectCoords:function(Ae,Se){var St=Ae.left,Te=Ae.top,Re=!0;Ae.set({left:St-Se.x,top:Te-Se.y}),Ae.group=this,Ae.setCoords(Re)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(Ae){var Se=!!this.group;return this._restoreObjectsState(),_e.util.resetObjectTransform(this),Ae&&(Se&&_e.util.removeTransformFromObject(Ae,this.group.calcTransformMatrix()),this._objects.push(Ae),Ae.group=this,Ae._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,Se?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(Ae){return this._restoreObjectsState(),_e.util.resetObjectTransform(this),this.remove(Ae),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(Ae){this.dirty=!0,Ae.group=this,Ae._set("canvas",this.canvas)},_onObjectRemoved:function(Ae){this.dirty=!0,delete Ae.group},_set:function(Ae,Se){var St=this._objects.length;if(this.useSetOnGroup)for(;St--;)this._objects[St].setOnGroup(Ae,Se);if(Ae==="canvas")for(;St--;)this._objects[St]._set(Ae,Se);_e.Object.prototype._set.call(this,Ae,Se)},toObject:function(Ae){var Se=this.includeDefaultValues,St=this._objects.filter(function(Re){return!Re.excludeFromExport}).map(function(Re){var Ee=Re.includeDefaultValues;Re.includeDefaultValues=Se;var ke=Re.toObject(Ae);return Re.includeDefaultValues=Ee,ke}),Te=_e.Object.prototype.toObject.call(this,Ae);return Te.objects=St,Te},toDatalessObject:function(Ae){var Se,St=this.sourcePath;if(St)Se=St;else{var Te=this.includeDefaultValues;Se=this._objects.map(function(Ee){var ke=Ee.includeDefaultValues;Ee.includeDefaultValues=Te;var De=Ee.toDatalessObject(Ae);return Ee.includeDefaultValues=ke,De})}var Re=_e.Object.prototype.toDatalessObject.call(this,Ae);return Re.objects=Se,Re},render:function(Ae){this._transformDone=!0,this.callSuper("render",Ae),this._transformDone=!1},shouldCache:function(){var Ae=_e.Object.prototype.shouldCache.call(this);if(Ae){for(var Se=0,St=this._objects.length;Se<St;Se++)if(this._objects[Se].willDrawShadow())return this.ownCaching=!1,!1}return Ae},willDrawShadow:function(){if(_e.Object.prototype.willDrawShadow.call(this))return!0;for(var Ae=0,Se=this._objects.length;Ae<Se;Ae++)if(this._objects[Ae].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(Ae){for(var Se=0,St=this._objects.length;Se<St;Se++)this._objects[Se].render(Ae);this._drawClipPath(Ae,this.clipPath)},isCacheDirty:function(Ae){if(this.callSuper("isCacheDirty",Ae))return!0;if(!this.statefullCache)return!1;for(var Se=0,St=this._objects.length;Se<St;Se++)if(this._objects[Se].isCacheDirty(!0)){if(this._cacheCanvas){var Te=this.cacheWidth/this.zoomX,Re=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-Te/2,-Re/2,Te,Re)}return!0}return!1},_restoreObjectsState:function(){var Ae=this.calcOwnMatrix();return this._objects.forEach(function(Se){_e.util.addTransformToObject(Se,Ae),delete Se.group,Se.setCoords()}),this},destroy:function(){return this._objects.forEach(function(Ae){Ae.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(Ae){Ae.dispose&&Ae.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var Ae=this._objects,Se=this.canvas;this._objects=[];var St=this.toObject();delete St.objects;var Te=new _e.ActiveSelection([]);return Te.set(St),Te.type="activeSelection",Se.remove(this),Ae.forEach(function(Re){Re.group=Te,Re.dirty=!0,Se.add(Re)}),Te.canvas=Se,Te._objects=Ae,Se._activeObject=Te,Te.setCoords(),Te}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var Ae=!0;return this.forEachObject(function(Se){Se.setCoords(Ae)}),this},_calcBounds:function(Ae){for(var Se=[],St=[],Te,Re,Ee,ke=["tr","br","bl","tl"],De=0,Be=this._objects.length,He,Ue=ke.length;De<Be;++De){for(Te=this._objects[De],Ee=Te.calcACoords(),He=0;He<Ue;He++)Re=ke[He],Se.push(Ee[Re].x),St.push(Ee[Re].y);Te.aCoords=Ee}this._getBounds(Se,St,Ae)},_getBounds:function(Ae,Se,St){var Te=new _e.Point(xe(Ae),xe(Se)),Re=new _e.Point(Pe(Ae),Pe(Se)),Ee=Te.y||0,ke=Te.x||0,De=Re.x-Te.x||0,Be=Re.y-Te.y||0;this.width=De,this.height=Be,St||this.setPositionByOrigin({x:ke,y:Ee},"left","top")},_toSVG:function(Ae){for(var Se=["<g ","COMMON_PARTS",` >
`],St=0,Te=this._objects.length;St<Te;St++)Se.push("		",this._objects[St].toSVG(Ae));return Se.push(`</g>
`),Se},getSvgStyles:function(){var Ae=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",Se=this.visible?"":" visibility: hidden;";return[Ae,this.getSvgFilter(),Se].join("")},toClipPathSVG:function(Ae){for(var Se=[],St=0,Te=this._objects.length;St<Te;St++)Se.push("	",this._objects[St].toClipPathSVG(Ae));return this._createBaseClipPathSVGMarkup(Se,{reviver:Ae})}}),_e.Group.fromObject=function(Ae,Se){var St=Ae.objects,Te=_e.util.object.clone(Ae,!0);if(delete Te.objects,typeof St=="string"){_e.loadSVGFromURL(St,function(Re){var Ee=_e.util.groupSVGElements(Re,Ae,St),ke=Te.clipPath;delete Te.clipPath,Ee.set(Te),ke?_e.util.enlivenObjects([ke],function(De){Ee.clipPath=De[0],Se&&Se(Ee)}):Se&&Se(Ee)});return}_e.util.enlivenObjects(St,function(Re){_e.util.enlivenObjectEnlivables(Ae,Te,function(){Se&&Se(new _e.Group(Re,Te,!0))})})})}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={});_e.ActiveSelection||(_e.ActiveSelection=_e.util.createClass(_e.Group,{type:"activeSelection",initialize:function(xe,Pe){Pe=Pe||{},this._objects=xe||[];for(var Ae=this._objects.length;Ae--;)this._objects[Ae].group=this;Pe.originX&&(this.originX=Pe.originX),Pe.originY&&(this.originY=Pe.originY),this._calcBounds(),this._updateObjectsCoords(),_e.Object.prototype.initialize.call(this,Pe),this.setCoords()},toGroup:function(){var xe=this._objects.concat();this._objects=[];var Pe=_e.Object.prototype.toObject.call(this),Ae=new _e.Group([]);if(delete Pe.type,Ae.set(Pe),xe.forEach(function(St){St.canvas.remove(St),St.group=Ae}),Ae._objects=xe,!this.canvas)return Ae;var Se=this.canvas;return Se.add(Ae),Se._activeObject=Ae,Ae.setCoords(),Ae},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(xe,Pe,Ae){xe.save(),xe.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",xe,Pe),Ae=Ae||{},typeof Ae.hasControls>"u"&&(Ae.hasControls=!1),Ae.forActiveSelection=!0;for(var Se=0,St=this._objects.length;Se<St;Se++)this._objects[Se]._renderControls(xe,Ae);xe.restore()}}),_e.ActiveSelection.fromObject=function(xe,Pe){_e.util.enlivenObjects(xe.objects,function(Ae){delete xe.objects,Pe&&Pe(new _e.ActiveSelection(Ae,xe,!0))})})}(e),function(Oe){var _e=t.util.object.extend;if(Oe.fabric||(Oe.fabric={}),Oe.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(xe,Pe){Pe||(Pe={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",Pe),this._initElement(xe,Pe)},getElement:function(){return this._element||{}},setElement:function(xe,Pe){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=xe,this._originalElement=xe,this._initConfig(Pe),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(xe){var Pe=t.filterBackend;Pe&&Pe.evictCachesForKey&&Pe.evictCachesForKey(xe)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(xe){t.util.cleanUpJsdomNode(this[xe]),this[xe]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var xe=this.getElement();return{width:xe.naturalWidth||xe.width,height:xe.naturalHeight||xe.height}},_stroke:function(xe){if(!(!this.stroke||this.strokeWidth===0)){var Pe=this.width/2,Ae=this.height/2;xe.beginPath(),xe.moveTo(-Pe,-Ae),xe.lineTo(Pe,-Ae),xe.lineTo(Pe,Ae),xe.lineTo(-Pe,Ae),xe.lineTo(-Pe,-Ae),xe.closePath()}},toObject:function(xe){var Pe=[];this.filters.forEach(function(Se){Se&&Pe.push(Se.toObject())});var Ae=_e(this.callSuper("toObject",["cropX","cropY"].concat(xe)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:Pe});return this.resizeFilter&&(Ae.resizeFilter=this.resizeFilter.toObject()),Ae},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var xe=[],Pe=[],Ae,Se=this._element,St=-this.width/2,Te=-this.height/2,Re="",Ee="";if(!Se)return[];if(this.hasCrop()){var ke=t.Object.__uid++;xe.push('<clipPath id="imageCrop_'+ke+`">
`,'	<rect x="'+St+'" y="'+Te+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),Re=' clip-path="url(#imageCrop_'+ke+')" '}if(this.imageSmoothing||(Ee='" image-rendering="optimizeSpeed'),Pe.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',St-this.cropX,'" y="',Te-this.cropY,'" width="',Se.width||Se.naturalWidth,'" height="',Se.height||Se.height,Ee,'"',Re,`></image>
`),this.stroke||this.strokeDashArray){var De=this.fill;this.fill=null,Ae=["	<rect ",'x="',St,'" y="',Te,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=De}return this.paintFirst!=="fill"?xe=xe.concat(Ae,Pe):xe=xe.concat(Pe,Ae),xe},getSrc:function(xe){var Pe=xe?this._element:this._originalElement;return Pe?Pe.toDataURL?Pe.toDataURL():this.srcFromAttribute?Pe.getAttribute("src"):Pe.src:this.src||""},setSrc:function(xe,Pe,Ae){return t.util.loadImage(xe,function(Se,St){this.setElement(Se,Ae),this._setWidthHeight(),Pe&&Pe(this,St)},this,Ae&&Ae.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var xe=this.resizeFilter,Pe=this.minimumScaleTrigger,Ae=this.getTotalObjectScaling(),Se=Ae.scaleX,St=Ae.scaleY,Te=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!xe||Se>Pe&&St>Pe){this._element=Te,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=Se,this._lastScaleY=St;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var Re=t.util.createCanvasElement(),Ee=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,ke=Te.width,De=Te.height;Re.width=ke,Re.height=De,this._element=Re,this._lastScaleX=xe.scaleX=Se,this._lastScaleY=xe.scaleY=St,t.filterBackend.applyFilters([xe],Te,ke,De,this._element,Ee),this._filterScalingX=Re.width/this._originalElement.width,this._filterScalingY=Re.height/this._originalElement.height},applyFilters:function(xe){if(xe=xe||this.filters||[],xe=xe.filter(function(Te){return Te&&!Te.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),xe.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var Pe=this._originalElement,Ae=Pe.naturalWidth||Pe.width,Se=Pe.naturalHeight||Pe.height;if(this._element===this._originalElement){var St=t.util.createCanvasElement();St.width=Ae,St.height=Se,this._element=St,this._filteredEl=St}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,Ae,Se),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(xe,this._originalElement,Ae,Se,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(xe){t.util.setImageSmoothing(xe,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(xe),this._renderPaintInOrder(xe)},drawCacheOnCanvas:function(xe){t.util.setImageSmoothing(xe,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,xe)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(xe){var Pe=this._element;if(!!Pe){var Ae=this._filterScalingX,Se=this._filterScalingY,St=this.width,Te=this.height,Re=Math.min,Ee=Math.max,ke=Ee(this.cropX,0),De=Ee(this.cropY,0),Be=Pe.naturalWidth||Pe.width,He=Pe.naturalHeight||Pe.height,Ue=ke*Ae,We=De*Se,Je=Re(St*Ae,Be-Ue),Qe=Re(Te*Se,He-We),fi=-St/2,oi=-Te/2,ii=Re(St,Be/Ae-ke),li=Re(Te,He/Se-De);Pe&&xe.drawImage(Pe,Ue,We,Je,Qe,fi,oi,ii,li)}},_needsResize:function(){var xe=this.getTotalObjectScaling();return xe.scaleX!==this._lastScaleX||xe.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(xe,Pe){this.setElement(t.util.getById(xe),Pe),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(xe){xe||(xe={}),this.setOptions(xe),this._setWidthHeight(xe)},_initFilters:function(xe,Pe){xe&&xe.length?t.util.enlivenObjects(xe,function(Ae){Pe&&Pe(Ae)},"fabric.Image.filters"):Pe&&Pe()},_setWidthHeight:function(xe){xe||(xe={});var Pe=this.getElement();this.width=xe.width||Pe.naturalWidth||Pe.width||0,this.height=xe.height||Pe.naturalHeight||Pe.height||0},parsePreserveAspectRatioAttribute:function(){var xe=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),Pe=this._element.width,Ae=this._element.height,Se=1,St=1,Te=0,Re=0,Ee=0,ke=0,De,Be=this.width,He=this.height,Ue={width:Be,height:He};return xe&&(xe.alignX!=="none"||xe.alignY!=="none")?(xe.meetOrSlice==="meet"&&(Se=St=t.util.findScaleToFit(this._element,Ue),De=(Be-Pe*Se)/2,xe.alignX==="Min"&&(Te=-De),xe.alignX==="Max"&&(Te=De),De=(He-Ae*St)/2,xe.alignY==="Min"&&(Re=-De),xe.alignY==="Max"&&(Re=De)),xe.meetOrSlice==="slice"&&(Se=St=t.util.findScaleToCover(this._element,Ue),De=Pe-Be/Se,xe.alignX==="Mid"&&(Ee=De/2),xe.alignX==="Max"&&(Ee=De),De=Ae-He/St,xe.alignY==="Mid"&&(ke=De/2),xe.alignY==="Max"&&(ke=De),Pe=Be/Se,Ae=He/St)):(Se=Be/Pe,St=He/Ae),{width:Pe,height:Ae,scaleX:Se,scaleY:St,offsetLeft:Te,offsetTop:Re,cropX:Ee,cropY:ke}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(xe,Pe){var Ae=t.util.object.clone(xe);t.util.loadImage(Ae.src,function(Se,St){if(St){Pe&&Pe(null,!0);return}t.Image.prototype._initFilters.call(Ae,Ae.filters,function(Te){Ae.filters=Te||[],t.Image.prototype._initFilters.call(Ae,[Ae.resizeFilter],function(Re){Ae.resizeFilter=Re[0],t.util.enlivenObjectEnlivables(Ae,Ae,function(){var Ee=new t.Image(Se,Ae);Pe(Ee,!1)})})})},null,Ae.crossOrigin)},t.Image.fromURL=function(xe,Pe,Ae){t.util.loadImage(xe,function(Se,St){Pe&&Pe(new t.Image(Se,Ae),St)},null,Ae&&Ae.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(xe,Pe,Ae){var Se=t.parseAttributes(xe,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(Se["xlink:href"],Pe,_e(Ae?t.util.object.clone(Ae):{},Se))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var Oe=this.angle%360;return Oe>0?Math.round((Oe-1)/90)*90:Math.round(Oe/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(Oe){Oe=Oe||{};var _e=function(){},xe=Oe.onComplete||_e,Pe=Oe.onChange||_e,Ae=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(Se){Ae.rotate(Se),Pe()},onComplete:function(){Ae.setCoords(),xe()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(Oe){return Oe.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(Oe){return Oe.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function Oe(xe,Pe){var Ae="precision "+Pe+` float;
void main(){}`,Se=xe.createShader(xe.FRAGMENT_SHADER);return xe.shaderSource(Se,Ae),xe.compileShader(Se),!!xe.getShaderParameter(Se,xe.COMPILE_STATUS)}t.isWebglSupported=function(xe){if(t.isLikelyNode)return!1;xe=xe||t.WebglFilterBackend.prototype.tileSize;var Pe=document.createElement("canvas"),Ae=Pe.getContext("webgl")||Pe.getContext("experimental-webgl"),Se=!1;if(Ae){t.maxTextureSize=Ae.getParameter(Ae.MAX_TEXTURE_SIZE),Se=t.maxTextureSize>=xe;for(var St=["highp","mediump","lowp"],Te=0;Te<3;Te++)if(Oe(Ae,St[Te])){t.webGlPrecision=St[Te];break}}return this.isSupported=Se,Se},t.WebglFilterBackend=_e;function _e(xe){xe&&xe.tileSize&&(this.tileSize=xe.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}_e.prototype={tileSize:2048,resources:{},setupGLContext:function(xe,Pe){this.dispose(),this.createWebGLCanvas(xe,Pe),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(xe,Pe)},chooseFastestCopyGLTo2DMethod:function(xe,Pe){var Ae=typeof window.performance<"u",Se;try{new ImageData(1,1),Se=!0}catch{Se=!1}var St=typeof ArrayBuffer<"u",Te=typeof Uint8ClampedArray<"u";if(!!(Ae&&Se&&St&&Te)){var Re=t.util.createCanvasElement(),Ee=new ArrayBuffer(xe*Pe*4);if(t.forceGLPutImageData){this.imageBuffer=Ee,this.copyGLTo2D=Fe;return}var ke={imageBuffer:Ee,destinationWidth:xe,destinationHeight:Pe,targetCanvas:Re},De,Be,He;Re.width=xe,Re.height=Pe,De=window.performance.now(),Ie.call(ke,this.gl,ke),Be=window.performance.now()-De,De=window.performance.now(),Fe.call(ke,this.gl,ke),He=window.performance.now()-De,Be>He?(this.imageBuffer=Ee,this.copyGLTo2D=Fe):this.copyGLTo2D=Ie}},createWebGLCanvas:function(xe,Pe){var Ae=t.util.createCanvasElement();Ae.width=xe,Ae.height=Pe;var Se={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},St=Ae.getContext("webgl",Se);St||(St=Ae.getContext("experimental-webgl",Se)),St&&(St.clearColor(0,0,0,0),this.canvas=Ae,this.gl=St)},applyFilters:function(xe,Pe,Ae,Se,St,Te){var Re=this.gl,Ee;Te&&(Ee=this.getCachedTexture(Te,Pe));var ke={originalWidth:Pe.width||Pe.originalWidth,originalHeight:Pe.height||Pe.originalHeight,sourceWidth:Ae,sourceHeight:Se,destinationWidth:Ae,destinationHeight:Se,context:Re,sourceTexture:this.createTexture(Re,Ae,Se,!Ee&&Pe),targetTexture:this.createTexture(Re,Ae,Se),originalTexture:Ee||this.createTexture(Re,Ae,Se,!Ee&&Pe),passes:xe.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:St},De=Re.createFramebuffer();return Re.bindFramebuffer(Re.FRAMEBUFFER,De),xe.forEach(function(Be){Be&&Be.applyTo(ke)}),Me(ke),this.copyGLTo2D(Re,ke),Re.bindTexture(Re.TEXTURE_2D,null),Re.deleteTexture(ke.sourceTexture),Re.deleteTexture(ke.targetTexture),Re.deleteFramebuffer(De),St.getContext("2d").setTransform(1,0,0,1,0,0),ke},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(xe,Pe,Ae,Se){var St=xe.createTexture();return xe.bindTexture(xe.TEXTURE_2D,St),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MAG_FILTER,xe.NEAREST),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MIN_FILTER,xe.NEAREST),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),Se?xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,xe.RGBA,xe.UNSIGNED_BYTE,Se):xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,Pe,Ae,0,xe.RGBA,xe.UNSIGNED_BYTE,null),St},getCachedTexture:function(xe,Pe){if(this.textureCache[xe])return this.textureCache[xe];var Ae=this.createTexture(this.gl,Pe.width,Pe.height,Pe);return this.textureCache[xe]=Ae,Ae},evictCachesForKey:function(xe){this.textureCache[xe]&&(this.gl.deleteTexture(this.textureCache[xe]),delete this.textureCache[xe])},copyGLTo2D:Ie,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var xe=this.gl,Pe={renderer:"",vendor:""};if(!xe)return Pe;var Ae=xe.getExtension("WEBGL_debug_renderer_info");if(Ae){var Se=xe.getParameter(Ae.UNMASKED_RENDERER_WEBGL),St=xe.getParameter(Ae.UNMASKED_VENDOR_WEBGL);Se&&(Pe.renderer=Se.toLowerCase()),St&&(Pe.vendor=St.toLowerCase())}return this.gpuInfo=Pe,Pe}}}();function Me(Oe){var _e=Oe.targetCanvas,xe=_e.width,Pe=_e.height,Ae=Oe.destinationWidth,Se=Oe.destinationHeight;(xe!==Ae||Pe!==Se)&&(_e.width=Ae,_e.height=Se)}function Ie(Oe,_e){var xe=Oe.canvas,Pe=_e.targetCanvas,Ae=Pe.getContext("2d");Ae.translate(0,Pe.height),Ae.scale(1,-1);var Se=xe.height-Pe.height;Ae.drawImage(xe,0,Se,Pe.width,Pe.height,0,0,Pe.width,Pe.height)}function Fe(Oe,_e){var xe=_e.targetCanvas,Pe=xe.getContext("2d"),Ae=_e.destinationWidth,Se=_e.destinationHeight,St=Ae*Se*4,Te=new Uint8Array(this.imageBuffer,0,St),Re=new Uint8ClampedArray(this.imageBuffer,0,St);Oe.readPixels(0,0,Ae,Se,Oe.RGBA,Oe.UNSIGNED_BYTE,Te);var Ee=new ImageData(Re,Ae,Se);Pe.putImageData(Ee,0,0)}(function(){var Oe=function(){};t.Canvas2dFilterBackend=_e;function _e(){}_e.prototype={evictCachesForKey:Oe,dispose:Oe,clearWebGLCaches:Oe,resources:{},applyFilters:function(xe,Pe,Ae,Se,St){var Te=St.getContext("2d");Te.drawImage(Pe,0,0,Ae,Se);var Re=Te.getImageData(0,0,Ae,Se),Ee=Te.getImageData(0,0,Ae,Se),ke={sourceWidth:Ae,sourceHeight:Se,imageData:Re,originalEl:Pe,originalImageData:Ee,canvasEl:St,ctx:Te,filterBackend:this};return xe.forEach(function(De){De.applyTo(ke)}),(ke.imageData.width!==Ae||ke.imageData.height!==Se)&&(St.width=ke.imageData.width,St.height=ke.imageData.height),Te.putImageData(ke.imageData,0,0),ke}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(Oe){Oe&&this.setOptions(Oe)},setOptions:function(Oe){for(var _e in Oe)this[_e]=Oe[_e]},createProgram:function(Oe,_e,xe){_e=_e||this.fragmentSource,xe=xe||this.vertexSource,t.webGlPrecision!=="highp"&&(_e=_e.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var Pe=Oe.createShader(Oe.VERTEX_SHADER);if(Oe.shaderSource(Pe,xe),Oe.compileShader(Pe),!Oe.getShaderParameter(Pe,Oe.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+Oe.getShaderInfoLog(Pe));var Ae=Oe.createShader(Oe.FRAGMENT_SHADER);if(Oe.shaderSource(Ae,_e),Oe.compileShader(Ae),!Oe.getShaderParameter(Ae,Oe.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+Oe.getShaderInfoLog(Ae));var Se=Oe.createProgram();if(Oe.attachShader(Se,Pe),Oe.attachShader(Se,Ae),Oe.linkProgram(Se),!Oe.getProgramParameter(Se,Oe.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+Oe.getProgramInfoLog(Se));var St=this.getAttributeLocations(Oe,Se),Te=this.getUniformLocations(Oe,Se)||{};return Te.uStepW=Oe.getUniformLocation(Se,"uStepW"),Te.uStepH=Oe.getUniformLocation(Se,"uStepH"),{program:Se,attributeLocations:St,uniformLocations:Te}},getAttributeLocations:function(Oe,_e){return{aPosition:Oe.getAttribLocation(_e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(Oe,_e,xe){var Pe=_e.aPosition,Ae=Oe.createBuffer();Oe.bindBuffer(Oe.ARRAY_BUFFER,Ae),Oe.enableVertexAttribArray(Pe),Oe.vertexAttribPointer(Pe,2,Oe.FLOAT,!1,0,0),Oe.bufferData(Oe.ARRAY_BUFFER,xe,Oe.STATIC_DRAW)},_setupFrameBuffer:function(Oe){var _e=Oe.context,xe,Pe;Oe.passes>1?(xe=Oe.destinationWidth,Pe=Oe.destinationHeight,(Oe.sourceWidth!==xe||Oe.sourceHeight!==Pe)&&(_e.deleteTexture(Oe.targetTexture),Oe.targetTexture=Oe.filterBackend.createTexture(_e,xe,Pe)),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,Oe.targetTexture,0)):(_e.bindFramebuffer(_e.FRAMEBUFFER,null),_e.finish())},_swapTextures:function(Oe){Oe.passes--,Oe.pass++;var _e=Oe.targetTexture;Oe.targetTexture=Oe.sourceTexture,Oe.sourceTexture=_e},isNeutralState:function(){var Oe=this.mainParameter,_e=t.Image.filters[this.type].prototype;if(Oe)if(Array.isArray(_e[Oe])){for(var xe=_e[Oe].length;xe--;)if(this[Oe][xe]!==_e[Oe][xe])return!1;return!0}else return _e[Oe]===this[Oe];else return!1},applyTo:function(Oe){Oe.webgl?(this._setupFrameBuffer(Oe),this.applyToWebGL(Oe),this._swapTextures(Oe)):this.applyTo2d(Oe)},retrieveShader:function(Oe){return Oe.programCache.hasOwnProperty(this.type)||(Oe.programCache[this.type]=this.createProgram(Oe.context)),Oe.programCache[this.type]},applyToWebGL:function(Oe){var _e=Oe.context,xe=this.retrieveShader(Oe);Oe.pass===0&&Oe.originalTexture?_e.bindTexture(_e.TEXTURE_2D,Oe.originalTexture):_e.bindTexture(_e.TEXTURE_2D,Oe.sourceTexture),_e.useProgram(xe.program),this.sendAttributeData(_e,xe.attributeLocations,Oe.aPosition),_e.uniform1f(xe.uniformLocations.uStepW,1/Oe.sourceWidth),_e.uniform1f(xe.uniformLocations.uStepH,1/Oe.sourceHeight),this.sendUniformData(_e,xe.uniformLocations),_e.viewport(0,0,Oe.destinationWidth,Oe.destinationHeight),_e.drawArrays(_e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(Oe,_e,xe){Oe.activeTexture(xe),Oe.bindTexture(Oe.TEXTURE_2D,_e),Oe.activeTexture(Oe.TEXTURE0)},unbindAdditionalTexture:function(Oe,_e){Oe.activeTexture(_e),Oe.bindTexture(Oe.TEXTURE_2D,null),Oe.activeTexture(Oe.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(Oe){this[this.mainParameter]=Oe},sendUniformData:function(){},createHelpLayer:function(Oe){if(!Oe.helpLayer){var _e=document.createElement("canvas");_e.width=Oe.sourceWidth,_e.height=Oe.sourceHeight,Oe.helpLayer=_e}},toObject:function(){var Oe={type:this.type},_e=this.mainParameter;return _e&&(Oe[_e]=this[_e]),Oe},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(Oe,_e){var xe=new t.Image.filters[Oe.type](Oe);return _e&&_e(xe),xe},function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.ColorMatrix=Pe(xe.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(Ae){this.callSuper("initialize",Ae),this.matrix=this.matrix.slice(0)},applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te=St.length,Re=this.matrix,Ee,ke,De,Be,He,Ue=this.colorsOnly;for(He=0;He<Te;He+=4)Ee=St[He],ke=St[He+1],De=St[He+2],Ue?(St[He]=Ee*Re[0]+ke*Re[1]+De*Re[2]+Re[4]*255,St[He+1]=Ee*Re[5]+ke*Re[6]+De*Re[7]+Re[9]*255,St[He+2]=Ee*Re[10]+ke*Re[11]+De*Re[12]+Re[14]*255):(Be=St[He+3],St[He]=Ee*Re[0]+ke*Re[1]+De*Re[2]+Be*Re[3]+Re[4]*255,St[He+1]=Ee*Re[5]+ke*Re[6]+De*Re[7]+Be*Re[8]+Re[9]*255,St[He+2]=Ee*Re[10]+ke*Re[11]+De*Re[12]+Be*Re[13]+Re[14]*255,St[He+3]=Ee*Re[15]+ke*Re[16]+De*Re[17]+Be*Re[18]+Re[19]*255)},getUniformLocations:function(Ae,Se){return{uColorMatrix:Ae.getUniformLocation(Se,"uColorMatrix"),uConstants:Ae.getUniformLocation(Se,"uConstants")}},sendUniformData:function(Ae,Se){var St=this.matrix,Te=[St[0],St[1],St[2],St[3],St[5],St[6],St[7],St[8],St[10],St[11],St[12],St[13],St[15],St[16],St[17],St[18]],Re=[St[4],St[9],St[14],St[19]];Ae.uniformMatrix4fv(Se.uColorMatrix,!1,Te),Ae.uniform4fv(Se.uConstants,Re)}}),_e.Image.filters.ColorMatrix.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Brightness=Pe(xe.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(Ae){if(this.brightness!==0){var Se=Ae.imageData,St=Se.data,Te,Re=St.length,Ee=Math.round(this.brightness*255);for(Te=0;Te<Re;Te+=4)St[Te]=St[Te]+Ee,St[Te+1]=St[Te+1]+Ee,St[Te+2]=St[Te+2]+Ee}},getUniformLocations:function(Ae,Se){return{uBrightness:Ae.getUniformLocation(Se,"uBrightness")}},sendUniformData:function(Ae,Se){Ae.uniform1f(Se.uBrightness,this.brightness)}}),_e.Image.filters.Brightness.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.Image.filters,Ae=_e.util.createClass;Pe.Convolute=Ae(Pe.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(Se){var St=Math.sqrt(this.matrix.length),Te=this.type+"_"+St+"_"+(this.opaque?1:0),Re=this.fragmentSource[Te];return Se.programCache.hasOwnProperty(Te)||(Se.programCache[Te]=this.createProgram(Se.context,Re)),Se.programCache[Te]},applyTo2d:function(Se){var St=Se.imageData,Te=St.data,Re=this.matrix,Ee=Math.round(Math.sqrt(Re.length)),ke=Math.floor(Ee/2),De=St.width,Be=St.height,He=Se.ctx.createImageData(De,Be),Ue=He.data,We=this.opaque?1:0,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri;for(xi=0;xi<Be;xi++)for(_i=0;_i<De;_i++){for(ii=(xi*De+_i)*4,Je=0,Qe=0,fi=0,oi=0,ri=0;ri<Ee;ri++)for(Ei=0;Ei<Ee;Ei++)bi=xi+ri-ke,li=_i+Ei-ke,!(bi<0||bi>=Be||li<0||li>=De)&&(mi=(bi*De+li)*4,Si=Re[ri*Ee+Ei],Je+=Te[mi]*Si,Qe+=Te[mi+1]*Si,fi+=Te[mi+2]*Si,We||(oi+=Te[mi+3]*Si));Ue[ii]=Je,Ue[ii+1]=Qe,Ue[ii+2]=fi,We?Ue[ii+3]=Te[ii+3]:Ue[ii+3]=oi}Se.imageData=He},getUniformLocations:function(Se,St){return{uMatrix:Se.getUniformLocation(St,"uMatrix"),uOpaque:Se.getUniformLocation(St,"uOpaque"),uHalfSize:Se.getUniformLocation(St,"uHalfSize"),uSize:Se.getUniformLocation(St,"uSize")}},sendUniformData:function(Se,St){Se.uniform1fv(St.uMatrix,this.matrix)},toObject:function(){return xe(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),_e.Image.filters.Convolute.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Grayscale=Pe(xe.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te,Re=St.length,Ee,ke=this.mode;for(Te=0;Te<Re;Te+=4)ke==="average"?Ee=(St[Te]+St[Te+1]+St[Te+2])/3:ke==="lightness"?Ee=(Math.min(St[Te],St[Te+1],St[Te+2])+Math.max(St[Te],St[Te+1],St[Te+2]))/2:ke==="luminosity"&&(Ee=.21*St[Te]+.72*St[Te+1]+.07*St[Te+2]),St[Te]=Ee,St[Te+1]=Ee,St[Te+2]=Ee},retrieveShader:function(Ae){var Se=this.type+"_"+this.mode;if(!Ae.programCache.hasOwnProperty(Se)){var St=this.fragmentSource[this.mode];Ae.programCache[Se]=this.createProgram(Ae.context,St)}return Ae.programCache[Se]},getUniformLocations:function(Ae,Se){return{uMode:Ae.getUniformLocation(Se,"uMode")}},sendUniformData:function(Ae,Se){var St=1;Ae.uniform1i(Se.uMode,St)},isNeutralState:function(){return!1}}),_e.Image.filters.Grayscale.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Invert=Pe(xe.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te,Re=St.length;for(Te=0;Te<Re;Te+=4)St[Te]=255-St[Te],St[Te+1]=255-St[Te+1],St[Te+2]=255-St[Te+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(Ae,Se){return{uInvert:Ae.getUniformLocation(Se,"uInvert")}},sendUniformData:function(Ae,Se){Ae.uniform1i(Se.uInvert,this.invert)}}),_e.Image.filters.Invert.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.Image.filters,Ae=_e.util.createClass;Pe.Noise=Ae(Pe.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(Se){if(this.noise!==0){var St=Se.imageData,Te=St.data,Re,Ee=Te.length,ke=this.noise,De;for(Re=0,Ee=Te.length;Re<Ee;Re+=4)De=(.5-Math.random())*ke,Te[Re]+=De,Te[Re+1]+=De,Te[Re+2]+=De}},getUniformLocations:function(Se,St){return{uNoise:Se.getUniformLocation(St,"uNoise"),uSeed:Se.getUniformLocation(St,"uSeed")}},sendUniformData:function(Se,St){Se.uniform1f(St.uNoise,this.noise/255),Se.uniform1f(St.uSeed,Math.random())},toObject:function(){return xe(this.callSuper("toObject"),{noise:this.noise})}}),_e.Image.filters.Noise.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Pixelate=Pe(xe.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te=Se.height,Re=Se.width,Ee,ke,De,Be,He,Ue,We,Je,Qe,fi,oi;for(ke=0;ke<Te;ke+=this.blocksize)for(De=0;De<Re;De+=this.blocksize)for(Ee=ke*4*Re+De*4,Be=St[Ee],He=St[Ee+1],Ue=St[Ee+2],We=St[Ee+3],fi=Math.min(ke+this.blocksize,Te),oi=Math.min(De+this.blocksize,Re),Je=ke;Je<fi;Je++)for(Qe=De;Qe<oi;Qe++)Ee=Je*4*Re+Qe*4,St[Ee]=Be,St[Ee+1]=He,St[Ee+2]=Ue,St[Ee+3]=We},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(Ae,Se){return{uBlocksize:Ae.getUniformLocation(Se,"uBlocksize"),uStepW:Ae.getUniformLocation(Se,"uStepW"),uStepH:Ae.getUniformLocation(Se,"uStepH")}},sendUniformData:function(Ae,Se){Ae.uniform1f(Se.uBlocksize,this.blocksize)}}),_e.Image.filters.Pixelate.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.extend,Pe=_e.Image.filters,Ae=_e.util.createClass;Pe.RemoveColor=Ae(Pe.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(Se){var St=Se.imageData,Te=St.data,Re,Ee=this.distance*255,ke,De,Be,He=new _e.Color(this.color).getSource(),Ue=[He[0]-Ee,He[1]-Ee,He[2]-Ee],We=[He[0]+Ee,He[1]+Ee,He[2]+Ee];for(Re=0;Re<Te.length;Re+=4)ke=Te[Re],De=Te[Re+1],Be=Te[Re+2],ke>Ue[0]&&De>Ue[1]&&Be>Ue[2]&&ke<We[0]&&De<We[1]&&Be<We[2]&&(Te[Re+3]=0)},getUniformLocations:function(Se,St){return{uLow:Se.getUniformLocation(St,"uLow"),uHigh:Se.getUniformLocation(St,"uHigh")}},sendUniformData:function(Se,St){var Te=new _e.Color(this.color).getSource(),Re=parseFloat(this.distance),Ee=[0+Te[0]/255-Re,0+Te[1]/255-Re,0+Te[2]/255-Re,1],ke=[Te[0]/255+Re,Te[1]/255+Re,Te[2]/255+Re,1];Se.uniform4fv(St.uLow,Ee),Se.uniform4fv(St.uHigh,ke)},toObject:function(){return xe(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),_e.Image.filters.RemoveColor.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass,Ae={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var Se in Ae)xe[Se]=Pe(xe.ColorMatrix,{type:Se,matrix:Ae[Se],mainParameter:!1,colorsOnly:!0}),_e.Image.filters[Se].fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric,xe=_e.Image.filters,Pe=_e.util.createClass;xe.BlendColor=Pe(xe.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(Ae){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[Ae]+`}
}`},retrieveShader:function(Ae){var Se=this.type+"_"+this.mode,St;return Ae.programCache.hasOwnProperty(Se)||(St=this.buildSource(this.mode),Ae.programCache[Se]=this.createProgram(Ae.context,St)),Ae.programCache[Se]},applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te=St.length,Re,Ee,ke,De,Be,He,Ue,We=1-this.alpha;Ue=new _e.Color(this.color).getSource(),Re=Ue[0]*this.alpha,Ee=Ue[1]*this.alpha,ke=Ue[2]*this.alpha;for(var Je=0;Je<Te;Je+=4)switch(De=St[Je],Be=St[Je+1],He=St[Je+2],this.mode){case"multiply":St[Je]=De*Re/255,St[Je+1]=Be*Ee/255,St[Je+2]=He*ke/255;break;case"screen":St[Je]=255-(255-De)*(255-Re)/255,St[Je+1]=255-(255-Be)*(255-Ee)/255,St[Je+2]=255-(255-He)*(255-ke)/255;break;case"add":St[Je]=De+Re,St[Je+1]=Be+Ee,St[Je+2]=He+ke;break;case"diff":case"difference":St[Je]=Math.abs(De-Re),St[Je+1]=Math.abs(Be-Ee),St[Je+2]=Math.abs(He-ke);break;case"subtract":St[Je]=De-Re,St[Je+1]=Be-Ee,St[Je+2]=He-ke;break;case"darken":St[Je]=Math.min(De,Re),St[Je+1]=Math.min(Be,Ee),St[Je+2]=Math.min(He,ke);break;case"lighten":St[Je]=Math.max(De,Re),St[Je+1]=Math.max(Be,Ee),St[Je+2]=Math.max(He,ke);break;case"overlay":St[Je]=Re<128?2*De*Re/255:255-2*(255-De)*(255-Re)/255,St[Je+1]=Ee<128?2*Be*Ee/255:255-2*(255-Be)*(255-Ee)/255,St[Je+2]=ke<128?2*He*ke/255:255-2*(255-He)*(255-ke)/255;break;case"exclusion":St[Je]=Re+De-2*Re*De/255,St[Je+1]=Ee+Be-2*Ee*Be/255,St[Je+2]=ke+He-2*ke*He/255;break;case"tint":St[Je]=Re+De*We,St[Je+1]=Ee+Be*We,St[Je+2]=ke+He*We}},getUniformLocations:function(Ae,Se){return{uColor:Ae.getUniformLocation(Se,"uColor")}},sendUniformData:function(Ae,Se){var St=new _e.Color(this.color).getSource();St[0]=this.alpha*St[0]/255,St[1]=this.alpha*St[1]/255,St[2]=this.alpha*St[2]/255,St[3]=this.alpha,Ae.uniform4fv(Se.uColor,St)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),_e.Image.filters.BlendColor.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric,xe=_e.Image.filters,Pe=_e.util.createClass;xe.BlendImage=Pe(xe.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(Ae){var Se=this.type+"_"+this.mode,St=this.fragmentSource[this.mode];return Ae.programCache.hasOwnProperty(Se)||(Ae.programCache[Se]=this.createProgram(Ae.context,St)),Ae.programCache[Se]},applyToWebGL:function(Ae){var Se=Ae.context,St=this.createTexture(Ae.filterBackend,this.image);this.bindAdditionalTexture(Se,St,Se.TEXTURE1),this.callSuper("applyToWebGL",Ae),this.unbindAdditionalTexture(Se,Se.TEXTURE1)},createTexture:function(Ae,Se){return Ae.getCachedTexture(Se.cacheKey,Se._element)},calculateMatrix:function(){var Ae=this.image,Se=Ae._element.width,St=Ae._element.height;return[1/Ae.scaleX,0,0,0,1/Ae.scaleY,0,-Ae.left/Se,-Ae.top/St,1]},applyTo2d:function(Ae){var Se=Ae.imageData,St=Ae.filterBackend.resources,Te=Se.data,Re=Te.length,Ee=Se.width,ke=Se.height,De,Be,He,Ue,We,Je,Qe,fi,oi,ii,li=this.image,bi;St.blendImage||(St.blendImage=_e.util.createCanvasElement()),oi=St.blendImage,ii=oi.getContext("2d"),oi.width!==Ee||oi.height!==ke?(oi.width=Ee,oi.height=ke):ii.clearRect(0,0,Ee,ke),ii.setTransform(li.scaleX,0,0,li.scaleY,li.left,li.top),ii.drawImage(li._element,0,0,Ee,ke),bi=ii.getImageData(0,0,Ee,ke).data;for(var mi=0;mi<Re;mi+=4)switch(We=Te[mi],Je=Te[mi+1],Qe=Te[mi+2],fi=Te[mi+3],De=bi[mi],Be=bi[mi+1],He=bi[mi+2],Ue=bi[mi+3],this.mode){case"multiply":Te[mi]=We*De/255,Te[mi+1]=Je*Be/255,Te[mi+2]=Qe*He/255,Te[mi+3]=fi*Ue/255;break;case"mask":Te[mi+3]=Ue;break}},getUniformLocations:function(Ae,Se){return{uTransformMatrix:Ae.getUniformLocation(Se,"uTransformMatrix"),uImage:Ae.getUniformLocation(Se,"uImage")}},sendUniformData:function(Ae,Se){var St=this.calculateMatrix();Ae.uniform1i(Se.uImage,1),Ae.uniformMatrix3fv(Se.uTransformMatrix,!1,St)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),_e.Image.filters.BlendImage.fromObject=function(Ae,Se){_e.Image.fromObject(Ae.image,function(St){var Te=_e.util.object.clone(Ae);Te.image=St,Se(new _e.Image.filters.BlendImage(Te))})}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=Math.pow,Pe=Math.floor,Ae=Math.sqrt,Se=Math.abs,St=Math.round,Te=Math.sin,Re=Math.ceil,Ee=_e.Image.filters,ke=_e.util.createClass;Ee.Resize=ke(Ee.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(De,Be){return{uDelta:De.getUniformLocation(Be,"uDelta"),uTaps:De.getUniformLocation(Be,"uTaps")}},sendUniformData:function(De,Be){De.uniform2fv(Be.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),De.uniform1fv(Be.uTaps,this.taps)},retrieveShader:function(De){var Be=this.getFilterWindow(),He=this.type+"_"+Be;if(!De.programCache.hasOwnProperty(He)){var Ue=this.generateShader(Be);De.programCache[He]=this.createProgram(De.context,Ue)}return De.programCache[He]},getFilterWindow:function(){var De=this.tempScale;return Math.ceil(this.lanczosLobes/De)},getTaps:function(){for(var De=this.lanczosCreate(this.lanczosLobes),Be=this.tempScale,He=this.getFilterWindow(),Ue=new Array(He),We=1;We<=He;We++)Ue[We-1]=De(We*Be);return Ue},generateShader:function(Ue){for(var Be=new Array(Ue),He=this.fragmentSourceTOP,Ue,We=1;We<=Ue;We++)Be[We-1]=We+".0 * uDelta";return He+="uniform float uTaps["+Ue+`];
`,He+=`void main() {
`,He+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,He+=`  float sum = 1.0;
`,Be.forEach(function(Je,Qe){He+="  color += texture2D(uTexture, vTexCoord + "+Je+") * uTaps["+Qe+`];
`,He+="  color += texture2D(uTexture, vTexCoord - "+Je+") * uTaps["+Qe+`];
`,He+="  sum += 2.0 * uTaps["+Qe+`];
`}),He+=`  gl_FragColor = color / sum;
`,He+="}",He},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(De){De.webgl?(De.passes++,this.width=De.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=De.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),De.destinationWidth=this.dW,this._setupFrameBuffer(De),this.applyToWebGL(De),this._swapTextures(De),De.sourceWidth=De.destinationWidth,this.height=De.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),De.destinationHeight=this.dH,this._setupFrameBuffer(De),this.applyToWebGL(De),this._swapTextures(De),De.sourceHeight=De.destinationHeight):this.applyTo2d(De)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(De){return function(Be){if(Be>=De||Be<=-De)return 0;if(Be<11920929e-14&&Be>-11920929e-14)return 1;Be*=Math.PI;var He=Be/De;return Te(Be)/Be*Te(He)/He}},applyTo2d:function(De){var Be=De.imageData,He=this.scaleX,Ue=this.scaleY;this.rcpScaleX=1/He,this.rcpScaleY=1/Ue;var We=Be.width,Je=Be.height,Qe=St(We*He),fi=St(Je*Ue),oi;this.resizeType==="sliceHack"?oi=this.sliceByTwo(De,We,Je,Qe,fi):this.resizeType==="hermite"?oi=this.hermiteFastResize(De,We,Je,Qe,fi):this.resizeType==="bilinear"?oi=this.bilinearFiltering(De,We,Je,Qe,fi):this.resizeType==="lanczos"&&(oi=this.lanczosResize(De,We,Je,Qe,fi)),De.imageData=oi},sliceByTwo:function(De,Be,He,Ue,We){var Je=De.imageData,Qe=.5,fi=!1,oi=!1,ii=Be*Qe,li=He*Qe,bi=_e.filterBackend.resources,mi,Si,_i=0,xi=0,Ei=Be,ri=0;for(bi.sliceByTwo||(bi.sliceByTwo=document.createElement("canvas")),mi=bi.sliceByTwo,(mi.width<Be*1.5||mi.height<He)&&(mi.width=Be*1.5,mi.height=He),Si=mi.getContext("2d"),Si.clearRect(0,0,Be*1.5,He),Si.putImageData(Je,0,0),Ue=Pe(Ue),We=Pe(We);!fi||!oi;)Be=ii,He=li,Ue<Pe(ii*Qe)?ii=Pe(ii*Qe):(ii=Ue,fi=!0),We<Pe(li*Qe)?li=Pe(li*Qe):(li=We,oi=!0),Si.drawImage(mi,_i,xi,Be,He,Ei,ri,ii,li),_i=Ei,xi=ri,ri+=li;return Si.getImageData(_i,xi,Ue,We)},lanczosResize:function(De,Be,He,Ue,We){function Je(Ci){var $e,Ge,ze,qe,ei,ni,ci,di,Ti,Ni,si;for(ri.x=(Ci+.5)*li,vi.x=Pe(ri.x),$e=0;$e<We;$e++){for(ri.y=($e+.5)*bi,vi.y=Pe(ri.y),ei=0,ni=0,ci=0,di=0,Ti=0,Ge=vi.x-_i;Ge<=vi.x+_i;Ge++)if(!(Ge<0||Ge>=Be)){Ni=Pe(1e3*Se(Ge-ri.x)),Ei[Ni]||(Ei[Ni]={});for(var ai=vi.y-xi;ai<=vi.y+xi;ai++)ai<0||ai>=He||(si=Pe(1e3*Se(ai-ri.y)),Ei[Ni][si]||(Ei[Ni][si]=ii(Ae(xe(Ni*mi,2)+xe(si*Si,2))/1e3)),ze=Ei[Ni][si],ze>0&&(qe=(ai*Be+Ge)*4,ei+=ze,ni+=ze*Qe[qe],ci+=ze*Qe[qe+1],di+=ze*Qe[qe+2],Ti+=ze*Qe[qe+3]))}qe=($e*Ue+Ci)*4,oi[qe]=ni/ei,oi[qe+1]=ci/ei,oi[qe+2]=di/ei,oi[qe+3]=Ti/ei}return++Ci<Ue?Je(Ci):fi}var Qe=De.imageData.data,fi=De.ctx.createImageData(Ue,We),oi=fi.data,ii=this.lanczosCreate(this.lanczosLobes),li=this.rcpScaleX,bi=this.rcpScaleY,mi=2/this.rcpScaleX,Si=2/this.rcpScaleY,_i=Re(li*this.lanczosLobes/2),xi=Re(bi*this.lanczosLobes/2),Ei={},ri={},vi={};return Je(0)},bilinearFiltering:function(De,Be,He,Ue,We){var Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri=0,vi,Ci=this.rcpScaleX,$e=this.rcpScaleY,Ge=4*(Be-1),ze=De.imageData,qe=ze.data,ei=De.ctx.createImageData(Ue,We),ni=ei.data;for(bi=0;bi<We;bi++)for(mi=0;mi<Ue;mi++)for(ii=Pe(Ci*mi),li=Pe($e*bi),Si=Ci*mi-ii,_i=$e*bi-li,vi=4*(li*Be+ii),xi=0;xi<4;xi++)Je=qe[vi+xi],Qe=qe[vi+4+xi],fi=qe[vi+Ge+xi],oi=qe[vi+Ge+4+xi],Ei=Je*(1-Si)*(1-_i)+Qe*Si*(1-_i)+fi*_i*(1-Si)+oi*Si*_i,ni[ri++]=Ei;return ei},hermiteFastResize:function(De,Be,He,Ue,We){for(var Je=this.rcpScaleX,Qe=this.rcpScaleY,fi=Re(Je/2),oi=Re(Qe/2),ii=De.imageData,li=ii.data,bi=De.ctx.createImageData(Ue,We),mi=bi.data,Si=0;Si<We;Si++)for(var _i=0;_i<Ue;_i++){for(var xi=(_i+Si*Ue)*4,Ei=0,ri=0,vi=0,Ci=0,$e=0,Ge=0,ze=0,qe=(Si+.5)*Qe,ei=Pe(Si*Qe);ei<(Si+1)*Qe;ei++)for(var ni=Se(qe-(ei+.5))/oi,ci=(_i+.5)*Je,di=ni*ni,Ti=Pe(_i*Je);Ti<(_i+1)*Je;Ti++){var Ni=Se(ci-(Ti+.5))/fi,si=Ae(di+Ni*Ni);si>1&&si<-1||(Ei=2*si*si*si-3*si*si+1,Ei>0&&(Ni=4*(Ti+ei*Be),ze+=Ei*li[Ni+3],vi+=Ei,li[Ni+3]<255&&(Ei=Ei*li[Ni+3]/250),Ci+=Ei*li[Ni],$e+=Ei*li[Ni+1],Ge+=Ei*li[Ni+2],ri+=Ei))}mi[xi]=Ci/ri,mi[xi+1]=$e/ri,mi[xi+2]=Ge/ri,mi[xi+3]=ze/vi}return bi},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),_e.Image.filters.Resize.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Contrast=Pe(xe.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(Ae){if(this.contrast!==0){var Se=Ae.imageData,St,Re,Te=Se.data,Re=Te.length,Ee=Math.floor(this.contrast*255),ke=259*(Ee+255)/(255*(259-Ee));for(St=0;St<Re;St+=4)Te[St]=ke*(Te[St]-128)+128,Te[St+1]=ke*(Te[St+1]-128)+128,Te[St+2]=ke*(Te[St+2]-128)+128}},getUniformLocations:function(Ae,Se){return{uContrast:Ae.getUniformLocation(Se,"uContrast")}},sendUniformData:function(Ae,Se){Ae.uniform1f(Se.uContrast,this.contrast)}}),_e.Image.filters.Contrast.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Saturation=Pe(xe.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(Ae){if(this.saturation!==0){var Se=Ae.imageData,St=Se.data,Te=St.length,Re=-this.saturation,Ee,ke;for(Ee=0;Ee<Te;Ee+=4)ke=Math.max(St[Ee],St[Ee+1],St[Ee+2]),St[Ee]+=ke!==St[Ee]?(ke-St[Ee])*Re:0,St[Ee+1]+=ke!==St[Ee+1]?(ke-St[Ee+1])*Re:0,St[Ee+2]+=ke!==St[Ee+2]?(ke-St[Ee+2])*Re:0}},getUniformLocations:function(Ae,Se){return{uSaturation:Ae.getUniformLocation(Se,"uSaturation")}},sendUniformData:function(Ae,Se){Ae.uniform1f(Se.uSaturation,-this.saturation)}}),_e.Image.filters.Saturation.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Vibrance=Pe(xe.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(Ae){if(this.vibrance!==0){var Se=Ae.imageData,St=Se.data,Te=St.length,Re=-this.vibrance,Ee,ke,De,Be;for(Ee=0;Ee<Te;Ee+=4)ke=Math.max(St[Ee],St[Ee+1],St[Ee+2]),De=(St[Ee]+St[Ee+1]+St[Ee+2])/3,Be=Math.abs(ke-De)*2/255*Re,St[Ee]+=ke!==St[Ee]?(ke-St[Ee])*Be:0,St[Ee+1]+=ke!==St[Ee+1]?(ke-St[Ee+1])*Be:0,St[Ee+2]+=ke!==St[Ee+2]?(ke-St[Ee+2])*Be:0}},getUniformLocations:function(Ae,Se){return{uVibrance:Ae.getUniformLocation(Se,"uVibrance")}},sendUniformData:function(Ae,Se){Ae.uniform1f(Se.uVibrance,-this.vibrance)}}),_e.Image.filters.Vibrance.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Blur=Pe(xe.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(Ae){Ae.webgl?(this.aspectRatio=Ae.sourceWidth/Ae.sourceHeight,Ae.passes++,this._setupFrameBuffer(Ae),this.horizontal=!0,this.applyToWebGL(Ae),this._swapTextures(Ae),this._setupFrameBuffer(Ae),this.horizontal=!1,this.applyToWebGL(Ae),this._swapTextures(Ae)):this.applyTo2d(Ae)},applyTo2d:function(Ae){Ae.imageData=this.simpleBlur(Ae)},simpleBlur:function(Ae){var Se=Ae.filterBackend.resources,St,Te,Re=Ae.imageData.width,Ee=Ae.imageData.height;Se.blurLayer1||(Se.blurLayer1=_e.util.createCanvasElement(),Se.blurLayer2=_e.util.createCanvasElement()),St=Se.blurLayer1,Te=Se.blurLayer2,(St.width!==Re||St.height!==Ee)&&(Te.width=St.width=Re,Te.height=St.height=Ee);var ke=St.getContext("2d"),De=Te.getContext("2d"),Be=15,He,Ue,We,Je,Qe=this.blur*.06*.5;for(ke.putImageData(Ae.imageData,0,0),De.clearRect(0,0,Re,Ee),Je=-Be;Je<=Be;Je++)He=(Math.random()-.5)/4,Ue=Je/Be,We=Qe*Ue*Re+He,De.globalAlpha=1-Math.abs(Ue),De.drawImage(St,We,He),ke.drawImage(Te,0,0),De.globalAlpha=1,De.clearRect(0,0,Te.width,Te.height);for(Je=-Be;Je<=Be;Je++)He=(Math.random()-.5)/4,Ue=Je/Be,We=Qe*Ue*Ee+He,De.globalAlpha=1-Math.abs(Ue),De.drawImage(St,He,We),ke.drawImage(Te,0,0),De.globalAlpha=1,De.clearRect(0,0,Te.width,Te.height);Ae.ctx.drawImage(St,0,0);var fi=Ae.ctx.getImageData(0,0,St.width,St.height);return ke.globalAlpha=1,ke.clearRect(0,0,St.width,St.height),fi},getUniformLocations:function(Ae,Se){return{delta:Ae.getUniformLocation(Se,"uDelta")}},sendUniformData:function(Ae,Se){var St=this.chooseRightDelta();Ae.uniform2fv(Se.delta,St)},chooseRightDelta:function(){var Ae=1,Se=[0,0],St;return this.horizontal?this.aspectRatio>1&&(Ae=1/this.aspectRatio):this.aspectRatio<1&&(Ae=this.aspectRatio),St=Ae*this.blur*.12,this.horizontal?Se[0]=St:Se[1]=St,Se}}),xe.Blur.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Gamma=Pe(xe.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(Ae){this.gamma=[1,1,1],xe.BaseFilter.prototype.initialize.call(this,Ae)},applyTo2d:function(Ae){var Se=Ae.imageData,St=Se.data,Te=this.gamma,Re=St.length,Ee=1/Te[0],ke=1/Te[1],De=1/Te[2],Be;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),Be=0,Re=256;Be<Re;Be++)this.rVals[Be]=Math.pow(Be/255,Ee)*255,this.gVals[Be]=Math.pow(Be/255,ke)*255,this.bVals[Be]=Math.pow(Be/255,De)*255;for(Be=0,Re=St.length;Be<Re;Be+=4)St[Be]=this.rVals[St[Be]],St[Be+1]=this.gVals[St[Be+1]],St[Be+2]=this.bVals[St[Be+2]]},getUniformLocations:function(Ae,Se){return{uGamma:Ae.getUniformLocation(Se,"uGamma")}},sendUniformData:function(Ae,Se){Ae.uniform3fv(Se.uGamma,this.gamma)}}),_e.Image.filters.Gamma.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.Composed=Pe(xe.BaseFilter,{type:"Composed",subFilters:[],initialize:function(Ae){this.callSuper("initialize",Ae),this.subFilters=this.subFilters.slice(0)},applyTo:function(Ae){Ae.passes+=this.subFilters.length-1,this.subFilters.forEach(function(Se){Se.applyTo(Ae)})},toObject:function(){return _e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(Ae){return Ae.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(Ae){return!Ae.isNeutralState()})}}),_e.Image.filters.Composed.fromObject=function(Ae,Se){var St=Ae.subFilters||[],Te=St.map(function(Ee){return new _e.Image.filters[Ee.type](Ee)}),Re=new _e.Image.filters.Composed({subFilters:Te});return Se&&Se(Re),Re}}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.Image.filters,Pe=_e.util.createClass;xe.HueRotation=Pe(xe.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var Ae=this.rotation*Math.PI,Se=_e.util.cos(Ae),St=_e.util.sin(Ae),Te=1/3,Re=Math.sqrt(Te)*St,Ee=1-Se;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=Se+Ee/3,this.matrix[1]=Te*Ee-Re,this.matrix[2]=Te*Ee+Re,this.matrix[5]=Te*Ee+Re,this.matrix[6]=Se+Te*Ee,this.matrix[7]=Te*Ee-Re,this.matrix[10]=Te*Ee-Re,this.matrix[11]=Te*Ee+Re,this.matrix[12]=Se+Te*Ee},isNeutralState:function(Ae){return this.calculateMatrix(),xe.BaseFilter.prototype.isNeutralState.call(this,Ae)},applyTo:function(Ae){this.calculateMatrix(),xe.BaseFilter.prototype.applyTo.call(this,Ae)}}),_e.Image.filters.HueRotation.fromObject=_e.Image.filters.BaseFilter.fromObject}(e),function(Oe){var _e=Oe.fabric||(Oe.fabric={}),xe=_e.util.object.clone;if(_e.Text){_e.warn("fabric.Text is already defined");return}var Pe="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");_e.Text=_e.util.createClass(_e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:_e.Object.prototype.stateProperties.concat(Pe),cacheProperties:_e.Object.prototype.cacheProperties.concat(Pe),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(Ae,Se){this.styles=Se?Se.styles||{}:{},this.text=Ae,this.__skipDimension=!0,this.callSuper("initialize",Se),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var Ae=this.path;Ae&&(Ae.segmentsInfo=_e.util.getPathSegmentsInfo(Ae.path))},getMeasuringContext:function(){return _e._measuringContext||(_e._measuringContext=this.canvas&&this.canvas.contextCache||_e.util.createCanvasElement().getContext("2d")),_e._measuringContext},_splitText:function(){var Ae=this._splitTextIntoLines(this.text);return this.textLines=Ae.lines,this._textLines=Ae.graphemeLines,this._unwrappedTextLines=Ae._unwrappedLines,this._text=Ae.graphemeText,Ae},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var Ae,Se,St,Te,Re,Ee,ke,De=0,Be=this._textLines.length;De<Be;De++)if(!(this.textAlign!=="justify"&&(De===Be-1||this.isEndOfWrapping(De)))&&(Te=0,Re=this._textLines[De],Se=this.getLineWidth(De),Se<this.width&&(ke=this.textLines[De].match(this._reSpacesAndTabs)))){St=ke.length,Ae=(this.width-Se)/St;for(var He=0,Ue=Re.length;He<=Ue;He++)Ee=this.__charBounds[De][He],this._reSpaceAndTab.test(Re[He])?(Ee.width+=Ae,Ee.kernedWidth+=Ae,Ee.left+=Te,Te+=Ae):Ee.left+=Te}},isEndOfWrapping:function(Ae){return Ae===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var Ae=this.callSuper("_getCacheCanvasDimensions"),Se=this.fontSize;return Ae.width+=Se*Ae.zoomX,Ae.height+=Se*Ae.zoomY,Ae},_render:function(Ae){var Se=this.path;Se&&!Se.isNotVisible()&&Se._render(Ae),this._setTextStyles(Ae),this._renderTextLinesBackground(Ae),this._renderTextDecoration(Ae,"underline"),this._renderText(Ae),this._renderTextDecoration(Ae,"overline"),this._renderTextDecoration(Ae,"linethrough")},_renderText:function(Ae){this.paintFirst==="stroke"?(this._renderTextStroke(Ae),this._renderTextFill(Ae)):(this._renderTextFill(Ae),this._renderTextStroke(Ae))},_setTextStyles:function(Ae,Se,St){if(Ae.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":Ae.textBaseline="middle";break;case"ascender":Ae.textBaseline="top";break;case"descender":Ae.textBaseline="bottom";break}Ae.font=this._getFontDeclaration(Se,St)},calcTextWidth:function(){for(var Ae=this.getLineWidth(0),Se=1,St=this._textLines.length;Se<St;Se++){var Te=this.getLineWidth(Se);Te>Ae&&(Ae=Te)}return Ae},_renderTextLine:function(Ae,Se,St,Te,Re,Ee){this._renderChars(Ae,Se,St,Te,Re,Ee)},_renderTextLinesBackground:function(Ae){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var Se,St,Te=Ae.fillStyle,Re,Ee,ke=this._getLeftOffset(),De=this._getTopOffset(),Be=0,He=0,Ue,We,Je=this.path,Qe,fi=0,oi=this._textLines.length;fi<oi;fi++){if(Se=this.getHeightOfLine(fi),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",fi)){De+=Se;continue}Re=this._textLines[fi],St=this._getLineLeftOffset(fi),He=0,Be=0,Ee=this.getValueOfPropertyAt(fi,0,"textBackgroundColor");for(var ii=0,li=Re.length;ii<li;ii++)Ue=this.__charBounds[fi][ii],We=this.getValueOfPropertyAt(fi,ii,"textBackgroundColor"),Je?(Ae.save(),Ae.translate(Ue.renderLeft,Ue.renderTop),Ae.rotate(Ue.angle),Ae.fillStyle=We,We&&Ae.fillRect(-Ue.width/2,-Se/this.lineHeight*(1-this._fontSizeFraction),Ue.width,Se/this.lineHeight),Ae.restore()):We!==Ee?(Qe=ke+St+Be,this.direction==="rtl"&&(Qe=this.width-Qe-He),Ae.fillStyle=Ee,Ee&&Ae.fillRect(Qe,De,He,Se/this.lineHeight),Be=Ue.left,He=Ue.width,Ee=We):He+=Ue.kernedWidth;We&&!Je&&(Qe=ke+St+Be,this.direction==="rtl"&&(Qe=this.width-Qe-He),Ae.fillStyle=We,Ae.fillRect(Qe,De,He,Se/this.lineHeight)),De+=Se}Ae.fillStyle=Te,this._removeShadow(Ae)}},getFontCache:function(Ae){var Se=Ae.fontFamily.toLowerCase();_e.charWidthsCache[Se]||(_e.charWidthsCache[Se]={});var St=_e.charWidthsCache[Se],Te=Ae.fontStyle.toLowerCase()+"_"+(Ae.fontWeight+"").toLowerCase();return St[Te]||(St[Te]={}),St[Te]},_measureChar:function(Ae,Se,St,Te){var Re=this.getFontCache(Se),Ee=this._getFontDeclaration(Se),ke=this._getFontDeclaration(Te),De=St+Ae,Be=Ee===ke,He,Ue,We,Je=Se.fontSize/this.CACHE_FONT_SIZE,Qe;if(St&&Re[St]!==void 0&&(We=Re[St]),Re[Ae]!==void 0&&(Qe=He=Re[Ae]),Be&&Re[De]!==void 0&&(Ue=Re[De],Qe=Ue-We),He===void 0||We===void 0||Ue===void 0){var fi=this.getMeasuringContext();this._setTextStyles(fi,Se,!0)}return He===void 0&&(Qe=He=fi.measureText(Ae).width,Re[Ae]=He),We===void 0&&Be&&St&&(We=fi.measureText(St).width,Re[St]=We),Be&&Ue===void 0&&(Ue=fi.measureText(De).width,Re[De]=Ue,Qe=Ue-We),{width:He*Je,kernedWidth:Qe*Je}},getHeightOfChar:function(Ae,Se){return this.getValueOfPropertyAt(Ae,Se,"fontSize")},measureLine:function(Ae){var Se=this._measureLine(Ae);return this.charSpacing!==0&&(Se.width-=this._getWidthOfCharSpacing()),Se.width<0&&(Se.width=0),Se},_measureLine:function(Ae){var Se=0,St,Te,Re=this._textLines[Ae],Ee,ke,De=0,Be=new Array(Re.length),He=0,Ue,We,Je=this.path,Qe=this.pathSide==="right";for(this.__charBounds[Ae]=Be,St=0;St<Re.length;St++)Te=Re[St],ke=this._getGraphemeBox(Te,Ae,St,Ee),Be[St]=ke,Se+=ke.kernedWidth,Ee=Te;if(Be[St]={left:ke?ke.left+ke.width:0,width:0,kernedWidth:0,height:this.fontSize},Je){switch(We=Je.segmentsInfo[Je.segmentsInfo.length-1].length,Ue=_e.util.getPointOnPath(Je.path,0,Je.segmentsInfo),Ue.x+=Je.pathOffset.x,Ue.y+=Je.pathOffset.y,this.textAlign){case"left":He=Qe?We-Se:0;break;case"center":He=(We-Se)/2;break;case"right":He=Qe?0:We-Se;break}for(He+=this.pathStartOffset*(Qe?-1:1),St=Qe?Re.length-1:0;Qe?St>=0:St<Re.length;Qe?St--:St++)ke=Be[St],He>We?He%=We:He<0&&(He+=We),this._setGraphemeOnPath(He,ke,Ue),He+=ke.kernedWidth}return{width:Se,numOfSpaces:De}},_setGraphemeOnPath:function(Ae,Se,St){var Te=Ae+Se.kernedWidth/2,Re=this.path,Ee=_e.util.getPointOnPath(Re.path,Te,Re.segmentsInfo);Se.renderLeft=Ee.x-St.x,Se.renderTop=Ee.y-St.y,Se.angle=Ee.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(Ae,Se,St,Te,Re){var Ee=this.getCompleteStyleDeclaration(Se,St),ke=Te?this.getCompleteStyleDeclaration(Se,St-1):{},De=this._measureChar(Ae,Ee,Te,ke),Be=De.kernedWidth,He=De.width,Ue;this.charSpacing!==0&&(Ue=this._getWidthOfCharSpacing(),He+=Ue,Be+=Ue);var We={width:He,left:0,height:Ee.fontSize,kernedWidth:Be,deltaY:Ee.deltaY};if(St>0&&!Re){var Je=this.__charBounds[Se][St-1];We.left=Je.left+Je.width+De.kernedWidth-De.width}return We},getHeightOfLine:function(Ae){if(this.__lineHeights[Ae])return this.__lineHeights[Ae];for(var Se=this._textLines[Ae],St=this.getHeightOfChar(Ae,0),Te=1,Re=Se.length;Te<Re;Te++)St=Math.max(this.getHeightOfChar(Ae,Te),St);return this.__lineHeights[Ae]=St*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var Ae,Se=0,St=0,Te=this._textLines.length;St<Te;St++)Ae=this.getHeightOfLine(St),Se+=St===Te-1?Ae/this.lineHeight:Ae;return Se},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(Ae,Se){Ae.save();for(var St=0,Te=this._getLeftOffset(),Re=this._getTopOffset(),Ee=0,ke=this._textLines.length;Ee<ke;Ee++){var De=this.getHeightOfLine(Ee),Be=De/this.lineHeight,He=this._getLineLeftOffset(Ee);this._renderTextLine(Se,Ae,this._textLines[Ee],Te+He,Re+St+Be,Ee),St+=De}Ae.restore()},_renderTextFill:function(Ae){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(Ae,"fillText")},_renderTextStroke:function(Ae){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(Ae),Ae.save(),this._setLineDash(Ae,this.strokeDashArray),Ae.beginPath(),this._renderTextCommon(Ae,"strokeText"),Ae.closePath(),Ae.restore())},_renderChars:function(Ae,Se,St,Te,Re,Ee){var ke=this.getHeightOfLine(Ee),De=this.textAlign.indexOf("justify")!==-1,Be,He,Ue="",We,Je=0,Qe,fi=this.path,oi=!De&&this.charSpacing===0&&this.isEmptyStyles(Ee)&&!fi,ii=this.direction==="ltr",li=this.direction==="ltr"?1:-1,bi,mi=Se.canvas.getAttribute("dir");if(Se.save(),mi!==this.direction&&(Se.canvas.setAttribute("dir",ii?"ltr":"rtl"),Se.direction=ii?"ltr":"rtl",Se.textAlign=ii?"left":"right"),Re-=ke*this._fontSizeFraction/this.lineHeight,oi){this._renderChar(Ae,Se,Ee,0,St.join(""),Te,Re,ke),Se.restore();return}for(var Si=0,_i=St.length-1;Si<=_i;Si++)Qe=Si===_i||this.charSpacing||fi,Ue+=St[Si],We=this.__charBounds[Ee][Si],Je===0?(Te+=li*(We.kernedWidth-We.width),Je+=We.width):Je+=We.kernedWidth,De&&!Qe&&this._reSpaceAndTab.test(St[Si])&&(Qe=!0),Qe||(Be=Be||this.getCompleteStyleDeclaration(Ee,Si),He=this.getCompleteStyleDeclaration(Ee,Si+1),Qe=_e.util.hasStyleChanged(Be,He,!1)),Qe&&(fi?(Se.save(),Se.translate(We.renderLeft,We.renderTop),Se.rotate(We.angle),this._renderChar(Ae,Se,Ee,Si,Ue,-Je/2,0,ke),Se.restore()):(bi=Te,this._renderChar(Ae,Se,Ee,Si,Ue,bi,Re,ke)),Ue="",Be=He,Te+=li*Je,Je=0);Se.restore()},_applyPatternGradientTransformText:function(Ae){var Se=_e.util.createCanvasElement(),St,Te=this.width+this.strokeWidth,Re=this.height+this.strokeWidth;return Se.width=Te,Se.height=Re,St=Se.getContext("2d"),St.beginPath(),St.moveTo(0,0),St.lineTo(Te,0),St.lineTo(Te,Re),St.lineTo(0,Re),St.closePath(),St.translate(Te/2,Re/2),St.fillStyle=Ae.toLive(St),this._applyPatternGradientTransform(St,Ae),St.fill(),St.createPattern(Se,"no-repeat")},handleFiller:function(Ae,Se,St){var Te,Re;return St.toLive?St.gradientUnits==="percentage"||St.gradientTransform||St.patternTransform?(Te=-this.width/2,Re=-this.height/2,Ae.translate(Te,Re),Ae[Se]=this._applyPatternGradientTransformText(St),{offsetX:Te,offsetY:Re}):(Ae[Se]=St.toLive(Ae,this),this._applyPatternGradientTransform(Ae,St)):(Ae[Se]=St,{offsetX:0,offsetY:0})},_setStrokeStyles:function(Ae,Se){return Ae.lineWidth=Se.strokeWidth,Ae.lineCap=this.strokeLineCap,Ae.lineDashOffset=this.strokeDashOffset,Ae.lineJoin=this.strokeLineJoin,Ae.miterLimit=this.strokeMiterLimit,this.handleFiller(Ae,"strokeStyle",Se.stroke)},_setFillStyles:function(Ae,Se){return this.handleFiller(Ae,"fillStyle",Se.fill)},_renderChar:function(Ae,Se,St,Te,Re,Ee,ke){var De=this._getStyleDeclaration(St,Te),Be=this.getCompleteStyleDeclaration(St,Te),He=Ae==="fillText"&&Be.fill,Ue=Ae==="strokeText"&&Be.stroke&&Be.strokeWidth,We,Je;!Ue&&!He||(Se.save(),He&&(We=this._setFillStyles(Se,Be)),Ue&&(Je=this._setStrokeStyles(Se,Be)),Se.font=this._getFontDeclaration(Be),De&&De.textBackgroundColor&&this._removeShadow(Se),De&&De.deltaY&&(ke+=De.deltaY),He&&Se.fillText(Re,Ee-We.offsetX,ke-We.offsetY),Ue&&Se.strokeText(Re,Ee-Je.offsetX,ke-Je.offsetY),Se.restore())},setSuperscript:function(Ae,Se){return this._setScript(Ae,Se,this.superscript)},setSubscript:function(Ae,Se){return this._setScript(Ae,Se,this.subscript)},_setScript:function(Ae,Se,St){var Te=this.get2DCursorLocation(Ae,!0),Re=this.getValueOfPropertyAt(Te.lineIndex,Te.charIndex,"fontSize"),Ee=this.getValueOfPropertyAt(Te.lineIndex,Te.charIndex,"deltaY"),ke={fontSize:Re*St.size,deltaY:Ee+Re*St.baseline};return this.setSelectionStyles(ke,Ae,Se),this},_getLineLeftOffset:function(Ae){var Se=this.getLineWidth(Ae),St=this.width-Se,Te=this.textAlign,Re=this.direction,ke,Ee=0,ke=this.isEndOfWrapping(Ae);return Te==="justify"||Te==="justify-center"&&!ke||Te==="justify-right"&&!ke||Te==="justify-left"&&!ke?0:(Te==="center"&&(Ee=St/2),Te==="right"&&(Ee=St),Te==="justify-center"&&(Ee=St/2),Te==="justify-right"&&(Ee=St),Re==="rtl"&&(Ee-=St),Ee)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var Ae=this._forceClearCache;return Ae||(Ae=this.hasStateChanged("_dimensionAffectingProps")),Ae&&(this.dirty=!0,this._forceClearCache=!1),Ae},getLineWidth:function(Ae){if(this.__lineWidths[Ae]!==void 0)return this.__lineWidths[Ae];var Se=this.measureLine(Ae),St=Se.width;return this.__lineWidths[Ae]=St,St},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(Ae,Se,St){var Te=this._getStyleDeclaration(Ae,Se);return Te&&typeof Te[St]<"u"?Te[St]:this[St]},_renderTextDecoration:function(Ae,Se){if(!(!this[Se]&&!this.styleHas(Se))){for(var St,Te,Re,Ee,ke,De,Be,He,Ue=this._getLeftOffset(),We=this._getTopOffset(),Je,Qe,fi,oi,ii,li,bi,mi,Si=this.path,_i=this._getWidthOfCharSpacing(),xi=this.offsets[Se],Ei=0,ri=this._textLines.length;Ei<ri;Ei++){if(St=this.getHeightOfLine(Ei),!this[Se]&&!this.styleHas(Se,Ei)){We+=St;continue}Be=this._textLines[Ei],li=St/this.lineHeight,Ee=this._getLineLeftOffset(Ei),Qe=0,fi=0,He=this.getValueOfPropertyAt(Ei,0,Se),mi=this.getValueOfPropertyAt(Ei,0,"fill"),Je=We+li*(1-this._fontSizeFraction),Te=this.getHeightOfChar(Ei,0),ke=this.getValueOfPropertyAt(Ei,0,"deltaY");for(var vi=0,Ci=Be.length;vi<Ci;vi++)if(oi=this.__charBounds[Ei][vi],ii=this.getValueOfPropertyAt(Ei,vi,Se),bi=this.getValueOfPropertyAt(Ei,vi,"fill"),Re=this.getHeightOfChar(Ei,vi),De=this.getValueOfPropertyAt(Ei,vi,"deltaY"),Si&&ii&&bi)Ae.save(),Ae.fillStyle=mi,Ae.translate(oi.renderLeft,oi.renderTop),Ae.rotate(oi.angle),Ae.fillRect(-oi.kernedWidth/2,xi*Re+De,oi.kernedWidth,this.fontSize/15),Ae.restore();else if((ii!==He||bi!==mi||Re!==Te||De!==ke)&&fi>0){var $e=Ue+Ee+Qe;this.direction==="rtl"&&($e=this.width-$e-fi),He&&mi&&(Ae.fillStyle=mi,Ae.fillRect($e,Je+xi*Te+ke,fi,this.fontSize/15)),Qe=oi.left,fi=oi.width,He=ii,mi=bi,Te=Re,ke=De}else fi+=oi.kernedWidth;var $e=Ue+Ee+Qe;this.direction==="rtl"&&($e=this.width-$e-fi),Ae.fillStyle=bi,ii&&bi&&Ae.fillRect($e,Je+xi*Te+ke,fi-_i,this.fontSize/15),We+=St}this._removeShadow(Ae)}},_getFontDeclaration:function(Ae,Se){var St=Ae||this,Te=this.fontFamily,Re=_e.Text.genericFonts.indexOf(Te.toLowerCase())>-1,Ee=Te===void 0||Te.indexOf("'")>-1||Te.indexOf(",")>-1||Te.indexOf('"')>-1||Re?St.fontFamily:'"'+St.fontFamily+'"';return[_e.isLikelyNode?St.fontWeight:St.fontStyle,_e.isLikelyNode?St.fontStyle:St.fontWeight,Se?this.CACHE_FONT_SIZE+"px":St.fontSize+"px",Ee].join(" ")},render:function(Ae){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",Ae))},_splitTextIntoLines:function(Ae){for(var Se=Ae.split(this._reNewline),St=new Array(Se.length),Te=[`
`],Re=[],Ee=0;Ee<Se.length;Ee++)St[Ee]=_e.util.string.graphemeSplit(Se[Ee]),Re=Re.concat(St[Ee],Te);return Re.pop(),{_unwrappedLines:St,lines:Se,graphemeText:Re,graphemeLines:St}},toObject:function(Ae){var Se=Pe.concat(Ae),St=this.callSuper("toObject",Se);return St.styles=_e.util.stylesToArray(this.styles,this.text),St.path&&(St.path=this.path.toObject()),St},set:function(Ae,Se){this.callSuper("set",Ae,Se);var St=!1,Te=!1;if(typeof Ae=="object")for(var Re in Ae)Re==="path"&&this.setPathInfo(),St=St||this._dimensionAffectingProps.indexOf(Re)!==-1,Te=Te||Re==="path";else St=this._dimensionAffectingProps.indexOf(Ae)!==-1,Te=Ae==="path";return Te&&this.setPathInfo(),St&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),_e.Text.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),_e.Text.DEFAULT_SVG_FONT_SIZE=16,_e.Text.fromElement=function(Ae,Se,St){if(!Ae)return Se(null);var Te=_e.parseAttributes(Ae,_e.Text.ATTRIBUTE_NAMES),Re=Te.textAnchor||"left";if(St=_e.util.object.extend(St?xe(St):{},Te),St.top=St.top||0,St.left=St.left||0,Te.textDecoration){var Ee=Te.textDecoration;Ee.indexOf("underline")!==-1&&(St.underline=!0),Ee.indexOf("overline")!==-1&&(St.overline=!0),Ee.indexOf("line-through")!==-1&&(St.linethrough=!0),delete St.textDecoration}"dx"in Te&&(St.left+=Te.dx),"dy"in Te&&(St.top+=Te.dy),"fontSize"in St||(St.fontSize=_e.Text.DEFAULT_SVG_FONT_SIZE);var ke="";"textContent"in Ae?ke=Ae.textContent:"firstChild"in Ae&&Ae.firstChild!==null&&"data"in Ae.firstChild&&Ae.firstChild.data!==null&&(ke=Ae.firstChild.data),ke=ke.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var De=St.strokeWidth;St.strokeWidth=0;var Be=new _e.Text(ke,St),He=Be.getScaledHeight()/Be.height,Ue=(Be.height+Be.strokeWidth)*Be.lineHeight-Be.height,We=Ue*He,Je=Be.getScaledHeight()+We,Qe=0;Re==="center"&&(Qe=Be.getScaledWidth()/2),Re==="right"&&(Qe=Be.getScaledWidth()),Be.set({left:Be.left-Qe,top:Be.top-(Je-Be.fontSize*(.07+Be._fontSizeFraction))/Be.lineHeight,strokeWidth:typeof De<"u"?De:1}),Se(Be)},_e.Text.fromObject=function(Ae,Se){var St=xe(Ae),Te=Ae.path;return delete St.path,_e.Object._fromObject("Text",St,function(Re){Re.styles=_e.util.stylesFromArray(Ae.styles,Ae.text),Te?_e.Object._fromObject("Path",Te,function(Ee){Re.set("path",Ee),Se(Re)},"path"):Se(Re)},"text")},_e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],_e.util.createAccessors&&_e.util.createAccessors(_e.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(Oe){if(!this.styles||typeof Oe<"u"&&!this.styles[Oe])return!0;var _e=typeof Oe>"u"?this.styles:{line:this.styles[Oe]};for(var xe in _e)for(var Pe in _e[xe])for(var Ae in _e[xe][Pe])return!1;return!0},styleHas:function(Oe,_e){if(!this.styles||!Oe||Oe===""||typeof _e<"u"&&!this.styles[_e])return!1;var xe=typeof _e>"u"?this.styles:{0:this.styles[_e]};for(var Pe in xe)for(var Ae in xe[Pe])if(typeof xe[Pe][Ae][Oe]<"u")return!0;return!1},cleanStyle:function(Oe){if(!this.styles||!Oe||Oe==="")return!1;var _e=this.styles,xe=0,Pe,Ae,Se=!0,St=0,Te;for(var Re in _e){Pe=0;for(var Ee in _e[Re]){var Te=_e[Re][Ee],ke=Te.hasOwnProperty(Oe);xe++,ke?(Ae?Te[Oe]!==Ae&&(Se=!1):Ae=Te[Oe],Te[Oe]===this[Oe]&&delete Te[Oe]):Se=!1,Object.keys(Te).length!==0?Pe++:delete _e[Re][Ee]}Pe===0&&delete _e[Re]}for(var De=0;De<this._textLines.length;De++)St+=this._textLines[De].length;Se&&xe===St&&(this[Oe]=Ae,this.removeStyle(Oe))},removeStyle:function(Oe){if(!(!this.styles||!Oe||Oe==="")){var _e=this.styles,xe,Pe,Ae;for(Pe in _e){xe=_e[Pe];for(Ae in xe)delete xe[Ae][Oe],Object.keys(xe[Ae]).length===0&&delete xe[Ae];Object.keys(xe).length===0&&delete _e[Pe]}}},_extendStyles:function(Oe,_e){var xe=this.get2DCursorLocation(Oe);this._getLineStyle(xe.lineIndex)||this._setLineStyle(xe.lineIndex),this._getStyleDeclaration(xe.lineIndex,xe.charIndex)||this._setStyleDeclaration(xe.lineIndex,xe.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(xe.lineIndex,xe.charIndex),_e)},get2DCursorLocation:function(Oe,_e){typeof Oe>"u"&&(Oe=this.selectionStart);for(var xe=_e?this._unwrappedTextLines:this._textLines,Pe=xe.length,Ae=0;Ae<Pe;Ae++){if(Oe<=xe[Ae].length)return{lineIndex:Ae,charIndex:Oe};Oe-=xe[Ae].length+this.missingNewlineOffset(Ae)}return{lineIndex:Ae-1,charIndex:xe[Ae-1].length<Oe?xe[Ae-1].length:Oe}},getSelectionStyles:function(Oe,_e,xe){typeof Oe>"u"&&(Oe=this.selectionStart||0),typeof _e>"u"&&(_e=this.selectionEnd||Oe);for(var Pe=[],Ae=Oe;Ae<_e;Ae++)Pe.push(this.getStyleAtPosition(Ae,xe));return Pe},getStyleAtPosition:function(Oe,_e){var xe=this.get2DCursorLocation(Oe),Pe=_e?this.getCompleteStyleDeclaration(xe.lineIndex,xe.charIndex):this._getStyleDeclaration(xe.lineIndex,xe.charIndex);return Pe||{}},setSelectionStyles:function(Oe,_e,xe){typeof _e>"u"&&(_e=this.selectionStart||0),typeof xe>"u"&&(xe=this.selectionEnd||_e);for(var Pe=_e;Pe<xe;Pe++)this._extendStyles(Pe,Oe);return this._forceClearCache=!0,this},_getStyleDeclaration:function(Oe,_e){var xe=this.styles&&this.styles[Oe];return xe?xe[_e]:null},getCompleteStyleDeclaration:function(Oe,_e){for(var xe=this._getStyleDeclaration(Oe,_e)||{},Pe={},Ae,Se=0;Se<this._styleProperties.length;Se++)Ae=this._styleProperties[Se],Pe[Ae]=typeof xe[Ae]>"u"?this[Ae]:xe[Ae];return Pe},_setStyleDeclaration:function(Oe,_e,xe){this.styles[Oe][_e]=xe},_deleteStyleDeclaration:function(Oe,_e){delete this.styles[Oe][_e]},_getLineStyle:function(Oe){return!!this.styles[Oe]},_setLineStyle:function(Oe){this.styles[Oe]={}},_deleteLineStyle:function(Oe){delete this.styles[Oe]}})}(),function(){function Oe(_e){_e.textDecoration&&(_e.textDecoration.indexOf("underline")>-1&&(_e.underline=!0),_e.textDecoration.indexOf("line-through")>-1&&(_e.linethrough=!0),_e.textDecoration.indexOf("overline")>-1&&(_e.overline=!0),delete _e.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(_e,xe){this.callSuper("initialize",_e,xe),this.initBehavior()},setSelectionStart:function(_e){_e=Math.max(_e,0),this._updateAndFire("selectionStart",_e)},setSelectionEnd:function(_e){_e=Math.min(_e,this.text.length),this._updateAndFire("selectionEnd",_e)},_updateAndFire:function(_e,xe){this[_e]!==xe&&(this._fireSelectionChanged(),this[_e]=xe),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(_e){this.clearContextTop(),this.callSuper("render",_e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(_e){this.callSuper("_render",_e)},clearContextTop:function(_e){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var xe=this.canvas.contextTop,Pe=this.canvas.viewportTransform;xe.save(),xe.transform(Pe[0],Pe[1],Pe[2],Pe[3],Pe[4],Pe[5]),this.transform(xe),this._clearTextArea(xe),_e||xe.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var _e=this._getCursorBoundaries(),xe=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(_e,xe):this.renderSelection(_e,xe),xe.restore()}},_clearTextArea:function(_e){var xe=this.width+4,Pe=this.height+4;_e.clearRect(-xe/2,-Pe/2,xe,Pe)},_getCursorBoundaries:function(_e){typeof _e>"u"&&(_e=this.selectionStart);var xe=this._getLeftOffset(),Pe=this._getTopOffset(),Ae=this._getCursorBoundariesOffsets(_e);return{left:xe,top:Pe,leftOffset:Ae.left,topOffset:Ae.top}},_getCursorBoundariesOffsets:function(_e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var xe,Pe,Ae,Se=0,St=0,Te,Re=this.get2DCursorLocation(_e);Ae=Re.charIndex,Pe=Re.lineIndex;for(var Ee=0;Ee<Pe;Ee++)Se+=this.getHeightOfLine(Ee);xe=this._getLineLeftOffset(Pe);var ke=this.__charBounds[Pe][Ae];return ke&&(St=ke.left),this.charSpacing!==0&&Ae===this._textLines[Pe].length&&(St-=this._getWidthOfCharSpacing()),Te={top:Se,left:xe+(St>0?St:0)},this.direction==="rtl"&&(Te.left*=-1),this.cursorOffsetCache=Te,this.cursorOffsetCache},renderCursor:function(_e,xe){var Pe=this.get2DCursorLocation(),Ae=Pe.lineIndex,Se=Pe.charIndex>0?Pe.charIndex-1:0,St=this.getValueOfPropertyAt(Ae,Se,"fontSize"),Te=this.scaleX*this.canvas.getZoom(),Re=this.cursorWidth/Te,Ee=_e.topOffset,ke=this.getValueOfPropertyAt(Ae,Se,"deltaY");Ee+=(1-this._fontSizeFraction)*this.getHeightOfLine(Ae)/this.lineHeight-St*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(_e,xe),xe.fillStyle=this.cursorColor||this.getValueOfPropertyAt(Ae,Se,"fill"),xe.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,xe.fillRect(_e.left+_e.leftOffset-Re/2,Ee+_e.top+ke,Re,St)},renderSelection:function(_e,xe){for(var Pe=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,Ae=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,Se=this.textAlign.indexOf("justify")!==-1,St=this.get2DCursorLocation(Pe),Te=this.get2DCursorLocation(Ae),Re=St.lineIndex,Ee=Te.lineIndex,ke=St.charIndex<0?0:St.charIndex,De=Te.charIndex<0?0:Te.charIndex,Be=Re;Be<=Ee;Be++){var He=this._getLineLeftOffset(Be)||0,Ue=this.getHeightOfLine(Be),We=0,Je=0,Qe=0;if(Be===Re&&(Je=this.__charBounds[Re][ke].left),Be>=Re&&Be<Ee)Qe=Se&&!this.isEndOfWrapping(Be)?this.width:this.getLineWidth(Be)||5;else if(Be===Ee)if(De===0)Qe=this.__charBounds[Ee][De].left;else{var fi=this._getWidthOfCharSpacing();Qe=this.__charBounds[Ee][De-1].left+this.__charBounds[Ee][De-1].width-fi}We=Ue,(this.lineHeight<1||Be===Ee&&this.lineHeight>1)&&(Ue/=this.lineHeight);var oi=_e.left+He+Je,ii=Qe-Je,li=Ue,bi=0;this.inCompositionMode?(xe.fillStyle=this.compositionColor||"black",li=1,bi=Ue):xe.fillStyle=this.selectionColor,this.direction==="rtl"&&(oi=this.width-oi-ii),xe.fillRect(oi,_e.top+_e.topOffset+bi,ii,li),_e.topOffset+=We}},getCurrentCharFontSize:function(){var _e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_e.l,_e.c,"fontSize")},getCurrentCharColor:function(){var _e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_e.l,_e.c,"fill")},_getCurrentCharIndex:function(){var _e=this.get2DCursorLocation(this.selectionStart,!0),xe=_e.charIndex>0?_e.charIndex-1:0;return{l:_e.lineIndex,c:xe}}}),t.IText.fromObject=function(_e,xe){var Pe=t.util.stylesFromArray(_e.styles,_e.text),Ae=Object.assign({},_e,{styles:Pe});if(Oe(Ae),Ae.styles)for(var Se in Ae.styles)for(var St in Ae.styles[Se])Oe(Ae.styles[Se][St]);t.Object._fromObject("IText",Ae,xe,"text")}}(),function(){var Oe=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var _e=this;this.on("added",function(){var xe=_e.canvas;xe&&(xe._hasITextHandlers||(xe._hasITextHandlers=!0,_e._initCanvasHandlers(xe)),xe._iTextInstances=xe._iTextInstances||[],xe._iTextInstances.push(_e))})},initRemovedHandler:function(){var _e=this;this.on("removed",function(){var xe=_e.canvas;xe&&(xe._iTextInstances=xe._iTextInstances||[],t.util.removeFromArray(xe._iTextInstances,_e),xe._iTextInstances.length===0&&(xe._hasITextHandlers=!1,_e._removeCanvasHandlers(xe)))})},_initCanvasHandlers:function(_e){_e._mouseUpITextHandler=function(){_e._iTextInstances&&_e._iTextInstances.forEach(function(xe){xe.__isMousedown=!1})},_e.on("mouse:up",_e._mouseUpITextHandler)},_removeCanvasHandlers:function(_e){_e.off("mouse:up",_e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(_e,xe,Pe,Ae){var Se;return Se={isAborted:!1,abort:function(){this.isAborted=!0}},_e.animate("_currentCursorOpacity",xe,{duration:Pe,onComplete:function(){Se.isAborted||_e[Ae]()},onChange:function(){_e.canvas&&_e.selectionStart===_e.selectionEnd&&_e.renderCursorOrSelection()},abort:function(){return Se.isAborted}}),Se},_onTickComplete:function(){var _e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){_e._currentTickCompleteState=_e._animateCursor(_e,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(_e){var xe=this,Pe=_e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){xe._tick()},Pe)},abortCursorAnimation:function(){var _e=this._currentTickState||this._currentTickCompleteState,xe=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,_e&&xe&&xe.clearContext(xe.contextTop||xe.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(_e){var xe=0,Pe=_e-1;if(this._reSpace.test(this._text[Pe]))for(;this._reSpace.test(this._text[Pe]);)xe++,Pe--;for(;/\S/.test(this._text[Pe])&&Pe>-1;)xe++,Pe--;return _e-xe},findWordBoundaryRight:function(_e){var xe=0,Pe=_e;if(this._reSpace.test(this._text[Pe]))for(;this._reSpace.test(this._text[Pe]);)xe++,Pe++;for(;/\S/.test(this._text[Pe])&&Pe<this._text.length;)xe++,Pe++;return _e+xe},findLineBoundaryLeft:function(_e){for(var xe=0,Pe=_e-1;!/\n/.test(this._text[Pe])&&Pe>-1;)xe++,Pe--;return _e-xe},findLineBoundaryRight:function(_e){for(var xe=0,Pe=_e;!/\n/.test(this._text[Pe])&&Pe<this._text.length;)xe++,Pe++;return _e+xe},searchWordBoundary:function(_e,xe){for(var Pe=this._text,Ae=this._reSpace.test(Pe[_e])?_e-1:_e,Se=Pe[Ae],St=t.reNonWord;!St.test(Se)&&Ae>0&&Ae<Pe.length;)Ae+=xe,Se=Pe[Ae];return St.test(Se)&&(Ae+=xe===1?0:1),Ae},selectWord:function(_e){_e=_e||this.selectionStart;var xe=this.searchWordBoundary(_e,-1),Pe=this.searchWordBoundary(_e,1);this.selectionStart=xe,this.selectionEnd=Pe,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(_e){_e=_e||this.selectionStart;var xe=this.findLineBoundaryLeft(_e),Pe=this.findLineBoundaryRight(_e);return this.selectionStart=xe,this.selectionEnd=Pe,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(_e){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(_e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(_e){_e._iTextInstances&&_e._iTextInstances.forEach(function(xe){xe.selected=!1,xe.isEditing&&xe.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(_e){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var xe=this.getSelectionStartFromPointer(_e.e),Pe=this.selectionStart,Ae=this.selectionEnd;(xe!==this.__selectionStartOnMouseDown||Pe===Ae)&&(Pe===xe||Ae===xe)||(xe>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=xe):(this.selectionStart=xe,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==Pe||this.selectionEnd!==Ae)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(_e,xe,Pe){var Ae=Pe.slice(0,_e),Se=t.util.string.graphemeSplit(Ae).length;if(_e===xe)return{selectionStart:Se,selectionEnd:Se};var St=Pe.slice(_e,xe),Te=t.util.string.graphemeSplit(St).length;return{selectionStart:Se,selectionEnd:Se+Te}},fromGraphemeToStringSelection:function(_e,xe,Pe){var Ae=Pe.slice(0,_e),Se=Ae.join("").length;if(_e===xe)return{selectionStart:Se,selectionEnd:Se};var St=Pe.slice(_e,xe),Te=St.join("").length;return{selectionStart:Se,selectionEnd:Se+Te}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var _e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=_e.selectionStart,this.hiddenTextarea.selectionEnd=_e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var _e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=_e.selectionEnd,this.inCompositionMode||(this.selectionStart=_e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var _e=this._calcTextareaPosition();this.hiddenTextarea.style.left=_e.left,this.hiddenTextarea.style.top=_e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var _e=this.inCompositionMode?this.compositionStart:this.selectionStart,xe=this._getCursorBoundaries(_e),Pe=this.get2DCursorLocation(_e),Ae=Pe.lineIndex,Se=Pe.charIndex,St=this.getValueOfPropertyAt(Ae,Se,"fontSize")*this.lineHeight,Te=xe.leftOffset,Re=this.calcTransformMatrix(),Ee={x:xe.left+Te,y:xe.top+xe.topOffset+St},ke=this.canvas.getRetinaScaling(),De=this.canvas.upperCanvasEl,Be=De.width/ke,He=De.height/ke,Ue=Be-St,We=He-St,Je=De.clientWidth/Be,Qe=De.clientHeight/He;return Ee=t.util.transformPoint(Ee,Re),Ee=t.util.transformPoint(Ee,this.canvas.viewportTransform),Ee.x*=Je,Ee.y*=Qe,Ee.x<0&&(Ee.x=0),Ee.x>Ue&&(Ee.x=Ue),Ee.y<0&&(Ee.y=0),Ee.y>We&&(Ee.y=We),Ee.x+=this.canvas._offset.left,Ee.y+=this.canvas._offset.top,{left:Ee.x+"px",top:Ee.y+"px",fontSize:St+"px",charHeight:St}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var _e=this._textBeforeEdit!==this.text,xe=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,xe&&(xe.blur&&xe.blur(),xe.parentNode&&xe.parentNode.removeChild(xe)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),_e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),_e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var _e in this.styles)this._textLines[_e]||delete this.styles[_e]},removeStyleFromTo:function(_e,xe){var Pe=this.get2DCursorLocation(_e,!0),Ae=this.get2DCursorLocation(xe,!0),Se=Pe.lineIndex,St=Pe.charIndex,Te=Ae.lineIndex,Re=Ae.charIndex,Ee,ke;if(Se!==Te){if(this.styles[Se])for(Ee=St;Ee<this._unwrappedTextLines[Se].length;Ee++)delete this.styles[Se][Ee];if(this.styles[Te])for(Ee=Re;Ee<this._unwrappedTextLines[Te].length;Ee++)ke=this.styles[Te][Ee],ke&&(this.styles[Se]||(this.styles[Se]={}),this.styles[Se][St+Ee-Re]=ke);for(Ee=Se+1;Ee<=Te;Ee++)delete this.styles[Ee];this.shiftLineStyles(Te,Se-Te)}else if(this.styles[Se]){ke=this.styles[Se];var De=Re-St,Be,He;for(Ee=St;Ee<Re;Ee++)delete ke[Ee];for(He in this.styles[Se])Be=parseInt(He,10),Be>=Re&&(ke[Be-De]=ke[He],delete ke[He])}},shiftLineStyles:function(_e,xe){var Pe=Oe(this.styles);for(var Ae in this.styles){var Se=parseInt(Ae,10);Se>_e&&(this.styles[Se+xe]=Pe[Se],Pe[Se-xe]||delete this.styles[Se])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(_e,xe,Pe,Ae){var Se,St={},Te=!1,Re=this._unwrappedTextLines[_e].length===xe;Pe||(Pe=1),this.shiftLineStyles(_e,Pe),this.styles[_e]&&(Se=this.styles[_e][xe===0?xe:xe-1]);for(var Ee in this.styles[_e]){var ke=parseInt(Ee,10);ke>=xe&&(Te=!0,St[ke-xe]=this.styles[_e][Ee],Re&&xe===0||delete this.styles[_e][Ee])}var De=!1;for(Te&&!Re&&(this.styles[_e+Pe]=St,De=!0),De&&Pe--;Pe>0;)Ae&&Ae[Pe-1]?this.styles[_e+Pe]={0:Oe(Ae[Pe-1])}:Se?this.styles[_e+Pe]={0:Oe(Se)}:delete this.styles[_e+Pe],Pe--;this._forceClearCache=!0},insertCharStyleObject:function(_e,xe,Pe,Ae){this.styles||(this.styles={});var Se=this.styles[_e],St=Se?Oe(Se):{};Pe||(Pe=1);for(var Te in St){var Re=parseInt(Te,10);Re>=xe&&(Se[Re+Pe]=St[Re],St[Re-Pe]||delete Se[Re])}if(this._forceClearCache=!0,Ae){for(;Pe--;)!Object.keys(Ae[Pe]).length||(this.styles[_e]||(this.styles[_e]={}),this.styles[_e][xe+Pe]=Oe(Ae[Pe]));return}if(!!Se)for(var Ee=Se[xe?xe-1:1];Ee&&Pe--;)this.styles[_e][xe+Pe]=Oe(Ee)},insertNewStyleBlock:function(_e,xe,Pe){for(var Ae=this.get2DCursorLocation(xe,!0),Se=[0],St=0,Te=0;Te<_e.length;Te++)_e[Te]===`
`?(St++,Se[St]=0):Se[St]++;Se[0]>0&&(this.insertCharStyleObject(Ae.lineIndex,Ae.charIndex,Se[0],Pe),Pe=Pe&&Pe.slice(Se[0]+1)),St&&this.insertNewlineStyleObject(Ae.lineIndex,Ae.charIndex+Se[0],St);for(var Te=1;Te<St;Te++)Se[Te]>0?this.insertCharStyleObject(Ae.lineIndex+Te,0,Se[Te],Pe):Pe&&this.styles[Ae.lineIndex+Te]&&Pe[0]&&(this.styles[Ae.lineIndex+Te][0]=Pe[0]),Pe=Pe&&Pe.slice(Se[Te]+1);Se[Te]>0&&this.insertCharStyleObject(Ae.lineIndex+Te,0,Se[Te],Pe)},setSelectionStartEndWithShift:function(_e,xe,Pe){Pe<=_e?(xe===_e?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=_e),this.selectionStart=Pe):Pe>_e&&Pe<xe?this._selectionDirection==="right"?this.selectionEnd=Pe:this.selectionStart=Pe:(xe===_e?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=xe),this.selectionEnd=Pe)},setSelectionInBoundaries:function(){var _e=this.text.length;this.selectionStart>_e?this.selectionStart=_e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>_e?this.selectionEnd=_e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(Oe){if(!!this.canvas){this.__newClickTime=+new Date;var _e=Oe.pointer;this.isTripleClick(_e)&&(this.fire("tripleclick",Oe),this._stopEvent(Oe.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=_e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(Oe){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===Oe.x&&this.__lastPointer.y===Oe.y},_stopEvent:function(Oe){Oe.preventDefault&&Oe.preventDefault(),Oe.stopPropagation&&Oe.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(Oe){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(Oe.e))},tripleClickHandler:function(Oe){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(Oe.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(Oe){!this.canvas||!this.editable||Oe.e.button&&Oe.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(Oe.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(Oe){!this.canvas||!this.editable||Oe.e.button&&Oe.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(Oe){if(this.__isMousedown=!1,!(!this.editable||this.group||Oe.transform&&Oe.transform.actionPerformed||Oe.e.button&&Oe.e.button!==1)){if(this.canvas){var _e=this.canvas._activeObject;if(_e&&_e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(Oe.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(Oe){var _e=this.getSelectionStartFromPointer(Oe),xe=this.selectionStart,Pe=this.selectionEnd;Oe.shiftKey?this.setSelectionStartEndWithShift(xe,Pe,_e):(this.selectionStart=_e,this.selectionEnd=_e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(Oe){for(var _e=this.getLocalPointer(Oe),xe=0,Pe=0,Ae=0,Se=0,St=0,Te,Re,Ee=0,ke=this._textLines.length;Ee<ke&&Ae<=_e.y;Ee++)Ae+=this.getHeightOfLine(Ee)*this.scaleY,St=Ee,Ee>0&&(Se+=this._textLines[Ee-1].length+this.missingNewlineOffset(Ee-1));Te=this._getLineLeftOffset(St),Pe=Te*this.scaleX,Re=this._textLines[St],this.direction==="rtl"&&(_e.x=this.width*this.scaleX-_e.x+Pe);for(var De=0,Be=Re.length;De<Be&&(xe=Pe,Pe+=this.__charBounds[St][De].kernedWidth*this.scaleX,Pe<=_e.x);De++)Se++;return this._getNewSelectionStartFromOffset(_e,xe,Pe,Se,Be)},_getNewSelectionStartFromOffset:function(Oe,_e,xe,Pe,Ae){var Se=Oe.x-_e,St=xe-Oe.x,Te=St>Se||St<0?0:1,Re=Pe+Te;return this.flipX&&(Re=Ae-Re),Re>this._text.length&&(Re=this._text.length),Re}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var Oe=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+Oe.top+"; left: "+Oe.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+Oe.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(Oe){if(!!this.isEditing){var _e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(Oe.keyCode in _e)this[_e[Oe.keyCode]](Oe);else if(Oe.keyCode in this.ctrlKeysMapDown&&(Oe.ctrlKey||Oe.metaKey))this[this.ctrlKeysMapDown[Oe.keyCode]](Oe);else return;Oe.stopImmediatePropagation(),Oe.preventDefault(),Oe.keyCode>=33&&Oe.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(Oe){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(Oe.keyCode in this.ctrlKeysMapUp&&(Oe.ctrlKey||Oe.metaKey))this[this.ctrlKeysMapUp[Oe.keyCode]](Oe);else return;Oe.stopImmediatePropagation(),Oe.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(Oe){var _e=this.fromPaste;if(this.fromPaste=!1,Oe&&Oe.stopPropagation(),!!this.isEditing){var xe=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,Pe=this._text.length,Ae=xe.length,Se,St,Te=Ae-Pe,Re=this.selectionStart,Ee=this.selectionEnd,ke=Re!==Ee,De,Be,He;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var Ue=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),We=Re>Ue.selectionStart;ke?(Se=this._text.slice(Re,Ee),Te+=Ee-Re):Ae<Pe&&(We?Se=this._text.slice(Ee+Te,Ee):Se=this._text.slice(Re,Re-Te)),St=xe.slice(Ue.selectionEnd-Te,Ue.selectionEnd),Se&&Se.length&&(St.length&&(De=this.getSelectionStyles(Re,Re+1,!1),De=St.map(function(){return De[0]})),ke?(Be=Re,He=Ee):We?(Be=Ee-Se.length,He=Ee):(Be=Ee,He=Ee+Se.length),this.removeStyleFromTo(Be,He)),St.length&&(_e&&St.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(De=t.copiedTextStyle),this.insertNewStyleBlock(St,Re,De)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(Oe){this.compositionStart=Oe.target.selectionStart,this.compositionEnd=Oe.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(Oe){return Oe&&Oe.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(Oe,_e){var xe=this._getLineLeftOffset(Oe),Pe;return _e>0&&(Pe=this.__charBounds[Oe][_e-1],xe+=Pe.left+Pe.width),xe},getDownCursorOffset:function(Oe,_e){var xe=this._getSelectionForOffset(Oe,_e),Pe=this.get2DCursorLocation(xe),Ae=Pe.lineIndex;if(Ae===this._textLines.length-1||Oe.metaKey||Oe.keyCode===34)return this._text.length-xe;var Se=Pe.charIndex,St=this._getWidthBeforeCursor(Ae,Se),Te=this._getIndexOnLine(Ae+1,St),Re=this._textLines[Ae].slice(Se);return Re.length+Te+1+this.missingNewlineOffset(Ae)},_getSelectionForOffset:function(Oe,_e){return Oe.shiftKey&&this.selectionStart!==this.selectionEnd&&_e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(Oe,_e){var xe=this._getSelectionForOffset(Oe,_e),Pe=this.get2DCursorLocation(xe),Ae=Pe.lineIndex;if(Ae===0||Oe.metaKey||Oe.keyCode===33)return-xe;var Se=Pe.charIndex,St=this._getWidthBeforeCursor(Ae,Se),Te=this._getIndexOnLine(Ae-1,St),Re=this._textLines[Ae].slice(0,Se),Ee=this.missingNewlineOffset(Ae-1);return-this._textLines[Ae-1].length+Te-Re.length+(1-Ee)},_getIndexOnLine:function(Oe,_e){for(var xe=this._textLines[Oe],Pe=this._getLineLeftOffset(Oe),Ae=Pe,Se=0,St,Te,Re=0,Ee=xe.length;Re<Ee;Re++)if(St=this.__charBounds[Oe][Re].width,Ae+=St,Ae>_e){Te=!0;var ke=Ae-St,De=Ae,Be=Math.abs(ke-_e),He=Math.abs(De-_e);Se=He<Be?Re:Re-1;break}return Te||(Se=xe.length-1),Se},moveCursorDown:function(Oe){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",Oe)},moveCursorUp:function(Oe){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",Oe)},_moveCursorUpOrDown:function(Oe,_e){var xe="get"+Oe+"CursorOffset",Pe=this[xe](_e,this._selectionDirection==="right");_e.shiftKey?this.moveCursorWithShift(Pe):this.moveCursorWithoutShift(Pe),Pe!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(Oe){var _e=this._selectionDirection==="left"?this.selectionStart+Oe:this.selectionEnd+Oe;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,_e),Oe!==0},moveCursorWithoutShift:function(Oe){return Oe<0?(this.selectionStart+=Oe,this.selectionEnd=this.selectionStart):(this.selectionEnd+=Oe,this.selectionStart=this.selectionEnd),Oe!==0},moveCursorLeft:function(Oe){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",Oe)},_move:function(Oe,_e,xe){var Pe;if(Oe.altKey)Pe=this["findWordBoundary"+xe](this[_e]);else if(Oe.metaKey||Oe.keyCode===35||Oe.keyCode===36)Pe=this["findLineBoundary"+xe](this[_e]);else return this[_e]+=xe==="Left"?-1:1,!0;if(typeof Pe<"u"&&this[_e]!==Pe)return this[_e]=Pe,!0},_moveLeft:function(Oe,_e){return this._move(Oe,_e,"Left")},_moveRight:function(Oe,_e){return this._move(Oe,_e,"Right")},moveCursorLeftWithoutShift:function(Oe){var _e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(_e=this._moveLeft(Oe,"selectionStart")),this.selectionEnd=this.selectionStart,_e},moveCursorLeftWithShift:function(Oe){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(Oe,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(Oe,"selectionStart")},moveCursorRight:function(Oe){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",Oe)},_moveCursorLeftOrRight:function(Oe,_e){var xe="moveCursor"+Oe+"With";this._currentCursorOpacity=1,_e.shiftKey?xe+="Shift":xe+="outShift",this[xe](_e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(Oe){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(Oe,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(Oe,"selectionEnd")},moveCursorRightWithoutShift:function(Oe){var _e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(_e=this._moveRight(Oe,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,_e},removeChars:function(Oe,_e){typeof _e>"u"&&(_e=Oe+1),this.removeStyleFromTo(Oe,_e),this._text.splice(Oe,_e-Oe),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(Oe,_e,xe,Pe){typeof Pe>"u"&&(Pe=xe),Pe>xe&&this.removeStyleFromTo(xe,Pe);var Ae=t.util.string.graphemeSplit(Oe);this.insertNewStyleBlock(Ae,xe,_e),this._text=[].concat(this._text.slice(0,xe),Ae,this._text.slice(Pe)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var Oe=t.util.toFixed,_e=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var xe=this._getSVGLeftTopOffsets(),Pe=this._getSVGTextAndBg(xe.textTop,xe.textLeft);return this._wrapSVGTextAndBg(Pe)},toSVG:function(xe){return this._createBaseSVGMarkup(this._toSVG(),{reviver:xe,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(xe){var Pe=!0,Ae=this.getSvgTextDecoration(this);return[xe.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",Ae?'text-decoration="'+Ae+'" ':"",'style="',this.getSvgStyles(Pe),'"',this.addPaintOrder()," >",xe.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(xe,Pe){var Ae=[],Se=[],St=xe,Te;this._setSVGBg(Se);for(var Re=0,Ee=this._textLines.length;Re<Ee;Re++)Te=this._getLineLeftOffset(Re),(this.textBackgroundColor||this.styleHas("textBackgroundColor",Re))&&this._setSVGTextLineBg(Se,Re,Pe+Te,St),this._setSVGTextLineText(Ae,Re,Pe+Te,St),St+=this.getHeightOfLine(Re);return{textSpans:Ae,textBgRects:Se}},_createTextCharSpan:function(xe,Pe,Ae,Se){var St=xe!==xe.trim()||xe.match(_e),Te=this.getSvgSpanStyles(Pe,St),Re=Te?'style="'+Te+'"':"",Ee=Pe.deltaY,ke="",De=t.Object.NUM_FRACTION_DIGITS;return Ee&&(ke=' dy="'+Oe(Ee,De)+'" '),['<tspan x="',Oe(Ae,De),'" y="',Oe(Se,De),'" ',ke,Re,">",t.util.string.escapeXml(xe),"</tspan>"].join("")},_setSVGTextLineText:function(xe,Pe,Ae,Se){var St=this.getHeightOfLine(Pe),Te=this.textAlign.indexOf("justify")!==-1,Re,Ee,ke="",De,Be,He=0,Ue=this._textLines[Pe],We;Se+=St*(1-this._fontSizeFraction)/this.lineHeight;for(var Je=0,Qe=Ue.length-1;Je<=Qe;Je++)We=Je===Qe||this.charSpacing,ke+=Ue[Je],De=this.__charBounds[Pe][Je],He===0?(Ae+=De.kernedWidth-De.width,He+=De.width):He+=De.kernedWidth,Te&&!We&&this._reSpaceAndTab.test(Ue[Je])&&(We=!0),We||(Re=Re||this.getCompleteStyleDeclaration(Pe,Je),Ee=this.getCompleteStyleDeclaration(Pe,Je+1),We=t.util.hasStyleChanged(Re,Ee,!0)),We&&(Be=this._getStyleDeclaration(Pe,Je)||{},xe.push(this._createTextCharSpan(ke,Be,Ae,Se)),ke="",Re=Ee,Ae+=He,He=0)},_pushTextBgRect:function(xe,Pe,Ae,Se,St,Te){var Re=t.Object.NUM_FRACTION_DIGITS;xe.push("		<rect ",this._getFillAttributes(Pe),' x="',Oe(Ae,Re),'" y="',Oe(Se,Re),'" width="',Oe(St,Re),'" height="',Oe(Te,Re),`"></rect>
`)},_setSVGTextLineBg:function(xe,Pe,Ae,Se){for(var St=this._textLines[Pe],Te=this.getHeightOfLine(Pe)/this.lineHeight,Re=0,Ee=0,ke,De,Be=this.getValueOfPropertyAt(Pe,0,"textBackgroundColor"),He=0,Ue=St.length;He<Ue;He++)ke=this.__charBounds[Pe][He],De=this.getValueOfPropertyAt(Pe,He,"textBackgroundColor"),De!==Be?(Be&&this._pushTextBgRect(xe,Be,Ae+Ee,Se,Re,Te),Ee=ke.left,Re=ke.width,Be=De):Re+=ke.kernedWidth;De&&this._pushTextBgRect(xe,De,Ae+Ee,Se,Re,Te)},_getFillAttributes:function(xe){var Pe=xe&&typeof xe=="string"?new t.Color(xe):"";return!Pe||!Pe.getSource()||Pe.getAlpha()===1?'fill="'+xe+'"':'opacity="'+Pe.getAlpha()+'" fill="'+Pe.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(xe){for(var Pe=0,Ae=0,Se=0;Se<xe;Se++)Pe+=this.getHeightOfLine(Se);return Ae=this.getHeightOfLine(Se),{lineTop:Pe,offset:(this._fontSizeMult-this._fontSizeFraction)*Ae/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(xe){var Pe=t.Object.prototype.getSvgStyles.call(this,xe);return Pe+" white-space: pre;"}})}(),function(Oe){var _e=Oe.fabric||(Oe.fabric={});_e.Textbox=_e.util.createClass(_e.IText,_e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:_e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(xe){for(var Pe=0,Ae=0,Se=0,St={},Te=0;Te<xe.graphemeLines.length;Te++)xe.graphemeText[Se]===`
`&&Te>0?(Ae=0,Se++,Pe++):!this.splitByGrapheme&&this._reSpaceAndTab.test(xe.graphemeText[Se])&&Te>0&&(Ae++,Se++),St[Te]={line:Pe,offset:Ae},Se+=xe.graphemeLines[Te].length,Ae+=xe.graphemeLines[Te].length;return St},styleHas:function(xe,Pe){if(this._styleMap&&!this.isWrapping){var Ae=this._styleMap[Pe];Ae&&(Pe=Ae.line)}return _e.Text.prototype.styleHas.call(this,xe,Pe)},isEmptyStyles:function(xe){if(!this.styles)return!0;var Pe=0,Ae=xe+1,Se,St,Te=!1,Re=this._styleMap[xe],Ee=this._styleMap[xe+1];Re&&(xe=Re.line,Pe=Re.offset),Ee&&(Ae=Ee.line,Te=Ae===xe,Se=Ee.offset),St=typeof xe>"u"?this.styles:{line:this.styles[xe]};for(var ke in St)for(var De in St[ke])if(De>=Pe&&(!Te||De<Se))for(var Be in St[ke][De])return!1;return!0},_getStyleDeclaration:function(xe,Pe){if(this._styleMap&&!this.isWrapping){var Ae=this._styleMap[xe];if(!Ae)return null;xe=Ae.line,Pe=Ae.offset+Pe}return this.callSuper("_getStyleDeclaration",xe,Pe)},_setStyleDeclaration:function(xe,Pe,Ae){var Se=this._styleMap[xe];xe=Se.line,Pe=Se.offset+Pe,this.styles[xe][Pe]=Ae},_deleteStyleDeclaration:function(xe,Pe){var Ae=this._styleMap[xe];xe=Ae.line,Pe=Ae.offset+Pe,delete this.styles[xe][Pe]},_getLineStyle:function(xe){var Pe=this._styleMap[xe];return!!this.styles[Pe.line]},_setLineStyle:function(xe){var Pe=this._styleMap[xe];this.styles[Pe.line]={}},_wrapText:function(xe,Pe){var Ae=[],Se;for(this.isWrapping=!0,Se=0;Se<xe.length;Se++)Ae=Ae.concat(this._wrapLine(xe[Se],Se,Pe));return this.isWrapping=!1,Ae},_measureWord:function(xe,Pe,Ae){var Se=0,St,Te=!0;Ae=Ae||0;for(var Re=0,Ee=xe.length;Re<Ee;Re++){var ke=this._getGraphemeBox(xe[Re],Pe,Re+Ae,St,Te);Se+=ke.kernedWidth,St=xe[Re]}return Se},_wrapLine:function(xe,Pe,Ae,oi){var St=0,Te=this.splitByGrapheme,Re=[],Ee=[],ke=Te?_e.util.string.graphemeSplit(xe):xe.split(this._wordJoiners),De="",Be=0,He=Te?"":" ",Ue=0,We=0,Je=0,Qe=!0,fi=this._getWidthOfCharSpacing(),oi=oi||0;ke.length===0&&ke.push([]),Ae-=oi;for(var ii=0;ii<ke.length;ii++)De=Te?ke[ii]:_e.util.string.graphemeSplit(ke[ii]),Ue=this._measureWord(De,Pe,Be),Be+=De.length,St+=We+Ue-fi,St>Ae&&!Qe?(Re.push(Ee),Ee=[],St=Ue,Qe=!0):St+=fi,!Qe&&!Te&&Ee.push(He),Ee=Ee.concat(De),We=Te?0:this._measureWord([He],Pe,Be),Be++,Qe=!1,Ue>Je&&(Je=Ue);return ii&&Re.push(Ee),Je+oi>this.dynamicMinWidth&&(this.dynamicMinWidth=Je-fi+oi),Re},isEndOfWrapping:function(xe){return!this._styleMap[xe+1]||this._styleMap[xe+1].line!==this._styleMap[xe].line},missingNewlineOffset:function(xe){return this.splitByGrapheme?this.isEndOfWrapping(xe)?1:0:1},_splitTextIntoLines:function(xe){for(var Pe=_e.Text.prototype._splitTextIntoLines.call(this,xe),Ae=this._wrapText(Pe.lines,this.width),Se=new Array(Ae.length),St=0;St<Ae.length;St++)Se[St]=Ae[St].join("");return Pe.lines=Se,Pe.graphemeLines=Ae,Pe},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var xe={};for(var Pe in this._styleMap)this._textLines[Pe]&&(xe[this._styleMap[Pe].line]=1);for(var Pe in this.styles)xe[Pe]||delete this.styles[Pe]},toObject:function(xe){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(xe))}}),_e.Textbox.fromObject=function(xe,Pe){var Ae=_e.util.stylesFromArray(xe.styles,xe.text),Se=Object.assign({},xe,{styles:Ae});return _e.Object._fromObject("Textbox",Se,Pe,"text")}}(e),function(){var Oe=t.controlsUtils,_e=Oe.scaleSkewCursorStyleHandler,xe=Oe.scaleCursorStyleHandler,Pe=Oe.scalingEqually,Ae=Oe.scalingYOrSkewingX,Se=Oe.scalingXOrSkewingY,St=Oe.scaleOrSkewActionName,Te=t.Object.prototype.controls;if(Te.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:_e,actionHandler:Se,getActionName:St}),Te.mr=new t.Control({x:.5,y:0,cursorStyleHandler:_e,actionHandler:Se,getActionName:St}),Te.mb=new t.Control({x:0,y:.5,cursorStyleHandler:_e,actionHandler:Ae,getActionName:St}),Te.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:_e,actionHandler:Ae,getActionName:St}),Te.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:xe,actionHandler:Pe}),Te.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:xe,actionHandler:Pe}),Te.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:xe,actionHandler:Pe}),Te.br=new t.Control({x:.5,y:.5,cursorStyleHandler:xe,actionHandler:Pe}),Te.mtr=new t.Control({x:0,y:-.5,actionHandler:Oe.rotationWithSnapping,cursorStyleHandler:Oe.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var Re=t.Textbox.prototype.controls={};Re.mtr=Te.mtr,Re.tr=Te.tr,Re.br=Te.br,Re.tl=Te.tl,Re.bl=Te.bl,Re.mt=Te.mt,Re.mb=Te.mb,Re.mr=new t.Control({x:.5,y:0,actionHandler:Oe.changeWidth,cursorStyleHandler:_e,actionName:"resizing"}),Re.ml=new t.Control({x:-.5,y:0,actionHandler:Oe.changeWidth,cursorStyleHandler:_e,actionName:"resizing"})}}()})(fabric);const scriptRel="modulepreload",assetsURL=function(e){return"/fastsign/"+e},seen={},__vitePreload=function e(t,r,Ce){if(!r||r.length===0)return t();const Me=document.getElementsByTagName("link");return Promise.all(r.map(Ie=>{if(Ie=assetsURL(Ie),Ie in seen)return;seen[Ie]=!0;const Fe=Ie.endsWith(".css"),Oe=Fe?'[rel="stylesheet"]':"";if(!!Ce)for(let Pe=Me.length-1;Pe>=0;Pe--){const Ae=Me[Pe];if(Ae.href===Ie&&(!Fe||Ae.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${Ie}"]${Oe}`))return;const xe=document.createElement("link");if(xe.rel=Fe?"stylesheet":scriptRel,Fe||(xe.as="script",xe.crossOrigin=""),xe.href=Ie,document.head.appendChild(xe),Fe)return new Promise((Pe,Ae)=>{xe.addEventListener("load",Pe),xe.addEventListener("error",()=>Ae(new Error(`Unable to preload CSS for ${Ie}`)))})})).then(()=>t())};function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var r=new u16(31),Ce=0;Ce<31;++Ce)r[Ce]=t+=1<<e[Ce-1];for(var Me=new u32(r[30]),Ce=1;Ce<30;++Ce)for(var Ie=r[Ce];Ie<r[Ce+1];++Ie)Me[Ie]=Ie-r[Ce]<<5|Ce;return[r,Me]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(e,t,r){for(var Ce=e.length,Me=0,Ie=new u16(t);Me<Ce;++Me)++Ie[e[Me]-1];var Fe=new u16(t);for(Me=0;Me<t;++Me)Fe[Me]=Fe[Me-1]+Ie[Me-1]<<1;var Oe;if(r){Oe=new u16(1<<t);var _e=15-t;for(Me=0;Me<Ce;++Me)if(e[Me])for(var xe=Me<<4|e[Me],Pe=t-e[Me],Ae=Fe[e[Me]-1]++<<Pe,Se=Ae|(1<<Pe)-1;Ae<=Se;++Ae)Oe[rev[Ae]>>>_e]=xe}else for(Oe=new u16(Ce),Me=0;Me<Ce;++Me)Oe[Me]=rev[Fe[e[Me]-1]++]>>>15-e[Me];return Oe},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},bits=function(e,t,r){var Ce=t/8>>0;return(e[Ce]|e[Ce+1]<<8)>>>(t&7)&r},bits16=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},shft=function(e){return(e/8>>0)+(e&7&&1)},slc=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var Ce=new(e instanceof u16?u16:e instanceof u32?u32:u8)(r-t);return Ce.set(e.subarray(t,r)),Ce},inflt=function(e,t,r){var Ce=e.length,Me=!t||r,Ie=!r||r.i;r||(r={}),t||(t=new u8(Ce*3));var Fe=function(ei){var ni=t.length;if(ei>ni){var ci=new u8(Math.max(ni*2,ei));ci.set(t),t=ci}},Oe=r.f||0,_e=r.p||0,xe=r.b||0,Pe=r.l,Ae=r.d,Se=r.m,St=r.n,Te=Ce*8;do{if(!Pe){r.f=Oe=bits(e,_e,1);var Re=bits(e,_e+1,3);if(_e+=3,Re)if(Re==1)Pe=flrm,Ae=fdrm,Se=9,St=5;else if(Re==2){var Be=bits(e,_e,31)+257,He=bits(e,_e+10,15)+4,Ue=Be+bits(e,_e+5,31)+1;_e+=14;for(var We=new u8(Ue),Je=new u8(19),Qe=0;Qe<He;++Qe)Je[clim[Qe]]=bits(e,_e+Qe*3,7);_e+=He*3;var fi=max(Je),oi=(1<<fi)-1;if(!Ie&&_e+Ue*(fi+7)>Te)break;for(var ii=hMap(Je,fi,1),Qe=0;Qe<Ue;){var li=ii[bits(e,_e,oi)];_e+=li&15;var Ee=li>>>4;if(Ee<16)We[Qe++]=Ee;else{var bi=0,mi=0;for(Ee==16?(mi=3+bits(e,_e,3),_e+=2,bi=We[Qe-1]):Ee==17?(mi=3+bits(e,_e,7),_e+=3):Ee==18&&(mi=11+bits(e,_e,127),_e+=7);mi--;)We[Qe++]=bi}}var Si=We.subarray(0,Be),_i=We.subarray(Be);Se=max(Si),St=max(_i),Pe=hMap(Si,Se,1),Ae=hMap(_i,St,1)}else throw"invalid block type";else{var Ee=shft(_e)+4,ke=e[Ee-4]|e[Ee-3]<<8,De=Ee+ke;if(De>Ce){if(Ie)throw"unexpected EOF";break}Me&&Fe(xe+ke),t.set(e.subarray(Ee,De),xe),r.b=xe+=ke,r.p=_e=De*8;continue}if(_e>Te)throw"unexpected EOF"}Me&&Fe(xe+131072);for(var xi=(1<<Se)-1,Ei=(1<<St)-1,ri=Se+St+18;Ie||_e+ri<Te;){var bi=Pe[bits16(e,_e)&xi],vi=bi>>>4;if(_e+=bi&15,_e>Te)throw"unexpected EOF";if(!bi)throw"invalid length/literal";if(vi<256)t[xe++]=vi;else if(vi==256){Pe=null;break}else{var Ci=vi-254;if(vi>264){var Qe=vi-257,$e=fleb[Qe];Ci=bits(e,_e,(1<<$e)-1)+fl[Qe],_e+=$e}var Ge=Ae[bits16(e,_e)&Ei],ze=Ge>>>4;if(!Ge)throw"invalid distance";_e+=Ge&15;var _i=fd[ze];if(ze>3){var $e=fdeb[ze];_i+=bits16(e,_e)&(1<<$e)-1,_e+=$e}if(_e>Te)throw"unexpected EOF";Me&&Fe(xe+131072);for(var qe=xe+Ci;xe<qe;xe+=4)t[xe]=t[xe-_i],t[xe+1]=t[xe+1-_i],t[xe+2]=t[xe+2-_i],t[xe+3]=t[xe+3-_i];xe=qe}}r.l=Pe,r.p=_e,r.b=xe,Pe&&(Oe=1,r.m=Se,r.d=Ae,r.n=St)}while(!Oe);return xe==t.length?t:slc(t,0,xe)},wbits=function(e,t,r){r<<=t&7;var Ce=t/8>>0;e[Ce]|=r,e[Ce+1]|=r>>>8},wbits16=function(e,t,r){r<<=t&7;var Ce=t/8>>0;e[Ce]|=r,e[Ce+1]|=r>>>8,e[Ce+2]|=r>>>16},hTree=function(e,t){for(var r=[],Ce=0;Ce<e.length;++Ce)e[Ce]&&r.push({s:Ce,f:e[Ce]});var Me=r.length,Ie=r.slice();if(!Me)return[new u8(0),0];if(Me==1){var Fe=new u8(r[0].s+1);return Fe[r[0].s]=1,[Fe,1]}r.sort(function(Ue,We){return Ue.f-We.f}),r.push({s:-1,f:25001});var Oe=r[0],_e=r[1],xe=0,Pe=1,Ae=2;for(r[0]={s:-1,f:Oe.f+_e.f,l:Oe,r:_e};Pe!=Me-1;)Oe=r[r[xe].f<r[Ae].f?xe++:Ae++],_e=r[xe!=Pe&&r[xe].f<r[Ae].f?xe++:Ae++],r[Pe++]={s:-1,f:Oe.f+_e.f,l:Oe,r:_e};for(var Se=Ie[0].s,Ce=1;Ce<Me;++Ce)Ie[Ce].s>Se&&(Se=Ie[Ce].s);var St=new u16(Se+1),Te=ln(r[Pe-1],St,0);if(Te>t){var Ce=0,Re=0,Ee=Te-t,ke=1<<Ee;for(Ie.sort(function(We,Je){return St[Je.s]-St[We.s]||We.f-Je.f});Ce<Me;++Ce){var De=Ie[Ce].s;if(St[De]>t)Re+=ke-(1<<Te-St[De]),St[De]=t;else break}for(Re>>>=Ee;Re>0;){var Be=Ie[Ce].s;St[Be]<t?Re-=1<<t-St[Be]++-1:++Ce}for(;Ce>=0&&Re;--Ce){var He=Ie[Ce].s;St[He]==t&&(--St[He],++Re)}Te=t}return[new u8(St),Te]},ln=function(e,t,r){return e.s==-1?Math.max(ln(e.l,t,r+1),ln(e.r,t,r+1)):t[e.s]=r},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new u16(++t),Ce=0,Me=e[0],Ie=1,Fe=function(_e){r[Ce++]=_e},Oe=1;Oe<=t;++Oe)if(e[Oe]==Me&&Oe!=t)++Ie;else{if(!Me&&Ie>2){for(;Ie>138;Ie-=138)Fe(32754);Ie>2&&(Fe(Ie>10?Ie-11<<5|28690:Ie-3<<5|12305),Ie=0)}else if(Ie>3){for(Fe(Me),--Ie;Ie>6;Ie-=6)Fe(8304);Ie>2&&(Fe(Ie-3<<5|8208),Ie=0)}for(;Ie--;)Fe(Me);Ie=1,Me=e[Oe]}return[r.subarray(0,Ce),t]},clen=function(e,t){for(var r=0,Ce=0;Ce<t.length;++Ce)r+=e[Ce]*t[Ce];return r},wfblk=function(e,t,r){var Ce=r.length,Me=shft(t+2);e[Me]=Ce&255,e[Me+1]=Ce>>>8,e[Me+2]=e[Me]^255,e[Me+3]=e[Me+1]^255;for(var Ie=0;Ie<Ce;++Ie)e[Me+Ie+4]=r[Ie];return(Me+4+Ce)*8},wblk=function(e,t,r,Ce,Me,Ie,Fe,Oe,_e,xe,Pe){wbits(t,Pe++,r),++Me[256];for(var Ae=hTree(Me,15),Se=Ae[0],St=Ae[1],Te=hTree(Ie,15),Re=Te[0],Ee=Te[1],ke=lc(Se),De=ke[0],Be=ke[1],He=lc(Re),Ue=He[0],We=He[1],Je=new u16(19),Qe=0;Qe<De.length;++Qe)Je[De[Qe]&31]++;for(var Qe=0;Qe<Ue.length;++Qe)Je[Ue[Qe]&31]++;for(var fi=hTree(Je,7),oi=fi[0],ii=fi[1],li=19;li>4&&!oi[clim[li-1]];--li);var bi=xe+5<<3,mi=clen(Me,flt)+clen(Ie,fdt)+Fe,Si=clen(Me,Se)+clen(Ie,Re)+Fe+14+3*li+clen(Je,oi)+(2*Je[16]+3*Je[17]+7*Je[18]);if(bi<=mi&&bi<=Si)return wfblk(t,Pe,e.subarray(_e,_e+xe));var _i,xi,Ei,ri;if(wbits(t,Pe,1+(Si<mi)),Pe+=2,Si<mi){_i=hMap(Se,St,0),xi=Se,Ei=hMap(Re,Ee,0),ri=Re;var vi=hMap(oi,ii,0);wbits(t,Pe,Be-257),wbits(t,Pe+5,We-1),wbits(t,Pe+10,li-4),Pe+=14;for(var Qe=0;Qe<li;++Qe)wbits(t,Pe+3*Qe,oi[clim[Qe]]);Pe+=3*li;for(var Ci=[De,Ue],$e=0;$e<2;++$e)for(var Ge=Ci[$e],Qe=0;Qe<Ge.length;++Qe){var ze=Ge[Qe]&31;wbits(t,Pe,vi[ze]),Pe+=oi[ze],ze>15&&(wbits(t,Pe,Ge[Qe]>>>5&127),Pe+=Ge[Qe]>>>12)}}else _i=flm,xi=flt,Ei=fdm,ri=fdt;for(var Qe=0;Qe<Oe;++Qe)if(Ce[Qe]>255){var ze=Ce[Qe]>>>18&31;wbits16(t,Pe,_i[ze+257]),Pe+=xi[ze+257],ze>7&&(wbits(t,Pe,Ce[Qe]>>>23&31),Pe+=fleb[ze]);var qe=Ce[Qe]&31;wbits16(t,Pe,Ei[qe]),Pe+=ri[qe],qe>3&&(wbits16(t,Pe,Ce[Qe]>>>5&8191),Pe+=fdeb[qe])}else wbits16(t,Pe,_i[Ce[Qe]]),Pe+=xi[Ce[Qe]];return wbits16(t,Pe,_i[256]),Pe+xi[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(e,t,r,Ce,Me,Ie){var Fe=e.length,Oe=new u8(Ce+Fe+5*(1+Math.floor(Fe/7e3))+Me),_e=Oe.subarray(Ce,Oe.length-Me),xe=0;if(!t||Fe<8)for(var Pe=0;Pe<=Fe;Pe+=65535){var Ae=Pe+65535;Ae<Fe?xe=wfblk(_e,xe,e.subarray(Pe,Ae)):(_e[Pe]=Ie,xe=wfblk(_e,xe,e.subarray(Pe,Fe)))}else{for(var Se=deo[t-1],St=Se>>>13,Te=Se&8191,Re=(1<<r)-1,Ee=new u16(32768),ke=new u16(Re+1),De=Math.ceil(r/3),Be=2*De,He=function(Ye){return(e[Ye]^e[Ye+1]<<De^e[Ye+2]<<Be)&Re},Ue=new u32(25e3),We=new u16(288),Je=new u16(32),Qe=0,fi=0,Pe=0,oi=0,ii=0,li=0;Pe<Fe;++Pe){var bi=He(Pe),mi=Pe&32767,Si=ke[bi];if(Ee[mi]=Si,ke[bi]=mi,ii<=Pe){var _i=Fe-Pe;if((Qe>7e3||oi>24576)&&_i>423){xe=wblk(e,_e,0,Ue,We,Je,fi,oi,li,Pe-li,xe),oi=Qe=fi=0,li=Pe;for(var xi=0;xi<286;++xi)We[xi]=0;for(var xi=0;xi<30;++xi)Je[xi]=0}var Ei=2,ri=0,vi=Te,Ci=mi-Si&32767;if(_i>2&&bi==He(Pe-Ci))for(var $e=Math.min(St,_i)-1,Ge=Math.min(32767,Pe),ze=Math.min(258,_i);Ci<=Ge&&--vi&&mi!=Si;){if(e[Pe+Ei]==e[Pe+Ei-Ci]){for(var qe=0;qe<ze&&e[Pe+qe]==e[Pe+qe-Ci];++qe);if(qe>Ei){if(Ei=qe,ri=Ci,qe>$e)break;for(var ei=Math.min(Ci,qe-2),ni=0,xi=0;xi<ei;++xi){var ci=Pe-Ci+xi+32768&32767,di=Ee[ci],Ti=ci-di+32768&32767;Ti>ni&&(ni=Ti,Si=ci)}}}mi=Si,Si=Ee[mi],Ci+=mi-Si+32768&32767}if(ri){Ue[oi++]=268435456|revfl[Ei]<<18|revfd[ri];var Ni=revfl[Ei]&31,si=revfd[ri]&31;fi+=fleb[Ni]+fdeb[si],++We[257+Ni],++Je[si],ii=Pe+Ei,++Qe}else Ue[oi++]=e[Pe],++We[e[Pe]]}}xe=wblk(e,_e,Ie,Ue,We,Je,fi,oi,li,Pe-li,xe),Ie||(xe=wfblk(_e,xe,et$1))}return slc(Oe,0,Ce+shft(xe)+Me)},adler=function(){var e=1,t=0;return{p:function(r){for(var Ce=e,Me=t,Ie=r.length,Fe=0;Fe!=Ie;){for(var Oe=Math.min(Fe+5552,Ie);Fe<Oe;++Fe)Ce+=r[Fe],Me+=Ce;Ce%=65521,Me%=65521}e=Ce,t=Me},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},dopt=function(e,t,r,Ce,Me){return dflt(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,Ce,!Me)},wbytes=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},zlh=function(e,t){var r=t.level,Ce=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=Ce<<6|(Ce?32-2*Ce:1)},zlv=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(e,t){t===void 0&&(t={});var r=adler();r.p(e);var Ce=dopt(e,t,2,4);return zlh(Ce,t),wbytes(Ce,Ce.length-4,r.d()),Ce}function unzlibSync(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(e){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(e){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(e))}};function o(e,t,r){var Ce=new XMLHttpRequest;Ce.open("GET",e),Ce.responseType="blob",Ce.onload=function(){l(Ce.response,t,r)},Ce.onerror=function(){a.error("could not download file")},Ce.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var Ce=n.URL||n.webkitURL,Me=document.createElement("a");t=t||e.name||"download",Me.download=t,Me.rel="noopener",typeof e=="string"?(Me.href=e,Me.origin!==location.origin?s(Me.href)?o(e,t,r):c(Me,Me.target="_blank"):c(Me)):(Me.href=Ce.createObjectURL(e),setTimeout(function(){Ce.revokeObjectURL(Me.href)},4e4),setTimeout(function(){c(Me)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(s(e))o(e,t,r);else{var Ce=document.createElement("a");Ce.href=e,Ce.target="_blank",setTimeout(function(){c(Ce)})}else navigator.msSaveOrOpenBlob(function(Me,Ie){return Ie===void 0?Ie={autoBom:!1}:_typeof(Ie)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ie={autoBom:!Ie}),Ie.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Me.type)?new Blob([String.fromCharCode(65279),Me],{type:Me.type}):Me}(e,r),t)}:function(e,t,r,Ce){if((Ce=Ce||open("","_blank"))&&(Ce.document.title=Ce.document.body.innerText="downloading..."),typeof e=="string")return o(e,t,r);var Me=e.type==="application/octet-stream",Ie=/constructor/i.test(n.HTMLElement)||n.safari,Fe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Fe||Me&&Ie)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Oe=new FileReader;Oe.onloadend=function(){var Pe=Oe.result;Pe=Fe?Pe:Pe.replace(/^data:[^;]*;/,"data:attachment/file;"),Ce?Ce.location.href=Pe:location=Pe,Ce=null},Oe.readAsDataURL(e)}else{var _e=n.URL||n.webkitURL,xe=_e.createObjectURL(e);Ce?Ce.location=xe:location.href=xe,Ce=null,setTimeout(function(){_e.revokeObjectURL(xe)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Oe){return[parseInt(Oe[1]),parseInt(Oe[2]),parseInt(Oe[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Oe){return[parseInt(Oe[1],16),parseInt(Oe[2],16),parseInt(Oe[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Oe){return[parseInt(Oe[1]+Oe[1],16),parseInt(Oe[2]+Oe[2],16),parseInt(Oe[3]+Oe[3],16)]}}],Ce=0;Ce<r.length;Ce++){var Me=r[Ce].re,Ie=r[Ce].process,Fe=Me.exec(e);Fe&&(t=Ie(Fe),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Oe=this.r.toString(16),_e=this.g.toString(16),xe=this.b.toString(16);return Oe.length==1&&(Oe="0"+Oe),_e.length==1&&(_e="0"+_e),xe.length==1&&(xe="0"+xe),"#"+Oe+_e+xe}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(e,t){var r=e[0],Ce=e[1],Me=e[2],Ie=e[3];r=g(r,Ce,Me,Ie,t[0],7,-680876936),Ie=g(Ie,r,Ce,Me,t[1],12,-389564586),Me=g(Me,Ie,r,Ce,t[2],17,606105819),Ce=g(Ce,Me,Ie,r,t[3],22,-1044525330),r=g(r,Ce,Me,Ie,t[4],7,-176418897),Ie=g(Ie,r,Ce,Me,t[5],12,1200080426),Me=g(Me,Ie,r,Ce,t[6],17,-1473231341),Ce=g(Ce,Me,Ie,r,t[7],22,-45705983),r=g(r,Ce,Me,Ie,t[8],7,1770035416),Ie=g(Ie,r,Ce,Me,t[9],12,-1958414417),Me=g(Me,Ie,r,Ce,t[10],17,-42063),Ce=g(Ce,Me,Ie,r,t[11],22,-1990404162),r=g(r,Ce,Me,Ie,t[12],7,1804603682),Ie=g(Ie,r,Ce,Me,t[13],12,-40341101),Me=g(Me,Ie,r,Ce,t[14],17,-1502002290),r=m(r,Ce=g(Ce,Me,Ie,r,t[15],22,1236535329),Me,Ie,t[1],5,-165796510),Ie=m(Ie,r,Ce,Me,t[6],9,-1069501632),Me=m(Me,Ie,r,Ce,t[11],14,643717713),Ce=m(Ce,Me,Ie,r,t[0],20,-373897302),r=m(r,Ce,Me,Ie,t[5],5,-701558691),Ie=m(Ie,r,Ce,Me,t[10],9,38016083),Me=m(Me,Ie,r,Ce,t[15],14,-660478335),Ce=m(Ce,Me,Ie,r,t[4],20,-405537848),r=m(r,Ce,Me,Ie,t[9],5,568446438),Ie=m(Ie,r,Ce,Me,t[14],9,-1019803690),Me=m(Me,Ie,r,Ce,t[3],14,-187363961),Ce=m(Ce,Me,Ie,r,t[8],20,1163531501),r=m(r,Ce,Me,Ie,t[13],5,-1444681467),Ie=m(Ie,r,Ce,Me,t[2],9,-51403784),Me=m(Me,Ie,r,Ce,t[7],14,1735328473),r=v(r,Ce=m(Ce,Me,Ie,r,t[12],20,-1926607734),Me,Ie,t[5],4,-378558),Ie=v(Ie,r,Ce,Me,t[8],11,-2022574463),Me=v(Me,Ie,r,Ce,t[11],16,1839030562),Ce=v(Ce,Me,Ie,r,t[14],23,-35309556),r=v(r,Ce,Me,Ie,t[1],4,-1530992060),Ie=v(Ie,r,Ce,Me,t[4],11,1272893353),Me=v(Me,Ie,r,Ce,t[7],16,-155497632),Ce=v(Ce,Me,Ie,r,t[10],23,-1094730640),r=v(r,Ce,Me,Ie,t[13],4,681279174),Ie=v(Ie,r,Ce,Me,t[0],11,-358537222),Me=v(Me,Ie,r,Ce,t[3],16,-722521979),Ce=v(Ce,Me,Ie,r,t[6],23,76029189),r=v(r,Ce,Me,Ie,t[9],4,-640364487),Ie=v(Ie,r,Ce,Me,t[12],11,-421815835),Me=v(Me,Ie,r,Ce,t[15],16,530742520),r=b(r,Ce=v(Ce,Me,Ie,r,t[2],23,-995338651),Me,Ie,t[0],6,-198630844),Ie=b(Ie,r,Ce,Me,t[7],10,1126891415),Me=b(Me,Ie,r,Ce,t[14],15,-1416354905),Ce=b(Ce,Me,Ie,r,t[5],21,-57434055),r=b(r,Ce,Me,Ie,t[12],6,1700485571),Ie=b(Ie,r,Ce,Me,t[3],10,-1894986606),Me=b(Me,Ie,r,Ce,t[10],15,-1051523),Ce=b(Ce,Me,Ie,r,t[1],21,-2054922799),r=b(r,Ce,Me,Ie,t[8],6,1873313359),Ie=b(Ie,r,Ce,Me,t[15],10,-30611744),Me=b(Me,Ie,r,Ce,t[6],15,-1560198380),Ce=b(Ce,Me,Ie,r,t[13],21,1309151649),r=b(r,Ce,Me,Ie,t[4],6,-145523070),Ie=b(Ie,r,Ce,Me,t[11],10,-1120210379),Me=b(Me,Ie,r,Ce,t[2],15,718787259),Ce=b(Ce,Me,Ie,r,t[9],21,-343485551),e[0]=_(r,e[0]),e[1]=_(Ce,e[1]),e[2]=_(Me,e[2]),e[3]=_(Ie,e[3])}function p(e,t,r,Ce,Me,Ie){return t=_(_(t,e),_(Ce,Ie)),_(t<<Me|t>>>32-Me,r)}function g(e,t,r,Ce,Me,Ie,Fe){return p(t&r|~t&Ce,e,t,Me,Ie,Fe)}function m(e,t,r,Ce,Me,Ie,Fe){return p(t&Ce|r&~Ce,e,t,Me,Ie,Fe)}function v(e,t,r,Ce,Me,Ie,Fe){return p(t^r^Ce,e,t,Me,Ie,Fe)}function b(e,t,r,Ce,Me,Ie,Fe){return p(r^(t|~Ce),e,t,Me,Ie,Fe)}function y(e){var t,r=e.length,Ce=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)d(Ce,w(e.substring(t-64,t)));e=e.substring(t-64);var Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)Me[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(Me[t>>2]|=128<<(t%4<<3),t>55)for(d(Ce,Me),t=0;t<16;t++)Me[t]=0;return Me[14]=8*r,d(Ce,Me),Ce}function w(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(e){for(var t="",r=0;r<4;r++)t+=N[e>>8*r+4&15]+N[e>>8*r&15];return t}function A(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x(e){return y(e).map(A).join("")}var S=function(e){for(var t=0;t<e.length;t++)e[t]=L(e[t]);return e.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(e,t){if(S){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(e,t){var r,Ce,Me,Ie;if(e!==r){for(var Fe=(Me=e,Ie=1+(256/e.length>>0),new Array(Ie+1).join(Me)),Oe=[],_e=0;_e<256;_e++)Oe[_e]=_e;var xe=0;for(_e=0;_e<256;_e++){var Pe=Oe[_e];xe=(xe+Pe+Fe.charCodeAt(_e))%256,Oe[_e]=Oe[xe],Oe[xe]=Pe}r=e,Ce=Oe}else Oe=Ce;var Ae=t.length,Se=0,St=0,Te="";for(_e=0;_e<Ae;_e++)St=(St+(Pe=Oe[Se=(Se+1)%256]))%256,Oe[Se]=Oe[St],Oe[St]=Pe,Fe=Oe[(Oe[Se]+Oe[St])%256],Te+=String.fromCharCode(t.charCodeAt(_e)^Fe);return Te}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(e,t,r,Ce){this.v=1,this.r=2;var Me=192;e.forEach(function(Oe){if(k.perm!==void 0)throw new Error("Invalid permission: "+Oe);Me+=k[Oe]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var Ie=(t+this.padding).substr(0,32),Fe=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ie,Fe),this.P=-(1+(255^Me)),this.encryptionKey=x(Ie+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Ce)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,Ce=0;Ce<r;Ce++){var Me=e.charCodeAt(Ce);Me<33||Me===35||Me===37||Me===40||Me===41||Me===47||Me===60||Me===62||Me===91||Me===93||Me===123||Me===125||Me>126?t+="#"+("0"+Me.toString(16)).slice(-2):t+=e[Ce]}return t}function C(e){if(_typeof(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,Ce,Me){if(Me=Me||!1,typeof r!="string"||typeof Ce!="function"||typeof Me!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var Ie=Math.random().toString(35);return t[r][Ie]=[Ce,!!Me],Ie},this.unsubscribe=function(r){for(var Ce in t)if(t[Ce][r])return delete t[Ce][r],Object.keys(t[Ce]).length===0&&delete t[Ce],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var Ce=Array.prototype.slice.call(arguments,1),Me=[];for(var Ie in t[r]){var Fe=t[r][Ie];try{Fe[0].apply(e,Ce)}catch(Oe){n.console&&a.error("jsPDF PubSub Error",Oe.message,Oe)}Fe[1]&&Me.push(Ie)}Me.length&&Me.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function j(e){if(!(this instanceof j))return new j(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function O(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function B(e,t,r,Ce,Me){if(!(this instanceof B))return new B(e,t,r,Ce,Me);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,O.call(this,Ce,Me)}function M(e,t,r,Ce,Me){if(!(this instanceof M))return new M(e,t,r,Ce,Me);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,O.call(this,Ce,Me)}function E(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",Ce=arguments[1],Me=arguments[2],Ie=arguments[3],Fe=[],Oe=1,_e=16,xe="S",Pe=null;_typeof(e=e||{})==="object"&&(r=e.orientation,Ce=e.unit||Ce,Me=e.format||Me,Ie=e.compress||e.compressPdf||Ie,(Pe=e.encryption||null)!==null&&(Pe.userPassword=Pe.userPassword||"",Pe.ownerPassword=Pe.ownerPassword||"",Pe.userPermissions=Pe.userPermissions||[]),Oe=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(_e=e.floatPrecision),xe=e.defaultPathOperation||"S"),Fe=e.filters||(Ie===!0?["FlateEncode"]:Fe),Ce=Ce||"mm",r=(""+(r||"P")).toLowerCase();var Ae=e.putOnlyUsedFonts||!1,Se={},St={internal:{},__private__:{}};St.__private__.PubSub=C;var Te="1.3",Re=St.__private__.getPdfVersion=function(){return Te};St.__private__.setPdfVersion=function(Ke){Te=Ke};var Ee={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};St.__private__.getPageFormats=function(){return Ee};var ke=St.__private__.getPageFormat=function(Ke){return Ee[Ke]};Me=Me||"a4";var De={COMPAT:"compat",ADVANCED:"advanced"},Be=De.COMPAT;function He(){this.saveGraphicsState(),Xe(new Cn(rn,0,0,-rn,0,ms()*rn).toString()+" cm"),this.setFontSize(this.getFontSize()/rn),xe="n",Be=De.ADVANCED}function Ue(){this.restoreGraphicsState(),xe="S",Be=De.COMPAT}var We=St.__private__.combineFontStyleAndFontWeight=function(Ke,Ai){if(Ke=="bold"&&Ai=="normal"||Ke=="bold"&&Ai==400||Ke=="normal"&&Ai=="italic"||Ke=="bold"&&Ai=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ai&&(Ke=Ai==400||Ai==="normal"?Ke==="italic"?"italic":"normal":Ai!=700&&Ai!=="bold"||Ke!=="normal"?(Ai==700?"bold":Ai)+""+Ke:"bold"),Ke};St.advancedAPI=function(Ke){var Ai=Be===De.COMPAT;return Ai&&He.call(this),typeof Ke!="function"||(Ke(this),Ai&&Ue.call(this)),this},St.compatAPI=function(Ke){var Ai=Be===De.ADVANCED;return Ai&&Ue.call(this),typeof Ke!="function"||(Ke(this),Ai&&He.call(this)),this},St.isAdvancedAPI=function(){return Be===De.ADVANCED};var Je,Qe=function(Ke){if(Be!==De.ADVANCED)throw new Error(Ke+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fi=St.roundToPrecision=St.__private__.roundToPrecision=function(Ke,Ai){var Ui=t||Ai;if(isNaN(Ke)||isNaN(Ui))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Ke.toFixed(Ui).replace(/0+$/,"")};Je=St.hpf=St.__private__.hpf=typeof _e=="number"?function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return fi(Ke,_e)}:_e==="smart"?function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return fi(Ke,Ke>-1&&Ke<1?16:5)}:function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.hpf");return fi(Ke,16)};var oi=St.f2=St.__private__.f2=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.f2");return fi(Ke,2)},ii=St.__private__.f3=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.f3");return fi(Ke,3)},li=St.scale=St.__private__.scale=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.scale");return Be===De.COMPAT?Ke*rn:Be===De.ADVANCED?Ke:void 0},bi=function(Ke){return Be===De.COMPAT?ms()-Ke:Be===De.ADVANCED?Ke:void 0},mi=function(Ke){return li(bi(Ke))};St.__private__.setPrecision=St.setPrecision=function(Ke){typeof parseInt(Ke,10)=="number"&&(t=parseInt(Ke,10))};var Si,_i="00000000000000000000000000000000",xi=St.__private__.getFileId=function(){return _i},Ei=St.__private__.setFileId=function(Ke){return _i=Ke!==void 0&&/^[a-fA-F0-9]{32}$/.test(Ke)?Ke.toUpperCase():_i.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Pe!==null&&(Sr=new I(Pe.userPermissions,Pe.userPassword,Pe.ownerPassword,_i)),_i};St.setFileId=function(Ke){return Ei(Ke),this},St.getFileId=function(){return xi()};var ri=St.__private__.convertDateToPDFDate=function(Ke){var Ai=Ke.getTimezoneOffset(),Ui=Ai<0?"+":"-",zi=Math.floor(Math.abs(Ai/60)),Qi=Math.abs(Ai%60),an=[Ui,ze(zi),"'",ze(Qi),"'"].join("");return["D:",Ke.getFullYear(),ze(Ke.getMonth()+1),ze(Ke.getDate()),ze(Ke.getHours()),ze(Ke.getMinutes()),ze(Ke.getSeconds()),an].join("")},vi=St.__private__.convertPDFDateToDate=function(Ke){var Ai=parseInt(Ke.substr(2,4),10),Ui=parseInt(Ke.substr(6,2),10)-1,zi=parseInt(Ke.substr(8,2),10),Qi=parseInt(Ke.substr(10,2),10),an=parseInt(Ke.substr(12,2),10),gn=parseInt(Ke.substr(14,2),10);return new Date(Ai,Ui,zi,Qi,an,gn,0)},Ci=St.__private__.setCreationDate=function(Ke){var Ai;if(Ke===void 0&&(Ke=new Date),Ke instanceof Date)Ai=ri(Ke);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Ke))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ai=Ke}return Si=Ai},$e=St.__private__.getCreationDate=function(Ke){var Ai=Si;return Ke==="jsDate"&&(Ai=vi(Si)),Ai};St.setCreationDate=function(Ke){return Ci(Ke),this},St.getCreationDate=function(Ke){return $e(Ke)};var Ge,ze=St.__private__.padd2=function(Ke){return("0"+parseInt(Ke)).slice(-2)},qe=St.__private__.padd2Hex=function(Ke){return("00"+(Ke=Ke.toString())).substr(Ke.length)},ei=0,ni=[],ci=[],di=0,Ti=[],Ni=[],si=!1,ai=ci,Ye=function(){ei=0,di=0,ci=[],ni=[],Ti=[],ur=Yn(),fr=Yn()};St.__private__.setCustomOutputDestination=function(Ke){si=!0,ai=Ke};var Ze=function(Ke){si||(ai=Ke)};St.__private__.resetCustomOutputDestination=function(){si=!1,ai=ci};var Xe=St.__private__.out=function(Ke){return Ke=Ke.toString(),di+=Ke.length+1,ai.push(Ke),ai},ui=St.__private__.write=function(Ke){return Xe(arguments.length===1?Ke.toString():Array.prototype.join.call(arguments," "))},pi=St.__private__.getArrayBuffer=function(Ke){for(var Ai=Ke.length,Ui=new ArrayBuffer(Ai),zi=new Uint8Array(Ui);Ai--;)zi[Ai]=Ke.charCodeAt(Ai);return Ui},gi=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];St.__private__.getStandardFonts=function(){return gi};var Li=e.fontSize||16;St.__private__.setFontSize=St.setFontSize=function(Ke){return Li=Be===De.ADVANCED?Ke/rn:Ke,this};var Ri,wi=St.__private__.getFontSize=St.getFontSize=function(){return Be===De.COMPAT?Li:Li*rn},Vi=e.R2L||!1;St.__private__.setR2L=St.setR2L=function(Ke){return Vi=Ke,this},St.__private__.getR2L=St.getR2L=function(){return Vi};var Mi,qi=St.__private__.setZoomMode=function(Ke){var Ai=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Ke))Ri=Ke;else if(isNaN(Ke)){if(Ai.indexOf(Ke)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Ke+'" is not recognized.');Ri=Ke}else Ri=parseInt(Ke,10)};St.__private__.getZoomMode=function(){return Ri};var Xi,Zi=St.__private__.setPageMode=function(Ke){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Ke)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Ke+'" is not recognized.');Mi=Ke};St.__private__.getPageMode=function(){return Mi};var ji=St.__private__.setLayoutMode=function(Ke){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Ke)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Ke+'" is not recognized.');Xi=Ke};St.__private__.getLayoutMode=function(){return Xi},St.__private__.setDisplayMode=St.setDisplayMode=function(Ke,Ai,Ui){return qi(Ke),ji(Ai),Zi(Ui),this};var Ki={title:"",subject:"",author:"",keywords:"",creator:""};St.__private__.getDocumentProperty=function(Ke){if(Object.keys(Ki).indexOf(Ke)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ki[Ke]},St.__private__.getDocumentProperties=function(){return Ki},St.__private__.setDocumentProperties=St.setProperties=St.setDocumentProperties=function(Ke){for(var Ai in Ki)Ki.hasOwnProperty(Ai)&&Ke[Ai]&&(Ki[Ai]=Ke[Ai]);return this},St.__private__.setDocumentProperty=function(Ke,Ai){if(Object.keys(Ki).indexOf(Ke)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ki[Ke]=Ai};var cn,rn,xn,Sn,Tn,Ln={},Hn={},Hi=[],Fi={},Wi={},on={},_n={},On=null,vn=0,mn=[],Pn=new C(St),Fn=e.hotfixes||[],Mn={},Vn={},Rn=[],Cn=function Ke(Ai,Ui,zi,Qi,an,gn){if(!(this instanceof Ke))return new Ke(Ai,Ui,zi,Qi,an,gn);isNaN(Ai)&&(Ai=1),isNaN(Ui)&&(Ui=0),isNaN(zi)&&(zi=0),isNaN(Qi)&&(Qi=1),isNaN(an)&&(an=0),isNaN(gn)&&(gn=0),this._matrix=[Ai,Ui,zi,Qi,an,gn]};Object.defineProperty(Cn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Ke){this._matrix[0]=Ke}}),Object.defineProperty(Cn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Ke){this._matrix[1]=Ke}}),Object.defineProperty(Cn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Ke){this._matrix[2]=Ke}}),Object.defineProperty(Cn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Ke){this._matrix[3]=Ke}}),Object.defineProperty(Cn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Ke){this._matrix[4]=Ke}}),Object.defineProperty(Cn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Ke){this._matrix[5]=Ke}}),Object.defineProperty(Cn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Ke){this._matrix[0]=Ke}}),Object.defineProperty(Cn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Ke){this._matrix[1]=Ke}}),Object.defineProperty(Cn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Ke){this._matrix[2]=Ke}}),Object.defineProperty(Cn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Ke){this._matrix[3]=Ke}}),Object.defineProperty(Cn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Ke){this._matrix[4]=Ke}}),Object.defineProperty(Cn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Ke){this._matrix[5]=Ke}}),Object.defineProperty(Cn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Cn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Cn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Cn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Cn.prototype.join=function(Ke){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Je).join(Ke)},Cn.prototype.multiply=function(Ke){var Ai=Ke.sx*this.sx+Ke.shy*this.shx,Ui=Ke.sx*this.shy+Ke.shy*this.sy,zi=Ke.shx*this.sx+Ke.sy*this.shx,Qi=Ke.shx*this.shy+Ke.sy*this.sy,an=Ke.tx*this.sx+Ke.ty*this.shx+this.tx,gn=Ke.tx*this.shy+Ke.ty*this.sy+this.ty;return new Cn(Ai,Ui,zi,Qi,an,gn)},Cn.prototype.decompose=function(){var Ke=this.sx,Ai=this.shy,Ui=this.shx,zi=this.sy,Qi=this.tx,an=this.ty,gn=Math.sqrt(Ke*Ke+Ai*Ai),En=(Ke/=gn)*Ui+(Ai/=gn)*zi;Ui-=Ke*En,zi-=Ai*En;var Nn=Math.sqrt(Ui*Ui+zi*zi);return En/=Nn,Ke*(zi/=Nn)<Ai*(Ui/=Nn)&&(Ke=-Ke,Ai=-Ai,En=-En,gn=-gn),{scale:new Cn(gn,0,0,Nn,0,0),translate:new Cn(1,0,0,1,Qi,an),rotate:new Cn(Ke,Ai,-Ai,Ke,0,0),skew:new Cn(1,0,En,1,0,0)}},Cn.prototype.toString=function(Ke){return this.join(" ")},Cn.prototype.inversed=function(){var Ke=this.sx,Ai=this.shy,Ui=this.shx,zi=this.sy,Qi=this.tx,an=this.ty,gn=1/(Ke*zi-Ai*Ui),En=zi*gn,Nn=-Ai*gn,Dn=-Ui*gn,Un=Ke*gn;return new Cn(En,Nn,Dn,Un,-En*Qi-Dn*an,-Nn*Qi-Un*an)},Cn.prototype.applyToPoint=function(Ke){var Ai=Ke.x*this.sx+Ke.y*this.shx+this.tx,Ui=Ke.x*this.shy+Ke.y*this.sy+this.ty;return new Xs(Ai,Ui)},Cn.prototype.applyToRectangle=function(Ke){var Ai=this.applyToPoint(Ke),Ui=this.applyToPoint(new Xs(Ke.x+Ke.w,Ke.y+Ke.h));return new Ea(Ai.x,Ai.y,Ui.x-Ai.x,Ui.y-Ai.y)},Cn.prototype.clone=function(){var Ke=this.sx,Ai=this.shy,Ui=this.shx,zi=this.sy,Qi=this.tx,an=this.ty;return new Cn(Ke,Ai,Ui,zi,Qi,an)},St.Matrix=Cn;var Bn=St.matrixMult=function(Ke,Ai){return Ai.multiply(Ke)},tr=new Cn(1,0,0,1,0,0);St.unitMatrix=St.identityMatrix=tr;var Xn=function(Ke,Ai){if(!Wi[Ke]){var Ui=(Ai instanceof B?"Sh":"P")+(Object.keys(Fi).length+1).toString(10);Ai.id=Ui,Wi[Ke]=Ui,Fi[Ui]=Ai,Pn.publish("addPattern",Ai)}};St.ShadingPattern=B,St.TilingPattern=M,St.addShadingPattern=function(Ke,Ai){return Qe("addShadingPattern()"),Xn(Ke,Ai),this},St.beginTilingPattern=function(Ke){Qe("beginTilingPattern()"),lo(Ke.boundingBox[0],Ke.boundingBox[1],Ke.boundingBox[2]-Ke.boundingBox[0],Ke.boundingBox[3]-Ke.boundingBox[1],Ke.matrix)},St.endTilingPattern=function(Ke,Ai){Qe("endTilingPattern()"),Ai.stream=Ni[Ge].join(`
`),Xn(Ke,Ai),Pn.publish("endTilingPattern",Ai),Rn.pop().restore()};var Wn=St.__private__.newObject=function(){var Ke=Yn();return rr(Ke,!0),Ke},Yn=St.__private__.newObjectDeferred=function(){return ei++,ni[ei]=function(){return di},ei},rr=function(Ke,Ai){return Ai=typeof Ai=="boolean"&&Ai,ni[Ke]=di,Ai&&Xe(Ke+" 0 obj"),Ke},nr=St.__private__.newAdditionalObject=function(){var Ke={objId:Yn(),content:""};return Ti.push(Ke),Ke},ur=Yn(),fr=Yn(),yr=St.__private__.decodeColorString=function(Ke){var Ai=Ke.split(" ");if(Ai.length!==2||Ai[1]!=="g"&&Ai[1]!=="G")Ai.length===5&&(Ai[4]==="k"||Ai[4]==="K")&&(Ai=[(1-Ai[0])*(1-Ai[3]),(1-Ai[1])*(1-Ai[3]),(1-Ai[2])*(1-Ai[3]),"r"]);else{var Ui=parseFloat(Ai[0]);Ai=[Ui,Ui,Ui,"r"]}for(var zi="#",Qi=0;Qi<3;Qi++)zi+=("0"+Math.floor(255*parseFloat(Ai[Qi])).toString(16)).slice(-2);return zi},Cr=St.__private__.encodeColorString=function(Ke){var Ai;typeof Ke=="string"&&(Ke={ch1:Ke});var Ui=Ke.ch1,zi=Ke.ch2,Qi=Ke.ch3,an=Ke.ch4,gn=Ke.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ui=="string"&&Ui.charAt(0)!=="#"){var En=new f(Ui);if(En.ok)Ui=En.toHex();else if(!/^\d*\.?\d*$/.test(Ui))throw new Error('Invalid color "'+Ui+'" passed to jsPDF.encodeColorString.')}if(typeof Ui=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ui)&&(Ui="#"+Ui[1]+Ui[1]+Ui[2]+Ui[2]+Ui[3]+Ui[3]),typeof Ui=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ui)){var Nn=parseInt(Ui.substr(1),16);Ui=Nn>>16&255,zi=Nn>>8&255,Qi=255&Nn}if(zi===void 0||an===void 0&&Ui===zi&&zi===Qi)if(typeof Ui=="string")Ai=Ui+" "+gn[0];else switch(Ke.precision){case 2:Ai=oi(Ui/255)+" "+gn[0];break;case 3:default:Ai=ii(Ui/255)+" "+gn[0]}else if(an===void 0||_typeof(an)==="object"){if(an&&!isNaN(an.a)&&an.a===0)return Ai=["1.","1.","1.",gn[1]].join(" ");if(typeof Ui=="string")Ai=[Ui,zi,Qi,gn[1]].join(" ");else switch(Ke.precision){case 2:Ai=[oi(Ui/255),oi(zi/255),oi(Qi/255),gn[1]].join(" ");break;default:case 3:Ai=[ii(Ui/255),ii(zi/255),ii(Qi/255),gn[1]].join(" ")}}else if(typeof Ui=="string")Ai=[Ui,zi,Qi,an,gn[2]].join(" ");else switch(Ke.precision){case 2:Ai=[oi(Ui),oi(zi),oi(Qi),oi(an),gn[2]].join(" ");break;case 3:default:Ai=[ii(Ui),ii(zi),ii(Qi),ii(an),gn[2]].join(" ")}return Ai},Jr=St.__private__.getFilters=function(){return Fe},Ir=St.__private__.putStream=function(Ke){var Ai=(Ke=Ke||{}).data||"",Ui=Ke.filters||Jr(),zi=Ke.alreadyAppliedFilters||[],Qi=Ke.addLength1||!1,an=Ai.length,gn=Ke.objectId,En=function(Er){return Er};if(Pe!==null&&gn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Pe!==null&&(En=Sr.encryptor(gn,0));var Nn={};Ui===!0&&(Ui=["FlateEncode"]);var Dn=Ke.additionalKeyValues||[],Un=(Nn=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Ai,Ui):{data:Ai,reverseChain:[]}).reverseChain+(Array.isArray(zi)?zi.join(" "):zi.toString());if(Nn.data.length!==0&&(Dn.push({key:"Length",value:Nn.data.length}),Qi===!0&&Dn.push({key:"Length1",value:an})),Un.length!=0)if(Un.split("/").length-1==1)Dn.push({key:"Filter",value:Un});else{Dn.push({key:"Filter",value:"["+Un+"]"});for(var zn=0;zn<Dn.length;zn+=1)if(Dn[zn].key==="DecodeParms"){for(var sr=[],ar=0;ar<Nn.reverseChain.split("/").length-1;ar+=1)sr.push("null");sr.push(Dn[zn].value),Dn[zn].value="["+sr.join(" ")+"]"}}Xe("<<");for(var dr=0;dr<Dn.length;dr++)Xe("/"+Dn[dr].key+" "+Dn[dr].value);Xe(">>"),Nn.data.length!==0&&(Xe("stream"),Xe(En(Nn.data)),Xe("endstream"))},Qr=St.__private__.putPage=function(Ke){var Ai=Ke.number,Ui=Ke.data,zi=Ke.objId,Qi=Ke.contentsObjId;rr(zi,!0),Xe("<</Type /Page"),Xe("/Parent "+Ke.rootDictionaryObjId+" 0 R"),Xe("/Resources "+Ke.resourceDictionaryObjId+" 0 R"),Xe("/MediaBox ["+parseFloat(Je(Ke.mediaBox.bottomLeftX))+" "+parseFloat(Je(Ke.mediaBox.bottomLeftY))+" "+Je(Ke.mediaBox.topRightX)+" "+Je(Ke.mediaBox.topRightY)+"]"),Ke.cropBox!==null&&Xe("/CropBox ["+Je(Ke.cropBox.bottomLeftX)+" "+Je(Ke.cropBox.bottomLeftY)+" "+Je(Ke.cropBox.topRightX)+" "+Je(Ke.cropBox.topRightY)+"]"),Ke.bleedBox!==null&&Xe("/BleedBox ["+Je(Ke.bleedBox.bottomLeftX)+" "+Je(Ke.bleedBox.bottomLeftY)+" "+Je(Ke.bleedBox.topRightX)+" "+Je(Ke.bleedBox.topRightY)+"]"),Ke.trimBox!==null&&Xe("/TrimBox ["+Je(Ke.trimBox.bottomLeftX)+" "+Je(Ke.trimBox.bottomLeftY)+" "+Je(Ke.trimBox.topRightX)+" "+Je(Ke.trimBox.topRightY)+"]"),Ke.artBox!==null&&Xe("/ArtBox ["+Je(Ke.artBox.bottomLeftX)+" "+Je(Ke.artBox.bottomLeftY)+" "+Je(Ke.artBox.topRightX)+" "+Je(Ke.artBox.topRightY)+"]"),typeof Ke.userUnit=="number"&&Ke.userUnit!==1&&Xe("/UserUnit "+Ke.userUnit),Pn.publish("putPage",{objId:zi,pageContext:mn[Ai],pageNumber:Ai,page:Ui}),Xe("/Contents "+Qi+" 0 R"),Xe(">>"),Xe("endobj");var an=Ui.join(`
`);return Be===De.ADVANCED&&(an+=`
Q`),rr(Qi,!0),Ir({data:an,filters:Jr(),objectId:Qi}),Xe("endobj"),zi},Os=St.__private__.putPages=function(){var Ke,Ai,Ui=[];for(Ke=1;Ke<=vn;Ke++)mn[Ke].objId=Yn(),mn[Ke].contentsObjId=Yn();for(Ke=1;Ke<=vn;Ke++)Ui.push(Qr({number:Ke,data:Ni[Ke],objId:mn[Ke].objId,contentsObjId:mn[Ke].contentsObjId,mediaBox:mn[Ke].mediaBox,cropBox:mn[Ke].cropBox,bleedBox:mn[Ke].bleedBox,trimBox:mn[Ke].trimBox,artBox:mn[Ke].artBox,userUnit:mn[Ke].userUnit,rootDictionaryObjId:ur,resourceDictionaryObjId:fr}));rr(ur,!0),Xe("<</Type /Pages");var zi="/Kids [";for(Ai=0;Ai<vn;Ai++)zi+=Ui[Ai]+" 0 R ";Xe(zi+"]"),Xe("/Count "+vn),Xe(">>"),Xe("endobj"),Pn.publish("postPutPages")},Fs=function(Ke){Pn.publish("putFont",{font:Ke,out:Xe,newObject:Wn,putStream:Ir}),Ke.isAlreadyPutted!==!0&&(Ke.objectNumber=Wn(),Xe("<<"),Xe("/Type /Font"),Xe("/BaseFont /"+F(Ke.postScriptName)),Xe("/Subtype /Type1"),typeof Ke.encoding=="string"&&Xe("/Encoding /"+Ke.encoding),Xe("/FirstChar 32"),Xe("/LastChar 255"),Xe(">>"),Xe("endobj"))},Bs=function(){for(var Ke in Ln)Ln.hasOwnProperty(Ke)&&(Ae===!1||Ae===!0&&Se.hasOwnProperty(Ke))&&Fs(Ln[Ke])},js=function(Ke){Ke.objectNumber=Wn();var Ai=[];Ai.push({key:"Type",value:"/XObject"}),Ai.push({key:"Subtype",value:"/Form"}),Ai.push({key:"BBox",value:"["+[Je(Ke.x),Je(Ke.y),Je(Ke.x+Ke.width),Je(Ke.y+Ke.height)].join(" ")+"]"}),Ai.push({key:"Matrix",value:"["+Ke.matrix.toString()+"]"});var Ui=Ke.pages[1].join(`
`);Ir({data:Ui,additionalKeyValues:Ai,objectId:Ke.objectNumber}),Xe("endobj")},Hs=function(){for(var Ke in Mn)Mn.hasOwnProperty(Ke)&&js(Mn[Ke])},qa=function(Ke,Ai){var Ui,zi=[],Qi=1/(Ai-1);for(Ui=0;Ui<1;Ui+=Qi)zi.push(Ui);if(zi.push(1),Ke[0].offset!=0){var an={offset:0,color:Ke[0].color};Ke.unshift(an)}if(Ke[Ke.length-1].offset!=1){var gn={offset:1,color:Ke[Ke.length-1].color};Ke.push(gn)}for(var En="",Nn=0,Dn=0;Dn<zi.length;Dn++){for(Ui=zi[Dn];Ui>Ke[Nn+1].offset;)Nn++;var Un=Ke[Nn].offset,zn=(Ui-Un)/(Ke[Nn+1].offset-Un),sr=Ke[Nn].color,ar=Ke[Nn+1].color;En+=qe(Math.round((1-zn)*sr[0]+zn*ar[0]).toString(16))+qe(Math.round((1-zn)*sr[1]+zn*ar[1]).toString(16))+qe(Math.round((1-zn)*sr[2]+zn*ar[2]).toString(16))}return En.trim()},Do=function(Ke,Ai){Ai||(Ai=21);var Ui=Wn(),zi=qa(Ke.colors,Ai),Qi=[];Qi.push({key:"FunctionType",value:"0"}),Qi.push({key:"Domain",value:"[0.0 1.0]"}),Qi.push({key:"Size",value:"["+Ai+"]"}),Qi.push({key:"BitsPerSample",value:"8"}),Qi.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qi.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ir({data:zi,additionalKeyValues:Qi,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ui}),Xe("endobj"),Ke.objectNumber=Wn(),Xe("<< /ShadingType "+Ke.type),Xe("/ColorSpace /DeviceRGB");var an="/Coords ["+Je(parseFloat(Ke.coords[0]))+" "+Je(parseFloat(Ke.coords[1]))+" ";Ke.type===2?an+=Je(parseFloat(Ke.coords[2]))+" "+Je(parseFloat(Ke.coords[3])):an+=Je(parseFloat(Ke.coords[2]))+" "+Je(parseFloat(Ke.coords[3]))+" "+Je(parseFloat(Ke.coords[4]))+" "+Je(parseFloat(Ke.coords[5])),Xe(an+="]"),Ke.matrix&&Xe("/Matrix ["+Ke.matrix.toString()+"]"),Xe("/Function "+Ui+" 0 R"),Xe("/Extend [true true]"),Xe(">>"),Xe("endobj")},Fo=function(Ke,Ai){var Ui=Yn(),zi=Wn();Ai.push({resourcesOid:Ui,objectOid:zi}),Ke.objectNumber=zi;var Qi=[];Qi.push({key:"Type",value:"/Pattern"}),Qi.push({key:"PatternType",value:"1"}),Qi.push({key:"PaintType",value:"1"}),Qi.push({key:"TilingType",value:"1"}),Qi.push({key:"BBox",value:"["+Ke.boundingBox.map(Je).join(" ")+"]"}),Qi.push({key:"XStep",value:Je(Ke.xStep)}),Qi.push({key:"YStep",value:Je(Ke.yStep)}),Qi.push({key:"Resources",value:Ui+" 0 R"}),Ke.matrix&&Qi.push({key:"Matrix",value:"["+Ke.matrix.toString()+"]"}),Ir({data:Ke.stream,additionalKeyValues:Qi,objectId:Ke.objectNumber}),Xe("endobj")},Us=function(Ke){var Ai;for(Ai in Fi)Fi.hasOwnProperty(Ai)&&(Fi[Ai]instanceof B?Do(Fi[Ai]):Fi[Ai]instanceof M&&Fo(Fi[Ai],Ke))},za=function(Ke){for(var Ai in Ke.objectNumber=Wn(),Xe("<<"),Ke)switch(Ai){case"opacity":Xe("/ca "+oi(Ke[Ai]));break;case"stroke-opacity":Xe("/CA "+oi(Ke[Ai]))}Xe(">>"),Xe("endobj")},Bo=function(){var Ke;for(Ke in on)on.hasOwnProperty(Ke)&&za(on[Ke])},fa=function(){for(var Ke in Xe("/XObject <<"),Mn)Mn.hasOwnProperty(Ke)&&Mn[Ke].objectNumber>=0&&Xe("/"+Ke+" "+Mn[Ke].objectNumber+" 0 R");Pn.publish("putXobjectDict"),Xe(">>")},jo=function(){Sr.oid=Wn(),Xe("<<"),Xe("/Filter /Standard"),Xe("/V "+Sr.v),Xe("/R "+Sr.r),Xe("/U <"+Sr.toHexString(Sr.U)+">"),Xe("/O <"+Sr.toHexString(Sr.O)+">"),Xe("/P "+Sr.P),Xe(">>"),Xe("endobj")},$a=function(){for(var Ke in Xe("/Font <<"),Ln)Ln.hasOwnProperty(Ke)&&(Ae===!1||Ae===!0&&Se.hasOwnProperty(Ke))&&Xe("/"+Ke+" "+Ln[Ke].objectNumber+" 0 R");Xe(">>")},Ho=function(){if(Object.keys(Fi).length>0){for(var Ke in Xe("/Shading <<"),Fi)Fi.hasOwnProperty(Ke)&&Fi[Ke]instanceof B&&Fi[Ke].objectNumber>=0&&Xe("/"+Ke+" "+Fi[Ke].objectNumber+" 0 R");Pn.publish("putShadingPatternDict"),Xe(">>")}},Vs=function(Ke){if(Object.keys(Fi).length>0){for(var Ai in Xe("/Pattern <<"),Fi)Fi.hasOwnProperty(Ai)&&Fi[Ai]instanceof St.TilingPattern&&Fi[Ai].objectNumber>=0&&Fi[Ai].objectNumber<Ke&&Xe("/"+Ai+" "+Fi[Ai].objectNumber+" 0 R");Pn.publish("putTilingPatternDict"),Xe(">>")}},Uo=function(){if(Object.keys(on).length>0){var Ke;for(Ke in Xe("/ExtGState <<"),on)on.hasOwnProperty(Ke)&&on[Ke].objectNumber>=0&&Xe("/"+Ke+" "+on[Ke].objectNumber+" 0 R");Pn.publish("putGStateDict"),Xe(">>")}},cr=function(Ke){rr(Ke.resourcesOid,!0),Xe("<<"),Xe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),$a(),Ho(),Vs(Ke.objectOid),Uo(),fa(),Xe(">>"),Xe("endobj")},Ya=function(){var Ke=[];Bs(),Bo(),Hs(),Us(Ke),Pn.publish("putResources"),Ke.forEach(cr),cr({resourcesOid:fr,objectOid:Number.MAX_SAFE_INTEGER}),Pn.publish("postPutResources")},Ga=function(){Pn.publish("putAdditionalObjects");for(var Ke=0;Ke<Ti.length;Ke++){var Ai=Ti[Ke];rr(Ai.objId,!0),Xe(Ai.content),Xe("endobj")}Pn.publish("postPutAdditionalObjects")},Xa=function(Ke){Hn[Ke.fontName]=Hn[Ke.fontName]||{},Hn[Ke.fontName][Ke.fontStyle]=Ke.id},da=function(Ke,Ai,Ui,zi,Qi){var an={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:Ke,fontName:Ai,fontStyle:Ui,encoding:zi,isStandardFont:Qi||!1,metadata:{}};return Pn.publish("addFont",{font:an,instance:this}),Ln[an.id]=an,Xa(an),an.id},Vo=function(Ke){for(var Ai=0,Ui=gi.length;Ai<Ui;Ai++){var zi=da.call(this,Ke[Ai][0],Ke[Ai][1],Ke[Ai][2],gi[Ai][3],!0);Ae===!1&&(Se[zi]=!0);var Qi=Ke[Ai][0].split("-");Xa({id:zi,fontName:Qi[0],fontStyle:Qi[1]||""})}Pn.publish("addFonts",{fonts:Ln,dictionary:Hn})},Vr=function(Ke){return Ke.foo=function(){try{return Ke.apply(this,arguments)}catch(zi){var Ai=zi.stack||"";~Ai.indexOf(" at ")&&(Ai=Ai.split(" at ")[1]);var Ui="Error in function "+Ai.split(`
`)[0].split("<")[0]+": "+zi.message;if(!n.console)throw new Error(Ui);n.console.error(Ui,zi),n.alert&&alert(Ui)}},Ke.foo.bar=Ke,Ke.foo},Ws=function(Ke,Ai){var Ui,zi,Qi,an,gn,En,Nn,Dn,Un;if(Qi=(Ai=Ai||{}).sourceEncoding||"Unicode",gn=Ai.outputEncoding,(Ai.autoencode||gn)&&Ln[cn].metadata&&Ln[cn].metadata[Qi]&&Ln[cn].metadata[Qi].encoding&&(an=Ln[cn].metadata[Qi].encoding,!gn&&Ln[cn].encoding&&(gn=Ln[cn].encoding),!gn&&an.codePages&&(gn=an.codePages[0]),typeof gn=="string"&&(gn=an[gn]),gn)){for(Nn=!1,En=[],Ui=0,zi=Ke.length;Ui<zi;Ui++)(Dn=gn[Ke.charCodeAt(Ui)])?En.push(String.fromCharCode(Dn)):En.push(Ke[Ui]),En[Ui].charCodeAt(0)>>8&&(Nn=!0);Ke=En.join("")}for(Ui=Ke.length;Nn===void 0&&Ui!==0;)Ke.charCodeAt(Ui-1)>>8&&(Nn=!0),Ui--;if(!Nn)return Ke;for(En=Ai.noBOM?[]:[254,255],Ui=0,zi=Ke.length;Ui<zi;Ui++){if((Un=(Dn=Ke.charCodeAt(Ui))>>8)>>8)throw new Error("Character at position "+Ui+" of string '"+Ke+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");En.push(Un),En.push(Dn-(Un<<8))}return String.fromCharCode.apply(void 0,En)},Tr=St.__private__.pdfEscape=St.pdfEscape=function(Ke,Ai){return Ws(Ke,Ai).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pa=St.__private__.beginPage=function(Ke){Ni[++vn]=[],mn[vn]={objId:0,contentsObjId:0,userUnit:Number(Oe),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Ke[0]),topRightY:Number(Ke[1])}},Ja(vn),Ze(Ni[Ge])},Ka=function(Ke,Ai){var Ui,zi,Qi;switch(r=Ai||r,typeof Ke=="string"&&(Ui=ke(Ke.toLowerCase()),Array.isArray(Ui)&&(zi=Ui[0],Qi=Ui[1])),Array.isArray(Ke)&&(zi=Ke[0]*rn,Qi=Ke[1]*rn),isNaN(zi)&&(zi=Me[0],Qi=Me[1]),(zi>14400||Qi>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),zi=Math.min(14400,zi),Qi=Math.min(14400,Qi)),Me=[zi,Qi],r.substr(0,1)){case"l":Qi>zi&&(Me=[Qi,zi]);break;case"p":zi>Qi&&(Me=[Qi,zi])}pa(Me),no(ba),Xe(Wr),Aa!==0&&Xe(Aa+" J"),Sa!==0&&Xe(Sa+" j"),Pn.publish("addPage",{pageNumber:vn})},Wo=function(Ke){Ke>0&&Ke<=vn&&(Ni.splice(Ke,1),mn.splice(Ke,1),vn--,Ge>vn&&(Ge=vn),this.setPage(Ge))},Ja=function(Ke){Ke>0&&Ke<=vn&&(Ge=Ke)},qo=St.__private__.getNumberOfPages=St.getNumberOfPages=function(){return Ni.length-1},Qa=function(Ke,Ai,Ui){var zi,Qi=void 0;return Ui=Ui||{},Ke=Ke!==void 0?Ke:Ln[cn].fontName,Ai=Ai!==void 0?Ai:Ln[cn].fontStyle,zi=Ke.toLowerCase(),Hn[zi]!==void 0&&Hn[zi][Ai]!==void 0?Qi=Hn[zi][Ai]:Hn[Ke]!==void 0&&Hn[Ke][Ai]!==void 0?Qi=Hn[Ke][Ai]:Ui.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Ke+"', '"+Ai+"'. Refer to getFontList() for available fonts."),Qi||Ui.noFallback||(Qi=Hn.times[Ai])==null&&(Qi=Hn.times.normal),Qi},zo=St.__private__.putInfo=function(){var Ke=Wn(),Ai=function(zi){return zi};for(var Ui in Pe!==null&&(Ai=Sr.encryptor(Ke,0)),Xe("<<"),Xe("/Producer ("+Tr(Ai("jsPDF "+E.version))+")"),Ki)Ki.hasOwnProperty(Ui)&&Ki[Ui]&&Xe("/"+Ui.substr(0,1).toUpperCase()+Ui.substr(1)+" ("+Tr(Ai(Ki[Ui]))+")");Xe("/CreationDate ("+Tr(Ai(Si))+")"),Xe(">>"),Xe("endobj")},ga=St.__private__.putCatalog=function(Ke){var Ai=(Ke=Ke||{}).rootDictionaryObjId||ur;switch(Wn(),Xe("<<"),Xe("/Type /Catalog"),Xe("/Pages "+Ai+" 0 R"),Ri||(Ri="fullwidth"),Ri){case"fullwidth":Xe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Xe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Xe("/OpenAction [3 0 R /Fit]");break;case"original":Xe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ui=""+Ri;Ui.substr(Ui.length-1)==="%"&&(Ri=parseInt(Ri)/100),typeof Ri=="number"&&Xe("/OpenAction [3 0 R /XYZ null null "+oi(Ri)+"]")}switch(Xi||(Xi="continuous"),Xi){case"continuous":Xe("/PageLayout /OneColumn");break;case"single":Xe("/PageLayout /SinglePage");break;case"two":case"twoleft":Xe("/PageLayout /TwoColumnLeft");break;case"tworight":Xe("/PageLayout /TwoColumnRight")}Mi&&Xe("/PageMode /"+Mi),Pn.publish("putCatalog"),Xe(">>"),Xe("endobj")},$o=St.__private__.putTrailer=function(){Xe("trailer"),Xe("<<"),Xe("/Size "+(ei+1)),Xe("/Root "+ei+" 0 R"),Xe("/Info "+(ei-1)+" 0 R"),Pe!==null&&Xe("/Encrypt "+Sr.oid+" 0 R"),Xe("/ID [ <"+_i+"> <"+_i+"> ]"),Xe(">>")},Yo=St.__private__.putHeader=function(){Xe("%PDF-"+Te),Xe("%\xBA\xDF\xAC\xE0")},Go=St.__private__.putXRef=function(){var Ke="0000000000";Xe("xref"),Xe("0 "+(ei+1)),Xe("0000000000 65535 f ");for(var Ai=1;Ai<=ei;Ai++)typeof ni[Ai]=="function"?Xe((Ke+ni[Ai]()).slice(-10)+" 00000 n "):ni[Ai]!==void 0?Xe((Ke+ni[Ai]).slice(-10)+" 00000 n "):Xe("0000000000 00000 n ")},ns=St.__private__.buildDocument=function(){Ye(),Ze(ci),Pn.publish("buildDocument"),Yo(),Os(),Ga(),Ya(),Pe!==null&&jo(),zo(),ga();var Ke=di;return Go(),$o(),Xe("startxref"),Xe(""+Ke),Xe("%%EOF"),Ze(Ni[Ge]),ci.join(`
`)},qs=St.__private__.getBlob=function(Ke){return new Blob([pi(Ke)],{type:"application/pdf"})},zs=St.output=St.__private__.output=Vr(function(Ke,Ai){switch(typeof(Ai=Ai||{})=="string"?Ai={filename:Ai}:Ai.filename=Ai.filename||"generated.pdf",Ke){case void 0:return ns();case"save":St.save(Ai.filename);break;case"arraybuffer":return pi(ns());case"blob":return qs(ns());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(qs(ns()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ui="",zi=ns();try{Ui=h(zi)}catch{Ui=h(unescape(encodeURIComponent(zi)))}return"data:application/pdf;filename="+Ai.filename+";base64,"+Ui;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Qi="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",an=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ai.pdfObjectUrl&&(Qi=Ai.pdfObjectUrl,an="");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Qi+'"'+an+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ai)+");<\/script></body></html>",En=n.open();return En!==null&&En.document.write(gn),En}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ai.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ai.filename+'" width="500px" height="400px" /></body></html>',Dn=n.open();if(Dn!==null){Dn.document.write(Nn);var Un=this;Dn.document.documentElement.querySelector("#pdfViewer").onload=function(){Dn.document.title=Ai.filename,Dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Un.output("bloburl"))}}return Dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ai)+'"></iframe></body></html>',sr=n.open();if(sr!==null&&(sr.document.write(zn),sr.document.title=Ai.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Ai);default:return null}}),Za=function(Ke){return Array.isArray(Fn)===!0&&Fn.indexOf(Ke)>-1};switch(Ce){case"pt":rn=1;break;case"mm":rn=72/25.4;break;case"cm":rn=72/2.54;break;case"in":rn=72;break;case"px":rn=Za("px_scaling")==1?.75:96/72;break;case"pc":case"em":rn=12;break;case"ex":rn=6;break;default:if(typeof Ce!="number")throw new Error("Invalid unit: "+Ce);rn=Ce}var Sr=null;Ci(),Ei();var Xo=function(Ke){return Pe!==null?Sr.encryptor(Ke,0):function(Ai){return Ai}},to=St.__private__.getPageInfo=St.getPageInfo=function(Ke){if(isNaN(Ke)||Ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mn[Ke].objId,pageNumber:Ke,pageContext:mn[Ke]}},In=St.__private__.getPageInfoByObjId=function(Ke){if(isNaN(Ke)||Ke%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ai in mn)if(mn[Ai].objId===Ke)break;return to(Ai)},Ko=St.__private__.getCurrentPageInfo=St.getCurrentPageInfo=function(){return{objId:mn[Ge].objId,pageNumber:Ge,pageContext:mn[Ge]}};St.addPage=function(){return Ka.apply(this,arguments),this},St.setPage=function(){return Ja.apply(this,arguments),Ze.call(this,Ni[Ge]),this},St.insertPage=function(Ke){return this.addPage(),this.movePage(Ge,Ke),this},St.movePage=function(Ke,Ai){var Ui,zi;if(Ke>Ai){Ui=Ni[Ke],zi=mn[Ke];for(var Qi=Ke;Qi>Ai;Qi--)Ni[Qi]=Ni[Qi-1],mn[Qi]=mn[Qi-1];Ni[Ai]=Ui,mn[Ai]=zi,this.setPage(Ai)}else if(Ke<Ai){Ui=Ni[Ke],zi=mn[Ke];for(var an=Ke;an<Ai;an++)Ni[an]=Ni[an+1],mn[an]=mn[an+1];Ni[Ai]=Ui,mn[Ai]=zi,this.setPage(Ai)}return this},St.deletePage=function(){return Wo.apply(this,arguments),this},St.__private__.text=St.text=function(Ke,Ai,Ui,zi,Qi){var an,gn,En,Nn,Dn,Un,zn,sr,ar,dr=(zi=zi||{}).scope||this;if(typeof Ke=="number"&&typeof Ai=="number"&&(typeof Ui=="string"||Array.isArray(Ui))){var Er=Ui;Ui=Ai,Ai=Ke,Ke=Er}if(arguments[3]instanceof Cn?(Qe("The transform parameter of text() with a Matrix value"),ar=Qi):(En=arguments[4],Nn=arguments[5],_typeof(zn=arguments[3])==="object"&&zn!==null||(typeof En=="string"&&(Nn=En,En=null),typeof zn=="string"&&(Nn=zn,zn=null),typeof zn=="number"&&(En=zn,zn=null),zi={flags:zn,angle:En,align:Nn})),isNaN(Ai)||isNaN(Ui)||Ke==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Ke.length===0)return dr;var vr="",qr=!1,Nr=typeof zi.lineHeightFactor=="number"?zi.lineHeightFactor:Ns,ss=dr.internal.scaleFactor;function co(er){return er=er.split("	").join(Array(zi.TabLen||9).join(" ")),Tr(er,zn)}function xa(er){for(var ir,hr=er.concat(),mr=[],cs=hr.length;cs--;)typeof(ir=hr.shift())=="string"?mr.push(ir):Array.isArray(er)&&(ir.length===1||ir[1]===void 0&&ir[2]===void 0)?mr.push(ir[0]):mr.push([ir[0],ir[1],ir[2]]);return mr}function Pa(er,ir){var hr;if(typeof er=="string")hr=ir(er)[0];else if(Array.isArray(er)){for(var mr,cs,As=er.concat(),sa=[],uo=As.length;uo--;)typeof(mr=As.shift())=="string"?sa.push(ir(mr)[0]):Array.isArray(mr)&&typeof mr[0]=="string"&&(cs=ir(mr[0],mr[1],mr[2]),sa.push([cs[0],cs[1],cs[2]]));hr=sa}return hr}var Js=!1,Oa=!0;if(typeof Ke=="string")Js=!0;else if(Array.isArray(Ke)){var La=Ke.concat();gn=[];for(var Qs,xr=La.length;xr--;)(typeof(Qs=La.shift())!="string"||Array.isArray(Qs)&&typeof Qs[0]!="string")&&(Oa=!1);Js=Oa}if(Js===!1)throw new Error('Type of text must be string or Array. "'+Ke+'" is not recognized.');typeof Ke=="string"&&(Ke=Ke.match(/[\r?\n]/)?Ke.split(/\r\n|\r|\n/g):[Ke]);var Zs=Li/dr.internal.scaleFactor,ta=Zs*(Nr-1);switch(zi.baseline){case"bottom":Ui-=ta;break;case"top":Ui+=Zs-ta;break;case"hanging":Ui+=Zs-2*ta;break;case"middle":Ui+=Zs/2-ta}if((Un=zi.maxWidth||0)>0&&(typeof Ke=="string"?Ke=dr.splitTextToSize(Ke,Un):Object.prototype.toString.call(Ke)==="[object Array]"&&(Ke=Ke.reduce(function(er,ir){return er.concat(dr.splitTextToSize(ir,Un))},[]))),an={text:Ke,x:Ai,y:Ui,options:zi,mutex:{pdfEscape:Tr,activeFontKey:cn,fonts:Ln,activeFontSize:Li}},Pn.publish("preProcessText",an),Ke=an.text,En=(zi=an.options).angle,!(ar instanceof Cn)&&En&&typeof En=="number"){En*=Math.PI/180,zi.rotationDirection===0&&(En=-En),Be===De.ADVANCED&&(En=-En);var ea=Math.cos(En),Na=Math.sin(En);ar=new Cn(ea,Na,-Na,ea,0,0)}else En&&En instanceof Cn&&(ar=En);Be!==De.ADVANCED||ar||(ar=tr),(Dn=zi.charSpace||Gs)!==void 0&&(vr+=Je(li(Dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=zi.horizontalScale)!==void 0&&(vr+=Je(100*sr)+` Tz
`),zi.lang;var Pr=-1,al=zi.renderingMode!==void 0?zi.renderingMode:zi.stroke,ka=dr.internal.getCurrentPageInfo().pageContext;switch(al){case 0:case!1:case"fill":Pr=0;break;case 1:case!0:case"stroke":Pr=1;break;case 2:case"fillThenStroke":Pr=2;break;case 3:case"invisible":Pr=3;break;case 4:case"fillAndAddForClipping":Pr=4;break;case 5:case"strokeAndAddPathForClipping":Pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pr=6;break;case 7:case"addToPathForClipping":Pr=7}var ho=ka.usedRenderingMode!==void 0?ka.usedRenderingMode:-1;Pr!==-1?vr+=Pr+` Tr
`:ho!==-1&&(vr+=`0 Tr
`),Pr!==-1&&(ka.usedRenderingMode=Pr),Nn=zi.align||"left";var zr,Ra=Li*Nr,ol=dr.internal.pageSize.getWidth(),ll=Ln[cn];Dn=zi.charSpace||Gs,Un=zi.maxWidth||0,zn=Object.assign({autoencode:!0,noBOM:!0},zi.flags);var vs=[];if(Object.prototype.toString.call(Ke)==="[object Array]"){var Dr;gn=xa(Ke),Nn!=="left"&&(zr=gn.map(function(er){return dr.getStringUnitWidth(er,{font:ll,charSpace:Dn,fontSize:Li,doKerning:!1})*Li/ss}));var $r,_s=0;if(Nn==="right"){Ai-=zr[0],Ke=[],xr=gn.length;for(var ts=0;ts<xr;ts++)ts===0?($r=rs(Ai),Dr=ps(Ui)):($r=li(_s-zr[ts]),Dr=-Ra),Ke.push([gn[ts],$r,Dr]),_s=zr[ts]}else if(Nn==="center"){Ai-=zr[0]/2,Ke=[],xr=gn.length;for(var as=0;as<xr;as++)as===0?($r=rs(Ai),Dr=ps(Ui)):($r=li((_s-zr[as])/2),Dr=-Ra),Ke.push([gn[as],$r,Dr]),_s=zr[as]}else if(Nn==="left"){Ke=[],xr=gn.length;for(var ia=0;ia<xr;ia++)Ke.push(gn[ia])}else{if(Nn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');Ke=[],xr=gn.length,Un=Un!==0?Un:ol;for(var Yr=0;Yr<xr;Yr++)Dr=Yr===0?ps(Ui):-Ra,$r=Yr===0?rs(Ai):0,Yr<xr-1?vs.push(Je(li((Un-zr[Yr])/(gn[Yr].split(" ").length-1)))):vs.push(0),Ke.push([gn[Yr],$r,Dr])}}var na=typeof zi.R2L=="boolean"?zi.R2L:Vi;na===!0&&(Ke=Pa(Ke,function(er,ir,hr){return[er.split("").reverse().join(""),ir,hr]})),an={text:Ke,x:Ai,y:Ui,options:zi,mutex:{pdfEscape:Tr,activeFontKey:cn,fonts:Ln,activeFontSize:Li}},Pn.publish("postProcessText",an),Ke=an.text,qr=an.mutex.isHex||!1;var Ma=Ln[cn].encoding;Ma!=="WinAnsiEncoding"&&Ma!=="StandardEncoding"||(Ke=Pa(Ke,function(er,ir,hr){return[co(er),ir,hr]})),gn=xa(Ke),Ke=[];for(var bs,Gr,os,Ms=0,ra=1,Is=Array.isArray(gn[0])?ra:Ms,ys="",Ia=function(er,ir,hr){var mr="";return hr instanceof Cn?(hr=typeof zi.angle=="number"?Bn(hr,new Cn(1,0,0,1,er,ir)):Bn(new Cn(1,0,0,1,er,ir),hr),Be===De.ADVANCED&&(hr=Bn(new Cn(1,0,0,-1,0,0),hr)),mr=hr.join(" ")+` Tm
`):mr=Je(er)+" "+Je(ir)+` Td
`,mr},Fr=0;Fr<gn.length;Fr++){switch(ys="",Is){case ra:os=(qr?"<":"(")+gn[Fr][0]+(qr?">":")"),bs=parseFloat(gn[Fr][1]),Gr=parseFloat(gn[Fr][2]);break;case Ms:os=(qr?"<":"(")+gn[Fr]+(qr?">":")"),bs=rs(Ai),Gr=ps(Ui)}vs!==void 0&&vs[Fr]!==void 0&&(ys=vs[Fr]+` Tw
`),Fr===0?Ke.push(ys+Ia(bs,Gr,ar)+os):Is===Ms?Ke.push(ys+os):Is===ra&&Ke.push(ys+Ia(bs,Gr,ar)+os)}Ke=Is===Ms?Ke.join(` Tj
T* `):Ke.join(` Tj
`),Ke+=` Tj
`;var ls=`BT
/`;return ls+=cn+" "+Li+` Tf
`,ls+=Je(Li*Nr)+` TL
`,ls+=ks+`
`,ls+=vr,ls+=Ke,Xe(ls+="ET"),Se[cn]=!0,dr};var Jo=St.__private__.clip=St.clip=function(Ke){return Xe(Ke==="evenodd"?"W*":"W"),this};St.clipEvenOdd=function(){return Jo("evenodd")},St.__private__.discardPath=St.discardPath=function(){return Xe("n"),this};var Zr=St.__private__.isValidStyle=function(Ke){var Ai=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Ke)!==-1&&(Ai=!0),Ai};St.__private__.setDefaultPathOperation=St.setDefaultPathOperation=function(Ke){return Zr(Ke)&&(xe=Ke),this};var eo=St.__private__.getStyle=St.getStyle=function(Ke){var Ai=xe;switch(Ke){case"D":case"S":Ai="S";break;case"F":Ai="f";break;case"FD":case"DF":Ai="B";break;case"f":case"f*":case"B":case"B*":Ai=Ke}return Ai},io=St.close=function(){return Xe("h"),this};St.stroke=function(){return Xe("S"),this},St.fill=function(Ke){return $s("f",Ke),this},St.fillEvenOdd=function(Ke){return $s("f*",Ke),this},St.fillStroke=function(Ke){return $s("B",Ke),this},St.fillStrokeEvenOdd=function(Ke){return $s("B*",Ke),this};var $s=function(Ke,Ai){_typeof(Ai)==="object"?Zo(Ai,Ke):Xe(Ke)},ma=function(Ke){Ke===null||Be===De.ADVANCED&&Ke===void 0||(Ke=eo(Ke),Xe(Ke))};function Qo(Ke,Ai,Ui,zi,Qi){var an=new M(Ai||this.boundingBox,Ui||this.xStep,zi||this.yStep,this.gState,Qi||this.matrix);an.stream=this.stream;var gn=Ke+"$$"+this.cloneIndex+++"$$";return Xn(gn,an),an}var Zo=function(Ke,Ai){var Ui=Wi[Ke.key],zi=Fi[Ui];if(zi instanceof B)Xe("q"),Xe(tl(Ai)),zi.gState&&St.setGState(zi.gState),Xe(Ke.matrix.toString()+" cm"),Xe("/"+Ui+" sh"),Xe("Q");else if(zi instanceof M){var Qi=new Cn(1,0,0,-1,0,ms());Ke.matrix&&(Qi=Qi.multiply(Ke.matrix||tr),Ui=Qo.call(zi,Ke.key,Ke.boundingBox,Ke.xStep,Ke.yStep,Qi).id),Xe("q"),Xe("/Pattern cs"),Xe("/"+Ui+" scn"),zi.gState&&St.setGState(zi.gState),Xe(Ai),Xe("Q")}},tl=function(Ke){switch(Ke){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},va=St.moveTo=function(Ke,Ai){return Xe(Je(li(Ke))+" "+Je(mi(Ai))+" m"),this},Ls=St.lineTo=function(Ke,Ai){return Xe(Je(li(Ke))+" "+Je(mi(Ai))+" l"),this},ds=St.curveTo=function(Ke,Ai,Ui,zi,Qi,an){return Xe([Je(li(Ke)),Je(mi(Ai)),Je(li(Ui)),Je(mi(zi)),Je(li(Qi)),Je(mi(an)),"c"].join(" ")),this};St.__private__.line=St.line=function(Ke,Ai,Ui,zi,Qi){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||isNaN(zi)||!Zr(Qi))throw new Error("Invalid arguments passed to jsPDF.line");return Be===De.COMPAT?this.lines([[Ui-Ke,zi-Ai]],Ke,Ai,[1,1],Qi||"S"):this.lines([[Ui-Ke,zi-Ai]],Ke,Ai,[1,1]).stroke()},St.__private__.lines=St.lines=function(Ke,Ai,Ui,zi,Qi,an){var gn,En,Nn,Dn,Un,zn,sr,ar,dr,Er,vr,qr;if(typeof Ke=="number"&&(qr=Ui,Ui=Ai,Ai=Ke,Ke=qr),zi=zi||[1,1],an=an||!1,isNaN(Ai)||isNaN(Ui)||!Array.isArray(Ke)||!Array.isArray(zi)||!Zr(Qi)||typeof an!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(va(Ai,Ui),gn=zi[0],En=zi[1],Dn=Ke.length,Er=Ai,vr=Ui,Nn=0;Nn<Dn;Nn++)(Un=Ke[Nn]).length===2?(Er=Un[0]*gn+Er,vr=Un[1]*En+vr,Ls(Er,vr)):(zn=Un[0]*gn+Er,sr=Un[1]*En+vr,ar=Un[2]*gn+Er,dr=Un[3]*En+vr,Er=Un[4]*gn+Er,vr=Un[5]*En+vr,ds(zn,sr,ar,dr,Er,vr));return an&&io(),ma(Qi),this},St.path=function(Ke){for(var Ai=0;Ai<Ke.length;Ai++){var Ui=Ke[Ai],zi=Ui.c;switch(Ui.op){case"m":va(zi[0],zi[1]);break;case"l":Ls(zi[0],zi[1]);break;case"c":ds.apply(this,zi);break;case"h":io()}}return this},St.__private__.rect=St.rect=function(Ke,Ai,Ui,zi,Qi){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||isNaN(zi)||!Zr(Qi))throw new Error("Invalid arguments passed to jsPDF.rect");return Be===De.COMPAT&&(zi=-zi),Xe([Je(li(Ke)),Je(mi(Ai)),Je(li(Ui)),Je(li(zi)),"re"].join(" ")),ma(Qi),this},St.__private__.triangle=St.triangle=function(Ke,Ai,Ui,zi,Qi,an,gn){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||isNaN(zi)||isNaN(Qi)||isNaN(an)||!Zr(gn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ui-Ke,zi-Ai],[Qi-Ui,an-zi],[Ke-Qi,Ai-an]],Ke,Ai,[1,1],gn,!0),this},St.__private__.roundedRect=St.roundedRect=function(Ke,Ai,Ui,zi,Qi,an,gn){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||isNaN(zi)||isNaN(Qi)||isNaN(an)||!Zr(gn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var En=4/3*(Math.SQRT2-1);return Qi=Math.min(Qi,.5*Ui),an=Math.min(an,.5*zi),this.lines([[Ui-2*Qi,0],[Qi*En,0,Qi,an-an*En,Qi,an],[0,zi-2*an],[0,an*En,-Qi*En,an,-Qi,an],[2*Qi-Ui,0],[-Qi*En,0,-Qi,-an*En,-Qi,-an],[0,2*an-zi],[0,-an*En,Qi*En,-an,Qi,-an]],Ke+Qi,Ai,[1,1],gn,!0),this},St.__private__.ellipse=St.ellipse=function(Ke,Ai,Ui,zi,Qi){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||isNaN(zi)||!Zr(Qi))throw new Error("Invalid arguments passed to jsPDF.ellipse");var an=4/3*(Math.SQRT2-1)*Ui,gn=4/3*(Math.SQRT2-1)*zi;return va(Ke+Ui,Ai),ds(Ke+Ui,Ai-gn,Ke+an,Ai-zi,Ke,Ai-zi),ds(Ke-an,Ai-zi,Ke-Ui,Ai-gn,Ke-Ui,Ai),ds(Ke-Ui,Ai+gn,Ke-an,Ai+zi,Ke,Ai+zi),ds(Ke+an,Ai+zi,Ke+Ui,Ai+gn,Ke+Ui,Ai),ma(Qi),this},St.__private__.circle=St.circle=function(Ke,Ai,Ui,zi){if(isNaN(Ke)||isNaN(Ai)||isNaN(Ui)||!Zr(zi))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Ke,Ai,Ui,Ui,zi)},St.setFont=function(Ke,Ai,Ui){return Ui&&(Ai=We(Ai,Ui)),cn=Qa(Ke,Ai,{disableWarning:!1}),this};var el=St.__private__.getFont=St.getFont=function(){return Ln[Qa.apply(St,arguments)]};St.__private__.getFontList=St.getFontList=function(){var Ke,Ai,Ui={};for(Ke in Hn)if(Hn.hasOwnProperty(Ke))for(Ai in Ui[Ke]=[],Hn[Ke])Hn[Ke].hasOwnProperty(Ai)&&Ui[Ke].push(Ai);return Ui},St.addFont=function(Ke,Ai,Ui,zi,Qi){var an=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&an.indexOf(arguments[3])!==-1?Qi=arguments[3]:arguments[3]&&an.indexOf(arguments[3])==-1&&(Ui=We(Ui,zi)),Qi=Qi||"Identity-H",da.call(this,Ke,Ai,Ui,Qi)};var Ns,ba=e.lineWidth||.200025,Ys=St.__private__.getLineWidth=St.getLineWidth=function(){return ba},no=St.__private__.setLineWidth=St.setLineWidth=function(Ke){return ba=Ke,Xe(Je(li(Ke))+" w"),this};St.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Ke,Ai){if(Ke=Ke||[],Ai=Ai||0,isNaN(Ai)||!Array.isArray(Ke))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Ke=Ke.map(function(Ui){return Je(li(Ui))}).join(" "),Ai=Je(li(Ai)),Xe("["+Ke+"] "+Ai+" d"),this};var ro=St.__private__.getLineHeight=St.getLineHeight=function(){return Li*Ns};St.__private__.getLineHeight=St.getLineHeight=function(){return Li*Ns};var so=St.__private__.setLineHeightFactor=St.setLineHeightFactor=function(Ke){return typeof(Ke=Ke||1.15)=="number"&&(Ns=Ke),this},ao=St.__private__.getLineHeightFactor=St.getLineHeightFactor=function(){return Ns};so(e.lineHeight);var rs=St.__private__.getHorizontalCoordinate=function(Ke){return li(Ke)},ps=St.__private__.getVerticalCoordinate=function(Ke){return Be===De.ADVANCED?Ke:mn[Ge].mediaBox.topRightY-mn[Ge].mediaBox.bottomLeftY-li(Ke)},il=St.__private__.getHorizontalCoordinateString=St.getHorizontalCoordinateString=function(Ke){return Je(rs(Ke))},gs=St.__private__.getVerticalCoordinateString=St.getVerticalCoordinateString=function(Ke){return Je(ps(Ke))},Wr=e.strokeColor||"0 G";St.__private__.getStrokeColor=St.getDrawColor=function(){return yr(Wr)},St.__private__.setStrokeColor=St.setDrawColor=function(Ke,Ai,Ui,zi){return Wr=Cr({ch1:Ke,ch2:Ai,ch3:Ui,ch4:zi,pdfColorType:"draw",precision:2}),Xe(Wr),this};var ya=e.fillColor||"0 g";St.__private__.getFillColor=St.getFillColor=function(){return yr(ya)},St.__private__.setFillColor=St.setFillColor=function(Ke,Ai,Ui,zi){return ya=Cr({ch1:Ke,ch2:Ai,ch3:Ui,ch4:zi,pdfColorType:"fill",precision:2}),Xe(ya),this};var ks=e.textColor||"0 g",nl=St.__private__.getTextColor=St.getTextColor=function(){return yr(ks)};St.__private__.setTextColor=St.setTextColor=function(Ke,Ai,Ui,zi){return ks=Cr({ch1:Ke,ch2:Ai,ch3:Ui,ch4:zi,pdfColorType:"text",precision:3}),this};var Gs=e.charSpace,rl=St.__private__.getCharSpace=St.getCharSpace=function(){return parseFloat(Gs||0)};St.__private__.setCharSpace=St.setCharSpace=function(Ke){if(isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Gs=Ke,this};var Aa=0;St.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},St.__private__.setLineCap=St.setLineCap=function(Ke){var Ai=St.CapJoinStyles[Ke];if(Ai===void 0)throw new Error("Line cap style of '"+Ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=Ai,Xe(Ai+" J"),this};var Sa=0;St.__private__.setLineJoin=St.setLineJoin=function(Ke){var Ai=St.CapJoinStyles[Ke];if(Ai===void 0)throw new Error("Line join style of '"+Ke+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=Ai,Xe(Ai+" j"),this},St.__private__.setLineMiterLimit=St.__private__.setMiterLimit=St.setLineMiterLimit=St.setMiterLimit=function(Ke){if(Ke=Ke||0,isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Xe(Je(li(Ke))+" M"),this},St.GState=j,St.setGState=function(Ke){(Ke=typeof Ke=="string"?on[_n[Ke]]:oo(null,Ke)).equals(On)||(Xe("/"+Ke.id+" gs"),On=Ke)};var oo=function(Ke,Ai){if(!Ke||!_n[Ke]){var Ui=!1;for(var zi in on)if(on.hasOwnProperty(zi)&&on[zi].equals(Ai)){Ui=!0;break}if(Ui)Ai=on[zi];else{var Qi="GS"+(Object.keys(on).length+1).toString(10);on[Qi]=Ai,Ai.id=Qi}return Ke&&(_n[Ke]=Ai.id),Pn.publish("addGState",Ai),Ai}};St.addGState=function(Ke,Ai){return oo(Ke,Ai),this},St.saveGraphicsState=function(){return Xe("q"),Hi.push({key:cn,size:Li,color:ks}),this},St.restoreGraphicsState=function(){Xe("Q");var Ke=Hi.pop();return cn=Ke.key,Li=Ke.size,ks=Ke.color,On=null,this},St.setCurrentTransformationMatrix=function(Ke){return Xe(Ke.toString()+" cm"),this},St.comment=function(Ke){return Xe("#"+Ke),this};var Xs=function(Ke,Ai){var Ui=Ke||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ui},set:function(an){isNaN(an)||(Ui=parseFloat(an))}});var zi=Ai||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return zi},set:function(an){isNaN(an)||(zi=parseFloat(an))}});var Qi="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Qi},set:function(an){Qi=an.toString()}}),this},Ea=function(Ke,Ai,Ui,zi){Xs.call(this,Ke,Ai),this.type="rect";var Qi=Ui||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Qi},set:function(gn){isNaN(gn)||(Qi=parseFloat(gn))}});var an=zi||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return an},set:function(gn){isNaN(gn)||(an=parseFloat(gn))}}),this},wa=function(){this.page=vn,this.currentPage=Ge,this.pages=Ni.slice(0),this.pagesContext=mn.slice(0),this.x=xn,this.y=Sn,this.matrix=Tn,this.width=Rs(Ge),this.height=ms(Ge),this.outputDestination=ai,this.id="",this.objectNumber=-1};wa.prototype.restore=function(){vn=this.page,Ge=this.currentPage,mn=this.pagesContext,Ni=this.pages,xn=this.x,Sn=this.y,Tn=this.matrix,Ca(Ge,this.width),Ta(Ge,this.height),ai=this.outputDestination};var lo=function(Ke,Ai,Ui,zi,Qi){Rn.push(new wa),vn=Ge=0,Ni=[],xn=Ke,Sn=Ai,Tn=Qi,pa([Ui,zi])},sl=function(Ke){if(Vn[Ke])Rn.pop().restore();else{var Ai=new wa,Ui="Xo"+(Object.keys(Mn).length+1).toString(10);Ai.id=Ui,Vn[Ke]=Ui,Mn[Ui]=Ai,Pn.publish("addFormObject",Ai),Rn.pop().restore()}};for(var Ks in St.beginFormObject=function(Ke,Ai,Ui,zi,Qi){return lo(Ke,Ai,Ui,zi,Qi),this},St.endFormObject=function(Ke){return sl(Ke),this},St.doFormObject=function(Ke,Ai){var Ui=Mn[Vn[Ke]];return Xe("q"),Xe(Ai.toString()+" cm"),Xe("/"+Ui.id+" Do"),Xe("Q"),this},St.getFormObject=function(Ke){var Ai=Mn[Vn[Ke]];return{x:Ai.x,y:Ai.y,width:Ai.width,height:Ai.height,matrix:Ai.matrix}},St.save=function(Ke,Ai){return Ke=Ke||"generated.pdf",(Ai=Ai||{}).returnPromise=Ai.returnPromise||!1,Ai.returnPromise===!1?(l(qs(ns()),Ke),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Ui,zi){try{var Qi=l(qs(ns()),Ke);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Ui(Qi)}catch(an){zi(an.message)}})},E.API)E.API.hasOwnProperty(Ks)&&(Ks==="events"&&E.API.events.length?function(Ke,Ai){var Ui,zi,Qi;for(Qi=Ai.length-1;Qi!==-1;Qi--)Ui=Ai[Qi][0],zi=Ai[Qi][1],Ke.subscribe.apply(Ke,[Ui].concat(typeof zi=="function"?[zi]:zi))}(Pn,E.API.events):St[Ks]=E.API[Ks]);var Rs=St.getPageWidth=function(Ke){return(mn[Ke=Ke||Ge].mediaBox.topRightX-mn[Ke].mediaBox.bottomLeftX)/rn},Ca=St.setPageWidth=function(Ke,Ai){mn[Ke].mediaBox.topRightX=Ai*rn+mn[Ke].mediaBox.bottomLeftX},ms=St.getPageHeight=function(Ke){return(mn[Ke=Ke||Ge].mediaBox.topRightY-mn[Ke].mediaBox.bottomLeftY)/rn},Ta=St.setPageHeight=function(Ke,Ai){mn[Ke].mediaBox.topRightY=Ai*rn+mn[Ke].mediaBox.bottomLeftY};return St.internal={pdfEscape:Tr,getStyle:eo,getFont:el,getFontSize:wi,getCharSpace:rl,getTextColor:nl,getLineHeight:ro,getLineHeightFactor:ao,getLineWidth:Ys,write:ui,getHorizontalCoordinate:rs,getVerticalCoordinate:ps,getCoordinateString:il,getVerticalCoordinateString:gs,collections:{},newObject:Wn,newAdditionalObject:nr,newObjectDeferred:Yn,newObjectDeferredBegin:rr,getFilters:Jr,putStream:Ir,events:Pn,scaleFactor:rn,pageSize:{getWidth:function(){return Rs(Ge)},setWidth:function(Ke){Ca(Ge,Ke)},getHeight:function(){return ms(Ge)},setHeight:function(Ke){Ta(Ge,Ke)}},encryptionOptions:Pe,encryption:Sr,getEncryptor:Xo,output:zs,getNumberOfPages:qo,pages:Ni,out:Xe,f2:oi,f3:ii,getPageInfo:to,getPageInfoByObjId:In,getCurrentPageInfo:Ko,getPDFVersion:Re,Point:Xs,Rectangle:Ea,Matrix:Cn,hasHotfix:Za},Object.defineProperty(St.internal.pageSize,"width",{get:function(){return Rs(Ge)},set:function(Ke){Ca(Ge,Ke)},enumerable:!0,configurable:!0}),Object.defineProperty(St.internal.pageSize,"height",{get:function(){return ms(Ge)},set:function(Ke){Ta(Ge,Ke)},enumerable:!0,configurable:!0}),Vo.call(St,gi),cn="F1",Ka(Me,r),Pn.publish("initialized"),St}I.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},I.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(e,t){return P(x(t).substr(0,5),e)},I.prototype.encryptor=function(e,t){var r=x(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(Ce){return P(r,Ce)}},j.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||_typeof(e)!==_typeof(this))return!1;var Ce=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;Ce++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&Ce--;return Ce===0},E.API={events:[]},E.version="2.5.1";var q=E.API,D=1,R=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(e){return e.toFixed(2)},z=function(e){return e.toFixed(5)};q.__acroform__={};var H=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},W=function(e){return e*D},V=function(e){var t=new ut,r=At.internal.getHeight(e)||0,Ce=At.internal.getWidth(e)||0;return t.BBox=[0,0,Number(U(Ce)),Number(U(r))],t},G=q.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Y=q.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},J=q.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},X=q.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(e,t-1)},K=q.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(e,t-1)},Z=q.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(e,t-1)},$=q.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,Ce=t.internal.getVerticalCoordinate,Me=e[0],Ie=e[1],Fe=e[2],Oe=e[3],_e={};return _e.lowerLeft_X=r(Me)||0,_e.lowerLeft_Y=Ce(Ie+Oe)||0,_e.upperRight_X=r(Me+Fe)||0,_e.upperRight_Y=Ce(Ie)||0,[Number(U(_e.lowerLeft_X)),Number(U(_e.lowerLeft_Y)),Number(U(_e.upperRight_X)),Number(U(_e.upperRight_Y))]},Q=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,Ce=tt(e,r),Me=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+Me+" "+U(Ce.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(Ce.text),t.push("ET"),t.push("Q"),t.push("EMC");var Ie=V(e);return Ie.scope=e.scope,Ie.stream=t.join(`
`),Ie}},tt=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,Ce={text:"",fontSize:""},Me=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");Me=e.multiline?Me.map(function(ii){return ii.split(`
`)}):Me.map(function(ii){return[ii]});var Ie=r,Fe=At.internal.getHeight(e)||0;Fe=Fe<0?-Fe:Fe;var Oe=At.internal.getWidth(e)||0;Oe=Oe<0?-Oe:Oe;var _e=function(ii,li,bi){if(ii+1<Me.length){var mi=li+" "+Me[ii+1][0];return et(mi,e,bi).width<=Oe-4}return!1};Ie++;t:for(;Ie>0;){t="",Ie--;var xe,Pe,Ae=et("3",e,Ie).height,Se=e.multiline?Fe-Ie:(Fe-Ae)/2,St=Se+=2,Te=0,Re=0,Ee=0;if(Ie<=0){t=`(...) Tj
`,t+="% Width of Text: "+et(t,e,Ie=12).width+", FieldWidth:"+Oe+`
`;break}for(var ke="",De=0,Be=0;Be<Me.length;Be++)if(Me.hasOwnProperty(Be)){var He=!1;if(Me[Be].length!==1&&Ee!==Me[Be].length-1){if((Ae+2)*(De+2)+2>Fe)continue t;ke+=Me[Be][Ee],He=!0,Re=Be,Be--}else{ke=(ke+=Me[Be][Ee]+" ").substr(ke.length-1)==" "?ke.substr(0,ke.length-1):ke;var Ue=parseInt(Be),We=_e(Ue,ke,Ie),Je=Be>=Me.length-1;if(We&&!Je){ke+=" ",Ee=0;continue}if(We||Je){if(Je)Re=Ue;else if(e.multiline&&(Ae+2)*(De+2)+2>Fe)continue t}else{if(!e.multiline||(Ae+2)*(De+2)+2>Fe)continue t;Re=Ue}}for(var Qe="",fi=Te;fi<=Re;fi++){var oi=Me[fi];if(e.multiline){if(fi===Re){Qe+=oi[Ee]+" ",Ee=(Ee+1)%oi.length;continue}if(fi===Te){Qe+=oi[oi.length-1]+" ";continue}}Qe+=oi[0]+" "}switch(Qe=Qe.substr(Qe.length-1)==" "?Qe.substr(0,Qe.length-1):Qe,Pe=et(Qe,e,Ie).width,e.textAlign){case"right":xe=Oe-Pe-2;break;case"center":xe=(Oe-Pe)/2;break;case"left":default:xe=2}t+=U(xe)+" "+U(St)+` Td
`,t+="("+R(Qe)+`) Tj
`,t+=-U(xe)+` 0 Td
`,St=-(Ie+2),Pe=0,Te=He?Re:Re+1,De++,ke=""}break}return Ce.text=t,Ce.fontSize=Ie,Ce},et=function(e,t,r){var Ce=t.scope.internal.getFont(t.fontName,t.fontStyle),Me=t.scope.getStringUnitWidth(e,{font:Ce,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:Ce,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:Me}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(Ce){return Ce.type===r.type&&Ce.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},it=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var Ce=r,Me=e[r];t.internal.newObjectDeferredBegin(Me.objId,!0),_typeof(Me)==="object"&&typeof Me.putStream=="function"&&Me.putStream(),delete e[Ce]}},at=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ht,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Ce=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Me in Ce)if(Ce.hasOwnProperty(Me)){var Ie=Ce[Me];Ie.objId=void 0,Ie.hasAnnotation&&nt(Ie,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(Ce,Me){var Ie=!Ce;for(var Fe in Ce||(Me.internal.newObjectDeferredBegin(Me.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Me.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Ce=Ce||Me.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Ce.hasOwnProperty(Fe)){var Oe=Ce[Fe],_e=[],xe=Oe.Rect;if(Oe.Rect&&(Oe.Rect=$(Oe.Rect,Me)),Me.internal.newObjectDeferredBegin(Oe.objId,!0),Oe.DA=At.createDefaultAppearanceStream(Oe),_typeof(Oe)==="object"&&typeof Oe.getKeyValueListForStream=="function"&&(_e=Oe.getKeyValueListForStream()),Oe.Rect=xe,Oe.hasAppearanceStream&&!Oe.appearanceStreamContent){var Pe=Q(Oe);_e.push({key:"AP",value:"<</N "+Pe+">>"}),Me.internal.acroformPlugin.xForms.push(Pe)}if(Oe.appearanceStreamContent){var Ae="";for(var Se in Oe.appearanceStreamContent)if(Oe.appearanceStreamContent.hasOwnProperty(Se)){var St=Oe.appearanceStreamContent[Se];if(Ae+="/"+Se+" ",Ae+="<<",Object.keys(St).length>=1||Array.isArray(St)){for(var Fe in St)if(St.hasOwnProperty(Fe)){var Te=St[Fe];typeof Te=="function"&&(Te=Te.call(Me,Oe)),Ae+="/"+Fe+" "+Te+" ",Me.internal.acroformPlugin.xForms.indexOf(Te)>=0||Me.internal.acroformPlugin.xForms.push(Te)}}else typeof(Te=St)=="function"&&(Te=Te.call(Me,Oe)),Ae+="/"+Fe+" "+Te,Me.internal.acroformPlugin.xForms.indexOf(Te)>=0||Me.internal.acroformPlugin.xForms.push(Te);Ae+=">>"}_e.push({key:"AP",value:`<<
`+Ae+">>"})}Me.internal.putStream({additionalKeyValues:_e,objectId:Oe.objId}),Me.internal.out("endobj")}Ie&&it(Me.internal.acroformPlugin.xForms,Me)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(e,t,r){var Ce=function(Fe){return Fe};if(Array.isArray(e)){for(var Me="[",Ie=0;Ie<e.length;Ie++)switch(Ie!==0&&(Me+=" "),_typeof(e[Ie])){case"boolean":case"number":case"object":Me+=e[Ie].toString();break;case"string":e[Ie].substr(0,1)!=="/"?(t!==void 0&&r&&(Ce=r.internal.getEncryptor(t)),Me+="("+R(Ce(e[Ie].toString()))+")"):Me+=e[Ie].toString()}return Me+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(e,t,r){var Ce=function(Me){return Me};return t!==void 0&&r&&(Ce=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+R(Ce(e))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(Ie){return Ie!="content"&&Ie!="appearanceStreamContent"&&Ie!="scope"&&Ie!="objId"&&Ie.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var Ce=t[r],Me=this[Ce];Me&&(Array.isArray(Me)?e.push({key:Ce,value:ot(Me,this.objId,this.scope)}):Me instanceof ct?(Me.scope=this.scope,e.push({key:Ce,value:Me.objId+" 0 R"})):typeof Me!="function"&&e.push({key:Ce,value:Me}))}return e};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};H(ut,ct);var ht=function(){ct.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(Ce){return Ce};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+R(r(e))+")"}},set:function(r){e=r}})};H(ht,ct);var lt=function e(){ct.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(ke){if(isNaN(ke))throw new Error('Invalid value "'+ke+'" for attribute F supplied.');t=ke}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(t,3))},set:function(ke){Boolean(ke)===!0?this.F=K(t,3):this.F=Z(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(ke){if(isNaN(ke))throw new Error('Invalid value "'+ke+'" for attribute Ff supplied.');r=ke}});var Ce=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Ce.length!==0)return Ce},set:function(ke){Ce=ke!==void 0?ke:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Ce||isNaN(Ce[0])?0:Ce[0]},set:function(ke){Ce[0]=ke}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Ce||isNaN(Ce[1])?0:Ce[1]},set:function(ke){Ce[1]=ke}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Ce||isNaN(Ce[2])?0:Ce[2]},set:function(ke){Ce[2]=ke}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Ce||isNaN(Ce[3])?0:Ce[3]},set:function(ke){Ce[3]=ke}});var Me="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Me},set:function(ke){switch(ke){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Me=ke;break;default:throw new Error('Invalid value "'+ke+'" for attribute FT supplied.')}}});var Ie=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ie||Ie.length<1){if(this instanceof yt)return;Ie="FieldObject"+e.FieldNum++}var ke=function(De){return De};return this.scope&&(ke=this.scope.internal.getEncryptor(this.objId)),"("+R(ke(Ie))+")"},set:function(ke){Ie=ke.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ie},set:function(ke){Ie=ke}});var Fe="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Fe},set:function(ke){Fe=ke}});var Oe="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Oe},set:function(ke){Oe=ke}});var _e=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(ke){_e=ke}});var xe=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return xe===void 0?50/D:xe},set:function(ke){xe=ke}});var Pe="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(ke){Pe=ke}});var Ae="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ae||this instanceof yt||this instanceof Nt))return st(Ae,this.objId,this.scope)},set:function(ke){ke=ke.toString(),Ae=ke}});var Se=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Se)return this instanceof mt?Se:st(Se,this.objId,this.scope)},set:function(ke){ke=ke.toString(),Se=this instanceof mt?ke:ke.substr(0,1)==="("?T(ke.substr(1,ke.length-2)):T(ke)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Se.substr(1,Se.length-1)):Se},set:function(ke){ke=ke.toString(),Se=this instanceof mt?"/"+ke:ke}});var St=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(St)return St},set:function(ke){this.V=ke}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(St)return this instanceof mt?St:st(St,this.objId,this.scope)},set:function(ke){ke=ke.toString(),St=this instanceof mt?ke:ke.substr(0,1)==="("?T(ke.substr(1,ke.length-2)):T(ke)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(St.substr(1,St.length-1)):St},set:function(ke){ke=ke.toString(),St=this instanceof mt?"/"+ke:ke}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Te,Re=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(ke){ke=Boolean(ke),Re=ke}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Te)return Te},set:function(ke){Te=ke}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,1))},set:function(ke){Boolean(ke)===!0?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,2))},set:function(ke){Boolean(ke)===!0?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,3))},set:function(ke){Boolean(ke)===!0?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ee=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ee!==null)return Ee},set:function(ke){if([0,1,2].indexOf(ke)===-1)throw new Error('Invalid value "'+ke+'" for attribute Q supplied.');Ee=ke}}),Object.defineProperty(this,"textAlign",{get:function(){var ke;switch(Ee){case 0:default:ke="left";break;case 1:ke="center";break;case 2:ke="right"}return ke},configurable:!0,enumerable:!0,set:function(ke){switch(ke){case"right":case 2:Ee=2;break;case"center":case 1:Ee=1;break;case"left":case 0:default:Ee=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(t,this.objId,this.scope)},set:function(r){var Ce,Me;Me=[],typeof(Ce=r)=="string"&&(Me=function(Ie,Fe,Oe){Oe||(Oe=1);for(var _e,xe=[];_e=Fe.exec(Ie);)xe.push(_e[Oe]);return xe}(Ce,/\((.*?)\)/g)),t=Me}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,Ce){for(Ce=Ce||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),Ce!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,18))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,19))},set:function(r){this.combo===!0&&(Boolean(r)===!0?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,20))},set:function(r){Boolean(r)===!0?(this.Ff=K(this.Ff,20),t.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,22))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,27))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,15))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,16))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,17))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(r){Boolean(r)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(Ie){return Ie};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var Ce,Me=[];for(Ce in Me.push("<<"),t)Me.push("/"+Ce+" ("+R(r(t[Ce]))+")");return Me.push(">>"),Me.join(`
`)}},set:function(r){_typeof(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};H(bt,mt);var yt=function(){var e,t;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Me){e=Me}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(Me){t=Me}});var r,Ce={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Me=function(Oe){return Oe};this.scope&&(Me=this.scope.internal.getEncryptor(this.objId));var Ie,Fe=[];for(Ie in Fe.push("<<"),Ce)Fe.push("/"+Ie+" ("+R(Me(Ce[Ie]))+")");return Fe.push(">>"),Fe.join(`
`)},set:function(Me){_typeof(Me)==="object"&&(Ce=Me)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Ce.CA||""},set:function(Me){typeof Me=="string"&&(Ce.CA=Me)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Me){r=Me}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(Me){r="/"+Me}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},bt.prototype.createOption=function(e){var t=new yt;return t.Parent=this,t.optionName=e,this.Kids.push(t),xt.call(this.scope,t),t};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,14))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var r=[],Ce=e.scope.internal.getFont(e.fontName,e.fontStyle).id,Me=e.scope.__private__.encodeColorString(e.color),Ie=tt(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+Ce+" "+U(Ie.fontSize)+" Tf "+Me),r.push("BT"),r.push(Ie.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=V(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,Ce=e.scope.__private__.encodeColorString(e.color),Me=[],Ie=At.internal.getHeight(e),Fe=At.internal.getWidth(e),Oe=tt(e,e.caption);return Me.push("1 g"),Me.push("0 0 "+U(Fe)+" "+U(Ie)+" re"),Me.push("f"),Me.push("q"),Me.push("0 0 1 rg"),Me.push("0 0 "+U(Fe-1)+" "+U(Ie-1)+" re"),Me.push("W"),Me.push("n"),Me.push("0 g"),Me.push("BT"),Me.push("/"+r+" "+U(Oe.fontSize)+" Tf "+Ce),Me.push(Oe.text),Me.push("ET"),Me.push("Q"),t.stream=Me.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Circle.YesNormal,t.D[e]=At.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=V(e);t.scope=e.scope;var r=[],Ce=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;Ce=Number((.9*Ce).toFixed(5));var Me=At.internal.Bezier_C,Ie=Number((Ce*Me).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),r.push(Ce+" 0 m"),r.push(Ce+" "+Ie+" "+Ie+" "+Ce+" 0 "+Ce+" c"),r.push("-"+Ie+" "+Ce+" -"+Ce+" "+Ie+" -"+Ce+" 0 c"),r.push("-"+Ce+" -"+Ie+" -"+Ie+" -"+Ce+" 0 -"+Ce+" c"),r.push(Ie+" -"+Ce+" "+Ce+" -"+Ie+" "+Ce+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var r=[],Ce=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;Ce=Number((.9*Ce).toFixed(5));var Me=Number((2*Ce).toFixed(5)),Ie=Number((Me*At.internal.Bezier_C).toFixed(5)),Fe=Number((Ce*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),r.push(Me+" 0 m"),r.push(Me+" "+Ie+" "+Ie+" "+Me+" 0 "+Me+" c"),r.push("-"+Ie+" "+Me+" -"+Me+" "+Ie+" -"+Me+" 0 c"),r.push("-"+Me+" -"+Ie+" -"+Ie+" -"+Me+" 0 -"+Me+" c"),r.push(Ie+" -"+Me+" "+Me+" -"+Ie+" "+Me+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),r.push(Ce+" 0 m"),r.push(Ce+" "+Fe+" "+Fe+" "+Ce+" 0 "+Ce+" c"),r.push("-"+Fe+" "+Ce+" -"+Ce+" "+Fe+" -"+Ce+" 0 c"),r.push("-"+Ce+" -"+Fe+" -"+Fe+" -"+Ce+" 0 -"+Ce+" c"),r.push(Fe+" -"+Ce+" "+Ce+" -"+Fe+" "+Ce+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var r=[],Ce=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;Ce=Number((.9*Ce).toFixed(5));var Me=Number((2*Ce).toFixed(5)),Ie=Number((Me*At.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),r.push(Me+" 0 m"),r.push(Me+" "+Ie+" "+Ie+" "+Me+" 0 "+Me+" c"),r.push("-"+Ie+" "+Me+" -"+Me+" "+Ie+" -"+Me+" 0 c"),r.push("-"+Me+" -"+Ie+" -"+Ie+" -"+Me+" 0 -"+Me+" c"),r.push(Ie+" -"+Me+" "+Me+" -"+Ie+" "+Me+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Cross.YesNormal,t.D[e]=At.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=V(e);t.scope=e.scope;var r=[],Ce=At.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+U(At.internal.getWidth(e)-2)+" "+U(At.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(U(Ce.x1.x)+" "+U(Ce.x1.y)+" m"),r.push(U(Ce.x2.x)+" "+U(Ce.x2.y)+" l"),r.push(U(Ce.x4.x)+" "+U(Ce.x4.y)+" m"),r.push(U(Ce.x3.x)+" "+U(Ce.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var r=At.internal.calculateCross(e),Ce=[];return Ce.push("0.749023 g"),Ce.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),Ce.push("f"),Ce.push("q"),Ce.push("1 1 "+U(At.internal.getWidth(e)-2)+" "+U(At.internal.getHeight(e)-2)+" re"),Ce.push("W"),Ce.push("n"),Ce.push(U(r.x1.x)+" "+U(r.x1.y)+" m"),Ce.push(U(r.x2.x)+" "+U(r.x2.y)+" l"),Ce.push(U(r.x4.x)+" "+U(r.x4.y)+" m"),Ce.push(U(r.x3.x)+" "+U(r.x3.y)+" l"),Ce.push("s"),Ce.push("Q"),t.stream=Ce.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};At.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=At.internal.getWidth(e),r=At.internal.getHeight(e),Ce=Math.min(t,r);return{x1:{x:(t-Ce)/2,y:(r-Ce)/2+Ce},x2:{x:(t-Ce)/2+Ce,y:(r-Ce)/2},x3:{x:(t-Ce)/2,y:(r-Ce)/2},x4:{x:(t-Ce)/2+Ce,y:(r-Ce)/2+Ce}}}},At.internal.getWidth=function(e){var t=0;return _typeof(e)==="object"&&(t=W(e.Rect[2])),t},At.internal.getHeight=function(e){var t=0;return _typeof(e)==="object"&&(t=W(e.Rect[3])),t};var xt=q.addField=function(e){if(at(this,e),!(e instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(e){return e.reduce(function(t,r,Ce){return t[r]=Ce,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Ce=e.__addimage__.getImageFileTypeByImageData=function(ii,li){var bi,mi,Si,_i,xi,Ei=t;if((li=li||t)==="RGBA"||ii.data!==void 0&&ii.data instanceof Uint8ClampedArray&&"height"in ii&&"width"in ii)return"RGBA";if(We(ii))for(xi in r)for(Si=r[xi],bi=0;bi<Si.length;bi+=1){for(_i=!0,mi=0;mi<Si[bi].length;mi+=1)if(Si[bi][mi]!==void 0&&Si[bi][mi]!==ii[mi]){_i=!1;break}if(_i===!0){Ei=xi;break}}else for(xi in r)for(Si=r[xi],bi=0;bi<Si.length;bi+=1){for(_i=!0,mi=0;mi<Si[bi].length;mi+=1)if(Si[bi][mi]!==void 0&&Si[bi][mi]!==ii.charCodeAt(mi)){_i=!1;break}if(_i===!0){Ei=xi;break}}return Ei===t&&li!==t&&(Ei=li),Ei},Me=function ii(li){for(var bi=this.internal.write,mi=this.internal.putStream,Si=(0,this.internal.getFilters)();Si.indexOf("FlateEncode")!==-1;)Si.splice(Si.indexOf("FlateEncode"),1);li.objectId=this.internal.newObject();var _i=[];if(_i.push({key:"Type",value:"/XObject"}),_i.push({key:"Subtype",value:"/Image"}),_i.push({key:"Width",value:li.width}),_i.push({key:"Height",value:li.height}),li.colorSpace===Ee.INDEXED?_i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(li.palette.length/3-1)+" "+("sMask"in li&&li.sMask!==void 0?li.objectId+2:li.objectId+1)+" 0 R]"}):(_i.push({key:"ColorSpace",value:"/"+li.colorSpace}),li.colorSpace===Ee.DEVICE_CMYK&&_i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_i.push({key:"BitsPerComponent",value:li.bitsPerComponent}),"decodeParameters"in li&&li.decodeParameters!==void 0&&_i.push({key:"DecodeParms",value:"<<"+li.decodeParameters+">>"}),"transparency"in li&&Array.isArray(li.transparency)){for(var xi="",Ei=0,ri=li.transparency.length;Ei<ri;Ei++)xi+=li.transparency[Ei]+" "+li.transparency[Ei]+" ";_i.push({key:"Mask",value:"["+xi+"]"})}li.sMask!==void 0&&_i.push({key:"SMask",value:li.objectId+1+" 0 R"});var vi=li.filter!==void 0?["/"+li.filter]:void 0;if(mi({data:li.data,additionalKeyValues:_i,alreadyAppliedFilters:vi,objectId:li.objectId}),bi("endobj"),"sMask"in li&&li.sMask!==void 0){var Ci="/Predictor "+li.predictor+" /Colors 1 /BitsPerComponent "+li.bitsPerComponent+" /Columns "+li.width,$e={width:li.width,height:li.height,colorSpace:"DeviceGray",bitsPerComponent:li.bitsPerComponent,decodeParameters:Ci,data:li.sMask};"filter"in li&&($e.filter=li.filter),ii.call(this,$e)}if(li.colorSpace===Ee.INDEXED){var Ge=this.internal.newObject();mi({data:Qe(new Uint8Array(li.palette)),objectId:Ge}),bi("endobj")}},Ie=function(){var ii=this.internal.collections.addImage_images;for(var li in ii)Me.call(this,ii[li])},Fe=function(){var ii,li=this.internal.collections.addImage_images,bi=this.internal.write;for(var mi in li)bi("/I"+(ii=li[mi]).index,ii.objectId,"0","R")},Oe=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ie),this.internal.events.subscribe("putXobjectDict",Fe))},_e=function(){var ii=this.internal.collections.addImage_images;return Oe.call(this),ii},xe=function(){return Object.keys(this.internal.collections.addImage_images).length},Pe=function(ii){return typeof e["process"+ii.toUpperCase()]=="function"},Ae=function(ii){return _typeof(ii)==="object"&&ii.nodeType===1},Se=function(ii,li){if(ii.nodeName==="IMG"&&ii.hasAttribute("src")){var bi=""+ii.getAttribute("src");if(bi.indexOf("data:image/")===0)return u(unescape(bi).split("base64,").pop());var mi=e.loadFile(bi,!0);if(mi!==void 0)return mi}if(ii.nodeName==="CANVAS"){if(ii.width===0||ii.height===0)throw new Error("Given canvas must have data. Canvas width: "+ii.width+", height: "+ii.height);var Si;switch(li){case"PNG":Si="image/png";break;case"WEBP":Si="image/webp";break;case"JPEG":case"JPG":default:Si="image/jpeg"}return u(ii.toDataURL(Si,1).split("base64,").pop())}},St=function(ii){var li=this.internal.collections.addImage_images;if(li){for(var bi in li)if(ii===li[bi].alias)return li[bi]}},Te=function(ii,li,bi){return ii||li||(ii=-96,li=-96),ii<0&&(ii=-1*bi.width*72/ii/this.internal.scaleFactor),li<0&&(li=-1*bi.height*72/li/this.internal.scaleFactor),ii===0&&(ii=li*bi.width/bi.height),li===0&&(li=ii*bi.height/bi.width),[ii,li]},Re=function(ii,li,bi,mi,Si,_i){var xi=Te.call(this,bi,mi,Si),Ei=this.internal.getCoordinateString,ri=this.internal.getVerticalCoordinateString,vi=_e.call(this);if(bi=xi[0],mi=xi[1],vi[Si.index]=Si,_i){_i*=Math.PI/180;var Ci=Math.cos(_i),$e=Math.sin(_i),Ge=function(qe){return qe.toFixed(4)},ze=[Ge(Ci),Ge($e),Ge(-1*$e),Ge(Ci),0,0,"cm"]}this.internal.write("q"),_i?(this.internal.write([1,"0","0",1,Ei(ii),ri(li+mi),"cm"].join(" ")),this.internal.write(ze.join(" ")),this.internal.write([Ei(bi),"0","0",Ei(mi),"0","0","cm"].join(" "))):this.internal.write([Ei(bi),"0","0",Ei(mi),Ei(ii),ri(li+mi),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Si.index+" Do"),this.internal.write("Q")},Ee=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ke=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},De=e.__addimage__.sHashCode=function(ii){var li,bi,mi=0;if(typeof ii=="string")for(bi=ii.length,li=0;li<bi;li++)mi=(mi<<5)-mi+ii.charCodeAt(li),mi|=0;else if(We(ii))for(bi=ii.byteLength/2,li=0;li<bi;li++)mi=(mi<<5)-mi+ii[li],mi|=0;return mi},Be=e.__addimage__.validateStringAsBase64=function(ii){(ii=ii||"").toString().trim();var li=!0;return ii.length===0&&(li=!1),ii.length%4!=0&&(li=!1),/^[A-Za-z0-9+/]+$/.test(ii.substr(0,ii.length-2))===!1&&(li=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ii.substr(-2))===!1&&(li=!1),li},He=e.__addimage__.extractImageFromDataUrl=function(ii){var li=(ii=ii||"").split("base64,"),bi=null;if(li.length===2){var mi=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(li[0]);Array.isArray(mi)&&(bi={mimeType:mi[1],charset:mi[2],data:li[1]})}return bi},Ue=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(ii){return Ue()&&ii instanceof ArrayBuffer};var We=e.__addimage__.isArrayBufferView=function(ii){return Ue()&&typeof Uint32Array<"u"&&(ii instanceof Int8Array||ii instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ii instanceof Uint8ClampedArray||ii instanceof Int16Array||ii instanceof Uint16Array||ii instanceof Int32Array||ii instanceof Uint32Array||ii instanceof Float32Array||ii instanceof Float64Array)},Je=e.__addimage__.binaryStringToUint8Array=function(ii){for(var li=ii.length,bi=new Uint8Array(li),mi=0;mi<li;mi++)bi[mi]=ii.charCodeAt(mi);return bi},Qe=e.__addimage__.arrayBufferToBinaryString=function(ii){for(var li="",bi=We(ii)?ii:new Uint8Array(ii),mi=0;mi<bi.length;mi+=8192)li+=String.fromCharCode.apply(null,bi.subarray(mi,mi+8192));return li};e.addImage=function(){var ii,li,bi,mi,Si,_i,xi,Ei,ri;if(typeof arguments[1]=="number"?(li=t,bi=arguments[1],mi=arguments[2],Si=arguments[3],_i=arguments[4],xi=arguments[5],Ei=arguments[6],ri=arguments[7]):(li=arguments[1],bi=arguments[2],mi=arguments[3],Si=arguments[4],_i=arguments[5],xi=arguments[6],Ei=arguments[7],ri=arguments[8]),_typeof(ii=arguments[0])==="object"&&!Ae(ii)&&"imageData"in ii){var vi=ii;ii=vi.imageData,li=vi.format||li||t,bi=vi.x||bi||0,mi=vi.y||mi||0,Si=vi.w||vi.width||Si,_i=vi.h||vi.height||_i,xi=vi.alias||xi,Ei=vi.compression||Ei,ri=vi.rotation||vi.angle||ri}var Ci=this.internal.getFilters();if(Ei===void 0&&Ci.indexOf("FlateEncode")!==-1&&(Ei="SLOW"),isNaN(bi)||isNaN(mi))throw new Error("Invalid coordinates passed to jsPDF.addImage");Oe.call(this);var $e=fi.call(this,ii,li,xi,Ei);return Re.call(this,bi,mi,Si,_i,$e,ri),this};var fi=function(ii,li,bi,mi){var Si,_i,xi;if(typeof ii=="string"&&Ce(ii)===t){ii=unescape(ii);var Ei=oi(ii,!1);(Ei!==""||(Ei=e.loadFile(ii,!0))!==void 0)&&(ii=Ei)}if(Ae(ii)&&(ii=Se(ii,li)),li=Ce(ii,li),!Pe(li))throw new Error("addImage does not support files of type '"+li+"', please ensure that a plugin for '"+li+"' support is added.");if(((xi=bi)==null||xi.length===0)&&(bi=function(ri){return typeof ri=="string"||We(ri)?De(ri):We(ri.data)?De(ri.data):null}(ii)),(Si=St.call(this,bi))||(Ue()&&(ii instanceof Uint8Array||li==="RGBA"||(_i=ii,ii=Je(ii))),Si=this["process"+li.toUpperCase()](ii,xe.call(this),bi,function(ri){return ri&&typeof ri=="string"&&(ri=ri.toUpperCase()),ri in e.image_compression?ri:ke.NONE}(mi),_i)),!Si)throw new Error("An unknown error occurred whilst processing the image.");return Si},oi=e.__addimage__.convertBase64ToBinaryString=function(ii,li){var bi;li=typeof li!="boolean"||li;var mi,Si="";if(typeof ii=="string"){mi=(bi=He(ii))!==null?bi.data:ii;try{Si=u(mi)}catch(_i){if(li)throw Be(mi)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_i.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Si};e.getImageProperties=function(ii){var li,bi,mi="";if(Ae(ii)&&(ii=Se(ii)),typeof ii=="string"&&Ce(ii)===t&&((mi=oi(ii,!1))===""&&(mi=e.loadFile(ii)||""),ii=mi),bi=Ce(ii),!Pe(bi))throw new Error("addImage does not support files of type '"+bi+"', please ensure that a plugin for '"+bi+"' support is added.");if(!Ue()||ii instanceof Uint8Array||(ii=Je(ii)),!(li=this["process"+bi.toUpperCase()](ii)))throw new Error("An unknown error occurred whilst processing the image");return li.fileType=bi,li}})(E.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};E.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var Ce,Me,Ie,Fe=this.internal.getCoordinateString,Oe=this.internal.getVerticalCoordinateString,_e=this.internal.getPageInfoByObjId(r.objId),xe=r.pageContext.annotations,Pe=!1,Ae=0;Ae<xe.length&&!Pe;Ae++)switch((Ce=xe[Ae]).type){case"link":(t(Ce.options.url)||t(Ce.options.pageNumber))&&(Pe=!0);break;case"reference":case"text":case"freetext":Pe=!0}if(Pe!=0){this.internal.write("/Annots [");for(var Se=0;Se<xe.length;Se++){Ce=xe[Se];var St=this.internal.pdfEscape,Te=this.internal.getEncryptor(r.objId);switch(Ce.type){case"reference":this.internal.write(" "+Ce.object.objId+" 0 R ");break;case"text":var Re=this.internal.newAdditionalObject(),Ee=this.internal.newAdditionalObject(),ke=this.internal.getEncryptor(Re.objId),De=Ce.title||"Note";Ie="<</Type /Annot /Subtype /Text "+(Me="/Rect ["+Fe(Ce.bounds.x)+" "+Oe(Ce.bounds.y+Ce.bounds.h)+" "+Fe(Ce.bounds.x+Ce.bounds.w)+" "+Oe(Ce.bounds.y)+"] ")+"/Contents ("+St(ke(Ce.contents))+")",Ie+=" /Popup "+Ee.objId+" 0 R",Ie+=" /P "+_e.objId+" 0 R",Ie+=" /T ("+St(ke(De))+") >>",Re.content=Ie;var Be=Re.objId+" 0 R";Ie="<</Type /Annot /Subtype /Popup "+(Me="/Rect ["+Fe(Ce.bounds.x+30)+" "+Oe(Ce.bounds.y+Ce.bounds.h)+" "+Fe(Ce.bounds.x+Ce.bounds.w+30)+" "+Oe(Ce.bounds.y)+"] ")+" /Parent "+Be,Ce.open&&(Ie+=" /Open true"),Ie+=" >>",Ee.content=Ie,this.internal.write(Re.objId,"0 R",Ee.objId,"0 R");break;case"freetext":Me="/Rect ["+Fe(Ce.bounds.x)+" "+Oe(Ce.bounds.y)+" "+Fe(Ce.bounds.x+Ce.bounds.w)+" "+Oe(Ce.bounds.y+Ce.bounds.h)+"] ";var He=Ce.color||"#000000";Ie="<</Type /Annot /Subtype /FreeText "+Me+"/Contents ("+St(Te(Ce.contents))+")",Ie+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+He+")",Ie+=" /Border [0 0 0]",Ie+=" >>",this.internal.write(Ie);break;case"link":if(Ce.options.name){var Ue=this.annotations._nameMap[Ce.options.name];Ce.options.pageNumber=Ue.page,Ce.options.top=Ue.y}else Ce.options.top||(Ce.options.top=0);if(Me="/Rect ["+Ce.finalBounds.x+" "+Ce.finalBounds.y+" "+Ce.finalBounds.w+" "+Ce.finalBounds.h+"] ",Ie="",Ce.options.url)Ie="<</Type /Annot /Subtype /Link "+Me+"/Border [0 0 0] /A <</S /URI /URI ("+St(Te(Ce.options.url))+") >>";else if(Ce.options.pageNumber)switch(Ie="<</Type /Annot /Subtype /Link "+Me+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Ce.options.pageNumber).objId+" 0 R",Ce.options.magFactor=Ce.options.magFactor||"XYZ",Ce.options.magFactor){case"Fit":Ie+=" /Fit]";break;case"FitH":Ie+=" /FitH "+Ce.options.top+"]";break;case"FitV":Ce.options.left=Ce.options.left||0,Ie+=" /FitV "+Ce.options.left+"]";break;case"XYZ":default:var We=Oe(Ce.options.top);Ce.options.left=Ce.options.left||0,Ce.options.zoom===void 0&&(Ce.options.zoom=0),Ie+=" /XYZ "+Ce.options.left+" "+We+" "+Ce.options.zoom+"]"}Ie!=""&&(Ie+=" >>",this.internal.write(Ie))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var Ce=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":Ce.pageContext.annotations.push(r)}},e.link=function(r,Ce,Me,Ie,Fe){var Oe=this.internal.getCurrentPageInfo(),_e=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString;Oe.pageContext.annotations.push({finalBounds:{x:_e(r),y:xe(Ce),w:_e(r+Me),h:xe(Ce+Ie)},options:Fe,type:"link"})},e.textWithLink=function(r,Ce,Me,Ie){var Fe,Oe,_e=this.getTextWidth(r),xe=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ie.maxWidth!==void 0){Oe=Ie.maxWidth;var Pe=this.splitTextToSize(r,Oe).length;Fe=Math.ceil(xe*Pe)}else Oe=_e,Fe=xe;return this.text(r,Ce,Me,Ie),Me+=.2*xe,Ie.align==="center"&&(Ce-=_e/2),Ie.align==="right"&&(Ce-=_e),this.link(Ce,Me-xe,Oe,Fe,Ie),_e},e.getTextWidth=function(r){var Ce=this.internal.getFontSize();return this.getStringUnitWidth(r)*Ce/this.internal.scaleFactor}}(E.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Ce={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Me=[1570,1571,1573,1575];e.__arabicParser__={};var Ie=e.__arabicParser__.isInArabicSubstitutionA=function(Re){return t[Re.charCodeAt(0)]!==void 0},Fe=e.__arabicParser__.isArabicLetter=function(Re){return typeof Re=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Re)},Oe=e.__arabicParser__.isArabicEndLetter=function(Re){return Fe(Re)&&Ie(Re)&&t[Re.charCodeAt(0)].length<=2},_e=e.__arabicParser__.isArabicAlfLetter=function(Re){return Fe(Re)&&Me.indexOf(Re.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(Re){return Fe(Re)&&Ie(Re)&&t[Re.charCodeAt(0)].length>=1};var xe=e.__arabicParser__.arabicLetterHasFinalForm=function(Re){return Fe(Re)&&Ie(Re)&&t[Re.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(Re){return Fe(Re)&&Ie(Re)&&t[Re.charCodeAt(0)].length>=3};var Pe=e.__arabicParser__.arabicLetterHasMedialForm=function(Re){return Fe(Re)&&Ie(Re)&&t[Re.charCodeAt(0)].length==4},Ae=e.__arabicParser__.resolveLigatures=function(Re){var Ee=0,ke=r,De="",Be=0;for(Ee=0;Ee<Re.length;Ee+=1)ke[Re.charCodeAt(Ee)]!==void 0?(Be++,typeof(ke=ke[Re.charCodeAt(Ee)])=="number"&&(De+=String.fromCharCode(ke),ke=r,Be=0),Ee===Re.length-1&&(ke=r,De+=Re.charAt(Ee-(Be-1)),Ee-=Be-1,Be=0)):(ke=r,De+=Re.charAt(Ee-Be),Ee-=Be,Be=0);return De};e.__arabicParser__.isArabicDiacritic=function(Re){return Re!==void 0&&Ce[Re.charCodeAt(0)]!==void 0};var Se=e.__arabicParser__.getCorrectForm=function(Re,Ee,ke){return Fe(Re)?Ie(Re)===!1?-1:!xe(Re)||!Fe(Ee)&&!Fe(ke)||!Fe(ke)&&Oe(Ee)||Oe(Re)&&!Fe(Ee)||Oe(Re)&&_e(Ee)||Oe(Re)&&Oe(Ee)?0:Pe(Re)&&Fe(Ee)&&!Oe(Ee)&&Fe(ke)&&xe(ke)?3:Oe(Re)||!Fe(ke)?1:2:-1},St=function(Re){var Ee=0,ke=0,De=0,Be="",He="",Ue="",We=(Re=Re||"").split("\\s+"),Je=[];for(Ee=0;Ee<We.length;Ee+=1){for(Je.push(""),ke=0;ke<We[Ee].length;ke+=1)Be=We[Ee][ke],He=We[Ee][ke-1],Ue=We[Ee][ke+1],Fe(Be)?(De=Se(Be,He,Ue),Je[Ee]+=De!==-1?String.fromCharCode(t[Be.charCodeAt(0)][De]):Be):Je[Ee]+=Be;Je[Ee]=Ae(Je[Ee])}return Je.join(" ")},Te=e.__arabicParser__.processArabic=e.processArabic=function(){var Re,Ee=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ke=[];if(Array.isArray(Ee)){var De=0;for(ke=[],De=0;De<Ee.length;De+=1)Array.isArray(Ee[De])?ke.push([St(Ee[De][0]),Ee[De][1],Ee[De][2]]):ke.push([St(Ee[De])]);Re=ke}else Re=St(Ee);return typeof arguments[0]=="string"?Re:(arguments[0].text=Re,arguments[0])};e.events.push(["preProcessText",Te])}(E.API),E.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(Oe){r=Oe}});var Ce=150;Object.defineProperty(this,"width",{get:function(){return Ce},set:function(Oe){Ce=isNaN(Oe)||Number.isInteger(Oe)===!1||Oe<0?150:Oe,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Ce+1)}});var Me=300;Object.defineProperty(this,"height",{get:function(){return Me},set:function(Oe){Me=isNaN(Oe)||Number.isInteger(Oe)===!1||Oe<0?300:Oe,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Me+1)}});var Ie=[];Object.defineProperty(this,"childNodes",{get:function(){return Ie},set:function(Oe){Ie=Oe}});var Fe={};Object.defineProperty(this,"style",{get:function(){return Fe},set:function(Oe){Fe=Oe}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,Ce){var Me;if((r=r||"2d")!=="2d")return null;for(Me in Ce)this.pdf.context2d.hasOwnProperty(Me)&&(this.pdf.context2d[Me]=Ce[Me]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,Ce=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),Me.call(this))},Me=function(){this.internal.__cell__.lastCell=new Ie,this.internal.__cell__.pages=1},Ie=function(){var _e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(Re){_e=Re}});var xe=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Re){xe=Re}});var Pe=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Pe},set:function(Re){Pe=Re}});var Ae=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ae},set:function(Re){Ae=Re}});var Se=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Se},set:function(Re){Se=Re}});var St=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return St},set:function(Re){St=Re}});var Te=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Te},set:function(Re){Te=Re}}),this};Ie.prototype.clone=function(){return new Ie(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ie.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(_e){return Ce.call(this),this.internal.__cell__.headerFunction=typeof _e=="function"?_e:void 0,this},e.getTextDimensions=function(_e,xe){Ce.call(this);var Pe=(xe=xe||{}).fontSize||this.getFontSize(),Ae=xe.font||this.getFont(),Se=xe.scaleFactor||this.internal.scaleFactor,St=0,Te=0,Re=0,Ee=this;if(!Array.isArray(_e)&&typeof _e!="string"){if(typeof _e!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");_e=String(_e)}var ke=xe.maxWidth;ke>0?typeof _e=="string"?_e=this.splitTextToSize(_e,ke):Object.prototype.toString.call(_e)==="[object Array]"&&(_e=_e.reduce(function(Be,He){return Be.concat(Ee.splitTextToSize(He,ke))},[])):_e=Array.isArray(_e)?_e:[_e];for(var De=0;De<_e.length;De++)St<(Re=this.getStringUnitWidth(_e[De],{font:Ae})*Pe)&&(St=Re);return St!==0&&(Te=_e.length),{w:St/=Se,h:Math.max((Te*Pe*this.getLineHeightFactor()-Pe*(this.getLineHeightFactor()-1))/Se,0)}},e.cellAddPage=function(){Ce.call(this),this.addPage();var _e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new Ie(_e.left,_e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Fe=e.cell=function(){var _e;_e=arguments[0]instanceof Ie?arguments[0]:new Ie(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Ce.call(this);var xe=this.internal.__cell__.lastCell,Pe=this.internal.__cell__.padding,Ae=this.internal.__cell__.margins||t,Se=this.internal.__cell__.tableHeaderRow,St=this.internal.__cell__.printHeaders;return xe.lineNumber!==void 0&&(xe.lineNumber===_e.lineNumber?(_e.x=(xe.x||0)+(xe.width||0),_e.y=xe.y||0):xe.y+xe.height+_e.height+Ae.bottom>this.getPageHeight()?(this.cellAddPage(),_e.y=Ae.top,St&&Se&&(this.printHeaderRow(_e.lineNumber,!0),_e.y+=Se[0].height)):_e.y=xe.y+xe.height||_e.y),_e.text[0]!==void 0&&(this.rect(_e.x,_e.y,_e.width,_e.height,r===!0?"FD":void 0),_e.align==="right"?this.text(_e.text,_e.x+_e.width-Pe,_e.y+Pe,{align:"right",baseline:"top"}):_e.align==="center"?this.text(_e.text,_e.x+_e.width/2,_e.y+Pe,{align:"center",baseline:"top",maxWidth:_e.width-Pe-Pe}):this.text(_e.text,_e.x+Pe,_e.y+Pe,{align:"left",baseline:"top",maxWidth:_e.width-Pe-Pe})),this.internal.__cell__.lastCell=_e,this};e.table=function(_e,xe,Pe,Ae,Se){if(Ce.call(this),!Pe)throw new Error("No data for PDF table.");var St,Te,Re,Ee,ke=[],De=[],Be=[],He={},Ue={},We=[],Je=[],Qe=(Se=Se||{}).autoSize||!1,fi=Se.printHeaders!==!1,oi=Se.css&&Se.css["font-size"]!==void 0?16*Se.css["font-size"]:Se.fontSize||12,ii=Se.margins||Object.assign({width:this.getPageWidth()},t),li=typeof Se.padding=="number"?Se.padding:3,bi=Se.headerBackgroundColor||"#c8c8c8",mi=Se.headerTextColor||"#000";if(Me.call(this),this.internal.__cell__.printHeaders=fi,this.internal.__cell__.margins=ii,this.internal.__cell__.table_font_size=oi,this.internal.__cell__.padding=li,this.internal.__cell__.headerBackgroundColor=bi,this.internal.__cell__.headerTextColor=mi,this.setFontSize(oi),Ae==null)De=ke=Object.keys(Pe[0]),Be=ke.map(function(){return"left"});else if(Array.isArray(Ae)&&_typeof(Ae[0])==="object")for(ke=Ae.map(function(vi){return vi.name}),De=Ae.map(function(vi){return vi.prompt||vi.name||""}),Be=Ae.map(function(vi){return vi.align||"left"}),St=0;St<Ae.length;St+=1)Ue[Ae[St].name]=Ae[St].width*(19.049976/25.4);else Array.isArray(Ae)&&typeof Ae[0]=="string"&&(De=ke=Ae,Be=ke.map(function(){return"left"}));if(Qe||Array.isArray(Ae)&&typeof Ae[0]=="string")for(St=0;St<ke.length;St+=1){for(He[Ee=ke[St]]=Pe.map(function(vi){return vi[Ee]}),this.setFont(void 0,"bold"),We.push(this.getTextDimensions(De[St],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Te=He[Ee],this.setFont(void 0,"normal"),Re=0;Re<Te.length;Re+=1)We.push(this.getTextDimensions(Te[Re],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ue[Ee]=Math.max.apply(null,We)+li+li,We=[]}if(fi){var Si={};for(St=0;St<ke.length;St+=1)Si[ke[St]]={},Si[ke[St]].text=De[St],Si[ke[St]].align=Be[St];var _i=Oe.call(this,Si,Ue);Je=ke.map(function(vi){return new Ie(_e,xe,Ue[vi],_i,Si[vi].text,void 0,Si[vi].align)}),this.setTableHeaderRow(Je),this.printHeaderRow(1,!1)}var xi=Ae.reduce(function(vi,Ci){return vi[Ci.name]=Ci.align,vi},{});for(St=0;St<Pe.length;St+=1){"rowStart"in Se&&Se.rowStart instanceof Function&&Se.rowStart({row:St,data:Pe[St]},this);var Ei=Oe.call(this,Pe[St],Ue);for(Re=0;Re<ke.length;Re+=1){var ri=Pe[St][ke[Re]];"cellStart"in Se&&Se.cellStart instanceof Function&&Se.cellStart({row:St,col:Re,data:ri},this),Fe.call(this,new Ie(_e,xe,Ue[ke[Re]],Ei,ri,St+2,xi[ke[Re]]))}}return this.internal.__cell__.table_x=_e,this.internal.__cell__.table_y=xe,this};var Oe=function(_e,xe){var Pe=this.internal.__cell__.padding,Ae=this.internal.__cell__.table_font_size,Se=this.internal.scaleFactor;return Object.keys(_e).map(function(St){var Te=_e[St];return this.splitTextToSize(Te.hasOwnProperty("text")?Te.text:Te,xe[St]-Pe-Pe)},this).map(function(St){return this.getLineHeightFactor()*St.length*Ae/Se+Pe+Pe},this).reduce(function(St,Te){return Math.max(St,Te)},0)};e.setTableHeaderRow=function(_e){Ce.call(this),this.internal.__cell__.tableHeaderRow=_e},e.printHeaderRow=function(_e,xe){if(Ce.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Pe;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ae=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ie(Ae[0],Ae[1],Ae[2],Ae[3],void 0,-1)}this.setFont(void 0,"bold");for(var Se=[],St=0;St<this.internal.__cell__.tableHeaderRow.length;St+=1){Pe=this.internal.__cell__.tableHeaderRow[St].clone(),xe&&(Pe.y=this.internal.__cell__.margins.top||0,Se.push(Pe)),Pe.lineNumber=_e;var Te=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Fe.call(this,Pe),this.setTextColor(Te)}Se.length>0&&this.setTableHeaderRow(Se),this.setFont(void 0,"normal"),r=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(Ie){return Pt[Ie=Ie||"normal"]?Ie:"normal"}(e.style),Ce=function(Ie){if(!Ie)return 400;if(typeof Ie=="number")return Ie>=100&&Ie<=900&&Ie%100==0?Ie:400;if(/^\d00$/.test(Ie))return parseInt(Ie);switch(Ie){case"bold":return 700;case"normal":default:return 400}}(e.weight),Me=function(Ie){return typeof It[Ie=Ie||"normal"]=="number"?Ie:"normal"}(e.stretch);return{family:t,style:r,weight:Ce,stretch:Me,src:e.src||[],ref:e.ref||{name:t,style:[Me,r,Ce].join(" ")}}}function Ot(e,t,r,Ce){var Me;for(Me=r;Me>=0&&Me<t.length;Me+=Ce)if(e[t[Me]])return e[t[Me]];for(Me=r;Me>=0&&Me<t.length;Me-=Ce)if(e[t[Me]])return e[t[Me]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qt(e,t,r){for(var Ce=(r=r||{}).defaultFontFamily||"times",Me=Object.assign({},Bt,r.genericFontFamilies||{}),Ie=null,Fe=null,Oe=0;Oe<t.length;++Oe)if(Me[(Ie=jt(t[Oe])).family]&&(Ie.family=Me[Ie.family]),e.hasOwnProperty(Ie.family)){Fe=e[Ie.family];break}if(!(Fe=Fe||e[Ce]))throw new Error("Could not find a font-family for the rule '"+Et(Ie)+"' and default family '"+Ce+"'.");if(Fe=function(_e,xe){if(xe[_e])return xe[_e];var Pe=It[_e],Ae=Pe<=It.normal?-1:1,Se=Ot(xe,kt,Pe,Ae);if(!Se)throw new Error("Could not find a matching font-stretch value for "+_e);return Se}(Ie.stretch,Fe),Fe=function(_e,xe){if(xe[_e])return xe[_e];for(var Pe=Pt[_e],Ae=0;Ae<Pe.length;++Ae)if(xe[Pe[Ae]])return xe[Pe[Ae]];throw new Error("Could not find a matching font-style for "+_e)}(Ie.style,Fe),!(Fe=function(_e,xe){if(xe[_e])return xe[_e];if(_e===400&&xe[500])return xe[500];if(_e===500&&xe[400])return xe[400];var Pe=Ct[_e],Ae=Ot(xe,Ft,Pe,_e<400?-1:1);if(!Ae)throw new Error("Could not find a matching font-weight for value "+_e);return Ae}(Ie.weight,Fe)))throw new Error("Failed to resolve a font for the rule '"+Et(Ie)+"'.");return Fe}function Dt(e){return e.trimLeft()}function Rt(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Tt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(e){var t,r,Ce,Me,Ie,Fe,Oe,_e,xe,Pe=function($e){return $e=$e||{},this.isStrokeTransparent=$e.isStrokeTransparent||!1,this.strokeOpacity=$e.strokeOpacity||1,this.strokeStyle=$e.strokeStyle||"#000000",this.fillStyle=$e.fillStyle||"#000000",this.isFillTransparent=$e.isFillTransparent||!1,this.fillOpacity=$e.fillOpacity||1,this.font=$e.font||"10px sans-serif",this.textBaseline=$e.textBaseline||"alphabetic",this.textAlign=$e.textAlign||"left",this.lineWidth=$e.lineWidth||1,this.lineJoin=$e.lineJoin||"miter",this.lineCap=$e.lineCap||"butt",this.path=$e.path||[],this.transform=$e.transform!==void 0?$e.transform.clone():new _e,this.globalCompositeOperation=$e.globalCompositeOperation||"normal",this.globalAlpha=$e.globalAlpha||1,this.clip_path=$e.clip_path||[],this.currentPoint=$e.currentPoint||new Fe,this.miterLimit=$e.miterLimit||10,this.lastPoint=$e.lastPoint||new Fe,this.lineDashOffset=$e.lineDashOffset||0,this.lineDash=$e.lineDash||[],this.margin=$e.margin||[0,0,0,0],this.prevPageLastElemOffset=$e.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $e.ignoreClearRect!="boolean"||$e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new Ae(this),t=this.internal.f2,r=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,Me=this.internal.getHorizontalCoordinate,Ie=this.internal.getVerticalCoordinate,Fe=this.internal.Point,Oe=this.internal.Rectangle,_e=this.internal.Matrix,xe=new Pe}]);var Ae=function($e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ge=$e;Object.defineProperty(this,"pdf",{get:function(){return Ge}});var ze=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ze},set:function(Ze){ze=Boolean(Ze)}});var qe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return qe},set:function(Ze){qe=Boolean(Ze)}});var ei=0;Object.defineProperty(this,"posX",{get:function(){return ei},set:function(Ze){isNaN(Ze)||(ei=Ze)}});var ni=0;Object.defineProperty(this,"posY",{get:function(){return ni},set:function(Ze){isNaN(Ze)||(ni=Ze)}}),Object.defineProperty(this,"margin",{get:function(){return xe.margin},set:function(Ze){var Xe;typeof Ze=="number"?Xe=[Ze,Ze,Ze,Ze]:((Xe=new Array(4))[0]=Ze[0],Xe[1]=Ze.length>=2?Ze[1]:Xe[0],Xe[2]=Ze.length>=3?Ze[2]:Xe[0],Xe[3]=Ze.length>=4?Ze[3]:Xe[1]),xe.margin=Xe}});var ci=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ci},set:function(Ze){ci=Ze}});var di=0;Object.defineProperty(this,"lastBreak",{get:function(){return di},set:function(Ze){di=Ze}});var Ti=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ti},set:function(Ze){Ti=Ze}}),Object.defineProperty(this,"ctx",{get:function(){return xe},set:function(Ze){Ze instanceof Pe&&(xe=Ze)}}),Object.defineProperty(this,"path",{get:function(){return xe.path},set:function(Ze){xe.path=Ze}});var Ni=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ni},set:function(Ze){Ni=Ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ze){var Xe;Xe=Se(Ze),this.ctx.fillStyle=Xe.style,this.ctx.isFillTransparent=Xe.a===0,this.ctx.fillOpacity=Xe.a,this.pdf.setFillColor(Xe.r,Xe.g,Xe.b,{a:Xe.a}),this.pdf.setTextColor(Xe.r,Xe.g,Xe.b,{a:Xe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ze){var Xe=Se(Ze);this.ctx.strokeStyle=Xe.style,this.ctx.isStrokeTransparent=Xe.a===0,this.ctx.strokeOpacity=Xe.a,Xe.a===0?this.pdf.setDrawColor(255,255,255):(Xe.a,this.pdf.setDrawColor(Xe.r,Xe.g,Xe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ze){["butt","round","square"].indexOf(Ze)!==-1&&(this.ctx.lineCap=Ze,this.pdf.setLineCap(Ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ze){isNaN(Ze)||(this.ctx.lineWidth=Ze,this.pdf.setLineWidth(Ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ze){["bevel","round","miter"].indexOf(Ze)!==-1&&(this.ctx.lineJoin=Ze,this.pdf.setLineJoin(Ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ze){isNaN(Ze)||(this.ctx.miterLimit=Ze,this.pdf.setMiterLimit(Ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ze){this.ctx.textBaseline=Ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ze){["right","end","center","left","start"].indexOf(Ze)!==-1&&(this.ctx.textAlign=Ze)}});var si=null;function ai(Ze,Xe){if(si===null){var ui=function(pi){var gi=[];return Object.keys(pi).forEach(function(Li){pi[Li].forEach(function(Ri){var wi=null;switch(Ri){case"bold":wi={family:Li,weight:"bold"};break;case"italic":wi={family:Li,style:"italic"};break;case"bolditalic":wi={family:Li,weight:"bold",style:"italic"};break;case"":case"normal":wi={family:Li}}wi!==null&&(wi.ref={name:Li,style:Ri},gi.push(wi))})}),gi}(Ze.getFontList());si=function(pi){for(var gi={},Li=0;Li<pi.length;++Li){var Ri=jt(pi[Li]),wi=Ri.family,Vi=Ri.stretch,Mi=Ri.style,qi=Ri.weight;gi[wi]=gi[wi]||{},gi[wi][Vi]=gi[wi][Vi]||{},gi[wi][Vi][Mi]=gi[wi][Vi][Mi]||{},gi[wi][Vi][Mi][qi]=Ri}return gi}(ui.concat(Xe))}return si}var Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(Ze){si=null,Ye=Ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ze){var Xe;if(this.ctx.font=Ze,(Xe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ze))!==null){var ui=Xe[1],pi=(Xe[2],Xe[3]),gi=Xe[4],Li=(Xe[5],Xe[6]),Ri=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(gi)[2];gi=Math.floor(Ri==="px"?parseFloat(gi)*this.pdf.internal.scaleFactor:Ri==="em"?parseFloat(gi)*this.pdf.getFontSize():parseFloat(gi)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(gi);var wi=function(Ki){var cn,rn,xn=[],Sn=Ki.trim();if(Sn==="")return Wt;if(Sn in Mt)return[Mt[Sn]];for(;Sn!=="";){switch(rn=null,cn=(Sn=Dt(Sn)).charAt(0)){case'"':case"'":rn=Rt(Sn.substring(1),cn);break;default:rn=Tt(Sn)}if(rn===null||(xn.push(rn[0]),(Sn=Dt(rn[1]))!==""&&Sn.charAt(0)!==","))return Wt;Sn=Sn.replace(/^,/,"")}return xn}(Li);if(this.fontFaces){var Vi=qt(ai(this.pdf,this.fontFaces),wi.map(function(Ki){return{family:Ki,stretch:"normal",weight:pi,style:ui}}));this.pdf.setFont(Vi.ref.name,Vi.ref.style)}else{var Mi="";(pi==="bold"||parseInt(pi,10)>=700||ui==="bold")&&(Mi="bold"),ui==="italic"&&(Mi+="italic"),Mi.length===0&&(Mi="normal");for(var qi="",Xi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Zi=0;Zi<wi.length;Zi++){if(this.pdf.internal.getFont(wi[Zi],Mi,{noFallback:!0,disableWarning:!0})!==void 0){qi=wi[Zi];break}if(Mi==="bolditalic"&&this.pdf.internal.getFont(wi[Zi],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qi=wi[Zi],Mi="bold";else if(this.pdf.internal.getFont(wi[Zi],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qi=wi[Zi],Mi="normal";break}}if(qi===""){for(var ji=0;ji<wi.length;ji++)if(Xi[wi[ji]]){qi=Xi[wi[ji]];break}}qi=qi===""?"Times":qi,this.pdf.setFont(qi,Mi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ze){this.ctx.globalCompositeOperation=Ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ze){this.ctx.globalAlpha=Ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ze){this.ctx.lineDashOffset=Ze,Ci.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ze){this.ctx.lineDash=Ze,Ci.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ze){this.ctx.ignoreClearRect=Boolean(Ze)}})};Ae.prototype.setLineDash=function($e){this.lineDash=$e},Ae.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ae.prototype.fill=function(){He.call(this,"fill",!1)},Ae.prototype.stroke=function(){He.call(this,"stroke",!1)},Ae.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ae.prototype.moveTo=function($e,Ge){if(isNaN($e)||isNaN(Ge))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ze=this.ctx.transform.applyToPoint(new Fe($e,Ge));this.path.push({type:"mt",x:ze.x,y:ze.y}),this.ctx.lastPoint=new Fe($e,Ge)},Ae.prototype.closePath=function(){var $e=new Fe(0,0),Ge=0;for(Ge=this.path.length-1;Ge!==-1;Ge--)if(this.path[Ge].type==="begin"&&_typeof(this.path[Ge+1])==="object"&&typeof this.path[Ge+1].x=="number"){$e=new Fe(this.path[Ge+1].x,this.path[Ge+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Fe($e.x,$e.y)},Ae.prototype.lineTo=function($e,Ge){if(isNaN($e)||isNaN(Ge))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ze=this.ctx.transform.applyToPoint(new Fe($e,Ge));this.path.push({type:"lt",x:ze.x,y:ze.y}),this.ctx.lastPoint=new Fe(ze.x,ze.y)},Ae.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),He.call(this,null,!0)},Ae.prototype.quadraticCurveTo=function($e,Ge,ze,qe){if(isNaN(ze)||isNaN(qe)||isNaN($e)||isNaN(Ge))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ei=this.ctx.transform.applyToPoint(new Fe(ze,qe)),ni=this.ctx.transform.applyToPoint(new Fe($e,Ge));this.path.push({type:"qct",x1:ni.x,y1:ni.y,x:ei.x,y:ei.y}),this.ctx.lastPoint=new Fe(ei.x,ei.y)},Ae.prototype.bezierCurveTo=function($e,Ge,ze,qe,ei,ni){if(isNaN(ei)||isNaN(ni)||isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ci=this.ctx.transform.applyToPoint(new Fe(ei,ni)),di=this.ctx.transform.applyToPoint(new Fe($e,Ge)),Ti=this.ctx.transform.applyToPoint(new Fe(ze,qe));this.path.push({type:"bct",x1:di.x,y1:di.y,x2:Ti.x,y2:Ti.y,x:ci.x,y:ci.y}),this.ctx.lastPoint=new Fe(ci.x,ci.y)},Ae.prototype.arc=function($e,Ge,ze,qe,ei,ni){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe)||isNaN(ei))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ni=Boolean(ni),!this.ctx.transform.isIdentity){var ci=this.ctx.transform.applyToPoint(new Fe($e,Ge));$e=ci.x,Ge=ci.y;var di=this.ctx.transform.applyToPoint(new Fe(0,ze)),Ti=this.ctx.transform.applyToPoint(new Fe(0,0));ze=Math.sqrt(Math.pow(di.x-Ti.x,2)+Math.pow(di.y-Ti.y,2))}Math.abs(ei-qe)>=2*Math.PI&&(qe=0,ei=2*Math.PI),this.path.push({type:"arc",x:$e,y:Ge,radius:ze,startAngle:qe,endAngle:ei,counterclockwise:ni})},Ae.prototype.arcTo=function($e,Ge,ze,qe,ei){throw new Error("arcTo not implemented.")},Ae.prototype.rect=function($e,Ge,ze,qe){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($e,Ge),this.lineTo($e+ze,Ge),this.lineTo($e+ze,Ge+qe),this.lineTo($e,Ge+qe),this.lineTo($e,Ge),this.lineTo($e+ze,Ge),this.lineTo($e,Ge)},Ae.prototype.fillRect=function($e,Ge,ze,qe){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!St.call(this)){var ei={};this.lineCap!=="butt"&&(ei.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ei.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($e,Ge,ze,qe),this.fill(),ei.hasOwnProperty("lineCap")&&(this.lineCap=ei.lineCap),ei.hasOwnProperty("lineJoin")&&(this.lineJoin=ei.lineJoin)}},Ae.prototype.strokeRect=function($e,Ge,ze,qe){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Te.call(this)||(this.beginPath(),this.rect($e,Ge,ze,qe),this.stroke())},Ae.prototype.clearRect=function($e,Ge,ze,qe){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($e,Ge,ze,qe))},Ae.prototype.save=function($e){$e=typeof $e!="boolean"||$e;for(var Ge=this.pdf.internal.getCurrentPageInfo().pageNumber,ze=0;ze<this.pdf.internal.getNumberOfPages();ze++)this.pdf.setPage(ze+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ge),$e){this.ctx.fontSize=this.pdf.internal.getFontSize();var qe=new Pe(this.ctx);this.ctxStack.push(this.ctx),this.ctx=qe}},Ae.prototype.restore=function($e){$e=typeof $e!="boolean"||$e;for(var Ge=this.pdf.internal.getCurrentPageInfo().pageNumber,ze=0;ze<this.pdf.internal.getNumberOfPages();ze++)this.pdf.setPage(ze+1),this.pdf.internal.out("Q");this.pdf.setPage(Ge),$e&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ae.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Se=function($e){var Ge,ze,qe,ei;if($e.isCanvasGradient===!0&&($e=$e.getColor()),!$e)return{r:0,g:0,b:0,a:0,style:$e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($e))Ge=0,ze=0,qe=0,ei=0;else{var ni=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($e);if(ni!==null)Ge=parseInt(ni[1]),ze=parseInt(ni[2]),qe=parseInt(ni[3]),ei=1;else if((ni=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($e))!==null)Ge=parseInt(ni[1]),ze=parseInt(ni[2]),qe=parseInt(ni[3]),ei=parseFloat(ni[4]);else{if(ei=1,typeof $e=="string"&&$e.charAt(0)!=="#"){var ci=new f($e);$e=ci.ok?ci.toHex():"#000000"}$e.length===4?(Ge=$e.substring(1,2),Ge+=Ge,ze=$e.substring(2,3),ze+=ze,qe=$e.substring(3,4),qe+=qe):(Ge=$e.substring(1,3),ze=$e.substring(3,5),qe=$e.substring(5,7)),Ge=parseInt(Ge,16),ze=parseInt(ze,16),qe=parseInt(qe,16)}}return{r:Ge,g:ze,b:qe,a:ei,style:$e}},St=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Te=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ae.prototype.fillText=function($e,Ge,ze,qe){if(isNaN(Ge)||isNaN(ze)||typeof $e!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(qe=isNaN(qe)?void 0:qe,!St.call(this)){var ei=Ei(this.ctx.transform.rotation),ni=this.ctx.transform.scaleX;li.call(this,{text:$e,x:Ge,y:ze,scale:ni,angle:ei,align:this.textAlign,maxWidth:qe})}},Ae.prototype.strokeText=function($e,Ge,ze,qe){if(isNaN(Ge)||isNaN(ze)||typeof $e!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Te.call(this)){qe=isNaN(qe)?void 0:qe;var ei=Ei(this.ctx.transform.rotation),ni=this.ctx.transform.scaleX;li.call(this,{text:$e,x:Ge,y:ze,scale:ni,renderingMode:"stroke",angle:ei,align:this.textAlign,maxWidth:qe})}},Ae.prototype.measureText=function($e){if(typeof $e!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ge=this.pdf,ze=this.pdf.internal.scaleFactor,qe=Ge.internal.getFontSize(),ei=Ge.getStringUnitWidth($e)*qe/Ge.internal.scaleFactor,ni=function(ci){var di=(ci=ci||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return di}}),this};return new ni({width:ei*=Math.round(96*ze/72*1e4)/1e4})},Ae.prototype.scale=function($e,Ge){if(isNaN($e)||isNaN(Ge))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ze=new _e($e,0,0,Ge,0,0);this.ctx.transform=this.ctx.transform.multiply(ze)},Ae.prototype.rotate=function($e){if(isNaN($e))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ge=new _e(Math.cos($e),Math.sin($e),-Math.sin($e),Math.cos($e),0,0);this.ctx.transform=this.ctx.transform.multiply(Ge)},Ae.prototype.translate=function($e,Ge){if(isNaN($e)||isNaN(Ge))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ze=new _e(1,0,0,1,$e,Ge);this.ctx.transform=this.ctx.transform.multiply(ze)},Ae.prototype.transform=function($e,Ge,ze,qe,ei,ni){if(isNaN($e)||isNaN(Ge)||isNaN(ze)||isNaN(qe)||isNaN(ei)||isNaN(ni))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ci=new _e($e,Ge,ze,qe,ei,ni);this.ctx.transform=this.ctx.transform.multiply(ci)},Ae.prototype.setTransform=function($e,Ge,ze,qe,ei,ni){$e=isNaN($e)?1:$e,Ge=isNaN(Ge)?0:Ge,ze=isNaN(ze)?0:ze,qe=isNaN(qe)?1:qe,ei=isNaN(ei)?0:ei,ni=isNaN(ni)?0:ni,this.ctx.transform=new _e($e,Ge,ze,qe,ei,ni)};var Re=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ae.prototype.drawImage=function($e,Ge,ze,qe,ei,ni,ci,di,Ti){var Ni=this.pdf.getImageProperties($e),si=1,ai=1,Ye=1,Ze=1;qe!==void 0&&di!==void 0&&(Ye=di/qe,Ze=Ti/ei,si=Ni.width/qe*di/qe,ai=Ni.height/ei*Ti/ei),ni===void 0&&(ni=Ge,ci=ze,Ge=0,ze=0),qe!==void 0&&di===void 0&&(di=qe,Ti=ei),qe===void 0&&di===void 0&&(di=Ni.width,Ti=Ni.height);for(var Xe,ui=this.ctx.transform.decompose(),pi=Ei(ui.rotate.shx),gi=new _e,Li=(gi=(gi=(gi=gi.multiply(ui.translate)).multiply(ui.skew)).multiply(ui.scale)).applyToRectangle(new Oe(ni-Ge*Ye,ci-ze*Ze,qe*si,ei*ai)),Ri=Ee.call(this,Li),wi=[],Vi=0;Vi<Ri.length;Vi+=1)wi.indexOf(Ri[Vi])===-1&&wi.push(Ri[Vi]);if(Be(wi),this.autoPaging)for(var Mi=wi[0],qi=wi[wi.length-1],Xi=Mi;Xi<qi+1;Xi++){this.pdf.setPage(Xi);var Zi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ji=Xi===1?this.posY+this.margin[0]:this.margin[0],Ki=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rn=Xi===1?0:Ki+(Xi-2)*cn;if(this.ctx.clip_path.length!==0){var xn=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(Xe,this.posX+this.margin[3],-rn+ji+this.ctx.prevPageLastElemOffset),Ue.call(this,"fill",!0),this.path=xn}var Sn=JSON.parse(JSON.stringify(Li));Sn=De([Sn],this.posX+this.margin[3],-rn+ji+this.ctx.prevPageLastElemOffset)[0];var Tn=(Xi>Mi||Xi<qi)&&Re.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zi,cn,null).clip().discardPath()),this.pdf.addImage($e,"JPEG",Sn.x,Sn.y,Sn.w,Sn.h,null,null,pi),Tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($e,"JPEG",Li.x,Li.y,Li.w,Li.h,null,null,pi)};var Ee=function($e,Ge,ze){var qe=[];Ge=Ge||this.pdf.internal.pageSize.width,ze=ze||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ei=this.posY+this.ctx.prevPageLastElemOffset;switch($e.type){default:case"mt":case"lt":qe.push(Math.floor(($e.y+ei)/ze)+1);break;case"arc":qe.push(Math.floor(($e.y+ei-$e.radius)/ze)+1),qe.push(Math.floor(($e.y+ei+$e.radius)/ze)+1);break;case"qct":var ni=ri(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$e.x1,$e.y1,$e.x,$e.y);qe.push(Math.floor((ni.y+ei)/ze)+1),qe.push(Math.floor((ni.y+ni.h+ei)/ze)+1);break;case"bct":var ci=vi(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$e.x1,$e.y1,$e.x2,$e.y2,$e.x,$e.y);qe.push(Math.floor((ci.y+ei)/ze)+1),qe.push(Math.floor((ci.y+ci.h+ei)/ze)+1);break;case"rect":qe.push(Math.floor(($e.y+ei)/ze)+1),qe.push(Math.floor(($e.y+$e.h+ei)/ze)+1)}for(var di=0;di<qe.length;di+=1)for(;this.pdf.internal.getNumberOfPages()<qe[di];)ke.call(this);return qe},ke=function(){var $e=this.fillStyle,Ge=this.strokeStyle,ze=this.font,qe=this.lineCap,ei=this.lineWidth,ni=this.lineJoin;this.pdf.addPage(),this.fillStyle=$e,this.strokeStyle=Ge,this.font=ze,this.lineCap=qe,this.lineWidth=ei,this.lineJoin=ni},De=function($e,Ge,ze){for(var qe=0;qe<$e.length;qe++)switch($e[qe].type){case"bct":$e[qe].x2+=Ge,$e[qe].y2+=ze;case"qct":$e[qe].x1+=Ge,$e[qe].y1+=ze;case"mt":case"lt":case"arc":default:$e[qe].x+=Ge,$e[qe].y+=ze}return $e},Be=function($e){return $e.sort(function(Ge,ze){return Ge-ze})},He=function($e,Ge){for(var ze,qe,ei=this.fillStyle,ni=this.strokeStyle,ci=this.lineCap,di=this.lineWidth,Ti=Math.abs(di*this.ctx.transform.scaleX),Ni=this.lineJoin,si=JSON.parse(JSON.stringify(this.path)),ai=JSON.parse(JSON.stringify(this.path)),Ye=[],Ze=0;Ze<ai.length;Ze++)if(ai[Ze].x!==void 0)for(var Xe=Ee.call(this,ai[Ze]),ui=0;ui<Xe.length;ui+=1)Ye.indexOf(Xe[ui])===-1&&Ye.push(Xe[ui]);for(var pi=0;pi<Ye.length;pi++)for(;this.pdf.internal.getNumberOfPages()<Ye[pi];)ke.call(this);if(Be(Ye),this.autoPaging)for(var gi=Ye[0],Li=Ye[Ye.length-1],Ri=gi;Ri<Li+1;Ri++){this.pdf.setPage(Ri),this.fillStyle=ei,this.strokeStyle=ni,this.lineCap=ci,this.lineWidth=Ti,this.lineJoin=Ni;var wi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vi=Ri===1?this.posY+this.margin[0]:this.margin[0],Mi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xi=Ri===1?0:Mi+(Ri-2)*qi;if(this.ctx.clip_path.length!==0){var Zi=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(ze,this.posX+this.margin[3],-Xi+Vi+this.ctx.prevPageLastElemOffset),Ue.call(this,$e,!0),this.path=Zi}if(qe=JSON.parse(JSON.stringify(si)),this.path=De(qe,this.posX+this.margin[3],-Xi+Vi+this.ctx.prevPageLastElemOffset),Ge===!1||Ri===0){var ji=(Ri>gi||Ri<Li)&&Re.call(this);ji&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wi,qi,null).clip().discardPath()),Ue.call(this,$e,Ge),ji&&this.pdf.restoreGraphicsState()}this.lineWidth=di}else this.lineWidth=Ti,Ue.call(this,$e,Ge),this.lineWidth=di;this.path=si},Ue=function($e,Ge){if(($e!=="stroke"||Ge||!Te.call(this))&&($e==="stroke"||Ge||!St.call(this))){for(var ze,qe,ei=[],ni=this.path,ci=0;ci<ni.length;ci++){var di=ni[ci];switch(di.type){case"begin":ei.push({begin:!0});break;case"close":ei.push({close:!0});break;case"mt":ei.push({start:di,deltas:[],abs:[]});break;case"lt":var Ti=ei.length;if(ni[ci-1]&&!isNaN(ni[ci-1].x)&&(ze=[di.x-ni[ci-1].x,di.y-ni[ci-1].y],Ti>0)){for(;Ti>=0;Ti--)if(ei[Ti-1].close!==!0&&ei[Ti-1].begin!==!0){ei[Ti-1].deltas.push(ze),ei[Ti-1].abs.push(di);break}}break;case"bct":ze=[di.x1-ni[ci-1].x,di.y1-ni[ci-1].y,di.x2-ni[ci-1].x,di.y2-ni[ci-1].y,di.x-ni[ci-1].x,di.y-ni[ci-1].y],ei[ei.length-1].deltas.push(ze);break;case"qct":var Ni=ni[ci-1].x+2/3*(di.x1-ni[ci-1].x),si=ni[ci-1].y+2/3*(di.y1-ni[ci-1].y),ai=di.x+2/3*(di.x1-di.x),Ye=di.y+2/3*(di.y1-di.y),Ze=di.x,Xe=di.y;ze=[Ni-ni[ci-1].x,si-ni[ci-1].y,ai-ni[ci-1].x,Ye-ni[ci-1].y,Ze-ni[ci-1].x,Xe-ni[ci-1].y],ei[ei.length-1].deltas.push(ze);break;case"arc":ei.push({deltas:[],abs:[],arc:!0}),Array.isArray(ei[ei.length-1].abs)&&ei[ei.length-1].abs.push(di)}}qe=Ge?null:$e==="stroke"?"stroke":"fill";for(var ui=!1,pi=0;pi<ei.length;pi++)if(ei[pi].arc)for(var gi=ei[pi].abs,Li=0;Li<gi.length;Li++){var Ri=gi[Li];Ri.type==="arc"?Qe.call(this,Ri.x,Ri.y,Ri.radius,Ri.startAngle,Ri.endAngle,Ri.counterclockwise,void 0,Ge,!ui):bi.call(this,Ri.x,Ri.y),ui=!0}else if(ei[pi].close===!0)this.pdf.internal.out("h"),ui=!1;else if(ei[pi].begin!==!0){var wi=ei[pi].start.x,Vi=ei[pi].start.y;mi.call(this,ei[pi].deltas,wi,Vi),ui=!0}qe&&fi.call(this,qe),Ge&&oi.call(this)}},We=function($e){var Ge=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ze=Ge*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $e-ze;case"top":return $e+Ge-ze;case"hanging":return $e+Ge-2*ze;case"middle":return $e+Ge/2-ze;case"ideographic":return $e;case"alphabetic":default:return $e}},Je=function($e){return $e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ae.prototype.createLinearGradient=function(){var $e=function(){};return $e.colorStops=[],$e.addColorStop=function(Ge,ze){this.colorStops.push([Ge,ze])},$e.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$e.isCanvasGradient=!0,$e},Ae.prototype.createPattern=function(){return this.createLinearGradient()},Ae.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Qe=function($e,Ge,ze,qe,ei,ni,ci,di,Ti){for(var Ni=_i.call(this,ze,qe,ei,ni),si=0;si<Ni.length;si++){var ai=Ni[si];si===0&&(Ti?ii.call(this,ai.x1+$e,ai.y1+Ge):bi.call(this,ai.x1+$e,ai.y1+Ge)),Si.call(this,$e,Ge,ai.x2,ai.y2,ai.x3,ai.y3,ai.x4,ai.y4)}di?oi.call(this):fi.call(this,ci)},fi=function($e){switch($e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},oi=function(){this.pdf.clip(),this.pdf.discardPath()},ii=function($e,Ge){this.pdf.internal.out(r($e)+" "+Ce(Ge)+" m")},li=function($e){var Ge;switch($e.align){case"right":case"end":Ge="right";break;case"center":Ge="center";break;case"left":case"start":default:Ge="left"}var ze=this.pdf.getTextDimensions($e.text),qe=We.call(this,$e.y),ei=Je.call(this,qe)-ze.h,ni=this.ctx.transform.applyToPoint(new Fe($e.x,qe)),ci=this.ctx.transform.decompose(),di=new _e;di=(di=(di=di.multiply(ci.translate)).multiply(ci.skew)).multiply(ci.scale);for(var Ti,Ni,si,ai=this.ctx.transform.applyToRectangle(new Oe($e.x,qe,ze.w,ze.h)),Ye=di.applyToRectangle(new Oe($e.x,ei,ze.w,ze.h)),Ze=Ee.call(this,Ye),Xe=[],ui=0;ui<Ze.length;ui+=1)Xe.indexOf(Ze[ui])===-1&&Xe.push(Ze[ui]);if(Be(Xe),this.autoPaging)for(var pi=Xe[0],gi=Xe[Xe.length-1],Li=pi;Li<gi+1;Li++){this.pdf.setPage(Li);var Ri=Li===1?this.posY+this.margin[0]:this.margin[0],wi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vi=this.pdf.internal.pageSize.height-this.margin[2],Mi=Vi-this.margin[0],qi=this.pdf.internal.pageSize.width-this.margin[1],Xi=qi-this.margin[3],Zi=Li===1?0:wi+(Li-2)*Mi;if(this.ctx.clip_path.length!==0){var ji=this.path;Ti=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(Ti,this.posX+this.margin[3],-1*Zi+Ri),Ue.call(this,"fill",!0),this.path=ji}var Ki=De([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-Zi+Ri+this.ctx.prevPageLastElemOffset)[0];$e.scale>=.01&&(Ni=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ni*$e.scale),si=this.lineWidth,this.lineWidth=si*$e.scale);var cn=this.autoPaging!=="text";if(cn||Ki.y+Ki.h<=Vi){if(cn||Ki.y>=Ri&&Ki.x<=qi){var rn=cn?$e.text:this.pdf.splitTextToSize($e.text,$e.maxWidth||qi-Ki.x)[0],xn=De([JSON.parse(JSON.stringify(ai))],this.posX+this.margin[3],-Zi+Ri+this.ctx.prevPageLastElemOffset)[0],Sn=cn&&(Li>pi||Li<gi)&&Re.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xi,Mi,null).clip().discardPath()),this.pdf.text(rn,xn.x,xn.y,{angle:$e.angle,align:Ge,renderingMode:$e.renderingMode}),Sn&&this.pdf.restoreGraphicsState()}}else Ki.y<Vi&&(this.ctx.prevPageLastElemOffset+=Vi-Ki.y);$e.scale>=.01&&(this.pdf.setFontSize(Ni),this.lineWidth=si)}else $e.scale>=.01&&(Ni=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ni*$e.scale),si=this.lineWidth,this.lineWidth=si*$e.scale),this.pdf.text($e.text,ni.x+this.posX,ni.y+this.posY,{angle:$e.angle,align:Ge,renderingMode:$e.renderingMode,maxWidth:$e.maxWidth}),$e.scale>=.01&&(this.pdf.setFontSize(Ni),this.lineWidth=si)},bi=function($e,Ge,ze,qe){ze=ze||0,qe=qe||0,this.pdf.internal.out(r($e+ze)+" "+Ce(Ge+qe)+" l")},mi=function($e,Ge,ze){return this.pdf.lines($e,Ge,ze,null,null)},Si=function($e,Ge,ze,qe,ei,ni,ci,di){this.pdf.internal.out([t(Me(ze+$e)),t(Ie(qe+Ge)),t(Me(ei+$e)),t(Ie(ni+Ge)),t(Me(ci+$e)),t(Ie(di+Ge)),"c"].join(" "))},_i=function($e,Ge,ze,qe){for(var ei=2*Math.PI,ni=Math.PI/2;Ge>ze;)Ge-=ei;var ci=Math.abs(ze-Ge);ci<ei&&qe&&(ci=ei-ci);for(var di=[],Ti=qe?-1:1,Ni=Ge;ci>1e-5;){var si=Ni+Ti*Math.min(ci,ni);di.push(xi.call(this,$e,Ni,si)),ci-=Math.abs(si-Ni),Ni=si}return di},xi=function($e,Ge,ze){var qe=(ze-Ge)/2,ei=$e*Math.cos(qe),ni=$e*Math.sin(qe),ci=ei,di=-ni,Ti=ci*ci+di*di,Ni=Ti+ci*ei+di*ni,si=4/3*(Math.sqrt(2*Ti*Ni)-Ni)/(ci*ni-di*ei),ai=ci-si*di,Ye=di+si*ci,Ze=ai,Xe=-Ye,ui=qe+Ge,pi=Math.cos(ui),gi=Math.sin(ui);return{x1:$e*Math.cos(Ge),y1:$e*Math.sin(Ge),x2:ai*pi-Ye*gi,y2:ai*gi+Ye*pi,x3:Ze*pi-Xe*gi,y3:Ze*gi+Xe*pi,x4:$e*Math.cos(ze),y4:$e*Math.sin(ze)}},Ei=function($e){return 180*$e/Math.PI},ri=function($e,Ge,ze,qe,ei,ni){var ci=$e+.5*(ze-$e),di=Ge+.5*(qe-Ge),Ti=ei+.5*(ze-ei),Ni=ni+.5*(qe-ni),si=Math.min($e,ei,ci,Ti),ai=Math.max($e,ei,ci,Ti),Ye=Math.min(Ge,ni,di,Ni),Ze=Math.max(Ge,ni,di,Ni);return new Oe(si,Ye,ai-si,Ze-Ye)},vi=function($e,Ge,ze,qe,ei,ni,ci,di){var Ti,Ni,si,ai,Ye,Ze,Xe,ui,pi,gi,Li,Ri,wi,Vi,Mi=ze-$e,qi=qe-Ge,Xi=ei-ze,Zi=ni-qe,ji=ci-ei,Ki=di-ni;for(Ni=0;Ni<41;Ni++)pi=(Xe=(si=$e+(Ti=Ni/40)*Mi)+Ti*((Ye=ze+Ti*Xi)-si))+Ti*(Ye+Ti*(ei+Ti*ji-Ye)-Xe),gi=(ui=(ai=Ge+Ti*qi)+Ti*((Ze=qe+Ti*Zi)-ai))+Ti*(Ze+Ti*(ni+Ti*Ki-Ze)-ui),Ni==0?(Li=pi,Ri=gi,wi=pi,Vi=gi):(Li=Math.min(Li,pi),Ri=Math.min(Ri,gi),wi=Math.max(wi,pi),Vi=Math.max(Vi,gi));return new Oe(Math.round(Li),Math.round(Ri),Math.round(wi-Li),Math.round(Vi-Ri))},Ci=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $e,Ge,ze=($e=this.ctx.lineDash,Ge=this.ctx.lineDashOffset,JSON.stringify({lineDash:$e,lineDashOffset:Ge}));this.prevLineDash!==ze&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ze)}}})(E.API),function(e){var t=function(Ie){var Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re;for(/[^\x00-\xFF]/.test(Ie),Oe=[],_e=0,xe=(Ie+=Fe="\0\0\0\0".slice(Ie.length%4||4)).length;xe>_e;_e+=4)(Pe=(Ie.charCodeAt(_e)<<24)+(Ie.charCodeAt(_e+1)<<16)+(Ie.charCodeAt(_e+2)<<8)+Ie.charCodeAt(_e+3))!==0?(Ae=(Pe=((Pe=((Pe=((Pe=(Pe-(Re=Pe%85))/85)-(Te=Pe%85))/85)-(St=Pe%85))/85)-(Se=Pe%85))/85)%85,Oe.push(Ae+33,Se+33,St+33,Te+33,Re+33)):Oe.push(122);return function(Ee,ke){for(var De=ke;De>0;De--)Ee.pop()}(Oe,Fe.length),String.fromCharCode.apply(String,Oe)+"~>"},r=function(Ie){var Fe,Oe,_e,xe,Pe,Ae=String,Se="length",St=255,Te="charCodeAt",Re="slice",Ee="replace";for(Ie[Re](-2),Ie=Ie[Re](0,-2)[Ee](/\s/g,"")[Ee]("z","!!!!!"),_e=[],xe=0,Pe=(Ie+=Fe="uuuuu"[Re](Ie[Se]%5||5))[Se];Pe>xe;xe+=5)Oe=52200625*(Ie[Te](xe)-33)+614125*(Ie[Te](xe+1)-33)+7225*(Ie[Te](xe+2)-33)+85*(Ie[Te](xe+3)-33)+(Ie[Te](xe+4)-33),_e.push(St&Oe>>24,St&Oe>>16,St&Oe>>8,St&Oe);return function(ke,De){for(var Be=De;Be>0;Be--)ke.pop()}(_e,Fe[Se]),Ae.fromCharCode.apply(Ae,_e)},Ce=function(Ie){var Fe=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ie=Ie.replace(/\s/g,"")).indexOf(">")!==-1&&(Ie=Ie.substr(0,Ie.indexOf(">"))),Ie.length%2&&(Ie+="0"),Fe.test(Ie)===!1)return"";for(var Oe="",_e=0;_e<Ie.length;_e+=2)Oe+=String.fromCharCode("0x"+(Ie[_e]+Ie[_e+1]));return Oe},Me=function(Ie){for(var Fe=new Uint8Array(Ie.length),Oe=Ie.length;Oe--;)Fe[Oe]=Ie.charCodeAt(Oe);return Ie=(Fe=zlibSync(Fe)).reduce(function(_e,xe){return _e+String.fromCharCode(xe)},"")};e.processDataByFilters=function(Ie,Fe){var Oe=0,_e=Ie||"",xe=[];for(typeof(Fe=Fe||[])=="string"&&(Fe=[Fe]),Oe=0;Oe<Fe.length;Oe+=1)switch(Fe[Oe]){case"ASCII85Decode":case"/ASCII85Decode":_e=r(_e),xe.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":_e=t(_e),xe.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":_e=Ce(_e),xe.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":_e=_e.split("").map(function(Pe){return("0"+Pe.charCodeAt().toString(16)).slice(-2)}).join("")+">",xe.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":_e=Me(_e),xe.push("/FlateDecode");break;default:throw new Error('The filter: "'+Fe[Oe]+'" is not implemented')}return{data:_e,reverseChain:xe.reverse().join(" ")}}}(E.API),function(e){e.loadFile=function(t,r,Ce){return function(Me,Ie,Fe){Ie=Ie!==!1,Fe=typeof Fe=="function"?Fe:function(){};var Oe=void 0;try{Oe=function(_e,xe,Pe){var Ae=new XMLHttpRequest,Se=0,St=function(Te){var Re=Te.length,Ee=[],ke=String.fromCharCode;for(Se=0;Se<Re;Se+=1)Ee.push(ke(255&Te.charCodeAt(Se)));return Ee.join("")};if(Ae.open("GET",_e,!xe),Ae.overrideMimeType("text/plain; charset=x-user-defined"),xe===!1&&(Ae.onload=function(){Ae.status===200?Pe(St(this.responseText)):Pe(void 0)}),Ae.send(null),xe&&Ae.status===200)return St(Ae.responseText)}(Me,Ie,Fe)}catch{}return Oe}(t,r,Ce)},e.loadImageFile=e.loadFile}(E.API),function(e){function t(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm.0eae2bf4.js"),[])).catch(function(Fe){return Promise.reject(new Error("Could not load html2canvas: "+Fe))}).then(function(Fe){return Fe.default?Fe.default:Fe})}function r(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es.b8146866.js"),[])).catch(function(Fe){return Promise.reject(new Error("Could not load dompurify: "+Fe))}).then(function(Fe){return Fe.default?Fe.default:Fe})}var Ce=function(Fe){var Oe=_typeof(Fe);return Oe==="undefined"?"undefined":Oe==="string"||Fe instanceof String?"string":Oe==="number"||Fe instanceof Number?"number":Oe==="function"||Fe instanceof Function?"function":Fe&&Fe.constructor===Array?"array":Fe&&Fe.nodeType===1?"element":Oe==="object"?"object":"unknown"},Me=function(Fe,Oe){var _e=document.createElement(Fe);for(var xe in Oe.className&&(_e.className=Oe.className),Oe.innerHTML&&Oe.dompurify&&(_e.innerHTML=Oe.dompurify.sanitize(Oe.innerHTML)),Oe.style)_e.style[xe]=Oe.style[xe];return _e},Ie=function Fe(Oe){var _e=Object.assign(Fe.convert(Promise.resolve()),JSON.parse(JSON.stringify(Fe.template))),xe=Fe.convert(Promise.resolve(),_e);return xe=(xe=xe.setProgress(1,Fe,1,[Fe])).set(Oe)};(Ie.prototype=Object.create(Promise.prototype)).constructor=Ie,Ie.convert=function(Fe,Oe){return Fe.__proto__=Oe||Ie.prototype,Fe},Ie.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ie.prototype.from=function(Fe,Oe){return this.then(function(){switch(Oe=Oe||function(_e){switch(Ce(_e)){case"string":return"string";case"element":return _e.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Fe)){case"string":return this.then(r).then(function(_e){return this.set({src:Me("div",{innerHTML:Fe,dompurify:_e})})});case"element":return this.set({src:Fe});case"canvas":return this.set({canvas:Fe});case"img":return this.set({img:Fe});default:return this.error("Unknown source type.")}})},Ie.prototype.to=function(Fe){switch(Fe){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ie.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Fe={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Oe=function _e(xe,Pe){for(var Ae=xe.nodeType===3?document.createTextNode(xe.nodeValue):xe.cloneNode(!1),Se=xe.firstChild;Se;Se=Se.nextSibling)Pe!==!0&&Se.nodeType===1&&Se.nodeName==="SCRIPT"||Ae.appendChild(_e(Se,Pe));return xe.nodeType===1&&(xe.nodeName==="CANVAS"?(Ae.width=xe.width,Ae.height=xe.height,Ae.getContext("2d").drawImage(xe,0,0)):xe.nodeName!=="TEXTAREA"&&xe.nodeName!=="SELECT"||(Ae.value=xe.value),Ae.addEventListener("load",function(){Ae.scrollTop=xe.scrollTop,Ae.scrollLeft=xe.scrollLeft},!0)),Ae}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Oe.tagName==="BODY"&&(Fe.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Me("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Me("div",{className:"html2pdf__container",style:Fe}),this.prop.container.appendChild(Oe),this.prop.container.firstChild.appendChild(Me("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ie.prototype.toCanvas=function(){var Fe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Fe).then(t).then(function(Oe){var _e=Object.assign({},this.opt.html2canvas);return delete _e.onrendered,Oe(this.prop.container,_e)}).then(function(Oe){(this.opt.html2canvas.onrendered||function(){})(Oe),this.prop.canvas=Oe,document.body.removeChild(this.prop.overlay)})},Ie.prototype.toContext2d=function(){var Fe=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Fe).then(t).then(function(Oe){var _e=this.opt.jsPDF,xe=this.opt.fontFaces,Pe=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ae=Object.assign({async:!0,allowTaint:!0,scale:Pe,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ae.onrendered,_e.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,_e.context2d.posX=this.opt.x,_e.context2d.posY=this.opt.y,_e.context2d.margin=this.opt.margin,_e.context2d.fontFaces=xe,xe)for(var Se=0;Se<xe.length;++Se){var St=xe[Se],Te=St.src.find(function(Re){return Re.format==="truetype"});Te&&_e.addFont(Te.url,St.ref.name,St.ref.style)}return Ae.windowHeight=Ae.windowHeight||0,Ae.windowHeight=Ae.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ae.windowHeight,_e.context2d.save(!0),Oe(this.prop.container,Ae)}).then(function(Oe){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Oe),this.prop.canvas=Oe,document.body.removeChild(this.prop.overlay)})},Ie.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Fe=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Fe})},Ie.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ie.prototype.output=function(Fe,Oe,_e){return(_e=_e||"pdf").toLowerCase()==="img"||_e.toLowerCase()==="image"?this.outputImg(Fe,Oe):this.outputPdf(Fe,Oe)},Ie.prototype.outputPdf=function(Fe,Oe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Fe,Oe)})},Ie.prototype.outputImg=function(Fe){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Fe){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Fe+'" is not supported.'}})},Ie.prototype.save=function(Fe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Fe?{filename:Fe}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ie.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ie.prototype.set=function(Fe){if(Ce(Fe)!=="object")return this;var Oe=Object.keys(Fe||{}).map(function(_e){if(_e in Ie.template.prop)return function(){this.prop[_e]=Fe[_e]};switch(_e){case"margin":return this.setMargin.bind(this,Fe.margin);case"jsPDF":return function(){return this.opt.jsPDF=Fe.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Fe.pageSize);default:return function(){this.opt[_e]=Fe[_e]}}},this);return this.then(function(){return this.thenList(Oe)})},Ie.prototype.get=function(Fe,Oe){return this.then(function(){var _e=Fe in Ie.template.prop?this.prop[Fe]:this.opt[Fe];return Oe?Oe(_e):_e})},Ie.prototype.setMargin=function(Fe){return this.then(function(){switch(Ce(Fe)){case"number":Fe=[Fe,Fe,Fe,Fe];case"array":if(Fe.length===2&&(Fe=[Fe[0],Fe[1],Fe[0],Fe[1]]),Fe.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Fe}).then(this.setPageSize)},Ie.prototype.setPageSize=function(Fe){function Oe(_e,xe){return Math.floor(_e*xe/72*96)}return this.then(function(){(Fe=Fe||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Fe.inner={width:Fe.width-this.opt.margin[1]-this.opt.margin[3],height:Fe.height-this.opt.margin[0]-this.opt.margin[2]},Fe.inner.px={width:Oe(Fe.inner.width,Fe.k),height:Oe(Fe.inner.height,Fe.k)},Fe.inner.ratio=Fe.inner.height/Fe.inner.width),this.prop.pageSize=Fe})},Ie.prototype.setProgress=function(Fe,Oe,_e,xe){return Fe!=null&&(this.progress.val=Fe),Oe!=null&&(this.progress.state=Oe),_e!=null&&(this.progress.n=_e),xe!=null&&(this.progress.stack=xe),this.progress.ratio=this.progress.val/this.progress.state,this},Ie.prototype.updateProgress=function(Fe,Oe,_e,xe){return this.setProgress(Fe?this.progress.val+Fe:null,Oe||null,_e?this.progress.n+_e:null,xe?this.progress.stack.concat(xe):null)},Ie.prototype.then=function(Fe,Oe){var _e=this;return this.thenCore(Fe,Oe,function(xe,Pe){return _e.updateProgress(null,null,1,[xe]),Promise.prototype.then.call(this,function(Ae){return _e.updateProgress(null,xe),Ae}).then(xe,Pe).then(function(Ae){return _e.updateProgress(1),Ae})})},Ie.prototype.thenCore=function(Fe,Oe,_e){_e=_e||Promise.prototype.then,Fe&&(Fe=Fe.bind(this)),Oe&&(Oe=Oe.bind(this));var xe=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ie.convert(Object.assign({},this),Promise.prototype),Pe=_e.call(xe,Fe,Oe);return Ie.convert(Pe,this.__proto__)},Ie.prototype.thenExternal=function(Fe,Oe){return Promise.prototype.then.call(this,Fe,Oe)},Ie.prototype.thenList=function(Fe){var Oe=this;return Fe.forEach(function(_e){Oe=Oe.thenCore(_e)}),Oe},Ie.prototype.catch=function(Fe){Fe&&(Fe=Fe.bind(this));var Oe=Promise.prototype.catch.call(this,Fe);return Ie.convert(Oe,this)},Ie.prototype.catchExternal=function(Fe){return Promise.prototype.catch.call(this,Fe)},Ie.prototype.error=function(Fe){return this.then(function(){throw new Error(Fe)})},Ie.prototype.using=Ie.prototype.set,Ie.prototype.saveAs=Ie.prototype.save,Ie.prototype.export=Ie.prototype.output,Ie.prototype.run=Ie.prototype.then,E.getPageSize=function(Fe,Oe,_e){if(_typeof(Fe)==="object"){var xe=Fe;Fe=xe.orientation,Oe=xe.unit||Oe,_e=xe.format||_e}Oe=Oe||"mm",_e=_e||"a4",Fe=(""+(Fe||"P")).toLowerCase();var Pe,Ae=(""+_e).toLowerCase(),Se={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Oe){case"pt":Pe=1;break;case"mm":Pe=72/25.4;break;case"cm":Pe=72/2.54;break;case"in":Pe=72;break;case"px":Pe=.75;break;case"pc":case"em":Pe=12;break;case"ex":Pe=6;break;default:throw"Invalid unit: "+Oe}var St,Te=0,Re=0;if(Se.hasOwnProperty(Ae))Te=Se[Ae][1]/Pe,Re=Se[Ae][0]/Pe;else try{Te=_e[1],Re=_e[0]}catch{throw new Error("Invalid format: "+_e)}if(Fe==="p"||Fe==="portrait")Fe="p",Re>Te&&(St=Re,Re=Te,Te=St);else{if(Fe!=="l"&&Fe!=="landscape")throw"Invalid orientation: "+Fe;Fe="l",Te>Re&&(St=Re,Re=Te,Te=St)}return{width:Re,height:Te,unit:Oe,k:Pe,orientation:Fe}},e.html=function(Fe,Oe){(Oe=Oe||{}).callback=Oe.callback||function(){},Oe.html2canvas=Oe.html2canvas||{},Oe.html2canvas.canvas=Oe.html2canvas.canvas||this.canvas,Oe.jsPDF=Oe.jsPDF||this,Oe.fontFaces=Oe.fontFaces?Oe.fontFaces.map(jt):null;var _e=new Ie(Oe);return Oe.worker?_e:_e.from(Fe).doCallback()}}(E.API),E.API.addJS=function(e){return Ht=e,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,Ce=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Me=r.outline.render().split(/\r\n/),Ie=0;Ie<Me.length;Ie++){var Fe=Me[Ie],Oe=Ce.exec(Fe);if(Oe!=null){var _e=Oe[1];r.internal.newObjectDeferredBegin(_e,!1)}r.internal.write(Fe)}if(this.outline.createNamedDestinations){var xe=this.internal.pages.length,Pe=[];for(Ie=0;Ie<xe;Ie++){var Ae=r.internal.newObject();Pe.push(Ae);var Se=r.internal.getPageInfo(Ie+1);r.internal.write("<< /D["+Se.objId+" 0 R /XYZ null null null]>> endobj")}var St=r.internal.newObject();for(r.internal.write("<< /Names [ "),Ie=0;Ie<Pe.length;Ie++)r.internal.write("(page_"+(Ie+1)+")"+Pe[Ie]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+St+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(Ce,Me,Ie){var Fe={title:Me,options:Ie,children:[]};return Ce==null&&(Ce=this.root),Ce.children.push(Fe),Fe},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(Ce){Ce.id=r.internal.newObjectDeferred();for(var Me=0;Me<Ce.children.length;Me++)this.genIds_r(Ce.children[Me])},r.outline.renderRoot=function(Ce){this.objStart(Ce),this.line("/Type /Outlines"),Ce.children.length>0&&(this.line("/First "+this.makeRef(Ce.children[0])),this.line("/Last "+this.makeRef(Ce.children[Ce.children.length-1]))),this.line("/Count "+this.count_r({count:0},Ce)),this.objEnd()},r.outline.renderItems=function(Ce){for(var Me=this.ctx.pdf.internal.getVerticalCoordinateString,Ie=0;Ie<Ce.children.length;Ie++){var Fe=Ce.children[Ie];this.objStart(Fe),this.line("/Title "+this.makeString(Fe.title)),this.line("/Parent "+this.makeRef(Ce)),Ie>0&&this.line("/Prev "+this.makeRef(Ce.children[Ie-1])),Ie<Ce.children.length-1&&this.line("/Next "+this.makeRef(Ce.children[Ie+1])),Fe.children.length>0&&(this.line("/First "+this.makeRef(Fe.children[0])),this.line("/Last "+this.makeRef(Fe.children[Fe.children.length-1])));var Oe=this.count=this.count_r({count:0},Fe);if(Oe>0&&this.line("/Count "+Oe),Fe.options&&Fe.options.pageNumber){var _e=r.internal.getPageInfo(Fe.options.pageNumber);this.line("/Dest ["+_e.objId+" 0 R /XYZ 0 "+Me(0)+" 0]")}this.objEnd()}for(var xe=0;xe<Ce.children.length;xe++)this.renderItems(Ce.children[xe])},r.outline.line=function(Ce){this.ctx.val+=Ce+`\r
`},r.outline.makeRef=function(Ce){return Ce.id+" 0 R"},r.outline.makeString=function(Ce){return"("+r.internal.pdfEscape(Ce)+")"},r.outline.objStart=function(Ce){this.ctx.val+=`\r
`+Ce.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(Ce,Me){for(var Ie=0;Ie<Me.children.length;Ie++)Ce.count++,this.count_r(Ce,Me.children[Ie]);return Ce.count}}])}(E.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,Ce,Me,Ie,Fe,Oe){var _e,xe=this.decode.DCT_DECODE,Pe=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=Fe||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(_e=function(Ae){for(var Se,St=256*Ae.charCodeAt(4)+Ae.charCodeAt(5),Te=Ae.length,Re={width:0,height:0,numcomponents:1},Ee=4;Ee<Te;Ee+=2){if(Ee+=St,t.indexOf(Ae.charCodeAt(Ee+1))!==-1){Se=256*Ae.charCodeAt(Ee+5)+Ae.charCodeAt(Ee+6),Re={width:256*Ae.charCodeAt(Ee+7)+Ae.charCodeAt(Ee+8),height:Se,numcomponents:Ae.charCodeAt(Ee+9)};break}St=256*Ae.charCodeAt(Ee+2)+Ae.charCodeAt(Ee+3)}return Re}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:Oe=this.color_spaces.DEVICE_GRAY;break;case 4:Oe=this.color_spaces.DEVICE_CMYK;break;case 3:Oe=this.color_spaces.DEVICE_RGB}Pe={data:r,width:_e.width,height:_e.height,colorSpace:Oe,bitsPerComponent:8,filter:xe,index:Ce,alias:Me}}return Pe}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var e,t,r;function Ce(Ie){var Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,ke,De,Be;for(this.data=Ie,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Ae=null;;){switch(Fe=this.readUInt32(),Te=function(){var He,Ue;for(Ue=[],He=0;He<4;++He)Ue.push(String.fromCharCode(this.data[this.pos++]));return Ue}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Fe);break;case"fcTL":Ae&&this.animation.frames.push(Ae),this.pos+=4,Ae={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Pe=this.readUInt16(),xe=this.readUInt16()||100,Ae.delay=1e3*Pe/xe,Ae.disposeOp=this.data[this.pos++],Ae.blendOp=this.data[this.pos++],Ae.data=[];break;case"IDAT":case"fdAT":for(Te==="fdAT"&&(this.pos+=4,Fe-=4),Ie=(Ae!=null?Ae.data:void 0)||this.imgData,ke=0;0<=Fe?ke<Fe:ke>Fe;0<=Fe?++ke:--ke)Ie.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(_e=this.palette.length/3,this.transparency.indexed=this.read(Fe),this.transparency.indexed.length>_e)throw new Error("More transparent colors than palette size");if((Re=_e-this.transparency.indexed.length)>0)for(De=0;0<=Re?De<Re:De>Re;0<=Re?++De:--De)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Fe)[0];break;case 2:this.transparency.rgb=this.read(Fe)}break;case"tEXt":Se=(Ee=this.read(Fe)).indexOf(0),St=String.fromCharCode.apply(String,Ee.slice(0,Se)),this.text[St]=String.fromCharCode.apply(String,Ee.slice(Se+1));break;case"IEND":return Ae&&this.animation.frames.push(Ae),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(Be=this.colorType)===4||Be===6,Oe=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Oe,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Fe}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}Ce.prototype.read=function(Ie){var Fe,Oe;for(Oe=[],Fe=0;0<=Ie?Fe<Ie:Fe>Ie;0<=Ie?++Fe:--Fe)Oe.push(this.data[this.pos++]);return Oe},Ce.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},Ce.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},Ce.prototype.decodePixels=function(Ie){var Fe=this.pixelBitlength/8,Oe=new Uint8Array(this.width*this.height*Fe),_e=0,xe=this;if(Ie==null&&(Ie=this.imgData),Ie.length===0)return new Uint8Array(0);function Pe(Ae,Se,St,Te){var Re,Ee,ke,De,Be,He,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri,vi=Math.ceil((xe.width-Ae)/St),Ci=Math.ceil((xe.height-Se)/Te),$e=xe.width==vi&&xe.height==Ci;for(li=Fe*vi,oi=$e?Oe:new Uint8Array(li*Ci),He=Ie.length,ii=0,Ee=0;ii<Ci&&_e<He;){switch(Ie[_e++]){case 0:for(De=Si=0;Si<li;De=Si+=1)oi[Ee++]=Ie[_e++];break;case 1:for(De=_i=0;_i<li;De=_i+=1)Re=Ie[_e++],Be=De<Fe?0:oi[Ee-Fe],oi[Ee++]=(Re+Be)%256;break;case 2:for(De=xi=0;xi<li;De=xi+=1)Re=Ie[_e++],ke=(De-De%Fe)/Fe,bi=ii&&oi[(ii-1)*li+ke*Fe+De%Fe],oi[Ee++]=(bi+Re)%256;break;case 3:for(De=Ei=0;Ei<li;De=Ei+=1)Re=Ie[_e++],ke=(De-De%Fe)/Fe,Be=De<Fe?0:oi[Ee-Fe],bi=ii&&oi[(ii-1)*li+ke*Fe+De%Fe],oi[Ee++]=(Re+Math.floor((Be+bi)/2))%256;break;case 4:for(De=ri=0;ri<li;De=ri+=1)Re=Ie[_e++],ke=(De-De%Fe)/Fe,Be=De<Fe?0:oi[Ee-Fe],ii===0?bi=mi=0:(bi=oi[(ii-1)*li+ke*Fe+De%Fe],mi=ke&&oi[(ii-1)*li+(ke-1)*Fe+De%Fe]),Ue=Be+bi-mi,We=Math.abs(Ue-Be),Qe=Math.abs(Ue-bi),fi=Math.abs(Ue-mi),Je=We<=Qe&&We<=fi?Be:Qe<=fi?bi:mi,oi[Ee++]=(Re+Je)%256;break;default:throw new Error("Invalid filter algorithm: "+Ie[_e-1])}if(!$e){var Ge=((Se+ii*Te)*xe.width+Ae)*Fe,ze=ii*li;for(De=0;De<vi;De+=1){for(var qe=0;qe<Fe;qe+=1)Oe[Ge++]=oi[ze++];Ge+=(St-1)*Fe}}ii++}}return Ie=unzlibSync(Ie),xe.interlaceMethod==1?(Pe(0,0,8,8),Pe(4,0,8,8),Pe(0,4,4,8),Pe(2,0,4,4),Pe(0,2,2,4),Pe(1,0,2,2),Pe(0,1,1,2)):Pe(0,0,1,1),Oe},Ce.prototype.decodePalette=function(){var Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St;for(Oe=this.palette,Pe=this.transparency.indexed||[],xe=new Uint8Array((Pe.length||0)+Oe.length),_e=0,Ie=0,Fe=Ae=0,Se=Oe.length;Ae<Se;Fe=Ae+=3)xe[_e++]=Oe[Fe],xe[_e++]=Oe[Fe+1],xe[_e++]=Oe[Fe+2],xe[_e++]=(St=Pe[Ie++])!=null?St:255;return xe},Ce.prototype.copyToImageData=function(Ie,Fe){var Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,ke;if(_e=this.colors,Re=null,Oe=this.hasAlphaChannel,this.palette.length&&(Re=(ke=this._decodedPalette)!=null?ke:this._decodedPalette=this.decodePalette(),_e=4,Oe=!0),Te=(xe=Ie.data||Ie).length,Ae=Re||Fe,Pe=Se=0,_e===1)for(;Pe<Te;)St=Re?4*Fe[Pe/4]:Se,Ee=Ae[St++],xe[Pe++]=Ee,xe[Pe++]=Ee,xe[Pe++]=Ee,xe[Pe++]=Oe?Ae[St++]:255,Se=St;else for(;Pe<Te;)St=Re?4*Fe[Pe/4]:Se,xe[Pe++]=Ae[St++],xe[Pe++]=Ae[St++],xe[Pe++]=Ae[St++],xe[Pe++]=Oe?Ae[St++]:255,Se=St},Ce.prototype.decode=function(){var Ie;return Ie=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ie,this.decodePixels()),Ie};var Me=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{t=n.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return Me(),e=function(Ie){var Fe;if(Me()===!0)return r.width=Ie.width,r.height=Ie.height,r.clearRect(0,0,Ie.width,Ie.height),r.putImageData(Ie,0,0),(Fe=new Image).src=t.toDataURL(),Fe;throw new Error("This method requires a Browser with Canvas-capability.")},Ce.prototype.decodeFrames=function(Ie){var Fe,Oe,_e,xe,Pe,Ae,Se,St;if(this.animation){for(St=[],Oe=Pe=0,Ae=(Se=this.animation.frames).length;Pe<Ae;Oe=++Pe)Fe=Se[Oe],_e=Ie.createImageData(Fe.width,Fe.height),xe=this.decodePixels(new Uint8Array(Fe.data)),this.copyToImageData(_e,xe),Fe.imageData=_e,St.push(Fe.image=e(_e));return St}},Ce.prototype.renderFrame=function(Ie,Fe){var Oe,_e,xe;return Oe=(_e=this.animation.frames)[Fe],xe=_e[Fe-1],Fe===0&&Ie.clearRect(0,0,this.width,this.height),(xe!=null?xe.disposeOp:void 0)===1?Ie.clearRect(xe.xOffset,xe.yOffset,xe.width,xe.height):(xe!=null?xe.disposeOp:void 0)===2&&Ie.putImageData(xe.imageData,xe.xOffset,xe.yOffset),Oe.blendOp===0&&Ie.clearRect(Oe.xOffset,Oe.yOffset,Oe.width,Oe.height),Ie.drawImage(Oe.image,Oe.xOffset,Oe.yOffset)},Ce.prototype.animate=function(Ie){var Fe,Oe,_e,xe,Pe,Ae,Se=this;return Oe=0,Ae=this.animation,xe=Ae.numFrames,_e=Ae.frames,Pe=Ae.numPlays,(Fe=function(){var St,Te;if(St=Oe++%xe,Te=_e[St],Se.renderFrame(Ie,St),xe>1&&Oe/xe<Pe)return Se.animation._timeout=setTimeout(Fe,Te.delay)})()},Ce.prototype.stopAnimation=function(){var Ie;return clearTimeout((Ie=this.animation)!=null?Ie._timeout:void 0)},Ce.prototype.render=function(Ie){var Fe,Oe;return Ie._png&&Ie._png.stopAnimation(),Ie._png=this,Ie.width=this.width,Ie.height=this.height,Fe=Ie.getContext("2d"),this.animation?(this.decodeFrames(Fe),this.animate(Fe)):(Oe=Fe.createImageData(this.width,this.height),this.copyToImageData(Oe,this.decodePixels()),Fe.putImageData(Oe,0,0))},Ce}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,Ce=e[t++]|e[t++]<<8,Me=e[t++],Ie=Me>>7,Fe=1<<(7&Me)+1;e[t++],e[t++];var Oe=null,_e=null;Ie&&(Oe=t,_e=Fe,t+=3*Fe);var xe=!0,Pe=[],Ae=0,Se=null,St=0,Te=null;for(this.width=r,this.height=Ce;xe&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,Te=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ii=e[t++])>=0))throw Error("Invalid block size");if(ii===0)break;t+=ii}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var Re=e[t++];Ae=e[t++]|e[t++]<<8,Se=e[t++],(1&Re)==0&&(Se=null),St=Re>>2&7,t++;break;case 254:for(;;){if(!((ii=e[t++])>=0))throw Error("Invalid block size");if(ii===0)break;t+=ii}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var Ee=e[t++]|e[t++]<<8,ke=e[t++]|e[t++]<<8,De=e[t++]|e[t++]<<8,Be=e[t++]|e[t++]<<8,He=e[t++],Ue=He>>6&1,We=1<<(7&He)+1,Je=Oe,Qe=_e,fi=!1;He>>7&&(fi=!0,Je=t,Qe=We,t+=3*We);var oi=t;for(t++;;){var ii;if(!((ii=e[t++])>=0))throw Error("Invalid block size");if(ii===0)break;t+=ii}Pe.push({x:Ee,y:ke,width:De,height:Be,has_local_palette:fi,palette_offset:Je,palette_size:Qe,data_offset:oi,data_length:t-oi,transparent_index:Se,interlaced:!!Ue,delay:Ae,disposal:St});break;case 59:xe=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return Pe.length},this.loopCount=function(){return Te},this.frameInfo=function(li){if(li<0||li>=Pe.length)throw new Error("Frame index out of range.");return Pe[li]},this.decodeAndBlitFrameBGRA=function(li,bi){var mi=this.frameInfo(li),Si=mi.width*mi.height,_i=new Uint8Array(Si);$t(e,mi.data_offset,_i,Si);var xi=mi.palette_offset,Ei=mi.transparent_index;Ei===null&&(Ei=256);var ri=mi.width,vi=r-ri,Ci=ri,$e=4*(mi.y*r+mi.x),Ge=4*((mi.y+mi.height)*r+mi.x),ze=$e,qe=4*vi;mi.interlaced===!0&&(qe+=4*r*7);for(var ei=8,ni=0,ci=_i.length;ni<ci;++ni){var di=_i[ni];if(Ci===0&&(Ci=ri,(ze+=qe)>=Ge&&(qe=4*vi+4*r*(ei-1),ze=$e+(ri+vi)*(ei<<1),ei>>=1)),di===Ei)ze+=4;else{var Ti=e[xi+3*di],Ni=e[xi+3*di+1],si=e[xi+3*di+2];bi[ze++]=si,bi[ze++]=Ni,bi[ze++]=Ti,bi[ze++]=255}--Ci}},this.decodeAndBlitFrameRGBA=function(li,bi){var mi=this.frameInfo(li),Si=mi.width*mi.height,_i=new Uint8Array(Si);$t(e,mi.data_offset,_i,Si);var xi=mi.palette_offset,Ei=mi.transparent_index;Ei===null&&(Ei=256);var ri=mi.width,vi=r-ri,Ci=ri,$e=4*(mi.y*r+mi.x),Ge=4*((mi.y+mi.height)*r+mi.x),ze=$e,qe=4*vi;mi.interlaced===!0&&(qe+=4*r*7);for(var ei=8,ni=0,ci=_i.length;ni<ci;++ni){var di=_i[ni];if(Ci===0&&(Ci=ri,(ze+=qe)>=Ge&&(qe=4*vi+4*r*(ei-1),ze=$e+(ri+vi)*(ei<<1),ei>>=1)),di===Ei)ze+=4;else{var Ti=e[xi+3*di],Ni=e[xi+3*di+1],si=e[xi+3*di+2];bi[ze++]=Ti,bi[ze++]=Ni,bi[ze++]=si,bi[ze++]=255}--Ci}}}function $t(e,t,r,Ce){for(var Me=e[t++],Ie=1<<Me,Fe=Ie+1,Oe=Fe+1,_e=Me+1,xe=(1<<_e)-1,Pe=0,Ae=0,Se=0,St=e[t++],Te=new Int32Array(4096),Re=null;;){for(;Pe<16&&St!==0;)Ae|=e[t++]<<Pe,Pe+=8,St===1?St=e[t++]:--St;if(Pe<_e)break;var Ee=Ae&xe;if(Ae>>=_e,Pe-=_e,Ee!==Ie){if(Ee===Fe)break;for(var ke=Ee<Oe?Ee:Re,De=0,Be=ke;Be>Ie;)Be=Te[Be]>>8,++De;var He=Be;if(Se+De+(ke!==Ee?1:0)>Ce)return void a.log("Warning, gif stream longer than expected.");r[Se++]=He;var Ue=Se+=De;for(ke!==Ee&&(r[Se++]=He),Be=ke;De--;)Be=Te[Be],r[--Ue]=255&Be,Be>>=8;Re!==null&&Oe<4096&&(Te[Oe++]=Re<<8|He,Oe>=xe+1&&_e<12&&(++_e,xe=xe<<1|1)),Re=Ee}else Oe=Fe+1,xe=(1<<(_e=Me+1))-1,Re=null}return Se!==Ce&&a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(e){var t,r,Ce,Me,Ie,Fe=Math.floor,Oe=new Array(64),_e=new Array(64),xe=new Array(64),Pe=new Array(64),Ae=new Array(65535),Se=new Array(65535),St=new Array(64),Te=new Array(64),Re=[],Ee=0,ke=7,De=new Array(64),Be=new Array(64),He=new Array(64),Ue=new Array(256),We=new Array(2048),Je=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Qe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],fi=[0,1,2,3,4,5,6,7,8,9,10,11],oi=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ii=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],li=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],bi=[0,1,2,3,4,5,6,7,8,9,10,11],mi=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Si=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _i($e,Ge){for(var ze=0,qe=0,ei=new Array,ni=1;ni<=16;ni++){for(var ci=1;ci<=$e[ni];ci++)ei[Ge[qe]]=[],ei[Ge[qe]][0]=ze,ei[Ge[qe]][1]=ni,qe++,ze++;ze*=2}return ei}function xi($e){for(var Ge=$e[0],ze=$e[1]-1;ze>=0;)Ge&1<<ze&&(Ee|=1<<ke),ze--,--ke<0&&(Ee==255?(Ei(255),Ei(0)):Ei(Ee),ke=7,Ee=0)}function Ei($e){Re.push($e)}function ri($e){Ei($e>>8&255),Ei(255&$e)}function vi($e,Ge,ze,qe,ei){for(var ni,ci=ei[0],di=ei[240],Ti=function(gi,Li){var Ri,wi,Vi,Mi,qi,Xi,Zi,ji,Ki,cn,rn=0;for(Ki=0;Ki<8;++Ki){Ri=gi[rn],wi=gi[rn+1],Vi=gi[rn+2],Mi=gi[rn+3],qi=gi[rn+4],Xi=gi[rn+5],Zi=gi[rn+6];var xn=Ri+(ji=gi[rn+7]),Sn=Ri-ji,Tn=wi+Zi,Ln=wi-Zi,Hn=Vi+Xi,Hi=Vi-Xi,Fi=Mi+qi,Wi=Mi-qi,on=xn+Fi,_n=xn-Fi,On=Tn+Hn,vn=Tn-Hn;gi[rn]=on+On,gi[rn+4]=on-On;var mn=.707106781*(vn+_n);gi[rn+2]=_n+mn,gi[rn+6]=_n-mn;var Pn=.382683433*((on=Wi+Hi)-(vn=Ln+Sn)),Fn=.5411961*on+Pn,Mn=1.306562965*vn+Pn,Vn=.707106781*(On=Hi+Ln),Rn=Sn+Vn,Cn=Sn-Vn;gi[rn+5]=Cn+Fn,gi[rn+3]=Cn-Fn,gi[rn+1]=Rn+Mn,gi[rn+7]=Rn-Mn,rn+=8}for(rn=0,Ki=0;Ki<8;++Ki){Ri=gi[rn],wi=gi[rn+8],Vi=gi[rn+16],Mi=gi[rn+24],qi=gi[rn+32],Xi=gi[rn+40],Zi=gi[rn+48];var Bn=Ri+(ji=gi[rn+56]),tr=Ri-ji,Xn=wi+Zi,Wn=wi-Zi,Yn=Vi+Xi,rr=Vi-Xi,nr=Mi+qi,ur=Mi-qi,fr=Bn+nr,yr=Bn-nr,Cr=Xn+Yn,Jr=Xn-Yn;gi[rn]=fr+Cr,gi[rn+32]=fr-Cr;var Ir=.707106781*(Jr+yr);gi[rn+16]=yr+Ir,gi[rn+48]=yr-Ir;var Qr=.382683433*((fr=ur+rr)-(Jr=Wn+tr)),Os=.5411961*fr+Qr,Fs=1.306562965*Jr+Qr,Bs=.707106781*(Cr=rr+Wn),js=tr+Bs,Hs=tr-Bs;gi[rn+40]=Hs+Os,gi[rn+24]=Hs-Os,gi[rn+8]=js+Fs,gi[rn+56]=js-Fs,rn++}for(Ki=0;Ki<64;++Ki)cn=gi[Ki]*Li[Ki],St[Ki]=cn>0?cn+.5|0:cn-.5|0;return St}($e,Ge),Ni=0;Ni<64;++Ni)Te[Je[Ni]]=Ti[Ni];var si=Te[0]-ze;ze=Te[0],si==0?xi(qe[0]):(xi(qe[Se[ni=32767+si]]),xi(Ae[ni]));for(var ai=63;ai>0&&Te[ai]==0;)ai--;if(ai==0)return xi(ci),ze;for(var Ye,Ze=1;Ze<=ai;){for(var Xe=Ze;Te[Ze]==0&&Ze<=ai;)++Ze;var ui=Ze-Xe;if(ui>=16){Ye=ui>>4;for(var pi=1;pi<=Ye;++pi)xi(di);ui&=15}ni=32767+Te[Ze],xi(ei[(ui<<4)+Se[ni]]),xi(Ae[ni]),Ze++}return ai!=63&&xi(ci),ze}function Ci($e){$e=Math.min(Math.max($e,1),100),Ie!=$e&&(function(Ge){for(var ze=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],qe=0;qe<64;qe++){var ei=Fe((ze[qe]*Ge+50)/100);ei=Math.min(Math.max(ei,1),255),Oe[Je[qe]]=ei}for(var ni=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ci=0;ci<64;ci++){var di=Fe((ni[ci]*Ge+50)/100);di=Math.min(Math.max(di,1),255),_e[Je[ci]]=di}for(var Ti=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ni=0,si=0;si<8;si++)for(var ai=0;ai<8;ai++)xe[Ni]=1/(Oe[Je[Ni]]*Ti[si]*Ti[ai]*8),Pe[Ni]=1/(_e[Je[Ni]]*Ti[si]*Ti[ai]*8),Ni++}($e<50?Math.floor(5e3/$e):Math.floor(200-2*$e)),Ie=$e)}this.encode=function($e,Ge){Ge&&Ci(Ge),Re=new Array,Ee=0,ke=7,ri(65496),ri(65504),ri(16),Ei(74),Ei(70),Ei(73),Ei(70),Ei(0),Ei(1),Ei(1),Ei(0),ri(1),ri(1),Ei(0),Ei(0),function(){ri(65499),ri(132),Ei(0);for(var wi=0;wi<64;wi++)Ei(Oe[wi]);Ei(1);for(var Vi=0;Vi<64;Vi++)Ei(_e[Vi])}(),function(wi,Vi){ri(65472),ri(17),Ei(8),ri(Vi),ri(wi),Ei(3),Ei(1),Ei(17),Ei(0),Ei(2),Ei(17),Ei(1),Ei(3),Ei(17),Ei(1)}($e.width,$e.height),function(){ri(65476),ri(418),Ei(0);for(var wi=0;wi<16;wi++)Ei(Qe[wi+1]);for(var Vi=0;Vi<=11;Vi++)Ei(fi[Vi]);Ei(16);for(var Mi=0;Mi<16;Mi++)Ei(oi[Mi+1]);for(var qi=0;qi<=161;qi++)Ei(ii[qi]);Ei(1);for(var Xi=0;Xi<16;Xi++)Ei(li[Xi+1]);for(var Zi=0;Zi<=11;Zi++)Ei(bi[Zi]);Ei(17);for(var ji=0;ji<16;ji++)Ei(mi[ji+1]);for(var Ki=0;Ki<=161;Ki++)Ei(Si[Ki])}(),ri(65498),ri(12),Ei(3),Ei(1),Ei(0),Ei(2),Ei(17),Ei(3),Ei(17),Ei(0),Ei(63),Ei(0);var ze=0,qe=0,ei=0;Ee=0,ke=7,this.encode.displayName="_encode_";for(var ni,ci,di,Ti,Ni,si,ai,Ye,Ze,Xe=$e.data,ui=$e.width,pi=$e.height,gi=4*ui,Li=0;Li<pi;){for(ni=0;ni<gi;){for(Ni=gi*Li+ni,ai=-1,Ye=0,Ze=0;Ze<64;Ze++)si=Ni+(Ye=Ze>>3)*gi+(ai=4*(7&Ze)),Li+Ye>=pi&&(si-=gi*(Li+1+Ye-pi)),ni+ai>=gi&&(si-=ni+ai-gi+4),ci=Xe[si++],di=Xe[si++],Ti=Xe[si++],De[Ze]=(We[ci]+We[di+256>>0]+We[Ti+512>>0]>>16)-128,Be[Ze]=(We[ci+768>>0]+We[di+1024>>0]+We[Ti+1280>>0]>>16)-128,He[Ze]=(We[ci+1280>>0]+We[di+1536>>0]+We[Ti+1792>>0]>>16)-128;ze=vi(De,xe,ze,t,Ce),qe=vi(Be,Pe,qe,r,Me),ei=vi(He,Pe,ei,r,Me),ni+=32}Li+=8}if(ke>=0){var Ri=[];Ri[1]=ke+1,Ri[0]=(1<<ke+1)-1,xi(Ri)}return ri(65497),new Uint8Array(Re)},e=e||50,function(){for(var $e=String.fromCharCode,Ge=0;Ge<256;Ge++)Ue[Ge]=$e(Ge)}(),t=_i(Qe,fi),r=_i(li,bi),Ce=_i(oi,ii),Me=_i(mi,Si),function(){for(var $e=1,Ge=2,ze=1;ze<=15;ze++){for(var qe=$e;qe<Ge;qe++)Se[32767+qe]=ze,Ae[32767+qe]=[],Ae[32767+qe][1]=ze,Ae[32767+qe][0]=qe;for(var ei=-(Ge-1);ei<=-$e;ei++)Se[32767+ei]=ze,Ae[32767+ei]=[],Ae[32767+ei][1]=ze,Ae[32767+ei][0]=Ge-1+ei;$e<<=1,Ge<<=1}}(),function(){for(var $e=0;$e<256;$e++)We[$e]=19595*$e,We[$e+256>>0]=38470*$e,We[$e+512>>0]=7471*$e+32768,We[$e+768>>0]=-11059*$e,We[$e+1024>>0]=-21709*$e,We[$e+1280>>0]=32768*$e+8421375,We[$e+1536>>0]=-27439*$e,We[$e+1792>>0]=-5329*$e}(),Ci(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(e){function t(Qe){if(!Qe)throw Error("assert :P")}function r(Qe,fi,oi){for(var ii=0;4>ii;ii++)if(Qe[fi+ii]!=oi.charCodeAt(ii))return!0;return!1}function Ce(Qe,fi,oi,ii,li){for(var bi=0;bi<li;bi++)Qe[fi+bi]=oi[ii+bi]}function Me(Qe,fi,oi,ii){for(var li=0;li<ii;li++)Qe[fi+li]=oi}function Ie(Qe){return new Int32Array(Qe)}function Fe(Qe,fi){for(var oi=[],ii=0;ii<Qe;ii++)oi.push(new fi);return oi}function Oe(Qe,fi){var oi=[];return function ii(li,bi,mi){for(var Si=mi[bi],_i=0;_i<Si&&(li.push(mi.length>bi+1?[]:new fi),!(mi.length<bi+1));_i++)ii(li[_i],bi+1,mi)}(oi,0,Qe),oi}var _e=function(){var Qe=this;function fi(je,Ve){for(var ti=1<<Ve-1>>>0;je&ti;)ti>>>=1;return ti?(je&ti-1)+ti:je}function oi(je,Ve,ti,hi,yi){t(!(hi%ti));do je[Ve+(hi-=ti)]=yi;while(0<hi)}function ii(je,Ve,ti,hi,yi){if(t(2328>=yi),512>=yi)var Pi=Ie(512);else if((Pi=Ie(yi))==null)return 0;return function(Oi,ki,Ii,Bi,$i,tn){var en,Ji,fn=ki,nn=1<<Ii,Yi=Ie(16),Gi=Ie(16);for(t($i!=0),t(Bi!=null),t(Oi!=null),t(0<Ii),Ji=0;Ji<$i;++Ji){if(15<Bi[Ji])return 0;++Yi[Bi[Ji]]}if(Yi[0]==$i)return 0;for(Gi[1]=0,en=1;15>en;++en){if(Yi[en]>1<<en)return 0;Gi[en+1]=Gi[en]+Yi[en]}for(Ji=0;Ji<$i;++Ji)en=Bi[Ji],0<Bi[Ji]&&(tn[Gi[en]++]=Ji);if(Gi[15]==1)return(Bi=new li).g=0,Bi.value=tn[0],oi(Oi,fn,1,nn,Bi),nn;var hn,pn=-1,un=nn-1,wn=0,yn=1,kn=1,An=1<<Ii;for(Ji=0,en=1,$i=2;en<=Ii;++en,$i<<=1){if(yn+=kn<<=1,0>(kn-=Yi[en]))return 0;for(;0<Yi[en];--Yi[en])(Bi=new li).g=en,Bi.value=tn[Ji++],oi(Oi,fn+wn,$i,An,Bi),wn=fi(wn,en)}for(en=Ii+1,$i=2;15>=en;++en,$i<<=1){if(yn+=kn<<=1,0>(kn-=Yi[en]))return 0;for(;0<Yi[en];--Yi[en]){if(Bi=new li,(wn&un)!=pn){for(fn+=An,hn=1<<(pn=en)-Ii;15>pn&&!(0>=(hn-=Yi[pn]));)++pn,hn<<=1;nn+=An=1<<(hn=pn-Ii),Oi[ki+(pn=wn&un)].g=hn+Ii,Oi[ki+pn].value=fn-ki-pn}Bi.g=en-Ii,Bi.value=tn[Ji++],oi(Oi,fn+(wn>>Ii),$i,An,Bi),wn=fi(wn,en)}}return yn!=2*Gi[15]-1?0:nn}(je,Ve,ti,hi,yi,Pi)}function li(){this.value=this.g=0}function bi(){this.value=this.g=0}function mi(){this.G=Fe(5,li),this.H=Ie(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Fe(xr,bi)}function Si(je,Ve,ti,hi){t(je!=null),t(Ve!=null),t(2147483648>hi),je.Ca=254,je.I=0,je.b=-8,je.Ka=0,je.oa=Ve,je.pa=ti,je.Jd=Ve,je.Yc=ti+hi,je.Zc=4<=hi?ti+hi-4+1:ti,ni(je)}function _i(je,Ve){for(var ti=0;0<Ve--;)ti|=di(je,128)<<Ve;return ti}function xi(je,Ve){var ti=_i(je,Ve);return ci(je)?-ti:ti}function Ei(je,Ve,ti,hi){var yi,Pi=0;for(t(je!=null),t(Ve!=null),t(4294967288>hi),je.Sb=hi,je.Ra=0,je.u=0,je.h=0,4<hi&&(hi=4),yi=0;yi<hi;++yi)Pi+=Ve[ti+yi]<<8*yi;je.Ra=Pi,je.bb=hi,je.oa=Ve,je.pa=ti}function ri(je){for(;8<=je.u&&je.bb<je.Sb;)je.Ra>>>=8,je.Ra+=je.oa[je.pa+je.bb]<<ea-8>>>0,++je.bb,je.u-=8;ze(je)&&(je.h=1,je.u=0)}function vi(je,Ve){if(t(0<=Ve),!je.h&&Ve<=ta){var ti=Ge(je)&Zs[Ve];return je.u+=Ve,ri(je),ti}return je.h=1,je.u=0}function Ci(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $e(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ge(je){return je.Ra>>>(je.u&ea-1)>>>0}function ze(je){return t(je.bb<=je.Sb),je.h||je.bb==je.Sb&&je.u>ea}function qe(je,Ve){je.u=Ve,je.h=ze(je)}function ei(je){je.u>=Na&&(t(je.u>=Na),ri(je))}function ni(je){t(je!=null&&je.oa!=null),je.pa<je.Zc?(je.I=(je.oa[je.pa++]|je.I<<8)>>>0,je.b+=8):(t(je!=null&&je.oa!=null),je.pa<je.Yc?(je.b+=8,je.I=je.oa[je.pa++]|je.I<<8):je.Ka?je.b=0:(je.I<<=8,je.b+=8,je.Ka=1))}function ci(je){return _i(je,1)}function di(je,Ve){var ti=je.Ca;0>je.b&&ni(je);var hi=je.b,yi=ti*Ve>>>8,Pi=(je.I>>>hi>yi)+0;for(Pi?(ti-=yi,je.I-=yi+1<<hi>>>0):ti=yi+1,hi=ti,yi=0;256<=hi;)yi+=8,hi>>=8;return hi=7^yi+Pr[hi],je.b-=hi,je.Ca=(ti<<hi)-1,Pi}function Ti(je,Ve,ti){je[Ve+0]=ti>>24&255,je[Ve+1]=ti>>16&255,je[Ve+2]=ti>>8&255,je[Ve+3]=ti>>0&255}function Ni(je,Ve){return je[Ve+0]<<0|je[Ve+1]<<8}function si(je,Ve){return Ni(je,Ve)|je[Ve+2]<<16}function ai(je,Ve){return Ni(je,Ve)|Ni(je,Ve+2)<<16}function Ye(je,Ve){var ti=1<<Ve;return t(je!=null),t(0<Ve),je.X=Ie(ti),je.X==null?0:(je.Mb=32-Ve,je.Xa=Ve,1)}function Ze(je,Ve){t(je!=null),t(Ve!=null),t(je.Xa==Ve.Xa),Ce(Ve.X,0,je.X,0,1<<Ve.Xa)}function Xe(){this.X=[],this.Xa=this.Mb=0}function ui(je,Ve,ti,hi){t(ti!=null),t(hi!=null);var yi=ti[0],Pi=hi[0];return yi==0&&(yi=(je*Pi+Ve/2)/Ve),Pi==0&&(Pi=(Ve*yi+je/2)/je),0>=yi||0>=Pi?0:(ti[0]=yi,hi[0]=Pi,1)}function pi(je,Ve){return je+(1<<Ve)-1>>>Ve}function gi(je,Ve){return((4278255360&je)+(4278255360&Ve)>>>0&4278255360)+((16711935&je)+(16711935&Ve)>>>0&16711935)>>>0}function Li(je,Ve){Qe[Ve]=function(ti,hi,yi,Pi,Oi,ki,Ii){var Bi;for(Bi=0;Bi<Oi;++Bi){var $i=Qe[je](ki[Ii+Bi-1],yi,Pi+Bi);ki[Ii+Bi]=gi(ti[hi+Bi],$i)}}}function Ri(){this.ud=this.hd=this.jd=0}function wi(je,Ve){return((4278124286&(je^Ve))>>>1)+(je&Ve)>>>0}function Vi(je){return 0<=je&&256>je?je:0>je?0:255<je?255:void 0}function Mi(je,Ve){return Vi(je+(je-Ve+.5>>1))}function qi(je,Ve,ti){return Math.abs(Ve-ti)-Math.abs(je-ti)}function Xi(je,Ve,ti,hi,yi,Pi,Oi){for(hi=Pi[Oi-1],ti=0;ti<yi;++ti)Pi[Oi+ti]=hi=gi(je[Ve+ti],hi)}function Zi(je,Ve,ti,hi,yi){var Pi;for(Pi=0;Pi<ti;++Pi){var Oi=je[Ve+Pi],ki=Oi>>8&255,Ii=16711935&(Ii=(Ii=16711935&Oi)+((ki<<16)+ki));hi[yi+Pi]=(4278255360&Oi)+Ii>>>0}}function ji(je,Ve){Ve.jd=je>>0&255,Ve.hd=je>>8&255,Ve.ud=je>>16&255}function Ki(je,Ve,ti,hi,yi,Pi){var Oi;for(Oi=0;Oi<hi;++Oi){var ki=Ve[ti+Oi],Ii=ki>>>8,Bi=ki,$i=255&($i=($i=ki>>>16)+((je.jd<<24>>24)*(Ii<<24>>24)>>>5));Bi=255&(Bi=(Bi=Bi+((je.hd<<24>>24)*(Ii<<24>>24)>>>5))+((je.ud<<24>>24)*($i<<24>>24)>>>5)),yi[Pi+Oi]=(4278255360&ki)+($i<<16)+Bi}}function cn(je,Ve,ti,hi,yi){Qe[Ve]=function(Pi,Oi,ki,Ii,Bi,$i,tn,en,Ji){for(Ii=tn;Ii<en;++Ii)for(tn=0;tn<Ji;++tn)Bi[$i++]=yi(ki[hi(Pi[Oi++])])},Qe[je]=function(Pi,Oi,ki,Ii,Bi,$i,tn){var en=8>>Pi.b,Ji=Pi.Ea,fn=Pi.K[0],nn=Pi.w;if(8>en)for(Pi=(1<<Pi.b)-1,nn=(1<<en)-1;Oi<ki;++Oi){var Yi,Gi=0;for(Yi=0;Yi<Ji;++Yi)Yi&Pi||(Gi=hi(Ii[Bi++])),$i[tn++]=yi(fn[Gi&nn]),Gi>>=en}else Qe["VP8LMapColor"+ti](Ii,Bi,fn,nn,$i,tn,Oi,ki,Ji)}}function rn(je,Ve,ti,hi,yi){for(ti=Ve+ti;Ve<ti;){var Pi=je[Ve++];hi[yi++]=Pi>>16&255,hi[yi++]=Pi>>8&255,hi[yi++]=Pi>>0&255}}function xn(je,Ve,ti,hi,yi){for(ti=Ve+ti;Ve<ti;){var Pi=je[Ve++];hi[yi++]=Pi>>16&255,hi[yi++]=Pi>>8&255,hi[yi++]=Pi>>0&255,hi[yi++]=Pi>>24&255}}function Sn(je,Ve,ti,hi,yi){for(ti=Ve+ti;Ve<ti;){var Pi=(Oi=je[Ve++])>>16&240|Oi>>12&15,Oi=Oi>>0&240|Oi>>28&15;hi[yi++]=Pi,hi[yi++]=Oi}}function Tn(je,Ve,ti,hi,yi){for(ti=Ve+ti;Ve<ti;){var Pi=(Oi=je[Ve++])>>16&248|Oi>>13&7,Oi=Oi>>5&224|Oi>>3&31;hi[yi++]=Pi,hi[yi++]=Oi}}function Ln(je,Ve,ti,hi,yi){for(ti=Ve+ti;Ve<ti;){var Pi=je[Ve++];hi[yi++]=Pi>>0&255,hi[yi++]=Pi>>8&255,hi[yi++]=Pi>>16&255}}function Hn(je,Ve,ti,hi,yi,Pi){if(Pi==0)for(ti=Ve+ti;Ve<ti;)Ti(hi,((Pi=je[Ve++])[0]>>24|Pi[1]>>8&65280|Pi[2]<<8&16711680|Pi[3]<<24)>>>0),yi+=32;else Ce(hi,yi,je,Ve,ti)}function Hi(je,Ve){Qe[Ve][0]=Qe[je+"0"],Qe[Ve][1]=Qe[je+"1"],Qe[Ve][2]=Qe[je+"2"],Qe[Ve][3]=Qe[je+"3"],Qe[Ve][4]=Qe[je+"4"],Qe[Ve][5]=Qe[je+"5"],Qe[Ve][6]=Qe[je+"6"],Qe[Ve][7]=Qe[je+"7"],Qe[Ve][8]=Qe[je+"8"],Qe[Ve][9]=Qe[je+"9"],Qe[Ve][10]=Qe[je+"10"],Qe[Ve][11]=Qe[je+"11"],Qe[Ve][12]=Qe[je+"12"],Qe[Ve][13]=Qe[je+"13"],Qe[Ve][14]=Qe[je+"0"],Qe[Ve][15]=Qe[je+"0"]}function Fi(je){return je==ul||je==dl||je==_o||je==pl}function Wi(){this.eb=[],this.size=this.A=this.fb=0}function on(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _n(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Wi,this.f.kb=new on,this.sd=null}function On(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mn(je){return alert("todo:WebPSamplerProcessPlane"),je.T}function Pn(je,Ve){var ti=je.T,hi=Ve.ba.f.RGBA,yi=hi.eb,Pi=hi.fb+je.ka*hi.A,Oi=jr[Ve.ba.S],ki=je.y,Ii=je.O,Bi=je.f,$i=je.N,tn=je.ea,en=je.W,Ji=Ve.cc,fn=Ve.dc,nn=Ve.Mc,Yi=Ve.Nc,Gi=je.ka,hn=je.ka+je.T,pn=je.U,un=pn+1>>1;for(Gi==0?Oi(ki,Ii,null,null,Bi,$i,tn,en,Bi,$i,tn,en,yi,Pi,null,null,pn):(Oi(Ve.ec,Ve.fc,ki,Ii,Ji,fn,nn,Yi,Bi,$i,tn,en,yi,Pi-hi.A,yi,Pi,pn),++ti);Gi+2<hn;Gi+=2)Ji=Bi,fn=$i,nn=tn,Yi=en,$i+=je.Rc,en+=je.Rc,Pi+=2*hi.A,Oi(ki,(Ii+=2*je.fa)-je.fa,ki,Ii,Ji,fn,nn,Yi,Bi,$i,tn,en,yi,Pi-hi.A,yi,Pi,pn);return Ii+=je.fa,je.j+hn<je.o?(Ce(Ve.ec,Ve.fc,ki,Ii,pn),Ce(Ve.cc,Ve.dc,Bi,$i,un),Ce(Ve.Mc,Ve.Nc,tn,en,un),ti--):1&hn||Oi(ki,Ii,null,null,Bi,$i,tn,en,Bi,$i,tn,en,yi,Pi+hi.A,null,null,pn),ti}function Fn(je,Ve,ti){var hi=je.F,yi=[je.J];if(hi!=null){var Pi=je.U,Oi=Ve.ba.S,ki=Oi==vo||Oi==_o;Ve=Ve.ba.f.RGBA;var Ii=[0],Bi=je.ka;Ii[0]=je.T,je.Kb&&(Bi==0?--Ii[0]:(--Bi,yi[0]-=je.width),je.j+je.ka+je.T==je.o&&(Ii[0]=je.o-je.j-Bi));var $i=Ve.eb;Bi=Ve.fb+Bi*Ve.A,je=uo(hi,yi[0],je.width,Pi,Ii,$i,Bi+(ki?0:3),Ve.A),t(ti==Ii),je&&Fi(Oi)&&As($i,Bi,ki,Pi,Ii,Ve.A)}return 0}function Mn(je){var Ve=je.ma,ti=Ve.ba.S,hi=11>ti,yi=ti==go||ti==mo||ti==vo||ti==hl||ti==12||Fi(ti);if(Ve.memory=null,Ve.Ib=null,Ve.Jb=null,Ve.Nd=null,!Oa(Ve.Oa,je,yi?11:12))return 0;if(yi&&Fi(ti)&&gn(),je.da)alert("todo:use_scaling");else{if(hi){if(Ve.Ib=mn,je.Kb){if(ti=je.U+1>>1,Ve.memory=Ie(je.U+2*ti),Ve.memory==null)return 0;Ve.ec=Ve.memory,Ve.fc=0,Ve.cc=Ve.ec,Ve.dc=Ve.fc+je.U,Ve.Mc=Ve.cc,Ve.Nc=Ve.dc+ti,Ve.Ib=Pn,gn()}}else alert("todo:EmitYUV");yi&&(Ve.Jb=Fn,hi&&Qi())}if(hi&&!hc){for(je=0;256>je;++je)gh[je]=89858*(je-128)+yo>>bo,_h[je]=-22014*(je-128)+yo,vh[je]=-45773*(je-128),mh[je]=113618*(je-128)+yo>>bo;for(je=Fa;je<vl;++je)Ve=76283*(je-16)+yo>>bo,bh[je-Fa]=Nr(Ve,255),yh[je-Fa]=Nr(Ve+8>>4,15);hc=1}return 1}function Vn(je){var Ve=je.ma,ti=je.U,hi=je.T;return t(!(1&je.ka)),0>=ti||0>=hi?0:(ti=Ve.Ib(je,Ve),Ve.Jb!=null&&Ve.Jb(je,Ve,ti),Ve.Dc+=ti,1)}function Rn(je){je.ma.memory=null}function Cn(je,Ve,ti,hi){return vi(je,8)!=47?0:(Ve[0]=vi(je,14)+1,ti[0]=vi(je,14)+1,hi[0]=vi(je,1),vi(je,3)!=0?0:!je.h)}function Bn(je,Ve){if(4>je)return je+1;var ti=je-2>>1;return(2+(1&je)<<ti)+vi(Ve,ti)+1}function tr(je,Ve){return 120<Ve?Ve-120:1<=(ti=((ti=eh[Ve-1])>>4)*je+(8-(15&ti)))?ti:1;var ti}function Xn(je,Ve,ti){var hi=Ge(ti),yi=je[Ve+=255&hi].g-8;return 0<yi&&(qe(ti,ti.u+8),hi=Ge(ti),Ve+=je[Ve].value,Ve+=hi&(1<<yi)-1),qe(ti,ti.u+je[Ve].g),je[Ve].value}function Wn(je,Ve,ti){return ti.g+=je.g,ti.value+=je.value<<Ve>>>0,t(8>=ti.g),je.g}function Yn(je,Ve,ti){var hi=je.xc;return t((Ve=hi==0?0:je.vc[je.md*(ti>>hi)+(Ve>>hi)])<je.Wb),je.Ya[Ve]}function rr(je,Ve,ti,hi){var yi=je.ab,Pi=je.c*Ve,Oi=je.C;Ve=Oi+Ve;var ki=ti,Ii=hi;for(hi=je.Ta,ti=je.Ua;0<yi--;){var Bi=je.gc[yi],$i=Oi,tn=Ve,en=ki,Ji=Ii,fn=(Ii=hi,ki=ti,Bi.Ea);switch(t($i<tn),t(tn<=Bi.nc),Bi.hc){case 2:ho(en,Ji,(tn-$i)*fn,Ii,ki);break;case 0:var nn=$i,Yi=tn,Gi=Ii,hn=ki,pn=(An=Bi).Ea;nn==0&&(al(en,Ji,null,null,1,Gi,hn),Xi(en,Ji+1,0,0,pn-1,Gi,hn+1),Ji+=pn,hn+=pn,++nn);for(var un=1<<An.b,wn=un-1,yn=pi(pn,An.b),kn=An.K,An=An.w+(nn>>An.b)*yn;nn<Yi;){var Gn=kn,Kn=An,$n=1;for(ka(en,Ji,Gi,hn-pn,1,Gi,hn);$n<pn;){var qn=($n&~wn)+un;qn>pn&&(qn=pn),(0,vs[Gn[Kn++]>>8&15])(en,Ji+ +$n,Gi,hn+$n-pn,qn-$n,Gi,hn+$n),$n=qn}Ji+=pn,hn+=pn,++nn&wn||(An+=yn)}tn!=Bi.nc&&Ce(Ii,ki-fn,Ii,ki+(tn-$i-1)*fn,fn);break;case 1:for(fn=en,Yi=Ji,pn=(en=Bi.Ea)-(hn=en&~(Gi=(Ji=1<<Bi.b)-1)),nn=pi(en,Bi.b),un=Bi.K,Bi=Bi.w+($i>>Bi.b)*nn;$i<tn;){for(wn=un,yn=Bi,kn=new Ri,An=Yi+hn,Gn=Yi+en;Yi<An;)ji(wn[yn++],kn),Dr(kn,fn,Yi,Ji,Ii,ki),Yi+=Ji,ki+=Ji;Yi<Gn&&(ji(wn[yn++],kn),Dr(kn,fn,Yi,pn,Ii,ki),Yi+=pn,ki+=pn),++$i&Gi||(Bi+=nn)}break;case 3:if(en==Ii&&Ji==ki&&0<Bi.b){for(Yi=Ii,en=fn=ki+(tn-$i)*fn-(hn=(tn-$i)*pi(Bi.Ea,Bi.b)),Ji=Ii,Gi=ki,nn=[],hn=(pn=hn)-1;0<=hn;--hn)nn[hn]=Ji[Gi+hn];for(hn=pn-1;0<=hn;--hn)Yi[en+hn]=nn[hn];zr(Bi,$i,tn,Ii,fn,Ii,ki)}else zr(Bi,$i,tn,en,Ji,Ii,ki)}ki=hi,Ii=ti}Ii!=ti&&Ce(hi,ti,ki,Ii,Pi)}function nr(je,Ve){var ti=je.V,hi=je.Ba+je.c*je.C,yi=Ve-je.C;if(t(Ve<=je.l.o),t(16>=yi),0<yi){var Pi=je.l,Oi=je.Ta,ki=je.Ua,Ii=Pi.width;if(rr(je,yi,ti,hi),yi=ki=[ki],t((ti=je.C)<(hi=Ve)),t(Pi.v<Pi.va),hi>Pi.o&&(hi=Pi.o),ti<Pi.j){var Bi=Pi.j-ti;ti=Pi.j,yi[0]+=Bi*Ii}if(ti>=hi?ti=0:(yi[0]+=4*Pi.v,Pi.ka=ti-Pi.j,Pi.U=Pi.va-Pi.v,Pi.T=hi-ti,ti=1),ti){if(ki=ki[0],11>(ti=je.ca).S){var $i=ti.f.RGBA,tn=(hi=ti.S,yi=Pi.U,Pi=Pi.T,Bi=$i.eb,$i.A),en=Pi;for($i=$i.fb+je.Ma*$i.A;0<en--;){var Ji=Oi,fn=ki,nn=yi,Yi=Bi,Gi=$i;switch(hi){case po:$r(Ji,fn,nn,Yi,Gi);break;case go:_s(Ji,fn,nn,Yi,Gi);break;case ul:_s(Ji,fn,nn,Yi,Gi),As(Yi,Gi,0,nn,1,0);break;case Zl:ia(Ji,fn,nn,Yi,Gi);break;case mo:Hn(Ji,fn,nn,Yi,Gi,1);break;case dl:Hn(Ji,fn,nn,Yi,Gi,1),As(Yi,Gi,0,nn,1,0);break;case vo:Hn(Ji,fn,nn,Yi,Gi,0);break;case _o:Hn(Ji,fn,nn,Yi,Gi,0),As(Yi,Gi,1,nn,1,0);break;case hl:ts(Ji,fn,nn,Yi,Gi);break;case pl:ts(Ji,fn,nn,Yi,Gi),sa(Yi,Gi,nn,1,0);break;case tc:as(Ji,fn,nn,Yi,Gi);break;default:t(0)}ki+=Ii,$i+=tn}je.Ma+=Pi}else alert("todo:EmitRescaledRowsYUVA");t(je.Ma<=ti.height)}}je.C=Ve,t(je.C<=je.i)}function ur(je){var Ve;if(0<je.ua)return 0;for(Ve=0;Ve<je.Wb;++Ve){var ti=je.Ya[Ve].G,hi=je.Ya[Ve].H;if(0<ti[1][hi[1]+0].g||0<ti[2][hi[2]+0].g||0<ti[3][hi[3]+0].g)return 0}return 1}function fr(je,Ve,ti,hi,yi,Pi){if(je.Z!=0){var Oi=je.qd,ki=je.rd;for(t(Es[je.Z]!=null);Ve<ti;++Ve)Es[je.Z](Oi,ki,hi,yi,hi,yi,Pi),Oi=hi,ki=yi,yi+=Pi;je.qd=Oi,je.rd=ki}}function yr(je,Ve){var ti=je.l.ma,hi=ti.Z==0||ti.Z==1?je.l.j:je.C;if(hi=je.C<hi?hi:je.C,t(Ve<=je.l.o),Ve>hi){var yi=je.l.width,Pi=ti.ca,Oi=ti.tb+yi*hi,ki=je.V,Ii=je.Ba+je.c*hi,Bi=je.gc;t(je.ab==1),t(Bi[0].hc==3),ol(Bi[0],hi,Ve,ki,Ii,Pi,Oi),fr(ti,hi,Ve,Pi,Oi,yi)}je.C=je.Ma=Ve}function Cr(je,Ve,ti,hi,yi,Pi,Oi){var ki=je.$/hi,Ii=je.$%hi,Bi=je.m,$i=je.s,tn=ti+je.$,en=tn;yi=ti+hi*yi;var Ji=ti+hi*Pi,fn=280+$i.ua,nn=je.Pb?ki:16777216,Yi=0<$i.ua?$i.Wa:null,Gi=$i.wc,hn=tn<Ji?Yn($i,Ii,ki):null;t(je.C<Pi),t(Ji<=yi);var pn=!1;t:for(;;){for(;pn||tn<Ji;){var un=0;if(ki>=nn){var wn=tn-ti;t((nn=je).Pb),nn.wd=nn.m,nn.xd=wn,0<nn.s.ua&&Ze(nn.s.Wa,nn.s.vb),nn=ki+nh}if(Ii&Gi||(hn=Yn($i,Ii,ki)),t(hn!=null),hn.Qb&&(Ve[tn]=hn.qb,pn=!0),!pn)if(ei(Bi),hn.jc){un=Bi,wn=Ve;var yn=tn,kn=hn.pd[Ge(un)&xr-1];t(hn.jc),256>kn.g?(qe(un,un.u+kn.g),wn[yn]=kn.value,un=0):(qe(un,un.u+kn.g-256),t(256<=kn.value),un=kn.value),un==0&&(pn=!0)}else un=Xn(hn.G[0],hn.H[0],Bi);if(Bi.h)break;if(pn||256>un){if(!pn)if(hn.nd)Ve[tn]=(hn.qb|un<<8)>>>0;else{if(ei(Bi),pn=Xn(hn.G[1],hn.H[1],Bi),ei(Bi),wn=Xn(hn.G[2],hn.H[2],Bi),yn=Xn(hn.G[3],hn.H[3],Bi),Bi.h)break;Ve[tn]=(yn<<24|pn<<16|un<<8|wn)>>>0}if(pn=!1,++tn,++Ii>=hi&&(Ii=0,++ki,Oi!=null&&ki<=Pi&&!(ki%16)&&Oi(je,ki),Yi!=null))for(;en<tn;)un=Ve[en++],Yi.X[(506832829*un&4294967295)>>>Yi.Mb]=un}else if(280>un){if(un=Bn(un-256,Bi),wn=Xn(hn.G[4],hn.H[4],Bi),ei(Bi),wn=tr(hi,wn=Bn(wn,Bi)),Bi.h)break;if(tn-ti<wn||yi-tn<un)break t;for(yn=0;yn<un;++yn)Ve[tn+yn]=Ve[tn+yn-wn];for(tn+=un,Ii+=un;Ii>=hi;)Ii-=hi,++ki,Oi!=null&&ki<=Pi&&!(ki%16)&&Oi(je,ki);if(t(tn<=yi),Ii&Gi&&(hn=Yn($i,Ii,ki)),Yi!=null)for(;en<tn;)un=Ve[en++],Yi.X[(506832829*un&4294967295)>>>Yi.Mb]=un}else{if(!(un<fn))break t;for(pn=un-280,t(Yi!=null);en<tn;)un=Ve[en++],Yi.X[(506832829*un&4294967295)>>>Yi.Mb]=un;un=tn,t(!(pn>>>(wn=Yi).Xa)),Ve[un]=wn.X[pn],pn=!0}pn||t(Bi.h==ze(Bi))}if(je.Pb&&Bi.h&&tn<yi)t(je.m.h),je.a=5,je.m=je.wd,je.$=je.xd,0<je.s.ua&&Ze(je.s.vb,je.s.Wa);else{if(Bi.h)break t;Oi!=null&&Oi(je,ki>Pi?Pi:ki),je.a=0,je.$=tn-ti}return 1}return je.a=3,0}function Jr(je){t(je!=null),je.vc=null,je.yc=null,je.Ya=null;var Ve=je.Wa;Ve!=null&&(Ve.X=null),je.vb=null,t(je!=null)}function Ir(){var je=new sl;return je==null?null:(je.a=0,je.xb=nc,Hi("Predictor","VP8LPredictors"),Hi("Predictor","VP8LPredictors_C"),Hi("PredictorAdd","VP8LPredictorsAdd"),Hi("PredictorAdd","VP8LPredictorsAdd_C"),ho=Zi,Dr=Ki,$r=rn,_s=xn,ts=Sn,as=Tn,ia=Ln,Qe.VP8LMapColor32b=Ra,Qe.VP8LMapColor8b=ll,je)}function Qr(je,Ve,ti,hi,yi){var Pi=1,Oi=[je],ki=[Ve],Ii=hi.m,Bi=hi.s,$i=null,tn=0;t:for(;;){if(ti)for(;Pi&&vi(Ii,1);){var en=Oi,Ji=ki,fn=hi,nn=1,Yi=fn.m,Gi=fn.gc[fn.ab],hn=vi(Yi,2);if(fn.Oc&1<<hn)Pi=0;else{switch(fn.Oc|=1<<hn,Gi.hc=hn,Gi.Ea=en[0],Gi.nc=Ji[0],Gi.K=[null],++fn.ab,t(4>=fn.ab),hn){case 0:case 1:Gi.b=vi(Yi,3)+2,nn=Qr(pi(Gi.Ea,Gi.b),pi(Gi.nc,Gi.b),0,fn,Gi.K),Gi.K=Gi.K[0];break;case 3:var pn,un=vi(Yi,8)+1,wn=16<un?0:4<un?1:2<un?2:3;if(en[0]=pi(Gi.Ea,wn),Gi.b=wn,pn=nn=Qr(un,1,0,fn,Gi.K)){var yn,kn=un,An=Gi,Gn=1<<(8>>An.b),Kn=Ie(Gn);if(Kn==null)pn=0;else{var $n=An.K[0],qn=An.w;for(Kn[0]=An.K[0][0],yn=1;yn<1*kn;++yn)Kn[yn]=gi($n[qn+yn],Kn[yn-1]);for(;yn<4*Gn;++yn)Kn[yn]=0;An.K[0]=null,An.K[0]=Kn,pn=1}}nn=pn;break;case 2:break;default:t(0)}Pi=nn}}if(Oi=Oi[0],ki=ki[0],Pi&&vi(Ii,1)&&!(Pi=1<=(tn=vi(Ii,4))&&11>=tn)){hi.a=3;break t}var Zn;if(Zn=Pi)e:{var Qn,jn,pr,Or=hi,gr=Oi,Lr=ki,Jn=tn,Rr=ti,Mr=Or.m,_r=Or.s,Ar=[null],wr=1,Hr=0,es=ih[Jn];i:for(;;){if(Rr&&vi(Mr,1)){var br=vi(Mr,3)+2,us=pi(gr,br),Ds=pi(Lr,br),aa=us*Ds;if(!Qr(us,Ds,0,Or,Ar))break i;for(Ar=Ar[0],_r.xc=br,Qn=0;Qn<aa;++Qn){var ws=Ar[Qn]>>8&65535;Ar[Qn]=ws,ws>=wr&&(wr=ws+1)}}if(Mr.h)break i;for(jn=0;5>jn;++jn){var or=ec[jn];!jn&&0<Jn&&(or+=1<<Jn),Hr<or&&(Hr=or)}var _l=Fe(wr*es,li),dc=wr,pc=Fe(dc,mi);if(pc==null)var So=null;else t(65536>=dc),So=pc;var Ba=Ie(Hr);if(So==null||Ba==null||_l==null){Or.a=1;break i}var Eo=_l;for(Qn=pr=0;Qn<wr;++Qn){var Kr=So[Qn],oa=Kr.G,la=Kr.H,gc=0,wo=1,mc=0;for(jn=0;5>jn;++jn){or=ec[jn],oa[jn]=Eo,la[jn]=pr,!jn&&0<Jn&&(or+=1<<Jn);r:{var Co,bl=or,To=Or,ja=Ba,Eh=Eo,wh=pr,yl=0,Cs=To.m,Ch=vi(Cs,1);if(Me(ja,0,0,bl),Ch){var Th=vi(Cs,1)+1,xh=vi(Cs,1),vc=vi(Cs,xh==0?1:8);ja[vc]=1,Th==2&&(ja[vc=vi(Cs,8)]=1);var xo=1}else{var _c=Ie(19),bc=vi(Cs,4)+4;if(19<bc){To.a=3;var Po=0;break r}for(Co=0;Co<bc;++Co)_c[th[Co]]=vi(Cs,3);var Al=void 0,Ha=void 0,yc=To,Ph=_c,Oo=bl,Ac=ja,Sl=0,Ts=yc.m,Sc=8,Ec=Fe(128,li);n:for(;ii(Ec,0,7,Ph,19);){if(vi(Ts,1)){var Oh=2+2*vi(Ts,3);if((Al=2+vi(Ts,Oh))>Oo)break n}else Al=Oo;for(Ha=0;Ha<Oo&&Al--;){ei(Ts);var wc=Ec[0+(127&Ge(Ts))];qe(Ts,Ts.u+wc.g);var ca=wc.value;if(16>ca)Ac[Ha++]=ca,ca!=0&&(Sc=ca);else{var Lh=ca==16,Cc=ca-16,Nh=Qc[Cc],Tc=vi(Ts,Jc[Cc])+Nh;if(Ha+Tc>Oo)break n;for(var kh=Lh?Sc:0;0<Tc--;)Ac[Ha++]=kh}}Sl=1;break n}Sl||(yc.a=3),xo=Sl}(xo=xo&&!Cs.h)&&(yl=ii(Eh,wh,8,ja,bl)),xo&&yl!=0?Po=yl:(To.a=3,Po=0)}if(Po==0)break i;if(wo&&Zc[jn]==1&&(wo=Eo[pr].g==0),gc+=Eo[pr].g,pr+=Po,3>=jn){var Ua,El=Ba[0];for(Ua=1;Ua<or;++Ua)Ba[Ua]>El&&(El=Ba[Ua]);mc+=El}}if(Kr.nd=wo,Kr.Qb=0,wo&&(Kr.qb=(oa[3][la[3]+0].value<<24|oa[1][la[1]+0].value<<16|oa[2][la[2]+0].value)>>>0,gc==0&&256>oa[0][la[0]+0].value&&(Kr.Qb=1,Kr.qb+=oa[0][la[0]+0].value<<8)),Kr.jc=!Kr.Qb&&6>mc,Kr.jc){var Lo,fs=Kr;for(Lo=0;Lo<xr;++Lo){var xs=Lo,Ps=fs.pd[xs],No=fs.G[0][fs.H[0]+xs];256<=No.value?(Ps.g=No.g+256,Ps.value=No.value):(Ps.g=0,Ps.value=0,xs>>=Wn(No,8,Ps),xs>>=Wn(fs.G[1][fs.H[1]+xs],16,Ps),xs>>=Wn(fs.G[2][fs.H[2]+xs],0,Ps),Wn(fs.G[3][fs.H[3]+xs],24,Ps))}}}_r.vc=Ar,_r.Wb=wr,_r.Ya=So,_r.yc=_l,Zn=1;break e}Zn=0}if(!(Pi=Zn)){hi.a=3;break t}if(0<tn){if(Bi.ua=1<<tn,!Ye(Bi.Wa,tn)){hi.a=1,Pi=0;break t}}else Bi.ua=0;var wl=hi,xc=Oi,Rh=ki,Cl=wl.s,Tl=Cl.xc;if(wl.c=xc,wl.i=Rh,Cl.md=pi(xc,Tl),Cl.wc=Tl==0?-1:(1<<Tl)-1,ti){hi.xb=hh;break t}if(($i=Ie(Oi*ki))==null){hi.a=1,Pi=0;break t}Pi=(Pi=Cr(hi,$i,0,Oi,ki,ki,null))&&!Ii.h;break t}return Pi?(yi!=null?yi[0]=$i:(t($i==null),t(ti)),hi.$=0,ti||Jr(Bi)):Jr(Bi),Pi}function Os(je,Ve){var ti=je.c*je.i,hi=ti+Ve+16*Ve;return t(je.c<=Ve),je.V=Ie(hi),je.V==null?(je.Ta=null,je.Ua=0,je.a=1,0):(je.Ta=je.V,je.Ua=je.Ba+ti+Ve,1)}function Fs(je,Ve){var ti=je.C,hi=Ve-ti,yi=je.V,Pi=je.Ba+je.c*ti;for(t(Ve<=je.l.o);0<hi;){var Oi=16<hi?16:hi,ki=je.l.ma,Ii=je.l.width,Bi=Ii*Oi,$i=ki.ca,tn=ki.tb+Ii*ti,en=je.Ta,Ji=je.Ua;rr(je,Oi,yi,Pi),Yl(en,Ji,$i,tn,Bi),fr(ki,ti,ti+Oi,$i,tn,Ii),hi-=Oi,yi+=Oi*je.c,ti+=Oi}t(ti==Ve),je.C=je.Ma=Ve}function Bs(){this.ub=this.yd=this.td=this.Rb=0}function js(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hs(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ie(4),this.Lb=Ie(4)}function qa(){this.Yb=function(){var je=[];return function Ve(ti,hi,yi){for(var Pi=yi[hi],Oi=0;Oi<Pi&&(ti.push(yi.length>hi+1?[]:0),!(yi.length<hi+1));Oi++)Ve(ti[Oi],hi+1,yi)}(je,0,[3,11]),je}()}function Do(){this.jb=Ie(3),this.Wc=Oe([4,8],qa),this.Xc=Oe([4,17],qa)}function Fo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ie(4),this.od=new Ie(4)}function Us(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function Bo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function fa(){this.ad=Ie(384),this.Za=0,this.Ob=Ie(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function jo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Us),this.Y=0,this.ya=Array(new fa),this.aa=0,this.l=new Vs}function $a(){this.y=Ie(16),this.f=Ie(8),this.ea=Ie(8)}function Ho(){this.cb=this.a=0,this.sc="",this.m=new Ci,this.Od=new Bs,this.Kc=new js,this.ed=new Fo,this.Qa=new Hs,this.Ic=this.$c=this.Aa=0,this.D=new jo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Fe(8,Ci),this.ia=0,this.pb=Fe(4,Bo),this.Pa=new Do,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $a),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new Us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new fa),this.L=this.aa=0,this.gd=Oe([4,2],Us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Uo(){var je=new Ho;return je!=null&&(je.a=0,je.sc="OK",je.cb=0,je.Xb=0,Da||(Da=Xa)),je}function cr(je,Ve,ti){return je.a==0&&(je.a=Ve,je.sc=ti,je.cb=0),0}function Ya(je,Ve,ti){return 3<=ti&&je[Ve+0]==157&&je[Ve+1]==1&&je[Ve+2]==42}function Ga(je,Ve){if(je==null)return 0;if(je.a=0,je.sc="OK",Ve==null)return cr(je,2,"null VP8Io passed to VP8GetHeaders()");var ti=Ve.data,hi=Ve.w,yi=Ve.ha;if(4>yi)return cr(je,7,"Truncated header.");var Pi=ti[hi+0]|ti[hi+1]<<8|ti[hi+2]<<16,Oi=je.Od;if(Oi.Rb=!(1&Pi),Oi.td=Pi>>1&7,Oi.yd=Pi>>4&1,Oi.ub=Pi>>5,3<Oi.td)return cr(je,3,"Incorrect keyframe parameters.");if(!Oi.yd)return cr(je,4,"Frame not displayable.");hi+=3,yi-=3;var ki=je.Kc;if(Oi.Rb){if(7>yi)return cr(je,7,"cannot parse picture header");if(!Ya(ti,hi,yi))return cr(je,3,"Bad code word");ki.c=16383&(ti[hi+4]<<8|ti[hi+3]),ki.Td=ti[hi+4]>>6,ki.i=16383&(ti[hi+6]<<8|ti[hi+5]),ki.Ud=ti[hi+6]>>6,hi+=7,yi-=7,je.za=ki.c+15>>4,je.Ub=ki.i+15>>4,Ve.width=ki.c,Ve.height=ki.i,Ve.Da=0,Ve.j=0,Ve.v=0,Ve.va=Ve.width,Ve.o=Ve.height,Ve.da=0,Ve.ib=Ve.width,Ve.hb=Ve.height,Ve.U=Ve.width,Ve.T=Ve.height,Me((Pi=je.Pa).jb,0,255,Pi.jb.length),t((Pi=je.Qa)!=null),Pi.Cb=0,Pi.Bb=0,Pi.Fb=1,Me(Pi.Zb,0,0,Pi.Zb.length),Me(Pi.Lb,0,0,Pi.Lb)}if(Oi.ub>yi)return cr(je,7,"bad partition length");Si(Pi=je.m,ti,hi,Oi.ub),hi+=Oi.ub,yi-=Oi.ub,Oi.Rb&&(ki.Ld=ci(Pi),ki.Kd=ci(Pi)),ki=je.Qa;var Ii,Bi=je.Pa;if(t(Pi!=null),t(ki!=null),ki.Cb=ci(Pi),ki.Cb){if(ki.Bb=ci(Pi),ci(Pi)){for(ki.Fb=ci(Pi),Ii=0;4>Ii;++Ii)ki.Zb[Ii]=ci(Pi)?xi(Pi,7):0;for(Ii=0;4>Ii;++Ii)ki.Lb[Ii]=ci(Pi)?xi(Pi,6):0}if(ki.Bb)for(Ii=0;3>Ii;++Ii)Bi.jb[Ii]=ci(Pi)?_i(Pi,8):255}else ki.Bb=0;if(Pi.Ka)return cr(je,3,"cannot parse segment header");if((ki=je.ed).zd=ci(Pi),ki.Tb=_i(Pi,6),ki.wb=_i(Pi,3),ki.Pc=ci(Pi),ki.Pc&&ci(Pi)){for(Bi=0;4>Bi;++Bi)ci(Pi)&&(ki.vd[Bi]=xi(Pi,6));for(Bi=0;4>Bi;++Bi)ci(Pi)&&(ki.od[Bi]=xi(Pi,6))}if(je.L=ki.Tb==0?0:ki.zd?1:2,Pi.Ka)return cr(je,3,"cannot parse filter header");var $i=yi;if(yi=Ii=hi,hi=Ii+$i,ki=$i,je.Xb=(1<<_i(je.m,2))-1,$i<3*(Bi=je.Xb))ti=7;else{for(Ii+=3*Bi,ki-=3*Bi,$i=0;$i<Bi;++$i){var tn=ti[yi+0]|ti[yi+1]<<8|ti[yi+2]<<16;tn>ki&&(tn=ki),Si(je.Jc[+$i],ti,Ii,tn),Ii+=tn,ki-=tn,yi+=3}Si(je.Jc[+Bi],ti,Ii,ki),ti=Ii<hi?0:5}if(ti!=0)return cr(je,ti,"cannot parse partitions");for(ti=_i(Ii=je.m,7),yi=ci(Ii)?xi(Ii,4):0,hi=ci(Ii)?xi(Ii,4):0,ki=ci(Ii)?xi(Ii,4):0,Bi=ci(Ii)?xi(Ii,4):0,Ii=ci(Ii)?xi(Ii,4):0,$i=je.Qa,tn=0;4>tn;++tn){if($i.Cb){var en=$i.Zb[tn];$i.Fb||(en+=ti)}else{if(0<tn){je.pb[tn]=je.pb[0];continue}en=ti}var Ji=je.pb[tn];Ji.Sc[0]=gl[Nr(en+yi,127)],Ji.Sc[1]=ml[Nr(en+0,127)],Ji.Eb[0]=2*gl[Nr(en+hi,127)],Ji.Eb[1]=101581*ml[Nr(en+ki,127)]>>16,8>Ji.Eb[1]&&(Ji.Eb[1]=8),Ji.Qc[0]=gl[Nr(en+Bi,117)],Ji.Qc[1]=ml[Nr(en+Ii,127)],Ji.lc=en+Ii}if(!Oi.Rb)return cr(je,4,"Not a key frame.");for(ci(Pi),Oi=je.Pa,ti=0;4>ti;++ti){for(yi=0;8>yi;++yi)for(hi=0;3>hi;++hi)for(ki=0;11>ki;++ki)Bi=di(Pi,lh[ti][yi][hi][ki])?_i(Pi,8):ah[ti][yi][hi][ki],Oi.Wc[ti][yi].Yb[hi][ki]=Bi;for(yi=0;17>yi;++yi)Oi.Xc[ti][yi]=Oi.Wc[ti][ch[yi]]}return je.kc=ci(Pi),je.kc&&(je.Bd=_i(Pi,8)),je.cb=1}function Xa(je,Ve,ti,hi,yi,Pi,Oi){var ki=Ve[yi].Yb[ti];for(ti=0;16>yi;++yi){if(!di(je,ki[ti+0]))return yi;for(;!di(je,ki[ti+1]);)if(ki=Ve[++yi].Yb[0],ti=0,yi==16)return 16;var Ii=Ve[yi+1].Yb;if(di(je,ki[ti+2])){var Bi=je,$i=0;if(di(Bi,(en=ki)[(tn=ti)+3]))if(di(Bi,en[tn+6])){for(ki=0,tn=2*($i=di(Bi,en[tn+8]))+(en=di(Bi,en[tn+9+$i])),$i=0,en=rh[tn];en[ki];++ki)$i+=$i+di(Bi,en[ki]);$i+=3+(8<<tn)}else di(Bi,en[tn+7])?($i=7+2*di(Bi,165),$i+=di(Bi,145)):$i=5+di(Bi,159);else $i=di(Bi,en[tn+4])?3+di(Bi,en[tn+5]):2;ki=Ii[2]}else $i=1,ki=Ii[1];Ii=Oi+sh[yi],0>(Bi=je).b&&ni(Bi);var tn,en=Bi.b,Ji=(tn=Bi.Ca>>1)-(Bi.I>>en)>>31;--Bi.b,Bi.Ca+=Ji,Bi.Ca|=1,Bi.I-=(tn+1&Ji)<<en,Pi[Ii]=(($i^Ji)-Ji)*hi[(0<yi)+0]}return 16}function da(je){var Ve=je.rb[je.sb-1];Ve.la=0,Ve.Na=0,Me(je.zc,0,0,je.zc.length),je.ja=0}function Vo(je,Ve){if(je==null)return 0;if(Ve==null)return cr(je,2,"NULL VP8Io parameter in VP8Decode().");if(!je.cb&&!Ga(je,Ve))return 0;if(t(je.cb),Ve.ac==null||Ve.ac(Ve)){Ve.ob&&(je.L=0);var ti=Ao[je.L];if(je.L==2?(je.yb=0,je.zb=0):(je.yb=Ve.v-ti>>4,je.zb=Ve.j-ti>>4,0>je.yb&&(je.yb=0),0>je.zb&&(je.zb=0)),je.Va=Ve.o+15+ti>>4,je.Hb=Ve.va+15+ti>>4,je.Hb>je.za&&(je.Hb=je.za),je.Va>je.Ub&&(je.Va=je.Ub),0<je.L){var hi=je.ed;for(ti=0;4>ti;++ti){var yi;if(je.Qa.Cb){var Pi=je.Qa.Lb[ti];je.Qa.Fb||(Pi+=hi.Tb)}else Pi=hi.Tb;for(yi=0;1>=yi;++yi){var Oi=je.gd[ti][yi],ki=Pi;if(hi.Pc&&(ki+=hi.vd[0],yi&&(ki+=hi.od[0])),0<(ki=0>ki?0:63<ki?63:ki)){var Ii=ki;0<hi.wb&&(Ii=4<hi.wb?Ii>>2:Ii>>1)>9-hi.wb&&(Ii=9-hi.wb),1>Ii&&(Ii=1),Oi.dd=Ii,Oi.tc=2*ki+Ii,Oi.ld=40<=ki?2:15<=ki?1:0}else Oi.tc=0;Oi.La=yi}}}ti=0}else cr(je,6,"Frame setup failed"),ti=je.a;if(ti=ti==0){if(ti){je.$c=0,0<je.Aa||(je.Ic=Sh);t:{ti=je.Ic,hi=4*(Ii=je.za);var Bi=32*Ii,$i=Ii+1,tn=0<je.L?Ii*(0<je.Aa?2:1):0,en=(je.Aa==2?2:1)*Ii;if((Oi=hi+832+(yi=3*(16*ti+Ao[je.L])/2*Bi)+(Pi=je.Fa!=null&&0<je.Fa.length?je.Kc.c*je.Kc.i:0))!=Oi)ti=0;else{if(Oi>je.Vb){if(je.Vb=0,je.Ec=Ie(Oi),je.Fc=0,je.Ec==null){ti=cr(je,1,"no memory during frame initialization.");break t}je.Vb=Oi}Oi=je.Ec,ki=je.Fc,je.Ac=Oi,je.Bc=ki,ki+=hi,je.Gd=Fe(Bi,$a),je.Hd=0,je.rb=Fe($i+1,za),je.sb=1,je.wa=tn?Fe(tn,Us):null,je.Y=0,je.D.Nb=0,je.D.wa=je.wa,je.D.Y=je.Y,0<je.Aa&&(je.D.Y+=Ii),t(!0),je.oc=Oi,je.pc=ki,ki+=832,je.ya=Fe(en,fa),je.aa=0,je.D.ya=je.ya,je.D.aa=je.aa,je.Aa==2&&(je.D.aa+=Ii),je.R=16*Ii,je.B=8*Ii,Ii=(Bi=Ao[je.L])*je.R,Bi=Bi/2*je.B,je.sa=Oi,je.ta=ki+Ii,je.qa=je.sa,je.ra=je.ta+16*ti*je.R+Bi,je.Ha=je.qa,je.Ia=je.ra+8*ti*je.B+Bi,je.$c=0,ki+=yi,je.mb=Pi?Oi:null,je.nb=Pi?ki:null,t(ki+Pi<=je.Fc+je.Vb),da(je),Me(je.Ac,je.Bc,0,hi),ti=1}}if(ti){if(Ve.ka=0,Ve.y=je.sa,Ve.O=je.ta,Ve.f=je.qa,Ve.N=je.ra,Ve.ea=je.Ha,Ve.Vd=je.Ia,Ve.fa=je.R,Ve.Rc=je.B,Ve.F=null,Ve.J=0,!Ql){for(ti=-255;255>=ti;++ti)Gl[255+ti]=0>ti?-ti:ti;for(ti=-1020;1020>=ti;++ti)Xl[1020+ti]=-128>ti?-128:127<ti?127:ti;for(ti=-112;112>=ti;++ti)Kl[112+ti]=-16>ti?-16:15<ti?15:ti;for(ti=-255;510>=ti;++ti)Jl[255+ti]=0>ti?0:255<ti?255:ti;Ql=1}Yr=zo,na=Wo,bs=Ja,Gr=qo,os=Qa,Ma=Ka,Ms=ya,ra=ks,Is=rl,ys=Aa,Ia=nl,Fr=Gs,ls=Sa,er=oo,ir=ao,hr=rs,mr=ps,cs=il,Xr[0]=Zr,Xr[1]=$o,Xr[2]=Ko,Xr[3]=Jo,Xr[4]=eo,Xr[5]=$s,Xr[6]=io,Xr[7]=ma,Xr[8]=Zo,Xr[9]=Qo,Ss[0]=Za,Ss[1]=Go,Ss[2]=ns,Ss[3]=qs,Ss[4]=Sr,Ss[5]=Xo,Ss[6]=to,hs[0]=ds,hs[1]=Yo,hs[2]=tl,hs[3]=va,hs[4]=Ns,hs[5]=el,hs[6]=ba,ti=1}else ti=0}ti&&(ti=function(Ji,fn){for(Ji.M=0;Ji.M<Ji.Va;++Ji.M){var nn,Yi=Ji.Jc[Ji.M&Ji.Xb],Gi=Ji.m,hn=Ji;for(nn=0;nn<hn.za;++nn){var pn=Gi,un=hn,wn=un.Ac,yn=un.Bc+4*nn,kn=un.zc,An=un.ya[un.aa+nn];if(un.Qa.Bb?An.$b=di(pn,un.Pa.jb[0])?2+di(pn,un.Pa.jb[2]):di(pn,un.Pa.jb[1]):An.$b=0,un.kc&&(An.Ad=di(pn,un.Bd)),An.Za=!di(pn,145)+0,An.Za){var Gn=An.Ob,Kn=0;for(un=0;4>un;++un){var $n,qn=kn[0+un];for($n=0;4>$n;++$n){qn=oh[wn[yn+$n]][qn];for(var Zn=ic[di(pn,qn[0])];0<Zn;)Zn=ic[2*Zn+di(pn,qn[Zn])];qn=-Zn,wn[yn+$n]=qn}Ce(Gn,Kn,wn,yn,4),Kn+=4,kn[0+un]=qn}}else qn=di(pn,156)?di(pn,128)?1:3:di(pn,163)?2:0,An.Ob[0]=qn,Me(wn,yn,qn,4),Me(kn,0,qn,4);An.Dd=di(pn,142)?di(pn,114)?di(pn,183)?1:3:2:0}if(hn.m.Ka)return cr(Ji,7,"Premature end-of-partition0 encountered.");for(;Ji.ja<Ji.za;++Ji.ja){if(hn=Yi,pn=(Gi=Ji).rb[Gi.sb-1],wn=Gi.rb[Gi.sb+Gi.ja],nn=Gi.ya[Gi.aa+Gi.ja],yn=Gi.kc?nn.Ad:0)pn.la=wn.la=0,nn.Za||(pn.Na=wn.Na=0),nn.Hc=0,nn.Gc=0,nn.ia=0;else{var Qn,jn;if(pn=wn,wn=hn,yn=Gi.Pa.Xc,kn=Gi.ya[Gi.aa+Gi.ja],An=Gi.pb[kn.$b],un=kn.ad,Gn=0,Kn=Gi.rb[Gi.sb-1],qn=$n=0,Me(un,Gn,0,384),kn.Za)var pr=0,Or=yn[3];else{Zn=Ie(16);var gr=pn.Na+Kn.Na;if(gr=Da(wn,yn[1],gr,An.Eb,0,Zn,0),pn.Na=Kn.Na=(0<gr)+0,1<gr)Yr(Zn,0,un,Gn);else{var Lr=Zn[0]+3>>3;for(Zn=0;256>Zn;Zn+=16)un[Gn+Zn]=Lr}pr=1,Or=yn[0]}var Jn=15&pn.la,Rr=15&Kn.la;for(Zn=0;4>Zn;++Zn){var Mr=1&Rr;for(Lr=jn=0;4>Lr;++Lr)Jn=Jn>>1|(Mr=(gr=Da(wn,Or,gr=Mr+(1&Jn),An.Sc,pr,un,Gn))>pr)<<7,jn=jn<<2|(3<gr?3:1<gr?2:un[Gn+0]!=0),Gn+=16;Jn>>=4,Rr=Rr>>1|Mr<<7,$n=($n<<8|jn)>>>0}for(Or=Jn,pr=Rr>>4,Qn=0;4>Qn;Qn+=2){for(jn=0,Jn=pn.la>>4+Qn,Rr=Kn.la>>4+Qn,Zn=0;2>Zn;++Zn){for(Mr=1&Rr,Lr=0;2>Lr;++Lr)gr=Mr+(1&Jn),Jn=Jn>>1|(Mr=0<(gr=Da(wn,yn[2],gr,An.Qc,0,un,Gn)))<<3,jn=jn<<2|(3<gr?3:1<gr?2:un[Gn+0]!=0),Gn+=16;Jn>>=2,Rr=Rr>>1|Mr<<5}qn|=jn<<4*Qn,Or|=Jn<<4<<Qn,pr|=(240&Rr)<<Qn}pn.la=Or,Kn.la=pr,kn.Hc=$n,kn.Gc=qn,kn.ia=43690&qn?0:An.ia,yn=!($n|qn)}if(0<Gi.L&&(Gi.wa[Gi.Y+Gi.ja]=Gi.gd[nn.$b][nn.Za],Gi.wa[Gi.Y+Gi.ja].La|=!yn),hn.Ka)return cr(Ji,7,"Premature end-of-file encountered.")}if(da(Ji),Gi=fn,hn=1,nn=(Yi=Ji).D,pn=0<Yi.L&&Yi.M>=Yi.zb&&Yi.M<=Yi.Va,Yi.Aa==0)t:{if(nn.M=Yi.M,nn.uc=pn,Pa(Yi,nn),hn=1,nn=(jn=Yi.D).Nb,pn=(qn=Ao[Yi.L])*Yi.R,wn=qn/2*Yi.B,Zn=16*nn*Yi.R,Lr=8*nn*Yi.B,yn=Yi.sa,kn=Yi.ta-pn+Zn,An=Yi.qa,un=Yi.ra-wn+Lr,Gn=Yi.Ha,Kn=Yi.Ia-wn+Lr,Rr=(Jn=jn.M)==0,$n=Jn>=Yi.Va-1,Yi.Aa==2&&Pa(Yi,jn),jn.uc)for(Mr=(gr=Yi).D.M,t(gr.D.uc),jn=gr.yb;jn<gr.Hb;++jn){pr=jn,Or=Mr;var _r=(Ar=(or=gr).D).Nb;Qn=or.R;var Ar=Ar.wa[Ar.Y+pr],wr=or.sa,Hr=or.ta+16*_r*Qn+16*pr,es=Ar.dd,br=Ar.tc;if(br!=0)if(t(3<=br),or.L==1)0<pr&&hr(wr,Hr,Qn,br+4),Ar.La&&cs(wr,Hr,Qn,br),0<Or&&ir(wr,Hr,Qn,br+4),Ar.La&&mr(wr,Hr,Qn,br);else{var us=or.B,Ds=or.qa,aa=or.ra+8*_r*us+8*pr,ws=or.Ha,or=or.Ia+8*_r*us+8*pr;_r=Ar.ld,0<pr&&(ra(wr,Hr,Qn,br+4,es,_r),ys(Ds,aa,ws,or,us,br+4,es,_r)),Ar.La&&(Fr(wr,Hr,Qn,br,es,_r),er(Ds,aa,ws,or,us,br,es,_r)),0<Or&&(Ms(wr,Hr,Qn,br+4,es,_r),Is(Ds,aa,ws,or,us,br+4,es,_r)),Ar.La&&(Ia(wr,Hr,Qn,br,es,_r),ls(Ds,aa,ws,or,us,br,es,_r))}}if(Yi.ia&&alert("todo:DitherRow"),Gi.put!=null){if(jn=16*Jn,Jn=16*(Jn+1),Rr?(Gi.y=Yi.sa,Gi.O=Yi.ta+Zn,Gi.f=Yi.qa,Gi.N=Yi.ra+Lr,Gi.ea=Yi.Ha,Gi.W=Yi.Ia+Lr):(jn-=qn,Gi.y=yn,Gi.O=kn,Gi.f=An,Gi.N=un,Gi.ea=Gn,Gi.W=Kn),$n||(Jn-=qn),Jn>Gi.o&&(Jn=Gi.o),Gi.F=null,Gi.J=null,Yi.Fa!=null&&0<Yi.Fa.length&&jn<Jn&&(Gi.J=Ta(Yi,Gi,jn,Jn-jn),Gi.F=Yi.mb,Gi.F==null&&Gi.F.length==0)){hn=cr(Yi,3,"Could not decode alpha data.");break t}jn<Gi.j&&(qn=Gi.j-jn,jn=Gi.j,t(!(1&qn)),Gi.O+=Yi.R*qn,Gi.N+=Yi.B*(qn>>1),Gi.W+=Yi.B*(qn>>1),Gi.F!=null&&(Gi.J+=Gi.width*qn)),jn<Jn&&(Gi.O+=Gi.v,Gi.N+=Gi.v>>1,Gi.W+=Gi.v>>1,Gi.F!=null&&(Gi.J+=Gi.v),Gi.ka=jn-Gi.j,Gi.U=Gi.va-Gi.v,Gi.T=Jn-jn,hn=Gi.put(Gi))}nn+1!=Yi.Ic||$n||(Ce(Yi.sa,Yi.ta-pn,yn,kn+16*Yi.R,pn),Ce(Yi.qa,Yi.ra-wn,An,un+8*Yi.B,wn),Ce(Yi.Ha,Yi.Ia-wn,Gn,Kn+8*Yi.B,wn))}if(!hn)return cr(Ji,6,"Output aborted.")}return 1}(je,Ve)),Ve.bc!=null&&Ve.bc(Ve),ti&=1}return ti?(je.cb=0,ti):0}function Vr(je,Ve,ti,hi,yi){yi=je[Ve+ti+32*hi]+(yi>>3),je[Ve+ti+32*hi]=-256&yi?0>yi?0:255:yi}function Ws(je,Ve,ti,hi,yi,Pi){Vr(je,Ve,0,ti,hi+yi),Vr(je,Ve,1,ti,hi+Pi),Vr(je,Ve,2,ti,hi-Pi),Vr(je,Ve,3,ti,hi-yi)}function Tr(je){return(20091*je>>16)+je}function pa(je,Ve,ti,hi){var yi,Pi=0,Oi=Ie(16);for(yi=0;4>yi;++yi){var ki=je[Ve+0]+je[Ve+8],Ii=je[Ve+0]-je[Ve+8],Bi=(35468*je[Ve+4]>>16)-Tr(je[Ve+12]),$i=Tr(je[Ve+4])+(35468*je[Ve+12]>>16);Oi[Pi+0]=ki+$i,Oi[Pi+1]=Ii+Bi,Oi[Pi+2]=Ii-Bi,Oi[Pi+3]=ki-$i,Pi+=4,Ve++}for(yi=Pi=0;4>yi;++yi)ki=(je=Oi[Pi+0]+4)+Oi[Pi+8],Ii=je-Oi[Pi+8],Bi=(35468*Oi[Pi+4]>>16)-Tr(Oi[Pi+12]),Vr(ti,hi,0,0,ki+($i=Tr(Oi[Pi+4])+(35468*Oi[Pi+12]>>16))),Vr(ti,hi,1,0,Ii+Bi),Vr(ti,hi,2,0,Ii-Bi),Vr(ti,hi,3,0,ki-$i),Pi++,hi+=32}function Ka(je,Ve,ti,hi){var yi=je[Ve+0]+4,Pi=35468*je[Ve+4]>>16,Oi=Tr(je[Ve+4]),ki=35468*je[Ve+1]>>16;Ws(ti,hi,0,yi+Oi,je=Tr(je[Ve+1]),ki),Ws(ti,hi,1,yi+Pi,je,ki),Ws(ti,hi,2,yi-Pi,je,ki),Ws(ti,hi,3,yi-Oi,je,ki)}function Wo(je,Ve,ti,hi,yi){pa(je,Ve,ti,hi),yi&&pa(je,Ve+16,ti,hi+4)}function Ja(je,Ve,ti,hi){na(je,Ve+0,ti,hi,1),na(je,Ve+32,ti,hi+128,1)}function qo(je,Ve,ti,hi){var yi;for(je=je[Ve+0]+4,yi=0;4>yi;++yi)for(Ve=0;4>Ve;++Ve)Vr(ti,hi,Ve,yi,je)}function Qa(je,Ve,ti,hi){je[Ve+0]&&Gr(je,Ve+0,ti,hi),je[Ve+16]&&Gr(je,Ve+16,ti,hi+4),je[Ve+32]&&Gr(je,Ve+32,ti,hi+128),je[Ve+48]&&Gr(je,Ve+48,ti,hi+128+4)}function zo(je,Ve,ti,hi){var yi,Pi=Ie(16);for(yi=0;4>yi;++yi){var Oi=je[Ve+0+yi]+je[Ve+12+yi],ki=je[Ve+4+yi]+je[Ve+8+yi],Ii=je[Ve+4+yi]-je[Ve+8+yi],Bi=je[Ve+0+yi]-je[Ve+12+yi];Pi[0+yi]=Oi+ki,Pi[8+yi]=Oi-ki,Pi[4+yi]=Bi+Ii,Pi[12+yi]=Bi-Ii}for(yi=0;4>yi;++yi)Oi=(je=Pi[0+4*yi]+3)+Pi[3+4*yi],ki=Pi[1+4*yi]+Pi[2+4*yi],Ii=Pi[1+4*yi]-Pi[2+4*yi],Bi=je-Pi[3+4*yi],ti[hi+0]=Oi+ki>>3,ti[hi+16]=Bi+Ii>>3,ti[hi+32]=Oi-ki>>3,ti[hi+48]=Bi-Ii>>3,hi+=64}function ga(je,Ve,ti){var hi,yi=Ve-32,Pi=kr,Oi=255-je[yi-1];for(hi=0;hi<ti;++hi){var ki,Ii=Pi,Bi=Oi+je[Ve-1];for(ki=0;ki<ti;++ki)je[Ve+ki]=Ii[Bi+je[yi+ki]];Ve+=32}}function $o(je,Ve){ga(je,Ve,4)}function Yo(je,Ve){ga(je,Ve,8)}function Go(je,Ve){ga(je,Ve,16)}function ns(je,Ve){var ti;for(ti=0;16>ti;++ti)Ce(je,Ve+32*ti,je,Ve-32,16)}function qs(je,Ve){var ti;for(ti=16;0<ti;--ti)Me(je,Ve,je[Ve-1],16),Ve+=32}function zs(je,Ve,ti){var hi;for(hi=0;16>hi;++hi)Me(Ve,ti+32*hi,je,16)}function Za(je,Ve){var ti,hi=16;for(ti=0;16>ti;++ti)hi+=je[Ve-1+32*ti]+je[Ve+ti-32];zs(hi>>5,je,Ve)}function Sr(je,Ve){var ti,hi=8;for(ti=0;16>ti;++ti)hi+=je[Ve-1+32*ti];zs(hi>>4,je,Ve)}function Xo(je,Ve){var ti,hi=8;for(ti=0;16>ti;++ti)hi+=je[Ve+ti-32];zs(hi>>4,je,Ve)}function to(je,Ve){zs(128,je,Ve)}function In(je,Ve,ti){return je+2*Ve+ti+2>>2}function Ko(je,Ve){var ti,hi=Ve-32;for(hi=new Uint8Array([In(je[hi-1],je[hi+0],je[hi+1]),In(je[hi+0],je[hi+1],je[hi+2]),In(je[hi+1],je[hi+2],je[hi+3]),In(je[hi+2],je[hi+3],je[hi+4])]),ti=0;4>ti;++ti)Ce(je,Ve+32*ti,hi,0,hi.length)}function Jo(je,Ve){var ti=je[Ve-1],hi=je[Ve-1+32],yi=je[Ve-1+64],Pi=je[Ve-1+96];Ti(je,Ve+0,16843009*In(je[Ve-1-32],ti,hi)),Ti(je,Ve+32,16843009*In(ti,hi,yi)),Ti(je,Ve+64,16843009*In(hi,yi,Pi)),Ti(je,Ve+96,16843009*In(yi,Pi,Pi))}function Zr(je,Ve){var ti,hi=4;for(ti=0;4>ti;++ti)hi+=je[Ve+ti-32]+je[Ve-1+32*ti];for(hi>>=3,ti=0;4>ti;++ti)Me(je,Ve+32*ti,hi,4)}function eo(je,Ve){var ti=je[Ve-1+0],hi=je[Ve-1+32],yi=je[Ve-1+64],Pi=je[Ve-1-32],Oi=je[Ve+0-32],ki=je[Ve+1-32],Ii=je[Ve+2-32],Bi=je[Ve+3-32];je[Ve+0+96]=In(hi,yi,je[Ve-1+96]),je[Ve+1+96]=je[Ve+0+64]=In(ti,hi,yi),je[Ve+2+96]=je[Ve+1+64]=je[Ve+0+32]=In(Pi,ti,hi),je[Ve+3+96]=je[Ve+2+64]=je[Ve+1+32]=je[Ve+0+0]=In(Oi,Pi,ti),je[Ve+3+64]=je[Ve+2+32]=je[Ve+1+0]=In(ki,Oi,Pi),je[Ve+3+32]=je[Ve+2+0]=In(Ii,ki,Oi),je[Ve+3+0]=In(Bi,Ii,ki)}function io(je,Ve){var ti=je[Ve+1-32],hi=je[Ve+2-32],yi=je[Ve+3-32],Pi=je[Ve+4-32],Oi=je[Ve+5-32],ki=je[Ve+6-32],Ii=je[Ve+7-32];je[Ve+0+0]=In(je[Ve+0-32],ti,hi),je[Ve+1+0]=je[Ve+0+32]=In(ti,hi,yi),je[Ve+2+0]=je[Ve+1+32]=je[Ve+0+64]=In(hi,yi,Pi),je[Ve+3+0]=je[Ve+2+32]=je[Ve+1+64]=je[Ve+0+96]=In(yi,Pi,Oi),je[Ve+3+32]=je[Ve+2+64]=je[Ve+1+96]=In(Pi,Oi,ki),je[Ve+3+64]=je[Ve+2+96]=In(Oi,ki,Ii),je[Ve+3+96]=In(ki,Ii,Ii)}function $s(je,Ve){var ti=je[Ve-1+0],hi=je[Ve-1+32],yi=je[Ve-1+64],Pi=je[Ve-1-32],Oi=je[Ve+0-32],ki=je[Ve+1-32],Ii=je[Ve+2-32],Bi=je[Ve+3-32];je[Ve+0+0]=je[Ve+1+64]=Pi+Oi+1>>1,je[Ve+1+0]=je[Ve+2+64]=Oi+ki+1>>1,je[Ve+2+0]=je[Ve+3+64]=ki+Ii+1>>1,je[Ve+3+0]=Ii+Bi+1>>1,je[Ve+0+96]=In(yi,hi,ti),je[Ve+0+64]=In(hi,ti,Pi),je[Ve+0+32]=je[Ve+1+96]=In(ti,Pi,Oi),je[Ve+1+32]=je[Ve+2+96]=In(Pi,Oi,ki),je[Ve+2+32]=je[Ve+3+96]=In(Oi,ki,Ii),je[Ve+3+32]=In(ki,Ii,Bi)}function ma(je,Ve){var ti=je[Ve+0-32],hi=je[Ve+1-32],yi=je[Ve+2-32],Pi=je[Ve+3-32],Oi=je[Ve+4-32],ki=je[Ve+5-32],Ii=je[Ve+6-32],Bi=je[Ve+7-32];je[Ve+0+0]=ti+hi+1>>1,je[Ve+1+0]=je[Ve+0+64]=hi+yi+1>>1,je[Ve+2+0]=je[Ve+1+64]=yi+Pi+1>>1,je[Ve+3+0]=je[Ve+2+64]=Pi+Oi+1>>1,je[Ve+0+32]=In(ti,hi,yi),je[Ve+1+32]=je[Ve+0+96]=In(hi,yi,Pi),je[Ve+2+32]=je[Ve+1+96]=In(yi,Pi,Oi),je[Ve+3+32]=je[Ve+2+96]=In(Pi,Oi,ki),je[Ve+3+64]=In(Oi,ki,Ii),je[Ve+3+96]=In(ki,Ii,Bi)}function Qo(je,Ve){var ti=je[Ve-1+0],hi=je[Ve-1+32],yi=je[Ve-1+64],Pi=je[Ve-1+96];je[Ve+0+0]=ti+hi+1>>1,je[Ve+2+0]=je[Ve+0+32]=hi+yi+1>>1,je[Ve+2+32]=je[Ve+0+64]=yi+Pi+1>>1,je[Ve+1+0]=In(ti,hi,yi),je[Ve+3+0]=je[Ve+1+32]=In(hi,yi,Pi),je[Ve+3+32]=je[Ve+1+64]=In(yi,Pi,Pi),je[Ve+3+64]=je[Ve+2+64]=je[Ve+0+96]=je[Ve+1+96]=je[Ve+2+96]=je[Ve+3+96]=Pi}function Zo(je,Ve){var ti=je[Ve-1+0],hi=je[Ve-1+32],yi=je[Ve-1+64],Pi=je[Ve-1+96],Oi=je[Ve-1-32],ki=je[Ve+0-32],Ii=je[Ve+1-32],Bi=je[Ve+2-32];je[Ve+0+0]=je[Ve+2+32]=ti+Oi+1>>1,je[Ve+0+32]=je[Ve+2+64]=hi+ti+1>>1,je[Ve+0+64]=je[Ve+2+96]=yi+hi+1>>1,je[Ve+0+96]=Pi+yi+1>>1,je[Ve+3+0]=In(ki,Ii,Bi),je[Ve+2+0]=In(Oi,ki,Ii),je[Ve+1+0]=je[Ve+3+32]=In(ti,Oi,ki),je[Ve+1+32]=je[Ve+3+64]=In(hi,ti,Oi),je[Ve+1+64]=je[Ve+3+96]=In(yi,hi,ti),je[Ve+1+96]=In(Pi,yi,hi)}function tl(je,Ve){var ti;for(ti=0;8>ti;++ti)Ce(je,Ve+32*ti,je,Ve-32,8)}function va(je,Ve){var ti;for(ti=0;8>ti;++ti)Me(je,Ve,je[Ve-1],8),Ve+=32}function Ls(je,Ve,ti){var hi;for(hi=0;8>hi;++hi)Me(Ve,ti+32*hi,je,8)}function ds(je,Ve){var ti,hi=8;for(ti=0;8>ti;++ti)hi+=je[Ve+ti-32]+je[Ve-1+32*ti];Ls(hi>>4,je,Ve)}function el(je,Ve){var ti,hi=4;for(ti=0;8>ti;++ti)hi+=je[Ve+ti-32];Ls(hi>>3,je,Ve)}function Ns(je,Ve){var ti,hi=4;for(ti=0;8>ti;++ti)hi+=je[Ve-1+32*ti];Ls(hi>>3,je,Ve)}function ba(je,Ve){Ls(128,je,Ve)}function Ys(je,Ve,ti){var hi=je[Ve-ti],yi=je[Ve+0],Pi=3*(yi-hi)+cl[1020+je[Ve-2*ti]-je[Ve+ti]],Oi=fo[112+(Pi+4>>3)];je[Ve-ti]=kr[255+hi+fo[112+(Pi+3>>3)]],je[Ve+0]=kr[255+yi-Oi]}function no(je,Ve,ti,hi){var yi=je[Ve+0],Pi=je[Ve+ti];return Br[255+je[Ve-2*ti]-je[Ve-ti]]>hi||Br[255+Pi-yi]>hi}function ro(je,Ve,ti,hi){return 4*Br[255+je[Ve-ti]-je[Ve+0]]+Br[255+je[Ve-2*ti]-je[Ve+ti]]<=hi}function so(je,Ve,ti,hi,yi){var Pi=je[Ve-3*ti],Oi=je[Ve-2*ti],ki=je[Ve-ti],Ii=je[Ve+0],Bi=je[Ve+ti],$i=je[Ve+2*ti],tn=je[Ve+3*ti];return 4*Br[255+ki-Ii]+Br[255+Oi-Bi]>hi?0:Br[255+je[Ve-4*ti]-Pi]<=yi&&Br[255+Pi-Oi]<=yi&&Br[255+Oi-ki]<=yi&&Br[255+tn-$i]<=yi&&Br[255+$i-Bi]<=yi&&Br[255+Bi-Ii]<=yi}function ao(je,Ve,ti,hi){var yi=2*hi+1;for(hi=0;16>hi;++hi)ro(je,Ve+hi,ti,yi)&&Ys(je,Ve+hi,ti)}function rs(je,Ve,ti,hi){var yi=2*hi+1;for(hi=0;16>hi;++hi)ro(je,Ve+hi*ti,1,yi)&&Ys(je,Ve+hi*ti,1)}function ps(je,Ve,ti,hi){var yi;for(yi=3;0<yi;--yi)ao(je,Ve+=4*ti,ti,hi)}function il(je,Ve,ti,hi){var yi;for(yi=3;0<yi;--yi)rs(je,Ve+=4,ti,hi)}function gs(je,Ve,ti,hi,yi,Pi,Oi,ki){for(Pi=2*Pi+1;0<yi--;){if(so(je,Ve,ti,Pi,Oi))if(no(je,Ve,ti,ki))Ys(je,Ve,ti);else{var Ii=je,Bi=Ve,$i=ti,tn=Ii[Bi-2*$i],en=Ii[Bi-$i],Ji=Ii[Bi+0],fn=Ii[Bi+$i],nn=Ii[Bi+2*$i],Yi=27*(hn=cl[1020+3*(Ji-en)+cl[1020+tn-fn]])+63>>7,Gi=18*hn+63>>7,hn=9*hn+63>>7;Ii[Bi-3*$i]=kr[255+Ii[Bi-3*$i]+hn],Ii[Bi-2*$i]=kr[255+tn+Gi],Ii[Bi-$i]=kr[255+en+Yi],Ii[Bi+0]=kr[255+Ji-Yi],Ii[Bi+$i]=kr[255+fn-Gi],Ii[Bi+2*$i]=kr[255+nn-hn]}Ve+=hi}}function Wr(je,Ve,ti,hi,yi,Pi,Oi,ki){for(Pi=2*Pi+1;0<yi--;){if(so(je,Ve,ti,Pi,Oi))if(no(je,Ve,ti,ki))Ys(je,Ve,ti);else{var Ii=je,Bi=Ve,$i=ti,tn=Ii[Bi-$i],en=Ii[Bi+0],Ji=Ii[Bi+$i],fn=fo[112+((nn=3*(en-tn))+4>>3)],nn=fo[112+(nn+3>>3)],Yi=fn+1>>1;Ii[Bi-2*$i]=kr[255+Ii[Bi-2*$i]+Yi],Ii[Bi-$i]=kr[255+tn+nn],Ii[Bi+0]=kr[255+en-fn],Ii[Bi+$i]=kr[255+Ji-Yi]}Ve+=hi}}function ya(je,Ve,ti,hi,yi,Pi){gs(je,Ve,ti,1,16,hi,yi,Pi)}function ks(je,Ve,ti,hi,yi,Pi){gs(je,Ve,1,ti,16,hi,yi,Pi)}function nl(je,Ve,ti,hi,yi,Pi){var Oi;for(Oi=3;0<Oi;--Oi)Wr(je,Ve+=4*ti,ti,1,16,hi,yi,Pi)}function Gs(je,Ve,ti,hi,yi,Pi){var Oi;for(Oi=3;0<Oi;--Oi)Wr(je,Ve+=4,1,ti,16,hi,yi,Pi)}function rl(je,Ve,ti,hi,yi,Pi,Oi,ki){gs(je,Ve,yi,1,8,Pi,Oi,ki),gs(ti,hi,yi,1,8,Pi,Oi,ki)}function Aa(je,Ve,ti,hi,yi,Pi,Oi,ki){gs(je,Ve,1,yi,8,Pi,Oi,ki),gs(ti,hi,1,yi,8,Pi,Oi,ki)}function Sa(je,Ve,ti,hi,yi,Pi,Oi,ki){Wr(je,Ve+4*yi,yi,1,8,Pi,Oi,ki),Wr(ti,hi+4*yi,yi,1,8,Pi,Oi,ki)}function oo(je,Ve,ti,hi,yi,Pi,Oi,ki){Wr(je,Ve+4,1,yi,8,Pi,Oi,ki),Wr(ti,hi+4,1,yi,8,Pi,Oi,ki)}function Xs(){this.ba=new _n,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ea(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function lo(){this.ua=0,this.Wa=new Xe,this.vb=new Xe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new mi,this.yc=new li}function sl(){this.xb=this.a=0,this.l=new Vs,this.ca=new _n,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $e,this.Pb=0,this.wd=new $e,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new lo,this.ab=0,this.gc=Fe(4,wa),this.Oc=0}function Ks(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rs(je,Ve,ti,hi,yi,Pi,Oi){for(je=je==null?0:je[Ve+0],Ve=0;Ve<Oi;++Ve)yi[Pi+Ve]=je+ti[hi+Ve]&255,je=yi[Pi+Ve]}function Ca(je,Ve,ti,hi,yi,Pi,Oi){var ki;if(je==null)Rs(null,null,ti,hi,yi,Pi,Oi);else for(ki=0;ki<Oi;++ki)yi[Pi+ki]=je[Ve+ki]+ti[hi+ki]&255}function ms(je,Ve,ti,hi,yi,Pi,Oi){if(je==null)Rs(null,null,ti,hi,yi,Pi,Oi);else{var ki,Ii=je[Ve+0],Bi=Ii,$i=Ii;for(ki=0;ki<Oi;++ki)Bi=$i+(Ii=je[Ve+ki])-Bi,$i=ti[hi+ki]+(-256&Bi?0>Bi?0:255:Bi)&255,Bi=Ii,yi[Pi+ki]=$i}}function Ta(je,Ve,ti,hi){var yi=Ve.width,Pi=Ve.o;if(t(je!=null&&Ve!=null),0>ti||0>=hi||ti+hi>Pi)return null;if(!je.Cc){if(je.ga==null){var Oi;if(je.ga=new Ks,(Oi=je.ga==null)||(Oi=Ve.width*Ve.o,t(je.Gb.length==0),je.Gb=Ie(Oi),je.Uc=0,je.Gb==null?Oi=0:(je.mb=je.Gb,je.nb=je.Uc,je.rc=null,Oi=1),Oi=!Oi),!Oi){Oi=je.ga;var ki=je.Fa,Ii=je.P,Bi=je.qc,$i=je.mb,tn=je.nb,en=Ii+1,Ji=Bi-1,fn=Oi.l;if(t(ki!=null&&$i!=null&&Ve!=null),Es[0]=null,Es[1]=Rs,Es[2]=Ca,Es[3]=ms,Oi.ca=$i,Oi.tb=tn,Oi.c=Ve.width,Oi.i=Ve.height,t(0<Oi.c&&0<Oi.i),1>=Bi)Ve=0;else if(Oi.$a=ki[Ii+0]>>0&3,Oi.Z=ki[Ii+0]>>2&3,Oi.Lc=ki[Ii+0]>>4&3,Ii=ki[Ii+0]>>6&3,0>Oi.$a||1<Oi.$a||4<=Oi.Z||1<Oi.Lc||Ii)Ve=0;else if(fn.put=Vn,fn.ac=Mn,fn.bc=Rn,fn.ma=Oi,fn.width=Ve.width,fn.height=Ve.height,fn.Da=Ve.Da,fn.v=Ve.v,fn.va=Ve.va,fn.j=Ve.j,fn.o=Ve.o,Oi.$a)t:{t(Oi.$a==1),Ve=Ir();e:for(;;){if(Ve==null){Ve=0;break t}if(t(Oi!=null),Oi.mc=Ve,Ve.c=Oi.c,Ve.i=Oi.i,Ve.l=Oi.l,Ve.l.ma=Oi,Ve.l.width=Oi.c,Ve.l.height=Oi.i,Ve.a=0,Ei(Ve.m,ki,en,Ji),!Qr(Oi.c,Oi.i,1,Ve,null)||(Ve.ab==1&&Ve.gc[0].hc==3&&ur(Ve.s)?(Oi.ic=1,ki=Ve.c*Ve.i,Ve.Ta=null,Ve.Ua=0,Ve.V=Ie(ki),Ve.Ba=0,Ve.V==null?(Ve.a=1,Ve=0):Ve=1):(Oi.ic=0,Ve=Os(Ve,Oi.c)),!Ve))break e;Ve=1;break t}Oi.mc=null,Ve=0}else Ve=Ji>=Oi.c*Oi.i;Oi=!Ve}if(Oi)return null;je.ga.Lc!=1?je.Ga=0:hi=Pi-ti}t(je.ga!=null),t(ti+hi<=Pi);t:{if(Ve=(ki=je.ga).c,Pi=ki.l.o,ki.$a==0){if(en=je.rc,Ji=je.Vc,fn=je.Fa,Ii=je.P+1+ti*Ve,Bi=je.mb,$i=je.nb+ti*Ve,t(Ii<=je.P+je.qc),ki.Z!=0)for(t(Es[ki.Z]!=null),Oi=0;Oi<hi;++Oi)Es[ki.Z](en,Ji,fn,Ii,Bi,$i,Ve),en=Bi,Ji=$i,$i+=Ve,Ii+=Ve;else for(Oi=0;Oi<hi;++Oi)Ce(Bi,$i,fn,Ii,Ve),en=Bi,Ji=$i,$i+=Ve,Ii+=Ve;je.rc=en,je.Vc=Ji}else{if(t(ki.mc!=null),Ve=ti+hi,t((Oi=ki.mc)!=null),t(Ve<=Oi.i),Oi.C>=Ve)Ve=1;else if(ki.ic||Qi(),ki.ic){ki=Oi.V,en=Oi.Ba,Ji=Oi.c;var nn=Oi.i,Yi=(fn=1,Ii=Oi.$/Ji,Bi=Oi.$%Ji,$i=Oi.m,tn=Oi.s,Oi.$),Gi=Ji*nn,hn=Ji*Ve,pn=tn.wc,un=Yi<hn?Yn(tn,Bi,Ii):null;t(Yi<=Gi),t(Ve<=nn),t(ur(tn));e:for(;;){for(;!$i.h&&Yi<hn;){if(Bi&pn||(un=Yn(tn,Bi,Ii)),t(un!=null),ei($i),256>(nn=Xn(un.G[0],un.H[0],$i)))ki[en+Yi]=nn,++Yi,++Bi>=Ji&&(Bi=0,++Ii<=Ve&&!(Ii%16)&&yr(Oi,Ii));else{if(!(280>nn)){fn=0;break e}nn=Bn(nn-256,$i);var wn,yn=Xn(un.G[4],un.H[4],$i);if(ei($i),!(Yi>=(yn=tr(Ji,yn=Bn(yn,$i)))&&Gi-Yi>=nn)){fn=0;break e}for(wn=0;wn<nn;++wn)ki[en+Yi+wn]=ki[en+Yi+wn-yn];for(Yi+=nn,Bi+=nn;Bi>=Ji;)Bi-=Ji,++Ii<=Ve&&!(Ii%16)&&yr(Oi,Ii);Yi<hn&&Bi&pn&&(un=Yn(tn,Bi,Ii))}t($i.h==ze($i))}yr(Oi,Ii>Ve?Ve:Ii);break e}!fn||$i.h&&Yi<Gi?(fn=0,Oi.a=$i.h?5:3):Oi.$=Yi,Ve=fn}else Ve=Cr(Oi,Oi.V,Oi.Ba,Oi.c,Oi.i,Ve,Fs);if(!Ve){hi=0;break t}}ti+hi>=Pi&&(je.Cc=1),hi=1}if(!hi)return null;if(je.Cc&&((hi=je.ga)!=null&&(hi.mc=null),je.ga=null,0<je.Ga))return alert("todo:WebPDequantizeLevels"),null}return je.nb+ti*yi}function Ke(je,Ve,ti,hi,yi,Pi){for(;0<yi--;){var Oi,ki=je,Ii=Ve+(ti?1:0),Bi=je,$i=Ve+(ti?0:3);for(Oi=0;Oi<hi;++Oi){var tn=Bi[$i+4*Oi];tn!=255&&(tn*=32897,ki[Ii+4*Oi+0]=ki[Ii+4*Oi+0]*tn>>23,ki[Ii+4*Oi+1]=ki[Ii+4*Oi+1]*tn>>23,ki[Ii+4*Oi+2]=ki[Ii+4*Oi+2]*tn>>23)}Ve+=Pi}}function Ai(je,Ve,ti,hi,yi){for(;0<hi--;){var Pi;for(Pi=0;Pi<ti;++Pi){var Oi=je[Ve+2*Pi+0],ki=15&(Bi=je[Ve+2*Pi+1]),Ii=4369*ki,Bi=(240&Bi|Bi>>4)*Ii>>16;je[Ve+2*Pi+0]=(240&Oi|Oi>>4)*Ii>>16&240|(15&Oi|Oi<<4)*Ii>>16>>4&15,je[Ve+2*Pi+1]=240&Bi|ki}Ve+=yi}}function Ui(je,Ve,ti,hi,yi,Pi,Oi,ki){var Ii,Bi,$i=255;for(Bi=0;Bi<yi;++Bi){for(Ii=0;Ii<hi;++Ii){var tn=je[Ve+Ii];Pi[Oi+4*Ii]=tn,$i&=tn}Ve+=ti,Oi+=ki}return $i!=255}function zi(je,Ve,ti,hi,yi){var Pi;for(Pi=0;Pi<yi;++Pi)ti[hi+Pi]=je[Ve+Pi]>>8}function Qi(){As=Ke,sa=Ai,uo=Ui,Yl=zi}function an(je,Ve,ti){Qe[je]=function(hi,yi,Pi,Oi,ki,Ii,Bi,$i,tn,en,Ji,fn,nn,Yi,Gi,hn,pn){var un,wn=pn-1>>1,yn=ki[Ii+0]|Bi[$i+0]<<16,kn=tn[en+0]|Ji[fn+0]<<16;t(hi!=null);var An=3*yn+kn+131074>>2;for(Ve(hi[yi+0],255&An,An>>16,nn,Yi),Pi!=null&&(An=3*kn+yn+131074>>2,Ve(Pi[Oi+0],255&An,An>>16,Gi,hn)),un=1;un<=wn;++un){var Gn=ki[Ii+un]|Bi[$i+un]<<16,Kn=tn[en+un]|Ji[fn+un]<<16,$n=yn+Gn+kn+Kn+524296,qn=$n+2*(Gn+kn)>>3;An=qn+yn>>1,yn=($n=$n+2*(yn+Kn)>>3)+Gn>>1,Ve(hi[yi+2*un-1],255&An,An>>16,nn,Yi+(2*un-1)*ti),Ve(hi[yi+2*un-0],255&yn,yn>>16,nn,Yi+(2*un-0)*ti),Pi!=null&&(An=$n+kn>>1,yn=qn+Kn>>1,Ve(Pi[Oi+2*un-1],255&An,An>>16,Gi,hn+(2*un-1)*ti),Ve(Pi[Oi+2*un+0],255&yn,yn>>16,Gi,hn+(2*un+0)*ti)),yn=Gn,kn=Kn}1&pn||(An=3*yn+kn+131074>>2,Ve(hi[yi+pn-1],255&An,An>>16,nn,Yi+(pn-1)*ti),Pi!=null&&(An=3*kn+yn+131074>>2,Ve(Pi[Oi+pn-1],255&An,An>>16,Gi,hn+(pn-1)*ti)))}}function gn(){jr[po]=uh,jr[go]=rc,jr[Zl]=fh,jr[mo]=sc,jr[vo]=ac,jr[hl]=oc,jr[tc]=dh,jr[ul]=rc,jr[dl]=sc,jr[_o]=ac,jr[pl]=oc}function En(je){return je&~ph?0>je?0:255:je>>cc}function Nn(je,Ve){return En((19077*je>>8)+(26149*Ve>>8)-14234)}function Dn(je,Ve,ti){return En((19077*je>>8)-(6419*Ve>>8)-(13320*ti>>8)+8708)}function Un(je,Ve){return En((19077*je>>8)+(33050*Ve>>8)-17685)}function zn(je,Ve,ti,hi,yi){hi[yi+0]=Nn(je,ti),hi[yi+1]=Dn(je,Ve,ti),hi[yi+2]=Un(je,Ve)}function sr(je,Ve,ti,hi,yi){hi[yi+0]=Un(je,Ve),hi[yi+1]=Dn(je,Ve,ti),hi[yi+2]=Nn(je,ti)}function ar(je,Ve,ti,hi,yi){var Pi=Dn(je,Ve,ti);Ve=Pi<<3&224|Un(je,Ve)>>3,hi[yi+0]=248&Nn(je,ti)|Pi>>5,hi[yi+1]=Ve}function dr(je,Ve,ti,hi,yi){var Pi=240&Un(je,Ve)|15;hi[yi+0]=240&Nn(je,ti)|Dn(je,Ve,ti)>>4,hi[yi+1]=Pi}function Er(je,Ve,ti,hi,yi){hi[yi+0]=255,zn(je,Ve,ti,hi,yi+1)}function vr(je,Ve,ti,hi,yi){sr(je,Ve,ti,hi,yi),hi[yi+3]=255}function qr(je,Ve,ti,hi,yi){zn(je,Ve,ti,hi,yi),hi[yi+3]=255}function Nr(je,Ve){return 0>je?0:je>Ve?Ve:je}function ss(je,Ve,ti){Qe[je]=function(hi,yi,Pi,Oi,ki,Ii,Bi,$i,tn){for(var en=$i+(-2&tn)*ti;$i!=en;)Ve(hi[yi+0],Pi[Oi+0],ki[Ii+0],Bi,$i),Ve(hi[yi+1],Pi[Oi+0],ki[Ii+0],Bi,$i+ti),yi+=2,++Oi,++Ii,$i+=2*ti;1&tn&&Ve(hi[yi+0],Pi[Oi+0],ki[Ii+0],Bi,$i)}}function co(je,Ve,ti){return ti==0?je==0?Ve==0?6:5:Ve==0?4:0:ti}function xa(je,Ve,ti,hi,yi){switch(je>>>30){case 3:na(Ve,ti,hi,yi,0);break;case 2:Ma(Ve,ti,hi,yi);break;case 1:Gr(Ve,ti,hi,yi)}}function Pa(je,Ve){var ti,hi,yi=Ve.M,Pi=Ve.Nb,Oi=je.oc,ki=je.pc+40,Ii=je.oc,Bi=je.pc+584,$i=je.oc,tn=je.pc+600;for(ti=0;16>ti;++ti)Oi[ki+32*ti-1]=129;for(ti=0;8>ti;++ti)Ii[Bi+32*ti-1]=129,$i[tn+32*ti-1]=129;for(0<yi?Oi[ki-1-32]=Ii[Bi-1-32]=$i[tn-1-32]=129:(Me(Oi,ki-32-1,127,21),Me(Ii,Bi-32-1,127,9),Me($i,tn-32-1,127,9)),hi=0;hi<je.za;++hi){var en=Ve.ya[Ve.aa+hi];if(0<hi){for(ti=-1;16>ti;++ti)Ce(Oi,ki+32*ti-4,Oi,ki+32*ti+12,4);for(ti=-1;8>ti;++ti)Ce(Ii,Bi+32*ti-4,Ii,Bi+32*ti+4,4),Ce($i,tn+32*ti-4,$i,tn+32*ti+4,4)}var Ji=je.Gd,fn=je.Hd+hi,nn=en.ad,Yi=en.Hc;if(0<yi&&(Ce(Oi,ki-32,Ji[fn].y,0,16),Ce(Ii,Bi-32,Ji[fn].f,0,8),Ce($i,tn-32,Ji[fn].ea,0,8)),en.Za){var Gi=Oi,hn=ki-32+16;for(0<yi&&(hi>=je.za-1?Me(Gi,hn,Ji[fn].y[15],4):Ce(Gi,hn,Ji[fn+1].y,0,4)),ti=0;4>ti;ti++)Gi[hn+128+ti]=Gi[hn+256+ti]=Gi[hn+384+ti]=Gi[hn+0+ti];for(ti=0;16>ti;++ti,Yi<<=2)Gi=Oi,hn=ki+uc[ti],Xr[en.Ob[ti]](Gi,hn),xa(Yi,nn,16*+ti,Gi,hn)}else if(Gi=co(hi,yi,en.Ob[0]),Ss[Gi](Oi,ki),Yi!=0)for(ti=0;16>ti;++ti,Yi<<=2)xa(Yi,nn,16*+ti,Oi,ki+uc[ti]);for(ti=en.Gc,Gi=co(hi,yi,en.Dd),hs[Gi](Ii,Bi),hs[Gi]($i,tn),Yi=nn,Gi=Ii,hn=Bi,255&(en=ti>>0)&&(170&en?bs(Yi,256,Gi,hn):os(Yi,256,Gi,hn)),en=$i,Yi=tn,255&(ti>>=8)&&(170&ti?bs(nn,320,en,Yi):os(nn,320,en,Yi)),yi<je.Ub-1&&(Ce(Ji[fn].y,0,Oi,ki+480,16),Ce(Ji[fn].f,0,Ii,Bi+224,8),Ce(Ji[fn].ea,0,$i,tn+224,8)),ti=8*Pi*je.B,Ji=je.sa,fn=je.ta+16*hi+16*Pi*je.R,nn=je.qa,en=je.ra+8*hi+ti,Yi=je.Ha,Gi=je.Ia+8*hi+ti,ti=0;16>ti;++ti)Ce(Ji,fn+ti*je.R,Oi,ki+32*ti,16);for(ti=0;8>ti;++ti)Ce(nn,en+ti*je.B,Ii,Bi+32*ti,8),Ce(Yi,Gi+ti*je.B,$i,tn+32*ti,8)}}function Js(je,Ve,ti,hi,yi,Pi,Oi,ki,Ii){var Bi=[0],$i=[0],tn=0,en=Ii!=null?Ii.kd:0,Ji=Ii!=null?Ii:new Ea;if(je==null||12>ti)return 7;Ji.data=je,Ji.w=Ve,Ji.ha=ti,Ve=[Ve],ti=[ti],Ji.gb=[Ji.gb];t:{var fn=Ve,nn=ti,Yi=Ji.gb;if(t(je!=null),t(nn!=null),t(Yi!=null),Yi[0]=0,12<=nn[0]&&!r(je,fn[0],"RIFF")){if(r(je,fn[0]+8,"WEBP")){Yi=3;break t}var Gi=ai(je,fn[0]+4);if(12>Gi||4294967286<Gi){Yi=3;break t}if(en&&Gi>nn[0]-8){Yi=7;break t}Yi[0]=Gi,fn[0]+=12,nn[0]-=12}Yi=0}if(Yi!=0)return Yi;for(Gi=0<Ji.gb[0],ti=ti[0];;){t:{var hn=je;nn=Ve,Yi=ti;var pn=Bi,un=$i,wn=fn=[0];if((An=tn=[tn])[0]=0,8>Yi[0])Yi=7;else{if(!r(hn,nn[0],"VP8X")){if(ai(hn,nn[0]+4)!=10){Yi=3;break t}if(18>Yi[0]){Yi=7;break t}var yn=ai(hn,nn[0]+8),kn=1+si(hn,nn[0]+12);if(2147483648<=kn*(hn=1+si(hn,nn[0]+15))){Yi=3;break t}wn!=null&&(wn[0]=yn),pn!=null&&(pn[0]=kn),un!=null&&(un[0]=hn),nn[0]+=18,Yi[0]-=18,An[0]=1}Yi=0}}if(tn=tn[0],fn=fn[0],Yi!=0)return Yi;if(nn=!!(2&fn),!Gi&&tn)return 3;if(Pi!=null&&(Pi[0]=!!(16&fn)),Oi!=null&&(Oi[0]=nn),ki!=null&&(ki[0]=0),Oi=Bi[0],fn=$i[0],tn&&nn&&Ii==null){Yi=0;break}if(4>ti){Yi=7;break}if(Gi&&tn||!Gi&&!tn&&!r(je,Ve[0],"ALPH")){ti=[ti],Ji.na=[Ji.na],Ji.P=[Ji.P],Ji.Sa=[Ji.Sa];t:{yn=je,Yi=Ve,Gi=ti;var An=Ji.gb;pn=Ji.na,un=Ji.P,wn=Ji.Sa,kn=22,t(yn!=null),t(Gi!=null),hn=Yi[0];var Gn=Gi[0];for(t(pn!=null),t(wn!=null),pn[0]=null,un[0]=null,wn[0]=0;;){if(Yi[0]=hn,Gi[0]=Gn,8>Gn){Yi=7;break t}var Kn=ai(yn,hn+4);if(4294967286<Kn){Yi=3;break t}var $n=8+Kn+1&-2;if(kn+=$n,0<An&&kn>An){Yi=3;break t}if(!r(yn,hn,"VP8 ")||!r(yn,hn,"VP8L")){Yi=0;break t}if(Gn[0]<$n){Yi=7;break t}r(yn,hn,"ALPH")||(pn[0]=yn,un[0]=hn+8,wn[0]=Kn),hn+=$n,Gn-=$n}}if(ti=ti[0],Ji.na=Ji.na[0],Ji.P=Ji.P[0],Ji.Sa=Ji.Sa[0],Yi!=0)break}ti=[ti],Ji.Ja=[Ji.Ja],Ji.xa=[Ji.xa];t:if(An=je,Yi=Ve,Gi=ti,pn=Ji.gb[0],un=Ji.Ja,wn=Ji.xa,yn=Yi[0],hn=!r(An,yn,"VP8 "),kn=!r(An,yn,"VP8L"),t(An!=null),t(Gi!=null),t(un!=null),t(wn!=null),8>Gi[0])Yi=7;else{if(hn||kn){if(An=ai(An,yn+4),12<=pn&&An>pn-12){Yi=3;break t}if(en&&An>Gi[0]-8){Yi=7;break t}un[0]=An,Yi[0]+=8,Gi[0]-=8,wn[0]=kn}else wn[0]=5<=Gi[0]&&An[yn+0]==47&&!(An[yn+4]>>5),un[0]=Gi[0];Yi=0}if(ti=ti[0],Ji.Ja=Ji.Ja[0],Ji.xa=Ji.xa[0],Ve=Ve[0],Yi!=0)break;if(4294967286<Ji.Ja)return 3;if(ki==null||nn||(ki[0]=Ji.xa?2:1),Oi=[Oi],fn=[fn],Ji.xa){if(5>ti){Yi=7;break}ki=Oi,en=fn,nn=Pi,je==null||5>ti?je=0:5<=ti&&je[Ve+0]==47&&!(je[Ve+4]>>5)?(Gi=[0],An=[0],pn=[0],Ei(un=new $e,je,Ve,ti),Cn(un,Gi,An,pn)?(ki!=null&&(ki[0]=Gi[0]),en!=null&&(en[0]=An[0]),nn!=null&&(nn[0]=pn[0]),je=1):je=0):je=0}else{if(10>ti){Yi=7;break}ki=fn,je==null||10>ti||!Ya(je,Ve+3,ti-3)?je=0:(en=je[Ve+0]|je[Ve+1]<<8|je[Ve+2]<<16,nn=16383&(je[Ve+7]<<8|je[Ve+6]),je=16383&(je[Ve+9]<<8|je[Ve+8]),1&en||3<(en>>1&7)||!(en>>4&1)||en>>5>=Ji.Ja||!nn||!je?je=0:(Oi&&(Oi[0]=nn),ki&&(ki[0]=je),je=1))}if(!je||(Oi=Oi[0],fn=fn[0],tn&&(Bi[0]!=Oi||$i[0]!=fn)))return 3;Ii!=null&&(Ii[0]=Ji,Ii.offset=Ve-Ii.w,t(4294967286>Ve-Ii.w),t(Ii.offset==Ii.ha-ti));break}return Yi==0||Yi==7&&tn&&Ii==null?(Pi!=null&&(Pi[0]|=Ji.na!=null&&0<Ji.na.length),hi!=null&&(hi[0]=Oi),yi!=null&&(yi[0]=fn),0):Yi}function Oa(je,Ve,ti){var hi=Ve.width,yi=Ve.height,Pi=0,Oi=0,ki=hi,Ii=yi;if(Ve.Da=je!=null&&0<je.Da,Ve.Da&&(ki=je.cd,Ii=je.bd,Pi=je.v,Oi=je.j,11>ti||(Pi&=-2,Oi&=-2),0>Pi||0>Oi||0>=ki||0>=Ii||Pi+ki>hi||Oi+Ii>yi))return 0;if(Ve.v=Pi,Ve.j=Oi,Ve.va=Pi+ki,Ve.o=Oi+Ii,Ve.U=ki,Ve.T=Ii,Ve.da=je!=null&&0<je.da,Ve.da){if(!ui(ki,Ii,ti=[je.ib],Pi=[je.hb]))return 0;Ve.ib=ti[0],Ve.hb=Pi[0]}return Ve.ob=je!=null&&je.ob,Ve.Kb=je==null||!je.Sd,Ve.da&&(Ve.ob=Ve.ib<3*hi/4&&Ve.hb<3*yi/4,Ve.Kb=0),1}function La(je){if(je==null)return 2;if(11>je.S){var Ve=je.f.RGBA;Ve.fb+=(je.height-1)*Ve.A,Ve.A=-Ve.A}else Ve=je.f.kb,je=je.height,Ve.O+=(je-1)*Ve.fa,Ve.fa=-Ve.fa,Ve.N+=(je-1>>1)*Ve.Ab,Ve.Ab=-Ve.Ab,Ve.W+=(je-1>>1)*Ve.Db,Ve.Db=-Ve.Db,Ve.F!=null&&(Ve.J+=(je-1)*Ve.lb,Ve.lb=-Ve.lb);return 0}function Qs(je,Ve,ti,hi){if(hi==null||0>=je||0>=Ve)return 2;if(ti!=null){if(ti.Da){var yi=ti.cd,Pi=ti.bd,Oi=-2&ti.v,ki=-2&ti.j;if(0>Oi||0>ki||0>=yi||0>=Pi||Oi+yi>je||ki+Pi>Ve)return 2;je=yi,Ve=Pi}if(ti.da){if(!ui(je,Ve,yi=[ti.ib],Pi=[ti.hb]))return 2;je=yi[0],Ve=Pi[0]}}hi.width=je,hi.height=Ve;t:{var Ii=hi.width,Bi=hi.height;if(je=hi.S,0>=Ii||0>=Bi||!(je>=po&&13>je))je=2;else{if(0>=hi.Rd&&hi.sd==null){Oi=Pi=yi=Ve=0;var $i=(ki=Ii*fc[je])*Bi;if(11>je||(Pi=(Bi+1)/2*(Ve=(Ii+1)/2),je==12&&(Oi=(yi=Ii)*Bi)),(Bi=Ie($i+2*Pi+Oi))==null){je=1;break t}hi.sd=Bi,11>je?((Ii=hi.f.RGBA).eb=Bi,Ii.fb=0,Ii.A=ki,Ii.size=$i):((Ii=hi.f.kb).y=Bi,Ii.O=0,Ii.fa=ki,Ii.Fd=$i,Ii.f=Bi,Ii.N=0+$i,Ii.Ab=Ve,Ii.Cd=Pi,Ii.ea=Bi,Ii.W=0+$i+Pi,Ii.Db=Ve,Ii.Ed=Pi,je==12&&(Ii.F=Bi,Ii.J=0+$i+2*Pi),Ii.Tc=Oi,Ii.lb=yi)}if(Ve=1,yi=hi.S,Pi=hi.width,Oi=hi.height,yi>=po&&13>yi)if(11>yi)je=hi.f.RGBA,Ve&=(ki=Math.abs(je.A))*(Oi-1)+Pi<=je.size,Ve&=ki>=Pi*fc[yi],Ve&=je.eb!=null;else{je=hi.f.kb,ki=(Pi+1)/2,$i=(Oi+1)/2,Ii=Math.abs(je.fa),Bi=Math.abs(je.Ab);var tn=Math.abs(je.Db),en=Math.abs(je.lb),Ji=en*(Oi-1)+Pi;Ve&=Ii*(Oi-1)+Pi<=je.Fd,Ve&=Bi*($i-1)+ki<=je.Cd,Ve=(Ve&=tn*($i-1)+ki<=je.Ed)&Ii>=Pi&Bi>=ki&tn>=ki,Ve&=je.y!=null,Ve&=je.f!=null,Ve&=je.ea!=null,yi==12&&(Ve&=en>=Pi,Ve&=Ji<=je.Tc,Ve&=je.F!=null)}else Ve=0;je=Ve?0:2}}return je!=0||ti!=null&&ti.fd&&(je=La(hi)),je}var xr=64,Zs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ta=24,ea=32,Na=8,Pr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Li("Predictor0","PredictorAdd0"),Qe.Predictor0=function(){return 4278190080},Qe.Predictor1=function(je){return je},Qe.Predictor2=function(je,Ve,ti){return Ve[ti+0]},Qe.Predictor3=function(je,Ve,ti){return Ve[ti+1]},Qe.Predictor4=function(je,Ve,ti){return Ve[ti-1]},Qe.Predictor5=function(je,Ve,ti){return wi(wi(je,Ve[ti+1]),Ve[ti+0])},Qe.Predictor6=function(je,Ve,ti){return wi(je,Ve[ti-1])},Qe.Predictor7=function(je,Ve,ti){return wi(je,Ve[ti+0])},Qe.Predictor8=function(je,Ve,ti){return wi(Ve[ti-1],Ve[ti+0])},Qe.Predictor9=function(je,Ve,ti){return wi(Ve[ti+0],Ve[ti+1])},Qe.Predictor10=function(je,Ve,ti){return wi(wi(je,Ve[ti-1]),wi(Ve[ti+0],Ve[ti+1]))},Qe.Predictor11=function(je,Ve,ti){var hi=Ve[ti+0];return 0>=qi(hi>>24&255,je>>24&255,(Ve=Ve[ti-1])>>24&255)+qi(hi>>16&255,je>>16&255,Ve>>16&255)+qi(hi>>8&255,je>>8&255,Ve>>8&255)+qi(255&hi,255&je,255&Ve)?hi:je},Qe.Predictor12=function(je,Ve,ti){var hi=Ve[ti+0];return(Vi((je>>24&255)+(hi>>24&255)-((Ve=Ve[ti-1])>>24&255))<<24|Vi((je>>16&255)+(hi>>16&255)-(Ve>>16&255))<<16|Vi((je>>8&255)+(hi>>8&255)-(Ve>>8&255))<<8|Vi((255&je)+(255&hi)-(255&Ve)))>>>0},Qe.Predictor13=function(je,Ve,ti){var hi=Ve[ti-1];return(Mi((je=wi(je,Ve[ti+0]))>>24&255,hi>>24&255)<<24|Mi(je>>16&255,hi>>16&255)<<16|Mi(je>>8&255,hi>>8&255)<<8|Mi(je>>0&255,hi>>0&255))>>>0};var al=Qe.PredictorAdd0;Qe.PredictorAdd1=Xi,Li("Predictor2","PredictorAdd2"),Li("Predictor3","PredictorAdd3"),Li("Predictor4","PredictorAdd4"),Li("Predictor5","PredictorAdd5"),Li("Predictor6","PredictorAdd6"),Li("Predictor7","PredictorAdd7"),Li("Predictor8","PredictorAdd8"),Li("Predictor9","PredictorAdd9"),Li("Predictor10","PredictorAdd10"),Li("Predictor11","PredictorAdd11"),Li("Predictor12","PredictorAdd12"),Li("Predictor13","PredictorAdd13");var ka=Qe.PredictorAdd2;cn("ColorIndexInverseTransform","MapARGB","32b",function(je){return je>>8&255},function(je){return je}),cn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(je){return je},function(je){return je>>8&255});var ho,zr=Qe.ColorIndexInverseTransform,Ra=Qe.MapARGB,ol=Qe.VP8LColorIndexInverseTransformAlpha,ll=Qe.MapAlpha,vs=Qe.VP8LPredictorsAdd=[];vs.length=16,(Qe.VP8LPredictors=[]).length=16,(Qe.VP8LPredictorsAdd_C=[]).length=16,(Qe.VP8LPredictors_C=[]).length=16;var Dr,$r,_s,ts,as,ia,Yr,na,Ma,bs,Gr,os,Ms,ra,Is,ys,Ia,Fr,ls,er,ir,hr,mr,cs,As,sa,uo,Yl,Gl=Ie(511),Xl=Ie(2041),Kl=Ie(225),Jl=Ie(767),Ql=0,cl=Xl,fo=Kl,kr=Jl,Br=Gl,po=0,go=1,Zl=2,mo=3,vo=4,hl=5,tc=6,ul=7,dl=8,_o=9,pl=10,Jc=[2,3,7],Qc=[3,3,11],ec=[280,256,256,256,40],Zc=[0,1,1,1,0],th=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ih=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nh=8,gl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ml=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Da=null,rh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ic=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ch=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ss=[],Xr=[],hs=[],hh=1,nc=2,Es=[],jr=[];an("UpsampleRgbLinePair",zn,3),an("UpsampleBgrLinePair",sr,3),an("UpsampleRgbaLinePair",qr,4),an("UpsampleBgraLinePair",vr,4),an("UpsampleArgbLinePair",Er,4),an("UpsampleRgba4444LinePair",dr,2),an("UpsampleRgb565LinePair",ar,2);var uh=Qe.UpsampleRgbLinePair,fh=Qe.UpsampleBgrLinePair,rc=Qe.UpsampleRgbaLinePair,sc=Qe.UpsampleBgraLinePair,ac=Qe.UpsampleArgbLinePair,oc=Qe.UpsampleRgba4444LinePair,dh=Qe.UpsampleRgb565LinePair,bo=16,yo=1<<bo-1,Fa=-227,vl=482,cc=6,ph=(256<<cc)-1,hc=0,gh=Ie(256),mh=Ie(256),vh=Ie(256),_h=Ie(256),bh=Ie(vl-Fa),yh=Ie(vl-Fa);ss("YuvToRgbRow",zn,3),ss("YuvToBgrRow",sr,3),ss("YuvToRgbaRow",qr,4),ss("YuvToBgraRow",vr,4),ss("YuvToArgbRow",Er,4),ss("YuvToRgba4444Row",dr,2),ss("YuvToRgb565Row",ar,2);var uc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ao=[0,2,8],Ah=[8,7,6,4,4,2,2,2,1,1,1,1],Sh=1;this.WebPDecodeRGBA=function(je,Ve,ti,hi,yi){var Pi=go,Oi=new Xs,ki=new _n;Oi.ba=ki,ki.S=Pi,ki.width=[ki.width],ki.height=[ki.height];var Ii=ki.width,Bi=ki.height,$i=new On;if($i==null||je==null)var tn=2;else t($i!=null),tn=Js(je,Ve,ti,$i.width,$i.height,$i.Pd,$i.Qd,$i.format,null);if(tn!=0?Ii=0:(Ii!=null&&(Ii[0]=$i.width[0]),Bi!=null&&(Bi[0]=$i.height[0]),Ii=1),Ii){ki.width=ki.width[0],ki.height=ki.height[0],hi!=null&&(hi[0]=ki.width),yi!=null&&(yi[0]=ki.height);t:{if(hi=new Vs,(yi=new Ea).data=je,yi.w=Ve,yi.ha=ti,yi.kd=1,Ve=[0],t(yi!=null),((je=Js(yi.data,yi.w,yi.ha,null,null,null,Ve,null,yi))==0||je==7)&&Ve[0]&&(je=4),(Ve=je)==0){if(t(Oi!=null),hi.data=yi.data,hi.w=yi.w+yi.offset,hi.ha=yi.ha-yi.offset,hi.put=Vn,hi.ac=Mn,hi.bc=Rn,hi.ma=Oi,yi.xa){if((je=Ir())==null){Oi=1;break t}if(function(en,Ji){var fn=[0],nn=[0],Yi=[0];e:for(;;){if(en==null)return 0;if(Ji==null)return en.a=2,0;if(en.l=Ji,en.a=0,Ei(en.m,Ji.data,Ji.w,Ji.ha),!Cn(en.m,fn,nn,Yi)){en.a=3;break e}if(en.xb=nc,Ji.width=fn[0],Ji.height=nn[0],!Qr(fn[0],nn[0],1,en,null))break e;return 1}return t(en.a!=0),0}(je,hi)){if(hi=(Ve=Qs(hi.width,hi.height,Oi.Oa,Oi.ba))==0){e:{hi=je;i:for(;;){if(hi==null){hi=0;break e}if(t(hi.s.yc!=null),t(hi.s.Ya!=null),t(0<hi.s.Wb),t((ti=hi.l)!=null),t((yi=ti.ma)!=null),hi.xb!=0){if(hi.ca=yi.ba,hi.tb=yi.tb,t(hi.ca!=null),!Oa(yi.Oa,ti,mo)){hi.a=2;break i}if(!Os(hi,ti.width)||ti.da)break i;if((ti.da||Fi(hi.ca.S))&&Qi(),11>hi.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),hi.ca.f.kb.F!=null&&Qi()),hi.Pb&&0<hi.s.ua&&hi.s.vb.X==null&&!Ye(hi.s.vb,hi.s.Wa.Xa)){hi.a=1;break i}hi.xb=0}if(!Cr(hi,hi.V,hi.Ba,hi.c,hi.i,ti.o,nr))break i;yi.Dc=hi.Ma,hi=1;break e}t(hi.a!=0),hi=0}hi=!hi}hi&&(Ve=je.a)}else Ve=je.a}else{if((je=new Uo)==null){Oi=1;break t}if(je.Fa=yi.na,je.P=yi.P,je.qc=yi.Sa,Ga(je,hi)){if((Ve=Qs(hi.width,hi.height,Oi.Oa,Oi.ba))==0){if(je.Aa=0,ti=Oi.Oa,t((yi=je)!=null),ti!=null){if(0<(Ii=0>(Ii=ti.Md)?0:100<Ii?255:255*Ii/100)){for(Bi=$i=0;4>Bi;++Bi)12>(tn=yi.pb[Bi]).lc&&(tn.ia=Ii*Ah[0>tn.lc?0:tn.lc]>>3),$i|=tn.ia;$i&&(alert("todo:VP8InitRandom"),yi.ia=1)}yi.Ga=ti.Id,100<yi.Ga?yi.Ga=100:0>yi.Ga&&(yi.Ga=0)}Vo(je,hi)||(Ve=je.a)}}else Ve=je.a}Ve==0&&Oi.Oa!=null&&Oi.Oa.fd&&(Ve=La(Oi.ba))}Oi=Ve}Pi=Oi!=0?null:11>Pi?ki.f.RGBA.eb:ki.f.kb.y}else Pi=null;return Pi};var fc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function xe(Qe,fi){for(var oi="",ii=0;ii<4;ii++)oi+=String.fromCharCode(Qe[fi++]);return oi}function Pe(Qe,fi){return(Qe[fi+0]<<0|Qe[fi+1]<<8|Qe[fi+2]<<16)>>>0}function Ae(Qe,fi){return(Qe[fi+0]<<0|Qe[fi+1]<<8|Qe[fi+2]<<16|Qe[fi+3]<<24)>>>0}new _e;var Se=[0],St=[0],Te=[],Re=new _e,Ee=e,ke=function(Qe,fi){var oi={},ii=0,li=!1,bi=0,mi=0;if(oi.frames=[],!function(Ge,ze,qe,ei){for(var ni=0;ni<ei;ni++)if(Ge[ze+ni]!=qe.charCodeAt(ni))return!0;return!1}(Qe,fi,"RIFF",4)){var Si,_i;for(Ae(Qe,fi+=4),fi+=8;fi<Qe.length;){var xi=xe(Qe,fi),Ei=Ae(Qe,fi+=4);fi+=4;var ri=Ei+(1&Ei);switch(xi){case"VP8 ":case"VP8L":oi.frames[ii]===void 0&&(oi.frames[ii]={}),($e=oi.frames[ii]).src_off=li?mi:fi-8,$e.src_size=bi+Ei+8,ii++,li&&(li=!1,bi=0,mi=0);break;case"VP8X":($e=oi.header={}).feature_flags=Qe[fi];var vi=fi+4;$e.canvas_width=1+Pe(Qe,vi),vi+=3,$e.canvas_height=1+Pe(Qe,vi),vi+=3;break;case"ALPH":li=!0,bi=ri+8,mi=fi-8;break;case"ANIM":($e=oi.header).bgcolor=Ae(Qe,fi),vi=fi+4,$e.loop_count=(Si=Qe)[(_i=vi)+0]<<0|Si[_i+1]<<8,vi+=2;break;case"ANMF":var Ci,$e;($e=oi.frames[ii]={}).offset_x=2*Pe(Qe,fi),fi+=3,$e.offset_y=2*Pe(Qe,fi),fi+=3,$e.width=1+Pe(Qe,fi),fi+=3,$e.height=1+Pe(Qe,fi),fi+=3,$e.duration=Pe(Qe,fi),fi+=3,Ci=Qe[fi++],$e.dispose=1&Ci,$e.blend=Ci>>1&1}xi!="ANMF"&&(fi+=ri)}return oi}}(Ee,0);ke.response=Ee,ke.rgbaoutput=!0,ke.dataurl=!1;var De=ke.header?ke.header:null,Be=ke.frames?ke.frames:null;if(De){De.loop_counter=De.loop_count,Se=[De.canvas_height],St=[De.canvas_width];for(var He=0;He<Be.length&&Be[He].blend!=0;He++);}var Ue=Be[0],We=Re.WebPDecodeRGBA(Ee,Ue.src_off,Ue.src_size,St,Se);Ue.rgba=We,Ue.imgwidth=St[0],Ue.imgheight=Se[0];for(var Je=0;Je<St[0]*Se[0]*4;Je++)Te[Je]=We[Je];return this.width=St,this.height=Se,this.data=Te,this}(function(e){var t=function(){return typeof zlibSync=="function"},r=function(Se,St,Te,Re){var Ee=4,ke=Fe;switch(Re){case e.image_compression.FAST:Ee=1,ke=Ie;break;case e.image_compression.MEDIUM:Ee=6,ke=Oe;break;case e.image_compression.SLOW:Ee=9,ke=_e}Se=Ce(Se,St,Te,ke);var De=zlibSync(Se,{level:Ee});return e.__addimage__.arrayBufferToBinaryString(De)},Ce=function(Se,St,Te,Re){for(var Ee,ke,De,Be=Se.length/St,He=new Uint8Array(Se.length+Be),Ue=Pe(),We=0;We<Be;We+=1){if(De=We*St,Ee=Se.subarray(De,De+St),Re)He.set(Re(Ee,Te,ke),De+We);else{for(var Je,Qe=Ue.length,fi=[];Je<Qe;Je+=1)fi[Je]=Ue[Je](Ee,Te,ke);var oi=Ae(fi.concat());He.set(fi[oi],De+We)}ke=Ee}return He},Me=function(Se){var St=Array.apply([],Se);return St.unshift(0),St},Ie=function(Se,St){var Te,Re=[],Ee=Se.length;Re[0]=1;for(var ke=0;ke<Ee;ke+=1)Te=Se[ke-St]||0,Re[ke+1]=Se[ke]-Te+256&255;return Re},Fe=function(Se,St,Te){var Re,Ee=[],ke=Se.length;Ee[0]=2;for(var De=0;De<ke;De+=1)Re=Te&&Te[De]||0,Ee[De+1]=Se[De]-Re+256&255;return Ee},Oe=function(Se,St,Te){var Re,Ee,ke=[],De=Se.length;ke[0]=3;for(var Be=0;Be<De;Be+=1)Re=Se[Be-St]||0,Ee=Te&&Te[Be]||0,ke[Be+1]=Se[Be]+256-(Re+Ee>>>1)&255;return ke},_e=function(Se,St,Te){var Re,Ee,ke,De,Be=[],He=Se.length;Be[0]=4;for(var Ue=0;Ue<He;Ue+=1)Re=Se[Ue-St]||0,Ee=Te&&Te[Ue]||0,ke=Te&&Te[Ue-St]||0,De=xe(Re,Ee,ke),Be[Ue+1]=Se[Ue]-De+256&255;return Be},xe=function(Se,St,Te){if(Se===St&&St===Te)return Se;var Re=Math.abs(St-Te),Ee=Math.abs(Se-Te),ke=Math.abs(Se+St-Te-Te);return Re<=Ee&&Re<=ke?Se:Ee<=ke?St:Te},Pe=function(){return[Me,Ie,Fe,Oe,_e]},Ae=function(Se){var St=Se.map(function(Te){return Te.reduce(function(Re,Ee){return Re+Math.abs(Ee)},0)});return St.indexOf(Math.min.apply(null,St))};e.processPNG=function(Se,St,Te,Re){var Ee,ke,De,Be,He,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si=this.decode.FLATE_DECODE,_i="";if(this.__addimage__.isArrayBuffer(Se)&&(Se=new Uint8Array(Se)),this.__addimage__.isArrayBufferView(Se)){if(Se=(De=new Kt(Se)).imgData,ke=De.bits,Ee=De.colorSpace,He=De.colors,[4,6].indexOf(De.colorType)!==-1){if(De.bits===8){Qe=(Je=De.pixelBitlength==32?new Uint32Array(De.decodePixels().buffer):De.pixelBitlength==16?new Uint16Array(De.decodePixels().buffer):new Uint8Array(De.decodePixels().buffer)).length,oi=new Uint8Array(Qe*De.colors),fi=new Uint8Array(Qe);var xi,Ei=De.pixelBitlength-De.bits;for(bi=0,mi=0;bi<Qe;bi++){for(li=Je[bi],xi=0;xi<Ei;)oi[mi++]=li>>>xi&255,xi+=De.bits;fi[bi]=li>>>xi&255}}if(De.bits===16){Qe=(Je=new Uint32Array(De.decodePixels().buffer)).length,oi=new Uint8Array(Qe*(32/De.pixelBitlength)*De.colors),fi=new Uint8Array(Qe*(32/De.pixelBitlength)),ii=De.colors>1,bi=0,mi=0;for(var ri=0;bi<Qe;)li=Je[bi++],oi[mi++]=li>>>0&255,ii&&(oi[mi++]=li>>>16&255,li=Je[bi++],oi[mi++]=li>>>0&255),fi[ri++]=li>>>16&255;ke=8}Re!==e.image_compression.NONE&&t()?(Se=r(oi,De.width*De.colors,De.colors,Re),We=r(fi,De.width,1,Re)):(Se=oi,We=fi,Si=void 0)}if(De.colorType===3&&(Ee=this.color_spaces.INDEXED,Ue=De.palette,De.transparency.indexed)){var vi=De.transparency.indexed,Ci=0;for(bi=0,Qe=vi.length;bi<Qe;++bi)Ci+=vi[bi];if((Ci/=255)===Qe-1&&vi.indexOf(0)!==-1)Be=[vi.indexOf(0)];else if(Ci!==Qe){for(Je=De.decodePixels(),fi=new Uint8Array(Je.length),bi=0,Qe=Je.length;bi<Qe;bi++)fi[bi]=vi[Je[bi]];We=r(fi,De.width,1)}}var $e=function(Ge){var ze;switch(Ge){case e.image_compression.FAST:ze=11;break;case e.image_compression.MEDIUM:ze=13;break;case e.image_compression.SLOW:ze=14;break;default:ze=12}return ze}(Re);return Si===this.decode.FLATE_DECODE&&(_i="/Predictor "+$e+" "),_i+="/Colors "+He+" /BitsPerComponent "+ke+" /Columns "+De.width,(this.__addimage__.isArrayBuffer(Se)||this.__addimage__.isArrayBufferView(Se))&&(Se=this.__addimage__.arrayBufferToBinaryString(Se)),(We&&this.__addimage__.isArrayBuffer(We)||this.__addimage__.isArrayBufferView(We))&&(We=this.__addimage__.arrayBufferToBinaryString(We)),{alias:Te,data:Se,index:St,filter:Si,decodeParameters:_i,transparency:Be,palette:Ue,sMask:We,predictor:$e,width:De.width,height:De.height,bitsPerComponent:ke,colorSpace:Ee}}}})(E.API),function(e){e.processGIF89A=function(t,r,Ce,Me){var Ie=new Zt(t),Fe=Ie.width,Oe=Ie.height,_e=[];Ie.decodeAndBlitFrameRGBA(0,_e);var xe={data:_e,width:Fe,height:Oe},Pe=new Qt(100).encode(xe,100);return e.processJPEG.call(this,Pe,r,Ce,Me)},e.processGIF87A=e.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),Ce=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:Me,green:Ce,blue:r,quad:Ie}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){a.log("bit decode error:"+r)}},te.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var Ce=this.bottom_up?e:this.height-1-e,Me=0;Me<t;Me++)for(var Ie=this.datav.getUint8(this.pos++,!0),Fe=Ce*this.width*4+8*Me*4,Oe=0;Oe<8&&8*Me+Oe<this.width;Oe++){var _e=this.palette[Ie>>7-Oe&1];this.data[Fe+4*Oe]=_e.blue,this.data[Fe+4*Oe+1]=_e.green,this.data[Fe+4*Oe+2]=_e.red,this.data[Fe+4*Oe+3]=255}r!==0&&(this.pos+=4-r)}},te.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var Ce=this.bottom_up?r:this.height-1-r,Me=0;Me<e;Me++){var Ie=this.datav.getUint8(this.pos++,!0),Fe=Ce*this.width*4+2*Me*4,Oe=Ie>>4,_e=15&Ie,xe=this.palette[Oe];if(this.data[Fe]=xe.blue,this.data[Fe+1]=xe.green,this.data[Fe+2]=xe.red,this.data[Fe+3]=255,2*Me+1>=this.width)break;xe=this.palette[_e],this.data[Fe+4]=xe.blue,this.data[Fe+4+1]=xe.green,this.data[Fe+4+2]=xe.red,this.data[Fe+4+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,Ce=0;Ce<this.width;Ce++){var Me=this.datav.getUint8(this.pos++,!0),Ie=r*this.width*4+4*Ce;if(Me<this.palette.length){var Fe=this.palette[Me];this.data[Ie]=Fe.red,this.data[Ie+1]=Fe.green,this.data[Ie+2]=Fe.blue,this.data[Ie+3]=255}else this.data[Ie]=255,this.data[Ie+1]=255,this.data[Ie+2]=255,this.data[Ie+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var Ce=this.bottom_up?r:this.height-1-r,Me=0;Me<this.width;Me++){var Ie=this.datav.getUint16(this.pos,!0);this.pos+=2;var Fe=(Ie&t)/t*255|0,Oe=(Ie>>5&t)/t*255|0,_e=(Ie>>10&t)/t*255|0,xe=Ie>>15?255:0,Pe=Ce*this.width*4+4*Me;this.data[Pe]=_e,this.data[Pe+1]=Oe,this.data[Pe+2]=Fe,this.data[Pe+3]=xe}this.pos+=e}},te.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),Ce=this.height-1;Ce>=0;Ce--){for(var Me=this.bottom_up?Ce:this.height-1-Ce,Ie=0;Ie<this.width;Ie++){var Fe=this.datav.getUint16(this.pos,!0);this.pos+=2;var Oe=(Fe&t)/t*255|0,_e=(Fe>>5&r)/r*255|0,xe=(Fe>>11)/t*255|0,Pe=Me*this.width*4+4*Ie;this.data[Pe]=xe,this.data[Pe+1]=_e,this.data[Pe+2]=Oe,this.data[Pe+3]=255}this.pos+=e}},te.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var Ce=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0),Fe=t*this.width*4+4*r;this.data[Fe]=Ie,this.data[Fe+1]=Me,this.data[Fe+2]=Ce,this.data[Fe+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var Ce=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0),Fe=this.datav.getUint8(this.pos++,!0),Oe=t*this.width*4+4*r;this.data[Oe]=Ie,this.data[Oe+1]=Me,this.data[Oe+2]=Ce,this.data[Oe+3]=Fe}},te.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,Ce,Me){var Ie=new te(t,!1),Fe=Ie.width,Oe=Ie.height,_e={data:Ie.getData(),width:Fe,height:Oe},xe=new Qt(100).encode(_e,100);return e.processJPEG.call(this,xe,r,Ce,Me)}}(E.API),ee.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,Ce,Me){var Ie=new ee(t),Fe=Ie.width,Oe=Ie.height,_e={data:Ie.getData(),width:Fe,height:Oe},xe=new Qt(100).encode(_e,100);return e.processJPEG.call(this,xe,r,Ce,Me)}}(E.API),E.API.processRGBA=function(e,t,r){for(var Ce=e.data,Me=Ce.length,Ie=new Uint8Array(Me/4*3),Fe=new Uint8Array(Me/4),Oe=0,_e=0,xe=0;xe<Me;xe+=4){var Pe=Ce[xe],Ae=Ce[xe+1],Se=Ce[xe+2],St=Ce[xe+3];Ie[Oe++]=Pe,Ie[Oe++]=Ae,Ie[Oe++]=Se,Fe[_e++]=St}var Te=this.__addimage__.arrayBufferToBinaryString(Ie);return{alpha:this.__addimage__.arrayBufferToBinaryString(Fe),data:Te,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},E.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(e,t){var r,Ce,Me=(t=t||{}).font||this.internal.getFont(),Ie=t.fontSize||this.internal.getFontSize(),Fe=t.charSpace||this.internal.getCharSpace(),Oe=t.widths?t.widths:Me.metadata.Unicode.widths,_e=Oe.fof?Oe.fof:1,xe=t.kerning?t.kerning:Me.metadata.Unicode.kerning,Pe=xe.fof?xe.fof:1,Ae=t.doKerning!==!1,Se=0,St=e.length,Te=0,Re=Oe[0]||_e,Ee=[];for(r=0;r<St;r++)Ce=e.charCodeAt(r),typeof Me.metadata.widthOfString=="function"?Ee.push((Me.metadata.widthOfGlyph(Me.metadata.characterToGlyph(Ce))+Fe*(1e3/Ie)||0)/1e3):(Se=Ae&&_typeof(xe[Ce])==="object"&&!isNaN(parseInt(xe[Ce][Te],10))?xe[Ce][Te]/Pe:0,Ee.push((Oe[Ce]||Re)/_e+Se)),Te=Ce;return Ee},Yt=Vt.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),Ce=t.font||this.internal.getFont(),Me=t.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(e=Vt.processArabic(e)),typeof Ce.metadata.widthOfString=="function"?Ce.metadata.widthOfString(e,r,Me)/r:Gt.apply(this,arguments).reduce(function(Ie,Fe){return Ie+Fe},0)},Jt=function(e,t,r,Ce){for(var Me=[],Ie=0,Fe=e.length,Oe=0;Ie!==Fe&&Oe+t[Ie]<r;)Oe+=t[Ie],Ie++;Me.push(e.slice(0,Ie));var _e=Ie;for(Oe=0;Ie!==Fe;)Oe+t[Ie]>Ce&&(Me.push(e.slice(_e,Ie)),Oe=0,_e=Ie),Oe+=t[Ie],Ie++;return _e!==Ie&&Me.push(e.slice(_e,Ie)),Me},Xt=function(e,t,r){r||(r={});var Ce,Me,Ie,Fe,Oe,_e,xe,Pe=[],Ae=[Pe],Se=r.textIndent||0,St=0,Te=0,Re=e.split(" "),Ee=Gt.apply(this,[" ",r])[0];if(_e=r.lineIndent===-1?Re[0].length+2:r.lineIndent||0){var ke=Array(_e).join(" "),De=[];Re.map(function(He){(He=He.split(/\s*\n/)).length>1?De=De.concat(He.map(function(Ue,We){return(We&&Ue.length?`
`:"")+Ue})):De.push(He[0])}),Re=De,_e=Yt.apply(this,[ke,r])}for(Ie=0,Fe=Re.length;Ie<Fe;Ie++){var Be=0;if(Ce=Re[Ie],_e&&Ce[0]==`
`&&(Ce=Ce.substr(1),Be=1),Se+St+(Te=(Me=Gt.apply(this,[Ce,r])).reduce(function(He,Ue){return He+Ue},0))>t||Be){if(Te>t){for(Oe=Jt.apply(this,[Ce,Me,t-(Se+St),t]),Pe.push(Oe.shift()),Pe=[Oe.pop()];Oe.length;)Ae.push([Oe.shift()]);Te=Me.slice(Ce.length-(Pe[0]?Pe[0].length:0)).reduce(function(He,Ue){return He+Ue},0)}else Pe=[Ce];Ae.push(Pe),Se=Te+_e,St=Ee}else Pe.push(Ce),Se+=St+Te,St=Ee}return xe=_e?function(He,Ue){return(Ue?ke:"")+He.join(" ")}:function(He){return He.join(" ")},Ae.map(xe)},Vt.splitTextToSize=function(e,t,r){var Ce,Me=(r=r||{}).fontSize||this.internal.getFontSize(),Ie=function(Pe){if(Pe.widths&&Pe.kerning)return{widths:Pe.widths,kerning:Pe.kerning};var Ae=this.internal.getFont(Pe.fontName,Pe.fontStyle);return Ae.metadata.Unicode?{widths:Ae.metadata.Unicode.widths||{0:1},kerning:Ae.metadata.Unicode.kerning||{}}:{font:Ae.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);Ce=Array.isArray(e)?e:String(e).split(/\r?\n/);var Fe=1*this.internal.scaleFactor*t/Me;Ie.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/Me:0,Ie.lineIndent=r.lineIndent;var Oe,_e,xe=[];for(Oe=0,_e=Ce.length;Oe<_e;Oe++)xe=xe.concat(Xt.apply(this,[Ce[Oe],Fe,Ie]));return xe},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},Ce={},Me=0;Me<t.length;Me++)r[t[Me]]="0123456789abcdef"[Me],Ce["0123456789abcdef"[Me]]=t[Me];var Ie=function(Ae){return"0x"+parseInt(Ae,10).toString(16)},Fe=e.__fontmetrics__.compress=function(Ae){var Se,St,Te,Re,Ee=["{"];for(var ke in Ae){if(Se=Ae[ke],isNaN(parseInt(ke,10))?St="'"+ke+"'":(ke=parseInt(ke,10),St=(St=Ie(ke).slice(2)).slice(0,-1)+Ce[St.slice(-1)]),typeof Se=="number")Se<0?(Te=Ie(Se).slice(3),Re="-"):(Te=Ie(Se).slice(2),Re=""),Te=Re+Te.slice(0,-1)+Ce[Te.slice(-1)];else{if(_typeof(Se)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Se)+".");Te=Fe(Se)}Ee.push(St+Te)}return Ee.push("}"),Ee.join("")},Oe=e.__fontmetrics__.uncompress=function(Ae){if(typeof Ae!="string")throw new Error("Invalid argument passed to uncompress.");for(var Se,St,Te,Re,Ee={},ke=1,De=Ee,Be=[],He="",Ue="",We=Ae.length-1,Je=1;Je<We;Je+=1)(Re=Ae[Je])=="'"?Se?(Te=Se.join(""),Se=void 0):Se=[]:Se?Se.push(Re):Re=="{"?(Be.push([De,Te]),De={},Te=void 0):Re=="}"?((St=Be.pop())[0][St[1]]=De,Te=void 0,De=St[0]):Re=="-"?ke=-1:Te===void 0?r.hasOwnProperty(Re)?(He+=r[Re],Te=parseInt(He,16)*ke,ke=1,He=""):He+=Re:r.hasOwnProperty(Re)?(Ue+=r[Re],De[Te]=parseInt(Ue,16)*ke,ke=1,Te=void 0,Ue=""):Ue+=Re;return Ee},_e={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Oe("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},xe={Unicode:{Courier:_e,"Courier-Bold":_e,"Courier-BoldOblique":_e,"Courier-Oblique":_e,Helvetica:_e,"Helvetica-Bold":_e,"Helvetica-BoldOblique":_e,"Helvetica-Oblique":_e,"Times-Roman":_e,"Times-Bold":_e,"Times-BoldItalic":_e,"Times-Italic":_e}},Pe={Unicode:{"Courier-Oblique":Oe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Oe("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Oe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Oe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Oe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Oe("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Oe("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Oe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Oe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Oe("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Oe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Oe("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Oe("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Oe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(Ae){var Se=Ae.font,St=Pe.Unicode[Se.postScriptName];St&&(Se.metadata.Unicode={},Se.metadata.Unicode.widths=St.widths,Se.metadata.Unicode.kerning=St.kerning);var Te=xe.Unicode[Se.postScriptName];Te&&(Se.metadata.Unicode.encoding=Te,Se.encoding=Te.codePages[0])}])}(E.API),function(e){var t=function(r){for(var Ce=r.length,Me=new Uint8Array(Ce),Ie=0;Ie<Ce;Ie++)Me[Ie]=r.charCodeAt(Ie);return Me};e.API.events.push(["addFont",function(r){var Ce=void 0,Me=r.font,Ie=r.instance;if(!Me.isStandardFont){if(Ie===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Me.postScriptName+"').");if(typeof(Ce=Ie.existsFileInVFS(Me.postScriptName)===!1?Ie.loadFile(Me.postScriptName):Ie.getFileFromVFS(Me.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Me.postScriptName+"').");(function(Fe,Oe){Oe=/^\x00\x01\x00\x00/.test(Oe)?t(Oe):t(u(Oe)),Fe.metadata=e.API.TTFFont.open(Oe),Fe.metadata.Unicode=Fe.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Fe.metadata.glyIdsUsed=[0]})(Me,Ce)}}])}(E),function(e){function t(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es.d007be5b.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}E.API.addSvgAsImage=function(r,Ce,Me,Ie,Fe,Oe,_e,xe){if(isNaN(Ce)||isNaN(Me))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ie)||isNaN(Fe))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Pe=document.createElement("canvas");Pe.width=Ie,Pe.height=Fe;var Ae=Pe.getContext("2d");Ae.fillStyle="#fff",Ae.fillRect(0,0,Pe.width,Pe.height);var Se={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},St=this;return t().then(function(Te){return Te.fromString(Ae,r,Se)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Te){return Te.render(Se)}).then(function(){St.addImage(Pe.toDataURL("image/jpeg",1),Ce,Me,Ie,Fe,_e,xe)})}}(),E.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Ce=1;Ce<=this.internal.getNumberOfPages();Ce++)for(var Me=0;Me<this.internal.pages[Ce].length;Me++)this.internal.pages[Ce][Me]=this.internal.pages[Ce][Me].replace(t,r);return this},E.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var Ce,Me,Ie,Fe={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Oe=Object.keys(Fe),_e=[],xe=0,Pe=0,Ae=0;function Se(Te,Re){var Ee,ke=!1;for(Ee=0;Ee<Te.length;Ee+=1)Te[Ee]===Re&&(ke=!0);return ke}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Fe)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var St=Oe.length;for(Ae=0;Ae<St;Ae+=1)r[Oe[Ae]].value=r[Oe[Ae]].defaultValue,r[Oe[Ae]].explicitSet=!1}if(_typeof(e)==="object"){for(Me in e)if(Ie=e[Me],Se(Oe,Me)&&Ie!==void 0){if(r[Me].type==="boolean"&&typeof Ie=="boolean")r[Me].value=Ie;else if(r[Me].type==="name"&&Se(r[Me].valueSet,Ie))r[Me].value=Ie;else if(r[Me].type==="integer"&&Number.isInteger(Ie))r[Me].value=Ie;else if(r[Me].type==="array"){for(xe=0;xe<Ie.length;xe+=1)if(Ce=!0,Ie[xe].length===1&&typeof Ie[xe][0]=="number")_e.push(String(Ie[xe]-1));else if(Ie[xe].length>1){for(Pe=0;Pe<Ie[xe].length;Pe+=1)typeof Ie[xe][Pe]!="number"&&(Ce=!1);Ce===!0&&_e.push([Ie[xe][0]-1,Ie[xe][1]-1].join(" "))}r[Me].value="["+_e.join(" ")+"]"}else r[Me].value=r[Me].defaultValue;r[Me].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Te,Re=[];for(Te in r)r[Te].explicitSet===!0&&(r[Te].type==="name"?Re.push("/"+Te+" /"+r[Te].value):Re.push("/"+Te+" "+r[Te].value));Re.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Re.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var Ce='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Me=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ie=unescape(encodeURIComponent(Ce)),Fe=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Oe=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),_e=unescape(encodeURIComponent("</x:xmpmeta>")),xe=Ie.length+Fe.length+Oe.length+Me.length+_e.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+xe+" >>"),this.internal.write("stream"),this.internal.write(Me+Ie+Fe+Oe+_e),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(Ce,Me){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Ce,namespaceuri:Me||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(E.API),function(e){var t=e.API,r=t.pdfEscape16=function(Ie,Fe){for(var Oe,_e=Fe.metadata.Unicode.widths,xe=["","0","00","000","0000"],Pe=[""],Ae=0,Se=Ie.length;Ae<Se;++Ae){if(Oe=Fe.metadata.characterToGlyph(Ie.charCodeAt(Ae)),Fe.metadata.glyIdsUsed.push(Oe),Fe.metadata.toUnicode[Oe]=Ie.charCodeAt(Ae),_e.indexOf(Oe)==-1&&(_e.push(Oe),_e.push([parseInt(Fe.metadata.widthOfGlyph(Oe),10)])),Oe=="0")return Pe.join("");Oe=Oe.toString(16),Pe.push(xe[4-Oe.length],Oe)}return Pe.join("")},Ce=function(Ie){var Fe,Oe,_e,xe,Pe,Ae,Se;for(Pe=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,_e=[],Ae=0,Se=(Oe=Object.keys(Ie).sort(function(St,Te){return St-Te})).length;Ae<Se;Ae++)Fe=Oe[Ae],_e.length>=100&&(Pe+=`
`+_e.length+` beginbfchar
`+_e.join(`
`)+`
endbfchar`,_e=[]),Ie[Fe]!==void 0&&Ie[Fe]!==null&&typeof Ie[Fe].toString=="function"&&(xe=("0000"+Ie[Fe].toString(16)).slice(-4),Fe=("0000"+(+Fe).toString(16)).slice(-4),_e.push("<"+Fe+"><"+xe+">"));return _e.length&&(Pe+=`
`+_e.length+` beginbfchar
`+_e.join(`
`)+`
endbfchar
`),Pe+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(Ie){(function(Fe){var Oe=Fe.font,_e=Fe.out,xe=Fe.newObject,Pe=Fe.putStream;if(Oe.metadata instanceof e.API.TTFFont&&Oe.encoding==="Identity-H"){for(var Ae=Oe.metadata.Unicode.widths,Se=Oe.metadata.subset.encode(Oe.metadata.glyIdsUsed,1),St="",Te=0;Te<Se.length;Te++)St+=String.fromCharCode(Se[Te]);var Re=xe();Pe({data:St,addLength1:!0,objectId:Re}),_e("endobj");var Ee=xe();Pe({data:Ce(Oe.metadata.toUnicode),addLength1:!0,objectId:Ee}),_e("endobj");var ke=xe();_e("<<"),_e("/Type /FontDescriptor"),_e("/FontName /"+F(Oe.fontName)),_e("/FontFile2 "+Re+" 0 R"),_e("/FontBBox "+e.API.PDFObject.convert(Oe.metadata.bbox)),_e("/Flags "+Oe.metadata.flags),_e("/StemV "+Oe.metadata.stemV),_e("/ItalicAngle "+Oe.metadata.italicAngle),_e("/Ascent "+Oe.metadata.ascender),_e("/Descent "+Oe.metadata.decender),_e("/CapHeight "+Oe.metadata.capHeight),_e(">>"),_e("endobj");var De=xe();_e("<<"),_e("/Type /Font"),_e("/BaseFont /"+F(Oe.fontName)),_e("/FontDescriptor "+ke+" 0 R"),_e("/W "+e.API.PDFObject.convert(Ae)),_e("/CIDToGIDMap /Identity"),_e("/DW 1000"),_e("/Subtype /CIDFontType2"),_e("/CIDSystemInfo"),_e("<<"),_e("/Supplement 0"),_e("/Registry (Adobe)"),_e("/Ordering ("+Oe.encoding+")"),_e(">>"),_e(">>"),_e("endobj"),Oe.objectNumber=xe(),_e("<<"),_e("/Type /Font"),_e("/Subtype /Type0"),_e("/ToUnicode "+Ee+" 0 R"),_e("/BaseFont /"+F(Oe.fontName)),_e("/Encoding /"+Oe.encoding),_e("/DescendantFonts ["+De+" 0 R]"),_e(">>"),_e("endobj"),Oe.isAlreadyPutted=!0}})(Ie)}]),t.events.push(["putFont",function(Ie){(function(Fe){var Oe=Fe.font,_e=Fe.out,xe=Fe.newObject,Pe=Fe.putStream;if(Oe.metadata instanceof e.API.TTFFont&&Oe.encoding==="WinAnsiEncoding"){for(var Ae=Oe.metadata.rawData,Se="",St=0;St<Ae.length;St++)Se+=String.fromCharCode(Ae[St]);var Te=xe();Pe({data:Se,addLength1:!0,objectId:Te}),_e("endobj");var Re=xe();Pe({data:Ce(Oe.metadata.toUnicode),addLength1:!0,objectId:Re}),_e("endobj");var Ee=xe();_e("<<"),_e("/Descent "+Oe.metadata.decender),_e("/CapHeight "+Oe.metadata.capHeight),_e("/StemV "+Oe.metadata.stemV),_e("/Type /FontDescriptor"),_e("/FontFile2 "+Te+" 0 R"),_e("/Flags 96"),_e("/FontBBox "+e.API.PDFObject.convert(Oe.metadata.bbox)),_e("/FontName /"+F(Oe.fontName)),_e("/ItalicAngle "+Oe.metadata.italicAngle),_e("/Ascent "+Oe.metadata.ascender),_e(">>"),_e("endobj"),Oe.objectNumber=xe();for(var ke=0;ke<Oe.metadata.hmtx.widths.length;ke++)Oe.metadata.hmtx.widths[ke]=parseInt(Oe.metadata.hmtx.widths[ke]*(1e3/Oe.metadata.head.unitsPerEm));_e("<</Subtype/TrueType/Type/Font/ToUnicode "+Re+" 0 R/BaseFont/"+F(Oe.fontName)+"/FontDescriptor "+Ee+" 0 R/Encoding/"+Oe.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(Oe.metadata.hmtx.widths)+">>"),_e("endobj"),Oe.isAlreadyPutted=!0}})(Ie)}]);var Me=function(Ie){var Fe,Oe=Ie.text||"",_e=Ie.x,xe=Ie.y,Pe=Ie.options||{},Ae=Ie.mutex||{},Se=Ae.pdfEscape,St=Ae.activeFontKey,Te=Ae.fonts,Re=St,Ee="",ke=0,De="",Be=Te[Re].encoding;if(Te[Re].encoding!=="Identity-H")return{text:Oe,x:_e,y:xe,options:Pe,mutex:Ae};for(De=Oe,Re=St,Array.isArray(Oe)&&(De=Oe[0]),ke=0;ke<De.length;ke+=1)Te[Re].metadata.hasOwnProperty("cmap")&&(Fe=Te[Re].metadata.cmap.unicode.codeMap[De[ke].charCodeAt(0)]),Fe||De[ke].charCodeAt(0)<256&&Te[Re].metadata.hasOwnProperty("Unicode")?Ee+=De[ke]:Ee+="";var He="";return parseInt(Re.slice(1))<14||Be==="WinAnsiEncoding"?He=Se(Ee,Re).split("").map(function(Ue){return Ue.charCodeAt(0).toString(16)}).join(""):Be==="Identity-H"&&(He=r(Ee,Te[Re])),Ae.isHex=!0,{text:He,x:_e,y:xe,options:Pe,mutex:Ae}};t.events.push(["postProcessText",function(Ie){var Fe=Ie.text||"",Oe=[],_e={text:Fe,x:Ie.x,y:Ie.y,options:Ie.options,mutex:Ie.mutex};if(Array.isArray(Fe)){var xe=0;for(xe=0;xe<Fe.length;xe+=1)Array.isArray(Fe[xe])&&Fe[xe].length===3?Oe.push([Me(Object.assign({},_e,{text:Fe[xe][0]})).text,Fe[xe][1],Fe[xe][2]]):Oe.push(Me(Object.assign({},_e,{text:Fe[xe]})).text);Ie.text=Oe}else Ie.text=Me(Object.assign({},_e,{text:Fe})).text}])}(E),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,Ce){return t.call(this),this.internal.vFS[r]=Ce,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(E.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(Ce){var Me,Ie,Fe,Oe,_e,xe,Pe,Ae=t,Se=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],St=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Te={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Re={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ee=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],ke=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),De=!1,Be=0;this.__bidiEngine__={};var He=function(ii){var li=ii.charCodeAt(),bi=li>>8,mi=Re[bi];return mi!==void 0?Ae[256*mi+(255&li)]:bi===252||bi===253?"AL":ke.test(bi)?"L":bi===8?"R":"N"},Ue=function(ii){for(var li,bi=0;bi<ii.length;bi++){if((li=He(ii.charAt(bi)))==="L")return!1;if(li==="R")return!0}return!1},We=function(ii,li,bi,mi){var Si,_i,xi,Ei,ri=li[mi];switch(ri){case"L":case"R":De=!1;break;case"N":case"AN":break;case"EN":De&&(ri="AN");break;case"AL":De=!0,ri="R";break;case"WS":ri="N";break;case"CS":mi<1||mi+1>=li.length||(Si=bi[mi-1])!=="EN"&&Si!=="AN"||(_i=li[mi+1])!=="EN"&&_i!=="AN"?ri="N":De&&(_i="AN"),ri=_i===Si?_i:"N";break;case"ES":ri=(Si=mi>0?bi[mi-1]:"B")==="EN"&&mi+1<li.length&&li[mi+1]==="EN"?"EN":"N";break;case"ET":if(mi>0&&bi[mi-1]==="EN"){ri="EN";break}if(De){ri="N";break}for(xi=mi+1,Ei=li.length;xi<Ei&&li[xi]==="ET";)xi++;ri=xi<Ei&&li[xi]==="EN"?"EN":"N";break;case"NSM":if(Fe&&!Oe){for(Ei=li.length,xi=mi+1;xi<Ei&&li[xi]==="NSM";)xi++;if(xi<Ei){var vi=ii[mi],Ci=vi>=1425&&vi<=2303||vi===64286;if(Si=li[xi],Ci&&(Si==="R"||Si==="AL")){ri="R";break}}}ri=mi<1||(Si=li[mi-1])==="B"?"N":bi[mi-1];break;case"B":De=!1,Me=!0,ri=Be;break;case"S":Ie=!0,ri="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":De=!1;break;case"BN":ri="N"}return ri},Je=function(ii,li,bi){var mi=ii.split("");return bi&&Qe(mi,bi,{hiLevel:Be}),mi.reverse(),li&&li.reverse(),mi.join("")},Qe=function(ii,li,bi){var mi,Si,_i,xi,Ei,ri=-1,vi=ii.length,Ci=0,$e=[],Ge=Be?St:Se,ze=[];for(De=!1,Me=!1,Ie=!1,Si=0;Si<vi;Si++)ze[Si]=He(ii[Si]);for(_i=0;_i<vi;_i++){if(Ei=Ci,$e[_i]=We(ii,ze,$e,_i),mi=240&(Ci=Ge[Ei][Te[$e[_i]]]),Ci&=15,li[_i]=xi=Ge[Ci][5],mi>0)if(mi===16){for(Si=ri;Si<_i;Si++)li[Si]=1;ri=-1}else ri=-1;if(Ge[Ci][6])ri===-1&&(ri=_i);else if(ri>-1){for(Si=ri;Si<_i;Si++)li[Si]=xi;ri=-1}ze[_i]==="B"&&(li[_i]=0),bi.hiLevel|=xi}Ie&&function(qe,ei,ni){for(var ci=0;ci<ni;ci++)if(qe[ci]==="S"){ei[ci]=Be;for(var di=ci-1;di>=0&&qe[di]==="WS";di--)ei[di]=Be}}(ze,li,vi)},fi=function(ii,li,bi,mi,Si){if(!(Si.hiLevel<ii)){if(ii===1&&Be===1&&!Me)return li.reverse(),void(bi&&bi.reverse());for(var _i,xi,Ei,ri,vi=li.length,Ci=0;Ci<vi;){if(mi[Ci]>=ii){for(Ei=Ci+1;Ei<vi&&mi[Ei]>=ii;)Ei++;for(ri=Ci,xi=Ei-1;ri<xi;ri++,xi--)_i=li[ri],li[ri]=li[xi],li[xi]=_i,bi&&(_i=bi[ri],bi[ri]=bi[xi],bi[xi]=_i);Ci=Ei}Ci++}}},oi=function(ii,li,bi){var mi=ii.split(""),Si={hiLevel:Be};return bi||(bi=[]),Qe(mi,bi,Si),function(_i,xi,Ei){if(Ei.hiLevel!==0&&Pe)for(var ri,vi=0;vi<_i.length;vi++)xi[vi]===1&&(ri=Ee.indexOf(_i[vi]))>=0&&(_i[vi]=Ee[ri+1])}(mi,bi,Si),fi(2,mi,li,bi,Si),fi(1,mi,li,bi,Si),mi.join("")};return this.__bidiEngine__.doBidiReorder=function(ii,li,bi){if(function(Si,_i){if(_i)for(var xi=0;xi<Si.length;xi++)_i[xi]=xi;Oe===void 0&&(Oe=Ue(Si)),xe===void 0&&(xe=Ue(Si))}(ii,li),Fe||!_e||xe)if(Fe&&_e&&Oe^xe)Be=Oe?1:0,ii=Je(ii,li,bi);else if(!Fe&&_e&&xe)Be=Oe?1:0,ii=oi(ii,li,bi),ii=Je(ii,li);else if(!Fe||Oe||_e||xe){if(Fe&&!_e&&Oe^xe)ii=Je(ii,li),Oe?(Be=0,ii=oi(ii,li,bi)):(Be=1,ii=oi(ii,li,bi),ii=Je(ii,li));else if(Fe&&Oe&&!_e&&xe)Be=1,ii=oi(ii,li,bi),ii=Je(ii,li);else if(!Fe&&!_e&&Oe^xe){var mi=Pe;Oe?(Be=1,ii=oi(ii,li,bi),Be=0,Pe=!1,ii=oi(ii,li,bi),Pe=mi):(Be=0,ii=oi(ii,li,bi),ii=Je(ii,li),Be=1,Pe=!1,ii=oi(ii,li,bi),Pe=mi,ii=Je(ii,li))}}else Be=0,ii=oi(ii,li,bi);else Be=Oe?1:0,ii=oi(ii,li,bi);return ii},this.__bidiEngine__.setOptions=function(ii){ii&&(Fe=ii.isInputVisual,_e=ii.isOutputVisual,Oe=ii.isInputRtl,xe=ii.isOutputRtl,Pe=ii.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Ce),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(Ce){var Me=Ce.text,Ie=(Ce.x,Ce.y,Ce.options||{}),Fe=(Ce.mutex,Ie.lang,[]);if(Ie.isInputVisual=typeof Ie.isInputVisual!="boolean"||Ie.isInputVisual,r.setOptions(Ie),Object.prototype.toString.call(Me)==="[object Array]"){var Oe=0;for(Fe=[],Oe=0;Oe<Me.length;Oe+=1)Object.prototype.toString.call(Me[Oe])==="[object Array]"?Fe.push([r.doBidiReorder(Me[Oe][0]),Me[Oe][1],Me[Oe][2]]):Fe.push([r.doBidiReorder(Me[Oe])]);Ce.text=Fe}else Ce.text=r.doBidiReorder(Me);r.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new ne(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,Ce,Me,Ie;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var Fe,Oe,_e,xe;for(xe=[],Fe=0,Oe=(_e=this.bbox).length;Fe<Oe;Fe++)t=_e[Fe],xe.push(Math.round(t*this.scaleFactor));return xe}.call(this),this.stemV=0,this.post.exists?(Ce=255&(Me=this.post.italic_angle),(32768&(r=Me>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+Ce)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ie=this.familyClass)===1||Ie===2||Ie===3||Ie===4||Ie===5||Ie===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,Ce){var Me,Ie,Fe,Oe;for(Fe=0,Ie=0,Oe=(t=""+t).length;0<=Oe?Ie<Oe:Ie>Oe;Ie=0<=Oe?++Ie:--Ie)Me=t.charCodeAt(Ie),Fe+=this.widthOfGlyph(this.characterToGlyph(Me))+Ce*(1e3/r)||0;return Fe*(r/1e3)},e.prototype.lineHeight=function(t,r){var Ce;return r==null&&(r=!1),Ce=r?this.lineGap:0,(this.ascender+Ce-this.decender)/1e3*t},e}();var re,ne=function(){function e(t){this.data=t!=null?t:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,Ce;for(Ce=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)Ce[r]=String.fromCharCode(this.readByte());return Ce.join("")},e.prototype.writeString=function(t){var r,Ce,Me;for(Me=[],r=0,Ce=t.length;0<=Ce?r<Ce:r>Ce;r=0<=Ce?++r:--r)Me.push(this.writeByte(t.charCodeAt(r)));return Me},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,Ce,Me,Ie,Fe,Oe,_e;return t=this.readByte(),r=this.readByte(),Ce=this.readByte(),Me=this.readByte(),Ie=this.readByte(),Fe=this.readByte(),Oe=this.readByte(),_e=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^Ce)+4294967296*(255^Me)+16777216*(255^Ie)+65536*(255^Fe)+256*(255^Oe)+(255^_e)+1):72057594037927940*t+281474976710656*r+1099511627776*Ce+4294967296*Me+16777216*Ie+65536*Fe+256*Oe+_e},e.prototype.writeLongLong=function(t){var r,Ce;return r=Math.floor(t/4294967296),Ce=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(Ce>>24&255),this.writeByte(Ce>>16&255),this.writeByte(Ce>>8&255),this.writeByte(255&Ce)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,Ce;for(r=[],Ce=0;0<=t?Ce<t:Ce>t;Ce=0<=t?++Ce:--Ce)r.push(this.readByte());return r},e.prototype.write=function(t){var r,Ce,Me,Ie;for(Ie=[],Ce=0,Me=t.length;Ce<Me;Ce++)r=t[Ce],Ie.push(this.writeByte(r));return Ie},e}(),ie=function(){var e;function t(r){var Ce,Me,Ie;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},Me=0,Ie=this.tableCount;0<=Ie?Me<Ie:Me>Ie;Me=0<=Ie?++Me:--Me)Ce={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[Ce.tag]=Ce}return t.prototype.encode=function(r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re;for(Re in St=Object.keys(r).length,_e=Math.log(2),Ae=16*Math.floor(Math.log(St)/_e),Fe=Math.floor(Ae/_e),Pe=16*St-Ae,(Me=new ne).writeInt(this.scalarType),Me.writeShort(St),Me.writeShort(Ae),Me.writeShort(Fe),Me.writeShort(Pe),Ie=16*St,xe=Me.pos+Ie,Oe=null,Te=[],r)for(Se=r[Re],Me.writeString(Re),Me.writeInt(e(Se)),Me.writeInt(xe),Me.writeInt(Se.length),Te=Te.concat(Se),Re==="head"&&(Oe=xe),xe+=Se.length;xe%4;)Te.push(0),xe++;return Me.write(Te),Ce=2981146554-e(Me.data),Me.pos=Oe+8,Me.writeUInt32(Ce),Me.data},e=function(r){var Ce,Me,Ie,Fe;for(r=ve.call(r);r.length%4;)r.push(0);for(Ie=new ne(r),Me=0,Ce=0,Fe=r.length;Ce<Fe;Ce=Ce+=4)Me+=Ie.readUInt32();return 4294967295&Me},t}(),ae={}.hasOwnProperty,oe=function(e,t){for(var r in t)ae.call(t,r)&&(e[r]=t[r]);function Ce(){this.constructor=e}return Ce.prototype=t.prototype,e.prototype=new Ce,e.__super__=t.prototype,e};re=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var se=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var Ce;return(Ce=new ne).writeInt(this.version),Ce.writeInt(this.revision),Ce.writeInt(this.checkSumAdjustment),Ce.writeInt(this.magicNumber),Ce.writeShort(this.flags),Ce.writeShort(this.unitsPerEm),Ce.writeLongLong(this.created),Ce.writeLongLong(this.modified),Ce.writeShort(this.xMin),Ce.writeShort(this.yMin),Ce.writeShort(this.xMax),Ce.writeShort(this.yMax),Ce.writeShort(this.macStyle),Ce.writeShort(this.lowestRecPPEM),Ce.writeShort(this.fontDirectionHint),Ce.writeShort(r),Ce.writeShort(this.glyphDataFormat),Ce.data},t}(),ce=function(){function e(t,r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,ke,De,Be;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),Ae=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(_e=0;_e<256;++_e)this.codeMap[_e]=t.readByte();break;case 4:for(St=t.readUInt16(),Se=St/2,t.pos+=6,Ie=function(){var He,Ue;for(Ue=[],_e=He=0;0<=Se?He<Se:He>Se;_e=0<=Se?++He:--He)Ue.push(t.readUInt16());return Ue}(),t.pos+=2,Re=function(){var He,Ue;for(Ue=[],_e=He=0;0<=Se?He<Se:He>Se;_e=0<=Se?++He:--He)Ue.push(t.readUInt16());return Ue}(),xe=function(){var He,Ue;for(Ue=[],_e=He=0;0<=Se?He<Se:He>Se;_e=0<=Se?++He:--He)Ue.push(t.readUInt16());return Ue}(),Pe=function(){var He,Ue;for(Ue=[],_e=He=0;0<=Se?He<Se:He>Se;_e=0<=Se?++He:--He)Ue.push(t.readUInt16());return Ue}(),Me=(this.length-t.pos+this.offset)/2,Oe=function(){var He,Ue;for(Ue=[],_e=He=0;0<=Me?He<Me:He>Me;_e=0<=Me?++He:--He)Ue.push(t.readUInt16());return Ue}(),_e=ke=0,Be=Ie.length;ke<Be;_e=++ke)for(Ee=Ie[_e],Ce=De=Te=Re[_e];Te<=Ee?De<=Ee:De>=Ee;Ce=Te<=Ee?++De:--De)Pe[_e]===0?Fe=Ce+xe[_e]:(Fe=Oe[Pe[_e]/2+(Ce-Te)-(Se-_e)]||0)!==0&&(Fe+=xe[_e]),this.codeMap[Ce]=65535&Fe}t.pos=Ae}return e.encode=function(t,r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,ke,De,Be,He,Ue,We,Je,Qe,fi,oi,ii,li,bi,mi,Si,_i,xi,Ei,ri,vi,Ci,$e,Ge,ze,qe,ei,ni,ci,di,Ti,Ni,si;switch(mi=new ne,Fe=Object.keys(t).sort(function(ai,Ye){return ai-Ye}),r){case"macroman":for(Re=0,Ee=function(){var ai=[];for(Te=0;Te<256;++Te)ai.push(0);return ai}(),De={0:0},Ie={},Si=0,ri=Fe.length;Si<ri;Si++)De[di=t[Me=Fe[Si]]]==null&&(De[di]=++Re),Ie[Me]={old:t[Me],new:De[t[Me]]},Ee[Me]=De[t[Me]];return mi.writeUInt16(1),mi.writeUInt16(0),mi.writeUInt32(12),mi.writeUInt16(0),mi.writeUInt16(262),mi.writeUInt16(0),mi.write(Ee),{charMap:Ie,subtable:mi.data,maxGlyphID:Re+1};case"unicode":for(li=[],Ae=[],Be=0,De={},Ce={},ke=xe=null,_i=0,vi=Fe.length;_i<vi;_i++)De[Ue=t[Me=Fe[_i]]]==null&&(De[Ue]=++Be),Ce[Me]={old:Ue,new:De[Ue]},Oe=De[Ue]-Me,ke!=null&&Oe===xe||(ke&&Ae.push(ke),li.push(Me),xe=Oe),ke=Me;for(ke&&Ae.push(ke),Ae.push(65535),li.push(65535),oi=2*(fi=li.length),Qe=2*Math.pow(Math.log(fi)/Math.LN2,2),Se=Math.log(Qe/2)/Math.LN2,Je=2*fi-Qe,_e=[],We=[],St=[],Te=xi=0,Ci=li.length;xi<Ci;Te=++xi){if(ii=li[Te],Pe=Ae[Te],ii===65535){_e.push(0),We.push(0);break}if(ii-(bi=Ce[ii].new)>=32768)for(_e.push(0),We.push(2*(St.length+fi-Te)),Me=Ei=ii;ii<=Pe?Ei<=Pe:Ei>=Pe;Me=ii<=Pe?++Ei:--Ei)St.push(Ce[Me].new);else _e.push(bi-ii),We.push(0)}for(mi.writeUInt16(3),mi.writeUInt16(1),mi.writeUInt32(12),mi.writeUInt16(4),mi.writeUInt16(16+8*fi+2*St.length),mi.writeUInt16(0),mi.writeUInt16(oi),mi.writeUInt16(Qe),mi.writeUInt16(Se),mi.writeUInt16(Je),ni=0,$e=Ae.length;ni<$e;ni++)Me=Ae[ni],mi.writeUInt16(Me);for(mi.writeUInt16(0),ci=0,Ge=li.length;ci<Ge;ci++)Me=li[ci],mi.writeUInt16(Me);for(Ti=0,ze=_e.length;Ti<ze;Ti++)Oe=_e[Ti],mi.writeUInt16(Oe);for(Ni=0,qe=We.length;Ni<qe;Ni++)He=We[Ni],mi.writeUInt16(He);for(si=0,ei=St.length;si<ei;si++)Re=St[si],mi.writeUInt16(Re);return{charMap:Ce,subtable:mi.data,maxGlyphID:Be+1}}},e}(),ue=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="cmap",t.prototype.parse=function(r){var Ce,Me,Ie;for(r.pos=this.offset,this.version=r.readUInt16(),Ie=r.readUInt16(),this.tables=[],this.unicode=null,Me=0;0<=Ie?Me<Ie:Me>Ie;Me=0<=Ie?++Me:--Me)Ce=new ce(r,this.offset),this.tables.push(Ce),Ce.isUnicode&&this.unicode==null&&(this.unicode=Ce);return!0},t.encode=function(r,Ce){var Me,Ie;return Ce==null&&(Ce="macroman"),Me=ce.encode(r,Ce),(Ie=new ne).writeUInt16(0),Ie.writeUInt16(1),Me.table=Ie.data.concat(Me.subtable),Me},t}(),he=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),le=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var Ce,Me;for(Me=[],Ce=0;Ce<10;++Ce)Me.push(r.readByte());return Me}(),this.charRange=function(){var Ce,Me;for(Me=[],Ce=0;Ce<4;++Ce)Me.push(r.readInt());return Me}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var Ce,Me;for(Me=[],Ce=0;Ce<2;Ce=++Ce)Me.push(r.readInt());return Me}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),fe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="post",t.prototype.parse=function(r){var Ce,Me,Ie;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var Fe;for(Me=r.readUInt16(),this.glyphNameIndex=[],Fe=0;0<=Me?Fe<Me:Fe>Me;Fe=0<=Me?++Fe:--Fe)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],Ie=[];r.pos<this.offset+this.length;)Ce=r.readByte(),Ie.push(this.names.push(r.readString(Ce)));return Ie;case 151552:return Me=r.readUInt16(),this.offsets=r.read(Me);case 196608:break;case 262144:return this.map=function(){var Oe,_e,xe;for(xe=[],Fe=Oe=0,_e=this.file.maxp.numGlyphs;0<=_e?Oe<_e:Oe>_e;Fe=0<=_e?++Oe:--Oe)xe.push(r.readUInt32());return xe}.call(this)}},t}(),de=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="name",t.prototype.parse=function(r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St;for(r.pos=this.offset,r.readShort(),Ce=r.readShort(),_e=r.readShort(),Me=[],Fe=0;0<=Ce?Fe<Ce:Fe>Ce;Fe=0<=Ce?++Fe:--Fe)Me.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+_e+r.readShort()});for(xe={},Fe=Ae=0,Se=Me.length;Ae<Se;Fe=++Ae)Ie=Me[Fe],r.pos=Ie.offset,Pe=r.readString(Ie.length),Oe=new de(Pe,Ie),xe[St=Ie.nameID]==null&&(xe[St]=[]),xe[Ie.nameID].push(Oe);this.strings=xe,this.copyright=xe[0],this.fontFamily=xe[1],this.fontSubfamily=xe[2],this.uniqueSubfamily=xe[3],this.fontName=xe[4],this.version=xe[5];try{this.postscriptName=xe[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=xe[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=xe[7],this.manufacturer=xe[8],this.designer=xe[9],this.description=xe[10],this.vendorUrl=xe[11],this.designerUrl=xe[12],this.license=xe[13],this.licenseUrl=xe[14],this.preferredFamily=xe[15],this.preferredSubfamily=xe[17],this.compatibleFull=xe[18],this.sampleText=xe[19]},t}(),ge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),me=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hmtx",t.prototype.parse=function(r){var Ce,Me,Ie,Fe,Oe,_e,xe;for(r.pos=this.offset,this.metrics=[],Ce=0,_e=this.file.hhea.numberOfMetrics;0<=_e?Ce<_e:Ce>_e;Ce=0<=_e?++Ce:--Ce)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(Ie=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Pe,Ae;for(Ae=[],Ce=Pe=0;0<=Ie?Pe<Ie:Pe>Ie;Ce=0<=Ie?++Pe:--Pe)Ae.push(r.readInt16());return Ae}(),this.widths=function(){var Pe,Ae,Se,St;for(St=[],Pe=0,Ae=(Se=this.metrics).length;Pe<Ae;Pe++)Fe=Se[Pe],St.push(Fe.advance);return St}.call(this),Me=this.widths[this.widths.length-1],xe=[],Ce=Oe=0;0<=Ie?Oe<Ie:Oe>Ie;Ce=0<=Ie?++Oe:--Oe)xe.push(this.widths.push(Me));return xe},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),ve=[].slice,be=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se;return r in this.cache?this.cache[r]:(Fe=this.file.loca,Ce=this.file.contents,Me=Fe.indexOf(r),(Ie=Fe.lengthOf(r))===0?this.cache[r]=null:(Ce.pos=this.offset+Me,Oe=(_e=new ne(Ce.read(Ie))).readShort(),Pe=_e.readShort(),Se=_e.readShort(),xe=_e.readShort(),Ae=_e.readShort(),this.cache[r]=Oe===-1?new we(_e,Pe,Se,xe,Ae):new ye(_e,Oe,Pe,Se,xe,Ae),this.cache[r]))},t.prototype.encode=function(r,Ce,Me){var Ie,Fe,Oe,_e,xe;for(Oe=[],Fe=[],_e=0,xe=Ce.length;_e<xe;_e++)Ie=r[Ce[_e]],Fe.push(Oe.length),Ie&&(Oe=Oe.concat(Ie.encode(Me)));return Fe.push(Oe.length),{table:Oe,offsets:Fe}},t}(),ye=function(){function e(t,r,Ce,Me,Ie,Fe){this.raw=t,this.numberOfContours=r,this.xMin=Ce,this.yMin=Me,this.xMax=Ie,this.yMax=Fe,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),we=function(){function e(t,r,Ce,Me,Ie){var Fe,Oe;for(this.raw=t,this.xMin=r,this.yMin=Ce,this.xMax=Me,this.yMax=Ie,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Fe=this.raw;Oe=Fe.readShort(),this.glyphOffsets.push(Fe.pos),this.glyphIDs.push(Fe.readUInt16()),32&Oe;)Fe.pos+=1&Oe?4:2,128&Oe?Fe.pos+=8:64&Oe?Fe.pos+=4:8&Oe&&(Fe.pos+=2)}return e.prototype.encode=function(){var t,r,Ce;for(r=new ne(ve.call(this.raw.data)),t=0,Ce=this.glyphIDs.length;t<Ce;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),Ne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="loca",t.prototype.parse=function(r){var Ce,Me;return r.pos=this.offset,Ce=this.file.head.indexToLocFormat,this.offsets=Ce===0?function(){var Ie,Fe;for(Fe=[],Me=0,Ie=this.length;Me<Ie;Me+=2)Fe.push(2*r.readUInt16());return Fe}.call(this):function(){var Ie,Fe;for(Fe=[],Me=0,Ie=this.length;Me<Ie;Me+=4)Fe.push(r.readUInt32());return Fe}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,Ce){for(var Me=new Uint32Array(this.offsets.length),Ie=0,Fe=0,Oe=0;Oe<Me.length;++Oe)if(Me[Oe]=Ie,Fe<Ce.length&&Ce[Fe]==Oe){++Fe,Me[Oe]=Ie;var _e=this.offsets[Oe],xe=this.offsets[Oe+1]-_e;xe>0&&(Ie+=xe)}for(var Pe=new Array(4*Me.length),Ae=0;Ae<Me.length;++Ae)Pe[4*Ae+3]=255&Me[Ae],Pe[4*Ae+2]=(65280&Me[Ae])>>8,Pe[4*Ae+1]=(16711680&Me[Ae])>>16,Pe[4*Ae]=(4278190080&Me[Ae])>>24;return Pe},t}(),Le=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,Ce,Me,Ie;for(r in Me=this.font.cmap.tables[0].codeMap,t={},Ie=this.subset)Ce=Ie[r],t[r]=Me[Ce];return t},e.prototype.glyphsFor=function(t){var r,Ce,Me,Ie,Fe,Oe,_e;for(Me={},Fe=0,Oe=t.length;Fe<Oe;Fe++)Me[Ie=t[Fe]]=this.font.glyf.glyphFor(Ie);for(Ie in r=[],Me)(Ce=Me[Ie])!=null&&Ce.compound&&r.push.apply(r,Ce.glyphIDs);if(r.length>0)for(Ie in _e=this.glyphsFor(r))Ce=_e[Ie],Me[Ie]=Ce;return Me},e.prototype.encode=function(t,r){var Ce,Me,Ie,Fe,Oe,_e,xe,Pe,Ae,Se,St,Te,Re,Ee,ke;for(Me in Ce=ue.encode(this.generateCmap(),"unicode"),Fe=this.glyphsFor(t),St={0:0},ke=Ce.charMap)St[(_e=ke[Me]).old]=_e.new;for(Te in Se=Ce.maxGlyphID,Fe)Te in St||(St[Te]=Se++);return Pe=function(De){var Be,He;for(Be in He={},De)He[De[Be]]=Be;return He}(St),Ae=Object.keys(Pe).sort(function(De,Be){return De-Be}),Re=function(){var De,Be,He;for(He=[],De=0,Be=Ae.length;De<Be;De++)Oe=Ae[De],He.push(Pe[Oe]);return He}(),Ie=this.font.glyf.encode(Fe,Re,St),xe=this.font.loca.encode(Ie.offsets,Re),Ee={cmap:this.font.cmap.raw(),glyf:Ie.table,loca:xe,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(Ee["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ee)},e}();E.API.PDFObject=function(){var e;function t(){}return e=function(r,Ce){return(Array(Ce+1).join("0")+r).slice(-Ce)},t.convert=function(r){var Ce,Me,Ie,Fe;if(Array.isArray(r))return"["+function(){var Oe,_e,xe;for(xe=[],Oe=0,_e=r.length;Oe<_e;Oe++)Ce=r[Oe],xe.push(t.convert(Ce));return xe}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(Me in Ie=["<<"],r)Fe=r[Me],Ie.push("/"+Me+" "+t.convert(Fe));return Ie.push(">>"),Ie.join(`
`)}return""+r},t}();const Sign_vue_vue_type_style_index_0_scoped_0e5def2d_lang="",_withScopeId=e=>(pushScopeId("data-v-0e5def2d"),e=e(),popScopeId(),e),_hoisted_1={class:"container"},_hoisted_2={class:"row"},_hoisted_3={class:"col-9 d-flex justify-content-center"},_hoisted_4={id:"canvas",ref:"canvasPDF"},_hoisted_5={class:"col-3"},_hoisted_6={class:"mt-7"},_hoisted_7=createStaticVNode('<div class="offcanvas-header flex-column align-items-start" data-v-0e5def2d><h5 class="offcanvas-title mb-3 text-start" id="offcanvasExampleLabel" data-v-0e5def2d>\u57FA\u672C\u8CC7\u6599</h5><form action="" class="mb-12" data-v-0e5def2d><input type="text" placeholder="\u8ACB\u8F38\u5165\u60A8\u7684\u59D3\u540D" class="rounded-1 border-gray mb-3" data-v-0e5def2d><input type="text" placeholder="\u8ACB\u8F38\u5165\u60A8\u7684\u96FB\u5B50\u4FE1\u7BB1" class="rounded-1 border-gray" data-v-0e5def2d></form></div>',1),_hoisted_8={class:"offcanvas-body d-flex flex-column"},_hoisted_9={class:"sign mb-12"},_hoisted_10=_withScopeId(()=>createBaseVNode("h5",{class:"mb-3"},"\u6211\u7684\u7C3D\u540D",-1)),_hoisted_11={class:"border border-success d-flex align-items-center text-success mb-3 bg-white"},_hoisted_12=_withScopeId(()=>createBaseVNode("span",{class:"material-symbols-outlined"}," drag_indicator ",-1)),_hoisted_13=_withScopeId(()=>createBaseVNode("button",{class:"addSign btn btn-lg border d-flex align-items-center justify-content-center fw-bold","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[createBaseVNode("span",{class:"material-symbols-outlined"}," add "),createTextVNode(" \u5275\u5EFA\u7C3D\u540D\u6A94 ")],-1)),_hoisted_14=_withScopeId(()=>createBaseVNode("div",{class:"invite d-flex justify-content-between"},[createBaseVNode("h5",{class:"mb-3"},"\u9080\u8ACB\u7C3D\u7F72\u4EBA"),createBaseVNode("button",{class:"btn border"},[createBaseVNode("span",{class:"material-symbols-outlined"}," person_add ")])],-1)),_hoisted_15={class:"modal fade",id:"staticBackdrop","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},_hoisted_16={class:"modal-dialog modal-dialog-centered"},_hoisted_17={class:"modal-content"},_hoisted_18=_withScopeId(()=>createBaseVNode("div",{class:"modal-header border-0"},[createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),_hoisted_19=_withScopeId(()=>createBaseVNode("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[createBaseVNode("li",{class:"nav-item",role:"presentation"},[createBaseVNode("button",{class:"nav-link active",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"},"\u624B\u5BEB")]),createBaseVNode("li",{class:"nav-item",role:"presentation"},[createBaseVNode("button",{class:"nav-link",id:"contact-tab","data-bs-toggle":"tab","data-bs-target":"#contact",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false"},"\u4E0A\u50B3")])],-1)),_hoisted_20={class:"tab-content",id:"myTabContent"},_hoisted_21={class:"tab-pane fade show active px-5",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab"},_hoisted_22={class:"text-end mt-5 mb-3"},_hoisted_23={class:"footer text-center"},_hoisted_24=_withScopeId(()=>createBaseVNode("p",{class:"mb-3"},"\u6211\u4E86\u89E3\u9019\u662F\u4E00\u500B\u5177\u6CD5\u5F8B\u6548\u529B\u7684\u672C\u4EBA\u7C3D\u540D",-1)),_hoisted_25=_withScopeId(()=>createBaseVNode("div",{class:"tab-pane fade",id:"contact",role:"tabpanel","aria-labelledby":"contact-tab"},"...",-1));pdf.exports.GlobalWorkerOptions.workerSrc="./node_modules/pdfjs-dist/build/pdf.worker.js";const __default__={data(){return{pdf:null,canvasArray:[],canvasStep:-1,ctxPDF:null,canvasPDF:null,Base64Prefix:"data:application/pdf;base64,",ctxSign:null,isPainting:!1}},methods:{getPDF(){return this.pdf=localStorage.getItem("pdfFile").split(","),this.pdf=new Uint8Array(this.pdf),this.pdf},async renderPDF(e){const r=await(await pdf.exports.getDocument(e).promise).getPage(1),Ce=r.getViewport({scale:1}),Me=document.createElement("canvas"),Ie=Me.getContext("2d");Me.width=Ce.width,Me.height=Ce.height;const Fe={canvasContext:Ie,viewport:Ce};return r.render(Fe).promise.then(()=>Me)},async pdfToImage(e){const t=1/window.devicePixelRatio;return new fabric.fabric.Image(e,{id:"renderPDF",scaleX:t,scaleY:t})},addSign(e){let t=e.target,r=this.canvasPDF;!t.src||fabric.fabric.Image.fromURL(t.src,function(Ce){Ce.top=400,Ce.scaleX=.5,Ce.scaleY=.5,r.add(Ce)})},async setPDFCanvas(){const e=new fabric.fabric.Canvas("canvas");this.ctxPDF=e.getContext("2d");const t=await this.renderPDF(this.getPDF()),r=await this.pdfToImage(t);e.setWidth(r.width/window.devicePixelRatio),e.setHeight(r.height/window.devicePixelRatio),e.setBackgroundImage(r,e.renderAll.bind(e)),this.canvasPDF=e,console.log(this.canvasPDF)},setCanvas(){let t=this.$refs.signCanvas.getContext("2d");t.lineWidth=4,t.lineCap="round",this.ctxSign=t},getPaintPosition(e){const t=this.ctxSign.canvas.getBoundingClientRect();return e.type==="mousemove"?{x:e.clientX-t.left-40,y:e.clientY-t.top}:{x:e.touches[0].clientX-t.left-40,y:e.touches[0].clientY-t.top}},startPosition(e){e.preventDefault(),this.isPainting=!0},finishedPosition(){this.isPainting=!1,this.ctxSign.beginPath()},canvasPush(){},draw(e){if(!this.isPainting)return;const t=this.getPaintPosition(e);this.ctxSign.lineTo(t.x,t.y),this.ctxSign.stroke()},undo(e){this.ctxSign.clearRect(0,0,this.ctxSign.canvas.width,this.ctxSign.canvas.height),this.draw(e)},reset(){this.ctxSign.clearRect(0,0,this.ctxSign.canvas.width,this.ctxSign.canvas.height)},saveImage(){const e=this.ctxSign.canvas.toDataURL("image/png");let t=this.$refs.mySign;t.src=e,localStorage.setItem("img",e)},downloadFile(){const e=new E,t=this.canvasPDF.toDataURL("image/png"),r=e.internal.pageSize.width,Ce=e.internal.pageSize.height;e.addImage(t,"png",0,0,r,Ce),e.save("signed.pdf")}},mounted(){this.setCanvas(),this.setPDFCanvas()}},_sfc_main=Object.assign(__default__,{__name:"Sign",setup(e){return(t,r)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Progressbar),createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("canvas",_hoisted_4,null,512)]),createBaseVNode("div",_hoisted_5,[createBaseVNode("aside",_hoisted_6,[_hoisted_7,createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[_hoisted_10,createBaseVNode("div",_hoisted_11,[_hoisted_12,createBaseVNode("img",{ref:"mySign",class:"mySign w-50 mx-auto",onDragend:r[0]||(r[0]=(...Ce)=>t.addSign&&t.addSign(...Ce))},null,544)]),_hoisted_13]),_hoisted_14,createBaseVNode("button",{class:"btn btn-lg btn-primary mt-auto mb-7",onClick:r[1]||(r[1]=(...Ce)=>t.downloadFile&&t.downloadFile(...Ce))},"\u4E0B\u8F09")])])])])]),createBaseVNode("div",_hoisted_15,[createBaseVNode("div",_hoisted_16,[createBaseVNode("div",_hoisted_17,[_hoisted_18,_hoisted_19,createBaseVNode("div",_hoisted_20,[createBaseVNode("div",_hoisted_21,[createBaseVNode("div",_hoisted_22,[createBaseVNode("button",{class:"btn text-primary",onClick:r[2]||(r[2]=(...Ce)=>t.undo&&t.undo(...Ce))},"\u56DE\u4E0A\u4E00\u6B65"),createBaseVNode("button",{class:"btn text-primary clearSign",onClick:r[3]||(r[3]=(...Ce)=>t.reset&&t.reset(...Ce))},"\u6E05\u9664")]),createBaseVNode("canvas",{id:"canvas",ref:"signCanvas",class:"signCanvas border border-ui-gray mb-5",onMousedown:r[4]||(r[4]=(...Ce)=>t.startPosition&&t.startPosition(...Ce)),onMouseup:r[5]||(r[5]=(...Ce)=>t.finishedPosition&&t.finishedPosition(...Ce)),onMouseleave:r[6]||(r[6]=(...Ce)=>t.finishedPosition&&t.finishedPosition(...Ce)),onMousemove:r[7]||(r[7]=(...Ce)=>t.draw&&t.draw(...Ce))},null,544),createBaseVNode("div",_hoisted_23,[_hoisted_24,createBaseVNode("button",{class:"btn btn-primary mb-7",onClick:r[8]||(r[8]=Ce=>{t.saveImage(),t.reset()}),"data-bs-dismiss":"modal"},"\u5132\u5B58")])]),_hoisted_25])])])])],64))}}),Sign=_export_sfc(_sfc_main,[["__scopeId","data-v-0e5def2d"]]);let history$1=createWebHistory(),routes=[{path:"/",name:"Home",component:Home},{path:"/Sign",name:"Sign",component:Sign}];const router=createRouter({history:history$1,routes});createApp(App).use(router).mount("#app");export{commonjsGlobal as c};
